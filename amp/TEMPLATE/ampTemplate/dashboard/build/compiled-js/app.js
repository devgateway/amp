!function t(e,n,i){function a(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(r)return r(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return a(n?n:t)},c,c.exports,t,e,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(t,e,n){t("./ugly/lib-load-hacks");var i=(t("jquery"),t("underscore"),t("./app/models/amp-user.js"),t("./app/app-class")),a=new i({el:"#amp-dashboard"});window.app=a,a.state.saved.load()},{"./app/app-class":2,"./app/models/amp-user.js":16,"./ugly/lib-load-hacks":41,jquery:"jquery",underscore:"underscore"}],2:[function(t,e,n){function i(){if(!(this instanceof i))throw new Error("App needs to be instantiated with the `new` keyword.");this.initialize.apply(this,arguments)}var a=t("underscore"),r=t("jquery").Deferred,o=t("./backbone-dash"),s=t("./check-support"),l=t("amp-url/index"),d=t("amp-state/index"),c=t("amp-state/index").StateLoadError,u=t("amp-translate"),h=t("amp-filter/src/main"),p=t("amp-settings/src/index"),f=t("./models/amp-user.js"),m=t("./models/saved-dashes-collection.js"),g=t("./views/main"),v=t("./views/fail");a.extend(i.prototype,o.Events,{rendered:!1,initialize:function(t){var e,n=new r;this.initialized=n.promise();try{if(this.user=new f,this.browserIssues=s(),a(this.browserIssues).chain().groupBy("severity").each(function(t,n){if(e=a(t).pluck("feature").join(", "),"critical"===n)throw{name:"Incompatible Web Browser",message:"Dashboards cannot work without these features, which are not supported by your web browser: "+e+'. Any <a href="http://browsehappy.com/">modern browser</a> will work.',toString:function(){return this.name+": "+this.message}};"major"===n?this.report("Limited support for old web browsers",["Your browser does not provide some features used by Dashboards: "+e+".",'Some features may not work correctly, however any <a href="http://browsehappy.com/">modern browser</a> will provide a better experience.']):"minor"===n&&console.warn("This browser is missing support for",e)},this),this.hasIssue("download")&&!this.hasIssue("flash")){var i=document.createElement("script"),p=document.createElement("script");i.src="/TEMPLATE/ampTemplate/commonJs/swfobject-2.2.js",p.src="/TEMPLATE/ampTemplate/commonJs/downloadify-0.2.js",document.body.appendChild(i),document.body.appendChild(p)}this.url=new l,this.savedDashes=new m([],{app:this}),this.state=new d({url:this.url,saved:this.savedDashes});try{this.state.urlMaybeLoad()}catch(y){if(!(y instanceof c))throw y;this.report("Could not load saved dashboard",["If you are trying to load a shared link, please make sure the entire URL was copied"]),this.url.hash("")}var b=JSON.parse('{\n"amp.common:footer": "Developed in partnership with OECD, UNDP, WB, Government of Ethiopia and DG",\n\n"amp.common:title": "AMP",\n"amp.common:title-desktop": "Desktop",\n"amp.common:subtitle-my-desktop": "My Desktop",\n"amp.common:subtitle-add-tab": "Add Tab",\n"amp.common:subtitle-tab-manager": "Tab Manager",\n"amp.common:title-reports": "Reports",\n"amp.common:subtitle-all-reports": "All Reports",\n"amp.common:subtitle-fav-reports": "Favourite Reports",\n"amp.common:subtitle-report-generator": "Report Generator",\n"amp.common:subtitle-saiku": "Saiku",\n"amp.common:title-documents": "Documents",\n"amp.common:title-dashboards": "Dashboards",\n"amp.common:subtitle-gis": "New GIS (BETA)",\n"amp.common:subtitle-dashboards": "Dashboard",\n"amp.common:subtitle-dashboard-generator": "Dashboard Generator",\n"amp.common:subtitle-donor-profile": "Donor Profile",\n"amp.common:subtitle-region-profile": "Region Profile",\n"amp.common:subtitle-sector-profile": "Sector Profile",\n"amp.common:subtitle-executing-profile": "Executing Agency Profile",\n"amp.common:subtitle-beneficiary-profile": "Beneficiary Ministry Profile",\n"amp.common:title-tools": "Tools",\n"amp.common:subtitle-workspace-setup": "Workspace Setup",\n"amp.common:subtitle-advanced-mode": "Advanced Mode",\n"amp.common:subtitle-search": "Search",\n"amp.common:subtitle-addressbook": "Address Book",\n"amp.common:title-help": "Help",\n"amp.common:subtitle-amp-help": "AMP Help",\n"amp.common:subtitle-glossary": "Glossary",\n"amp.common:subtitle-email-support-team": "Email Support Team",\n"amp.common:title-logout": "Logout",\n"amp.common:filters-loading": "Loading...",\n"amp.dashboard:page-title":"AMP Dashboards",\n"amp.dashboard:loading": "Loading...",\n"amp.dashboard:title-projectdata": "Project Data",\n"amp.dashboard:sub-title-projectdata": "View where projects are being implemented throughout the country.",\n"amp.dashboard:title-Country": "Country",\n"amp.dashboard:title-Region": "Region",\n"amp.dashboard:title-Zone": "Zone",\n"amp.dashboard:title-District": "District",\n"amp.dashboard:chart-reset": "reset others",\n"amp.dashboard:chart-radioui-commitments": "Commitments",\n"amp.dashboard:chart-radioui-disbursements": "Disbursements",\n"amp.dashboard:filters-none-applied": "No filters applied",\n"amp.dashboard:close": "Close",\n"amp.dashboard:modal-sorry": "Sorry for any inconvenience",\n"amp.dashboard:share-dashboard-top": "Share dashboard",\n"amp.dashboard:share-dashboard": "Share this dashboard view",\n"amp.dashboard:share-link": "Link",\n"amp.dashboard:of": "of",\n"amp.dashboard:tooltip-predict-otherseries": "TRANSLATEME",\n"amp.dashboard:total": "total",\n"amp.common:title": "AMP Toolbar",\n"amp.common:title-filters": "Filters",\n"amp.dashboard:chart-TopDonorAgencies": "Top Donor Agencies",\n"amp.dashboard:chart-TopDonorGroups": "Top Donor Groups",\n"amp.dashboard:chart-TopRegions": "Top Regions",\n"amp.dashboard:chart-TopSectors": "Top Sectors",\n"amp.dashboard:chart-AidPredictability": "Aid Predictability",\n"amp.dashboard:chart-FundingType": "Funding Type",\n"amp.dashboard:chart-ResponsibleOrganizations": "Responsible Organizations",\n"amp.dashboard:chart-BeneficiaryAgencies": "Beneficiary Agencies",\n"amp.dashboard:chart-ExecutingAgencies": "Executing Agencies",\n"amp.dashboard:chart-ImplementingAgencies": "Implementing Agencies",\n"amp.dashboard:chart-Peace-buildingandState-buildingGoals": "Peace-building and State-building Goals",\n"amp.dashboard:predictability-planned": "Planned",\n"amp.dashboard:predictability-actual": "Actual",\n"amp.dashboard:chart-FundingType-Grant": "Grant",\n"amp.dashboard:chart-FundingType-Loan": "Loan",\n"amp.dashboard:chart-FundingType-others": "Others",\n"amp.dashboard:chart-TopRegions-DistrictUndefined": "District: U",\n"amp.dashboard:chart-TopRegions-others": "Others",\n"amp.dashboard:chart-TopSectors-others": "Others",\n"amp.dashboard:chart-TopDonorAgencies-others": "Others",\n"amp.dashboard:chart-TopDonorGroups-others": "Others",\n"amp.dashboard:chart-ResponsibleOrganizations-others": "Others",\n"amp.dashboard:chart-BeneficiaryAgencies-others": "Others",\n"amp.dashboard:chart-ExecutingAgencies-others": "Others",\n"amp.dashboard:chart-ImplementingAgencies-others": "Others",\n"amp.dashboard:chart-Peace-buildingandState-buildingGoals-others":"Others",\n"amp.dashboard:filters-edit":"edit filters",\n"amp.dashboard:dashboard-settings":"Settings",\n"amp.dashboard:settings-edit":"edit settings",\n"amp.dashboard:download-amount":"Amount",\n"amp.dashboard:download-preview":"Preview:",\n"amp.dashboard:download-rendering":"Rendering...",\n"amp.dashboard:download-download-chart":"Download chart",\n"amp.dashboard:download-download-data":"Download data",\n"amp.dashboard:chart-no-data-available":"No Data Available",\n"amp.dashboard:chart-loading-saved-settings":"Loading saved settings...",\n"amp.dashboard:filters-show-settings":"Show filter settings",\n"amp.dashboard:filters-chart-legends-Grouped":"Grouped",\n"amp.dashboard:filters-chart-legends-Stacked":"Stacked",\n"amp.dashboard:of-total": "of total",\n"amp.dashboard:aid-predictability-actual-disbursements": "Actual Disbursements",\n"amp.dashboard:aid-predictability-planned-disbursements": "Planned Disbursements",\n"amp.dashboard:filters-hide-details": "Hide filter details",\n"amp.dashboard:saving-state": "Saving dashboard state, please wait...",\n"amp.dashboard:date-range": "Date Range",\n"amp.dashboard:currency" : "Currency",\n"amp.dashboard:type" : "Type",\n"amp.dashboard:year" : "Year",\n"amp.dashboard:ftype-actual-commitment": "Actual Commitments",\n"amp.dashboard:ftype-actual-disbursement": "Actual Disbursements",\n"amp.dashboard:ftype-actual-expenditure": "Actual Expenditures",\n"amp.dashboard:ftype-planned-commitment": "Planned Commitments" ,\n"amp.dashboard:ftype-planned-disbursement":\t"Planned Disbursements" ,\n"amp.dashboard:ftype-planned-expenditures":\t"Planned Expenditures",\n"amp.dashboard:chart-tops-table-projecttitle": "Project Title",\n"amp.dashboard:chart-tops-table-amount": "Amount",\n"amp.dashboard:chart-tops-table-loadmore": "load more",\n"amp.dashboard:chart-tops-inunits": "In units",\n"amp.dashboard:chart-tops-inthousands": "In thousands",\n"amp.dashboard:chart-tops-inmillions": "In millions",\n"amp.dashboard:chart-tops-detail-inthousands": "Amounts in Thousands (000)",\n"amp.dashboard:chart-tops-detail-inmillions": "Amounts in Millions (000 000)",\n"amp.dashboard:chart-tops-detail-inbillions": "Amounts in Billions (000 000 000)",\n"amp.dashboard:chart-thousand": "k",\n"amp.dashboard:chart-million": "M",\n"amp.dashboard:chart-billion": "B",\n"amp.dashboard:chart-trillion": "T",\n"amp.dashboard:chart-peta": "P",\n"amp.dashboard:chart-exa": "E",\n"amp.dashboard:chart-swap-axes": "Swap Axes",\n"amp.dashboard:chart-HeatMapbySectorandDonorGroup":"Sector Fragmentation",\n"amp.dashboard:chart-HeatMapbyLocationandDonorGroup":"Location Fragmentation",\n"amp.dashboard:chart-HeatMapbyProgramandDonorGroup":"Program Fragmentation",\n"amp.dashboard:chart-heatmap-reset-others":"Reset Others",\n"amp.dashboard:negatives-values":"Negative values are not represented in this chart.",\n"amp.dashboard:negatives-values-parag":"Please switch to bar chart or table view to view all values.",\n"amp.dashboard:chart-heatmap-legends":"LEGENDS",\n"amp.dashboard:chart-heatmap-totals":"TOTALS",\n"amp.dashboard:chart-heatmap-legend-less-than":"Less than",\n"amp.dashboard:chart-heatmap-legend-between":"Between",\n"amp.dashboard:chart-heatmap-legend-and":"and",\n"amp.dashboard:chart-heatmap-legend-more-than":"More than",\n"amp.dashboard:chart-heatmap-others":"Others",\n"amp.dashboard:percentage": "Percentage",\n"amp.dashboard:chart-heatmap-legend-n-a": "N/A",\n"amp.dashboard:chart-heatmap-help-text-location":"Each cell represents an intersection between a donor group and a location and represents how much that funder contributes to the total funding received by that location.",\n"amp.dashboard:chart-heatmap-help-text-sector":"Each cell represents an intersection between a donor group and a sector and represents how much that funder contributes to the total funding received by that sector.",\n"amp.dashboard:chart-heatmap-help-text-program":"Each cell represents an intersection between a donor group and a program and represents how much that funder contributes to the total funding received by that program.",\n"amp.dashboard:chart-tooltip-pie-chart[title]":"View data in pie chart",\n"amp.dashboard:chart-tooltip-bar-chart[title]":"View data in bar chart",\n"amp.dashboard:chart-tooltip-table-chart[title]":"View data in table format",\n"amp.dashboard:chart-tooltip-multibar-chart[title]":"View data in multibar chart",\n"amp.dashboard:chart-tooltip-download-chart[title]":"Download image or table",\n"amp.dashboard:chart-tooltip-expand-chart[title]":"Expand chart",\n"amp.dashboard:chart-tooltip-collapse-chart[title]":"Collapse chart",\n"amp.dashboard:chart-tooltip-heatmap-chart[title]":"View heat map"\n}');this.translator=new u({defaultKeys:b,ajax:o.wrappedAjax}),this.initSettings(),this.filter=new h({draggable:!0,sync:t.sync||o.sync,caller:"DASHBOARD"}),this.view=new g({app:this,el:t.el}),n.resolve(this)}catch(y){a.defer(function(){throw y}),this.view=new v({app:this,el:t.el,err:y}),this.err=y,n.reject(this)}},render:function(){this.tryAfter(this.translator.promise,this.view.render,this.view),this.translator.translateDOM(document)},hasIssue:function(t){return!!a(this.browserIssues).findWhere({feature:t})},viewFail:function(t,e){t.$el.html(new v({app:this,err:e}).render().el)},tryTo:function(t,e){try{return t.call(e)}catch(n){a.defer(function(){throw n}),this.viewFail(e,n)}},tryAfter:function(t,e,n){t.done(a(function(){this.tryTo(e,n)}).bind(this)).fail(a(function(){this.viewFail(n,"failed to load")}).bind(this))},report:function(t,e){this.initialized.done(function(n){n.modal(t,{messages:e,tone:"warning"})}).fail(function(){console.warn("REPORT:",t,e)})},modal:function(t,e){e=a({}).extend(e,{tone:"primary"});var n=new r;return this.initialized.done(function(i){var a=i.view.modal(t,e);n.resolve(a)}).fail(function(){console.warn("failed to show modal because the app views did not initialize",t),n.reject("app views did not init")}),n.promise()},initSettings:function(){this.settingsWidget=new p.SettingsWidget({draggable:!0,caller:"DASHBOARDS",isPopup:!0,definitionUrl:"/rest/settings-definitions/dashboards"}),this.generalSettings=new p.GeneralSettings,this.generalSettings.load()}}),e.exports=i},{"./backbone-dash":3,"./check-support":15,"./models/amp-user.js":16,"./models/saved-dashes-collection.js":26,"./views/fail":36,"./views/main":38,"amp-filter/src/main":70,"amp-settings/src/index":94,"amp-state/index":98,"amp-translate":99,"amp-url/index":100,jquery:"jquery",underscore:"underscore"}],3:[function(t,e,n){function i(t){this.instance=t,this.toString=function(){return"Module initialization error"}}function a(t){return t.extend({constructor:function(){var e=t.apply(this,arguments);if(!this.app)throw new i(this);return e},sync:c})}var r=t("underscore"),o=t("backbone"),s=window&&"localhost:3000"===window.location.host,l=["/rest/dashboard"],d=function(t){return t=r({}).extend(t,{url:(s?"http://localhost:8080":"")+t.url,headers:{Accept:"application/json","Content-Type":"application/json"}})},c=function(t){function e(e,n,i,a){return a=r({}).extend(a,{url:e}),a=d(a),t.call(this,n,i,a)}function n(t,n,a,r){var o=t+"+POST:"+r.data;if(i[o])return i[o]();var s=e(t,n,a,r);return i[o]=function(){return s.done(r.success).always(r.complete)},s.fail(function(){delete i[o]}),s}var i={};return function(t,i,a){var s=a.url||r(i).result("url")||o.Model.prototype.url.call(i),d=!1;return"POST"===a.type&&r.some(l,function(t){return 0===s.indexOf(t)})&&(d=!0),(d?n:e)(s,t,i,a)}}(o.sync);e.exports=r({}).extend(o,{InitError:i,Model:a(o.Model),Collection:a(o.Collection),View:a(o.View),sync:c,wrappedAjax:function(t){return o.ajax(d(t))}})},{backbone:"backbone",underscore:"underscore"}],4:[function(t,e,n){function i(t){return t}function a(t){return t[0].values.length-1}function r(t,e){var n=t.height<400?300:400,i=c.calculateChartHeight(e[0].values.length,!1,t.model);null!==i&&(n=i),s.log("Setting height to",n);var a=l.models.discreteBarChart().valueFormat(t.shortFormatter).showValues(!0).showYAxis(!1).showXAxis(!1).height(n).margin({top:5,right:10,bottom:10,left:10});return a}function o(t,e,n,i,a){var r,o=app.generalSettings.attributes["rtl-direction"],s=l.models.customizedLegend().width(a||t.clientWidth).margin({left:20,right:20}).rightAlign(o).rtl(o).color(c.categoryColours(n[0].values.length)).key(function(t){return i?c.formatShortText(12)(t.x):c.formatShortText(85)(t.x)});d.select(t).datum(n).append("g").attr("class","legend").datum(n[0].values).call(s),r=t.querySelector(".legend").getBBox().height,e.margin({top:r+15})}var s=t("../../../../../../../reamp/tools/log")("amp:dashboards:charts:bar"),l=window.nv,d=t("d3"),c=t("../../ugly/util");t("./customized/customizedLegend");e.exports={dispatchName:"discretebar",countCategories:a,addLegend:o,dataToNv:i,chart:r}},{"../../../../../../../reamp/tools/log":101,"../../ugly/util":45,"./customized/customizedLegend":11,d3:"d3"}],5:[function(t,e,n){function i(t){return t}function a(t){return t[0].values.length-1}function r(t,e){var n=t.height<400?300:400,i=l.calculateChartHeight(e[0].values.length,!1,t.model);null!==i&&(n=i);var a=s.models.heatMapChart().height(900);return a}function o(t,e,n,i,a){}var s=(t("../../../../../../../reamp/tools/log")("amp:dashboards:charts:bar"),window.nv),l=(t("d3"),t("../../ugly/util"));t("./customized/heatMapChart"),t("underscore");e.exports={dispatchName:"heatmap",countCategories:a,addLegend:o,dataToNv:i,chart:r}},{"../../../../../../../reamp/tools/log":101,"../../ugly/util":45,"./customized/heatMapChart":12,d3:"d3",underscore:"underscore"}],6:[function(t,e,n){function i(t){return t}function a(t){return t.length}function r(t){var e=10,n=app.generalSettings.attributes["rtl-direction"],i=t.height<400?300:400;o.log("Setting multibar height",i);var a=s.models.customizedMultiBarChart().forceY([0,e]).reduceXTicks(!1).height(i).rtl(n).rigthAlign(n).rightAlignYAxis(n).margin({top:5,right:10,bottom:20,left:50});return t.nvControls||a.showControls(!1),t.stacked?a.multibar.stacked(!0):a.multibar.stacked(!1),a.yAxis.tickFormat(t.shortFormatter).showMaxMin(!1),a}var o=t("../../../../../../../reamp/tools/log")("amp:dashboards:charts:multibar"),s=window.nv;t("./customized/multiBarChart.js");e.exports={dispatchName:"multibar",countCategories:a,dataToNv:i,chart:r}},{"../../../../../../../reamp/tools/log":101,"./customized/multiBarChart.js":13}],7:[function(t,e,n){function i(t){return 1!==t.length&&h.fail("Pie charts can only show one series of data. got",t.length),u.isArray(t[0].values)||h.fail('Data series did not have a "values" array. Instead',t[0].values),a(t[0].values)}function a(t){return u.filter(t,function(t){return t.y>0})}function r(t){return a(t[0].values).length}function o(t,e){var n=t.height<400?300:400,i=p.calculateChartHeight(e[0].values.length,!1,t.model);null!==i&&(n=i);var a=app.generalSettings.attributes["rtl-direction"],r=c.models.customizedPieChart().valueFormat(t.shortFormatter).labelType("percent").showLegend(!1).donut(!0).rtl(a).height(n).margin({top:5,right:5,bottom:5,left:5}).donutRatio(.35);return r}function s(t,e,n,i,a){var r,o=app.generalSettings.attributes["rtl-direction"],s=c.models.customizedLegend().width(a||t.clientWidth).margin({left:20,right:20}).rightAlign(o).rtl(o).color(p.categoryColours(n.length)).key(function(t){return i?p.formatShortText(12)(t.x):p.formatShortText(85)(t.x)});d3.select(t).datum(n).append("g").attr("class","legend").datum(n).call(s),r=t.querySelector(".legend").getBBox().height,e.margin({top:r+15})}function l(t){t.showLegend(!1)}function d(t,e,n){return[void 0,t,e,n]}var c=window.nv,u=t("underscore"),h=t("./common"),p=t("../../ugly/util");t("./customized/pieChart.js"),t("./customized/customizedLegend");e.exports={dispatchName:"pie",normalizeNvTTArgs:d,countCategories:r,addLegend:s,removeLegend:l,dataToNv:i,chart:o}},{"../../ugly/util":45,"./common":10,"./customized/customizedLegend":11,"./customized/pieChart.js":14,underscore:"underscore"}],8:[function(t,e,n){function i(t,e){var n=t.target,i=parseInt(d.data(n,"seriesIndex"),10)||0,a=parseInt(d.data(n,"xIndex"),10);return isNaN(a)?{label:"",point:""}:{label:e[i].values[a].x||a,seriesIndex:i,pointIndex:a,point:e[i].values[a]||a}}function a(t,e,n){t.addEventListener("click",function(t){var a=i(t,e),r=c.getNiceContext(a,e,t.target.innerText);n.clickHandler(r)})}function r(t,e){return"fragmentation"===e.model.get("chartType")?s(t,e):o(t,e)}function o(t,e){var n=l(t).pluck("key"),i=l(t).chain().map(function(t){return t.values}).transpose().value(),r=u({keys:n,values:i,moneyFormat:e.shortFormatter}),o=document.createElement("div");return o.innerHTML=r,a(o,t,e),o}function s(t,e){var n=l.find(e.model.get("heatmap_config").models[0].get("columns"),function(t){return t.origName===e.model.get("summary")[0]}).name,i=l.find(e.model.get("heatmap_config").models[0].get("columns"),function(t){return t.origName===e.model.get("summary")[1]}).name,r=[n,i,this.app.translator.translateSync("amp.dashboard:download-amount","Amount"),this.app.translator.translateSync("amp.dashboard:percentage","Percentage")],o=l.map(e.model.get("matrix"),function(t,n){return l.map(t,function(t,i){return{y:e.model.get("yDataSet")[n],x:e.model.get("xDataSet")[i],value:e.model.get("matrix")[n][i]?e.model.get("matrix")[n][i]:{dv:"",p:""}}})}),s=h({keys:r,matrix:o,moneyFormat:e.shortFormatter}),d=document.createElement("div");return d.innerHTML=s,a(d,t,e),d}var l=t("underscore"),d=t("../../ugly/util"),c=t("./common"),u=l.template('<div class="table-responsive">\n  <table class="table table-striped table-condensed">\n\n    <% if (_(keys).some()) { %>\n      <thead>\n        <tr>\n          <td></td>\n          <% _(keys).each(function(key, colIndex) { %>\n            <th data-series-index="<%= colIndex %>">\n              <%= key %>\n            </th>\n          <% }); %>\n        </tr>\n      </thead>\n    <% } %>\n\n    <tbody>\n      <% _(values).each(function(row, rowIndex) { %>\n        <tr>\n          <th data-x-index="<%= rowIndex %>">\n            <%= row[0].x %>\n          </th>\n          <% _(row).each(function(datum, colIndex) { %>\n            <td data-x-index="<%= rowIndex %>" data-series-index="<%= colIndex %>">\n              <%= moneyFormat(datum.y) %>\n            </td>\n          <% }) %>\n        </tr>\n      <% }) %>\n    </tbody>\n\n  </table>\n</div>\n'),h=l.template('<div class="heatmap-table-responsive">\n\t<table class="table table-striped table-condensed">\n\t\t<% if (_(keys).some()) { %>\n\t    \t<thead>\n\t        \t<tr>\n\t          \t\t<% _(keys).each(function(key, colIndex) { %>\n\t            \t\t<th data-series-index="0">\n\t              \t\t\t<%= key %>\n\t            \t\t</th>\n\t          \t\t<% }); %>\n\t        \t</tr>\n\t      \t</thead>\n\t    <% } %>\n\t\t<tbody>\n\t\t\t<% _(matrix).each(function(row, i) { %>\n\t\t\t\t<% _(row).each(function(col, j) { %>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td data-x-index="<%= i %>" data-series-index="0">\n\t\t\t\t\t\t\t<%= matrix[i][j].y %>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td data-x-index="<%= i %>" data-series-index="0">\n\t\t\t\t\t\t\t<%= matrix[i][j].x %>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td data-x-index="<%= i %>" data-series-index="0">\n\t\t\t\t\t\t\t<%= matrix[i][j].value.dv %>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td data-x-index="<%= i %>" data-series-index="0">\n\t\t\t\t\t\t\t<%= matrix[i][j].value.p %>\n\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t</tr>\n\t\t\t\t<% }) %>\n\t\t\t<% }) %>\n\t\t</tbody>\n\t</table>\n</div>');e.exports={charter:r}},{"../../ugly/util":45,"./common":10,underscore:"underscore"}],9:[function(t,e,n){function i(t,e,n){n=n||{},n=a(a(n).clone()).defaults({height:void 0,width:void 0,numberFormatter:r.format(","),shortFormatter:n.numberFormatter||o.formatKMB(3,app.generalSettings.numberFormatSettings.decimalSeparator),addLegend:!0,trimLabels:!0,getTTContent:s.defaultGetTTContent,ttTemplate:p,clickHandler:s.defaultClickHandler,nvControls:!0});var i=f[t]||s.fail("unrecognized chart type",t);return{el:i(e,n)}}var a=t("underscore"),r=t("d3"),o=t("../../ugly/util"),s=t("./common"),l=t("./_bar"),d=t("./_multibar"),c=t("./_pie"),u=t("./_table"),h=t("./_heatmap"),p=a.template('<div class="panel panel-primary panel-popover">\n  <% if (tt.heading) { %>\n    <div class="panel-heading"><%= tt.heading %></div>\n  <% } %>\n  <div class="panel-body">\n    <span class="dollaz">\n      <% if (tt.bodyText) { %>\n        <%= tt.bodyText %>\n      <% } %>\n      <% if (tt.bodyList) { %>\n        <ul class="list-unstyled">\n          <% _(tt.bodyList).each(function(item) { %>\n            <li><b><%= item.k %></b> <%= item.v %></li>\n          <% }) %>\n        </ul>\n      <% } %>\n    </span>\n  </div>\n  <% if (tt.footerText) { %>\n    <div class="panel-footer">\n      <%= tt.footerText %>\n    </div>\n  <% } %>\n</div>\n'),f={bar:s.nvCharter(l),pie:s.nvCharter(c),multibar:s.nvCharter(d),heatmap:s.nvCharter(h),table:u.charter};e.exports=i},{"../../ugly/util":45,"./_bar":4,"./_heatmap":5,"./_multibar":6,"./_pie":7,"./_table":8,"./common":10,d3:"d3",underscore:"underscore"}],10:[function(t,e,n){function i(){throw{name:"Chart Error",message:Array.prototype.join.call(arguments,", "),toString:function(){return this.name+": "+this.message}}}function a(t,e){return t.x(function(t){return y.formatShortText(19)(t.x)}).color(y.categoryColours(e))}function r(t,e){var n=document.getElementById("super-secret-render-area-shh");return n||(n=document.createElement("div"),n.id="super-secret-render-area-shh",n.style.position="absolute",n.style.left="-9999em",n.style.top="-9999em",document.body.appendChild(n)),t&&(n.style.height=t+"px"),e&&(n.style.width=e+"px"),n}function o(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","dash-chart"),r(t,e).appendChild(n),n}function s(t,e,n,i,a,r,o){return a&&e.x(function(t){return y.formatShortText(50)(t.x)}),r&&i.addLegend?i.addLegend(n,e,t,a,o):!r&&i.removeLegend&&i.removeLegend(e),v.select(n).datum(t).call(e),g.utils.windowResize(e.update),g.addGraph(function(){return e}),n}function l(t,e,n){var i=n.countCategories(e);return t.color(y.categoryColours(i)),t}function d(t){return{tt:{heading:t.x.raw,bodyText:t.y.raw,formattedAmount:t.z.raw}}}function c(t,e,n){var i=t.seriesIndex||0;return{data:e,series:{key:e[i].key,index:i,values:e[i].values},x:{raw:t.point.x,fmt:t.label,index:t.pointIndex||t.index||0},y:{raw:t.point.y,fmt:t.point.z||n}}}function u(t,e,n,i,a){var r=function(t,n,r,o){return i(a(c(o,e,r)))};n.normalizeNvTTArgs&&(r=y.transformArgs(n.normalizeNvTTArgs,r)),t.tooltipContent(r)}function h(){}function p(t,e,n,i){void 0!==t[n.dispatchName]?t[n.dispatchName].dispatch.on("elementClick",function(t){i(c(t,e))}):console.warn("Cant find "+n.dispatchName)}function f(t){return function(e,n){var i=o(n.height,n.width),a=t.chart(n,e),r=t.dataToNv(e);return l(a,e,t),u(a,e,t,n.ttTemplate,n.getTTContent),s(r,a,i,t,n.trimLabels,n.addLegend,n.width),p(a,e,t,n.clickHandler),i}}function m(t){var e="";if(e=app.generalSettings.numberFormatSettings.groupSeparator.length>0?"0,0":"0",app.generalSettings.numberFormatSettings.numberFormat.indexOf(".")>0){var n=app.generalSettings.numberFormatSettings.numberFormat.length-app.generalSettings.numberFormatSettings.numberFormat.indexOf(".");e=e+"."+new Array(n).join("0")}var i={delimiters:{thousands:app.generalSettings.numberFormatSettings.groupSeparator,decimal:app.generalSettings.numberFormatSettings.decimalSeparator},abbreviations:{thousand:app.translator.translateSync("amp.dashboard:chart-thousand"),million:app.translator.translateSync("amp.dashboard:chart-million"),billion:app.translator.translateSync("amp.dashboard:chart-billion"),trillion:app.translator.translateSync("amp.dashboard:chart-trillion")},ordinal:function(t){return 1===t?"st":"rds"},currency:{symbol:"$"}};b.language("amp",i),b.language("amp");var a=new b(t).format(e);return a}var g=window.nv,v=t("d3"),y=t("../../ugly/util"),b=t("numeral");t("underscore");!function(t){var e=t.utils.calcApproxTextWidth;t.utils.calcApproxTextWidth=function(t){var n,i=t.text(),a=i,r=(i.match(/\./g)||[]).length;if(i.toUpperCase()===i){for(var o=0;o<i.length/5;o++)a+=" ";t.text(a),n=e(t),t.text(i)}else n=e(t);return n-=n/a.length*(r/3),n+=6}}(g);e.exports={fail:i,nvChartCommon:a,getNiceContext:c,defaultGetTTContent:d,defaultClickHandler:h,mkChartSVG:o,nvBoiler:s,nvCharter:f,formatNumber:m}},{"../../ugly/util":45,d3:"d3",numeral:47,underscore:"underscore"}],11:[function(t,e,n){nv.models.customizedLegend=function(){"use strict";function t(h){return h.each(function(t){var h=n-e.left-e.right,p=d3.select(this);nv.utils.initSVG(p);var f=p.selectAll("g.nv-legend").data([t]),m=(f.enter().append("g").attr("class","nvd3 nv-legend").append("g"),f.select("g"));f.attr("transform","translate("+e.left+","+e.top+")");var g=m.selectAll(".nv-series").data(function(t){return t}),v=g.enter().append("g").attr("class","nv-series").on("mouseover",function(t,e){u.legendMouseover(t,e)}).on("mouseout",function(t,e){u.legendMouseout(t,e)}).on("click",function(e,n){u.legendClick(e,n),d&&(c?(t.forEach(function(t){t.disabled=!0}),e.disabled=!1):(e.disabled=!e.disabled,t.every(function(t){return t.disabled})&&t.forEach(function(t){t.disabled=!1})),u.stateChange({disabled:t.map(function(t){return!!t.disabled})}))}).on("dblclick",function(e,n){u.legendDblclick(e,n),d&&(t.forEach(function(t){t.disabled=!0}),e.disabled=!1,u.stateChange({disabled:t.map(function(t){return!!t.disabled})}))}),y="8";if(l&&(y="0"),v.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),v.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx",y),g.classed("nv-disabled",function(t){return t.disabled}),g.exit().remove(),g.select("circle").style("fill",function(t,e){return t.color||r(t,e)}).style("stroke",function(t,e){return t.color||r(t,e)}),g.select("text").text(a),o){var b=[];g.each(function(t,e){var n,i=d3.select(this).select("text");try{if(n=i.node().getComputedTextLength(),n<=0)throw Error()}catch(a){n=nv.utils.calcApproxTextWidth(i)}if(b.push(n+28),l){var r=d3.select(this).select("circle");r.attr("cx",n+7.5)}});for(var x=0,w=0,k=[];w<h&&x<b.length;)k[x]=b[x],w+=b[x++];for(0===x&&(x=1);w>h&&x>1;){k=[],x--;for(var S=0;S<b.length;S++)b[S]>(k[S%x]||0)&&(k[S%x]=b[S]);w=k.reduce(function(t,e,n,i){return t+e})}for(var T=[],D=0,A=0;D<x;D++)T[D]=A,A+=k[D];g.attr("transform",function(t,e){return"translate("+T[e%x]+","+(5+20*Math.floor(e/x))+")"}),s?m.attr("transform","translate("+(n-e.right-w)+","+e.top+")"):m.attr("transform","translate(0,"+e.top+")"),i=e.top+e.bottom+20*Math.ceil(b.length/x)}else{var C,M=5,_=5,N=0;g.attr("transform",function(t,i){var a=d3.select(this).select("text").node().getComputedTextLength()+28;return C=_,n<e.left+e.right+C+a&&(_=C=5,M+=20),_+=a,_>N&&(N=_),"translate("+C+","+M+")"}),m.attr("transform","translate("+(n-e.right-N)+","+e.top+")"),i=e.top+e.bottom+M+15}}),t}var e={top:5,right:0,bottom:5,left:0},n=400,i=20,a=function(t){return t.key},r=nv.utils.defaultColor(),o=!0,s=!0,l=!1,d=!0,c=!1,u=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return t.dispatch=u,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return i},set:function(t){i=t}},key:{get:function(){return a},set:function(t){a=t}},align:{get:function(){return o},set:function(t){o=t}},rightAlign:{get:function(){return s},set:function(t){s=t}},rtl:{get:function(){return l},set:function(t){l=t}},updateState:{get:function(){return d},set:function(t){d=t}},radioButtonMode:{get:function(){return c},set:function(t){c=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return r},set:function(t){r=nv.utils.getColor(t)}}}),nv.utils.initOptions(t),t}},{}],12:[function(t,e,n){nv.models.heatmap=function(){"use strict";function t(e){return l.reset(),l.renderEnd("heatmap immediate"),t}var e={top:0,right:0,bottom:0,left:0},n=500,i=500,a=function(t){return t.x},r=function(t){return t.y},o=Math.floor(1e4*Math.random()),s=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),l=nv.utils.renderWatch(s);return t.dispatch=s,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return i},set:function(t){i=t}},x:{get:function(){return a},set:function(t){a=t}},id:{get:function(){return o},set:function(t){o=t}},margin:{get:function(){return e},set:function(t){e.top="undefined"!=typeof t.top?t.top:e.top,e.right="undefined"!=typeof t.right?t.right:e.right,
e.bottom="undefined"!=typeof t.bottom?t.bottom:e.bottom,e.left="undefined"!=typeof t.left?t.left:e.left}},y:{get:function(){return r},set:function(t){r=d3.functor(t)}}}),nv.utils.initOptions(t),t},nv.models.heatMapChart=function(){"use strict";function e(r){this.rendered=!1;t("underscore");return x.reset(),x.models(s),r.each(function(t){var r=app.settingsWidget.definitions.getSelectedOrDefaultCurrencyId(),o=app.settingsWidget.definitions.findCurrencyById(r).value,s=t[0].values.model.get("showFullLegends")?100:m,d=d3.select(this);nv.utils.initSVG(d);(f||parseInt(d.style("width"),10)||v)-l.left-l.right,(D||parseInt(d.style("height"),10)||y)-l.top-l.bottom;if(e.container=this,c.setter(k(t),e.update).getter(w(t)).update(),c.disabled=t.map(function(t){return!!t.disabled}),!u){var h;u={};for(h in c)c[h]instanceof Array?u[h]=c[h].slice(0):u[h]=c[h]}var p=30,f=b-g.left-g.right,x=180,T=20,D=x+p*t[0].values.y.length+T,A=22;const C="#666",M="#FFFFFF";var _=n(C,M,t[0].values.model);$(d[0]).css("height",D+"px").attr("class","dash-chart nvd3-svg heatmap-chart");var N=d.append("g").attr("transform","translate("+g.left+","+g.top+")").attr("class","heatmap-main-container");N.append("defs").append("filter").attr("id","filterSaturate").append("feColorMatrix").attr("in","SourceGraphic").attr("type","saturate").attr("values","5"),N.append("defs").append("filter").attr("id","filterLuminanceToAlpha").append("feColorMatrix").attr("in","SourceGraphic").attr("type","luminanceToAlpha"),N.append("defs").append("filter").attr("id","filterBlur").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation","2"),N.append("defs").append("filter").attr("id","filterDarken").append("feColorMatrix").attr("type","matrix").attr("values","0.5 0 0 0 0 0 0.5 0 0 0 0 0 0.5 0 0 0 0 0 1 0");var E=N.append("g").attr("class","heatmap-yAxis-container");E.selectAll(".yLabel").data(t[0].values.y).enter().append("text").text(function(t){return S(t,s)}).attr("x",0).attr("y",function(t,e){return e*p}).style("text-anchor","end").attr("transform","translate(-6,"+p/1.5+")").attr("class",function(t,e){return"yLabel mono axis nv-series"}).attr("data-title",function(t){return t});if(t[0].values.yCount<t[0].values.yTotalCount){var P=$(d[0]).find(".yLabel").last();$(P).attr("class",function(t,e){return $(P).attr("class")+" legend-others"})}E.append("text").text("TOTALS").attr("x",0).attr("y",t[0].values.y.length*p).attr("class","yLabel mono axis nv-series heatmap-totals").style("text-anchor","end").style("font-weight","bold").attr("transform","translate(-6,"+p/1.5+")").attr("data-i18n","amp.dashboard:chart-heatmap-totals");var I=N.append("g").attr("transform","translate(18.5, -5)").attr("class","heatmap-xAxis-container");I.selectAll(".xLabel").data(t[0].values.x).enter().append("text").text(function(t){return S(t,s)}).attr("x",function(t,e){return e*p}).attr("y",0).attr("transform",function(t,e){return"rotate(270, "+p*e+", 0)"}).attr("class",function(t,e){return"xLabel mono axis nv-series"}).attr("data-title",function(t){return t});I.append("text").text("TOTALS").attr("x",p*t[0].values.x.length).attr("y",0).attr("class","xLabel mono axis nv-series heatmap-totals").style("font-weight","bold").attr("transform",function(e,n){return"rotate(270, "+p*t[0].values.x.length+", 0)"}).attr("data-i18n","amp.dashboard:chart-heatmap-totals");for(var F=N.append("g").attr("class","heatmap-cubes-container"),O=0;O<t[0].values.length;O++)a(F,$.extend(t[0].values[O],{tooltip:o+" "+t[0].values[O].amount}),p,M,_);for(var O=0;O<t[0].values.x.length;O++)a(F,{x:O+1,y:t[0].values.y.length+1,value:t[0].values.xPTotals[O],tooltip:o+" "+t[0].values.xTotals[O]},p,M,_);for(var j=0;j<t[0].values.y.length;j++)a(F,{x:t[0].values.x.length+1,y:j+1,value:t[0].values.yPTotals[j],tooltip:o+" "+t[0].values.yTotals[j]},p,M,_);if(i(N,t,p,_,A),app.translator.translateDOM(N[0]),t[0].values.model.get("showFullLegends")){var L=N.select(".heatmap-xAxis-container").node().getBBox().height,R=N.select(".heatmap-yAxis-container").node().getBBox().width+25;N.attr("transform","translate("+R+","+L+")")}}),x.renderEnd("heatmap immediate"),e}function n(t,e,n){var i=new Array;i.push({min:-99,max:-1,color:t}),i.push({min:-1,max:0,color:e});var a=n.get("heatmap_config").models[0].get("amountColors"),r=2;for(var o in a)a.hasOwnProperty(o)&&(i.push({min:parseInt(o),color:a[o],max:null}),r>2&&(i[r-1].max=parseInt(o)),r++);return i[r-1].max=101,i}function i(t,e,n,i,a){for(var r=t.append("g").attr("transform","translate(0, "+((e[0].values.y.length+1)*n+10)+")").attr("class","heatmap-legends-container"),s=[app.translator.translateSync("amp.dashboard:chart-heatmap-legend-less-than")+" "+i[2].max+"%",app.translator.translateSync("amp.dashboard:chart-heatmap-legend-between")+" "+i[3].min+"% "+app.translator.translateSync("amp.dashboard:chart-heatmap-legend-and")+" <"+i[3].max+"% ",app.translator.translateSync("amp.dashboard:chart-heatmap-legend-between")+" "+i[4].min+"% "+app.translator.translateSync("amp.dashboard:chart-heatmap-legend-and")+" <"+i[4].max+"% ",app.translator.translateSync("amp.dashboard:chart-heatmap-legend-between")+" "+i[5].min+"% "+app.translator.translateSync("amp.dashboard:chart-heatmap-legend-and")+" <"+i[5].max+"% ",app.translator.translateSync("amp.dashboard:chart-heatmap-legend-between")+" "+i[6].min+"% "+app.translator.translateSync("amp.dashboard:chart-heatmap-legend-and")+" <"+i[6].max+"% ",app.translator.translateSync("amp.dashboard:chart-heatmap-legend-more-than")+" "+i[7].min+"%"],l=0,d=0;d<s.length;d++){var c=o(s[d]);c>l&&(l=c),$("#tempSpan").remove()}l+=20;for(var d=0;d<s.length;d++){var u=(r.append("rect").attr("x",d*l).attr("width",l).attr("height",a).attr("class","bordered").style("fill",i[d+2].color),r.append("text"));u.attr("font-family","Arial").attr("font-size","11px").attr("y",15).attr("x",d*l+(l-o(s[d]))/2).text(s[d])}r.append("text").text("LEGENDS").attr("x",-6).attr("y",15).attr("class","yLabel mono axis nv-series heatmap-totals").style("text-anchor","end").style("font-weight","bold").attr("data-i18n","amp.dashboard:chart-heatmap-legends")}function a(t,e,n,i,a){var o=e,s=t.append("rect").attr("x",(e.x-1)*n).attr("y",(e.y-1)*n).attr("rx",4).attr("ry",4).attr("class","bordered").attr("width",n).attr("height",n).style("fill",i).attr("data-x",e.x-1).attr("xid",e.xid).attr("yid",e.yid).attr("data-y",e.y-1);s.transition().duration(1e3).style("fill",r(e.value,a,i));var l=t.append("text");l.attr("font-family","Arial").attr("font-size","11px").attr("x",(e.y-1)*n).attr("xid",e.xid).attr("y",(e.y-1)*n+19).attr("yid",e.yid).attr("class","heatmap-cell").attr("x",function(){var t=e,i=t.value;return i>0&&i<1?(t.x-1)*n+4:i<10?(t.x-1)*n+8:100==i?(t.x-1)*n+1:(t.x-1)*n+5}).text(function(){var t=e,n=t.value;return n>-1?n>0&&n<1?"<1%":n+"%":n==-1?"":app.translator.translateSync("amp.dashboard:chart-heatmap-legend-n-a")}).on("click",function(e){$($(t[0]).find("rect")).removeAttr("filter"),$($(t[0]).find("[data-x='"+(o.x-1)+"']")).attr("filter","url(#filterDarken)"),$($(t[0]).find("[data-y='"+(o.y-1)+"']")).attr("filter","url(#filterDarken)"),$($(t[0]).find("[data-y='"+(o.y-1)+"'][data-x='"+(o.x-1)+"']")).removeAttr("filter")}),e.tooltip&&l.attr("data-title",e.tooltip).attr("class","nv-series heatmap-cell")}function r(t,e,n){for(var i=n,a=0;a<e.length;a++)if(t>=e[a].min&&t<e[a].max){i=e[a].color;break}return i}function o(t){$("body").append("<span id='tempSpan' class='invisible'>"+t+"</span>");var e=$("#tempSpan").width();return $("#tempSpan").remove(),e}var s=nv.models.heatmap(),l={top:30,right:20,bottom:20,left:20},d=null,c=(nv.utils.defaultColor(),nv.utils.state()),u=null,h="No Data Available.",p=250,f=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),m=17,g={top:120,right:0,bottom:100,left:150};const v=960,y=400,b=1024;var x=nv.utils.renderWatch(f),w=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},k=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},S=function(t,e){return t.length>e&&(t=t.substring(0,e)+"..."),t};return e.legend={},e.dispatch=f,e.heatmap=s,e.options=nv.utils.optionsFunc.bind(e),e.shortTextLength=function(t){return m},e._options=Object.create({},{noData:{get:function(){return h},set:function(t){h=t}},defaultState:{get:function(){return u},set:function(t){u=t}},duration:{get:function(){return p},set:function(t){p=t,x.reset(p)}},color:{},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},tooltipContent:{}}),e.height=function(t){return arguments.length?(d=t,e):d},nv.utils.inheritOptions(e,s),nv.utils.initOptions(e),e}},{underscore:"underscore"}],13:[function(t,e,n){nv.models.customizedMultiBarChart=function(){"use strict";function t(v){return v.each(function(v){var S=d3.select(this),E=this,P=(d||parseInt(S.style("width"))||960)-l.left-l.right,I=(c||parseInt(S.style("height"))||400)-l.top-l.bottom;try{v[0].values[0].x.length>4&&(l.bottom=130)}catch(F){}if(t.update=function(){S.transition().duration(_).call(t)},t.container=this,T.disabled=v.map(function(t){return!!t.disabled}),!D){var O;D={};for(O in T)T[O]instanceof Array?D[O]=T[O].slice(0):D[O]=T[O]}if(!(v&&v.length&&v.filter(function(t){return t.values.length}).length)){var j=S.selectAll(".nv-noData").data([A]);return j.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),j.attr("x",l.left+P/2).attr("y",l.top+I/2).text(function(t){return t}),t}S.selectAll(".nv-noData").remove(),e=i.xScale(),n=i.yScale();var L=S.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([v]),R=L.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),B=L.select("g");R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-barsWrap"),R.append("g").attr("class","nv-legendWrap"),R.append("g").attr("class","nv-controlsWrap"),p&&(o.rtl(g),o.width(P-M()),i.barColor()&&v.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),B.select(".nv-legendWrap").datum(v).call(o),l.top!=o.height()&&(l.top=o.height(),I=(c||parseInt(S.style("height"))||400)-l.top-l.bottom),B.select(".nv-legendWrap").attr("transform","translate("+M()+","+-l.top+")"));var $=app.translator.translateSync("amp.dashboard:filters-chart-legends-Grouped","Grouped"),z=app.translator.translateSync("amp.dashboard:filters-chart-legends-Stacked","Stacked");if(h){var V=[{key:$,disabled:i.stacked()},{key:z,disabled:!i.stacked()}];s.width(M()).color(["#444","#444","#444"]),s.rtl(g),B.select(".nv-controlsWrap").datum(V).attr("transform","translate(0,"+-l.top+")").call(s)}var Y=l.left;if(y)var Y=l.left-40;L.attr("transform","translate("+Y+","+l.top+")"),y&&B.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)"),i.disabled(v.map(function(t){return t.disabled})).width(P).height(I).color(v.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!v[e].disabled}));var H=B.select(".nv-barsWrap").datum(v.filter(function(t){return!t.disabled}));if(H.transition().call(i),f){a.scale(e).ticks(P/100).tickSize(-I,0),B.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),B.select(".nv-x.nv-axis").transition().call(a);var W=B.select(".nv-x.nv-axis > g").selectAll("g");W.selectAll("line, text").style("opacity",1);try{v[0].values[0].x.length>4&&B.selectAll(".nv-x.nv-axis .nv-wrap g g text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-65)")}catch(F){}if(x){var U=function(t,e){return"translate("+t+","+e+")"},G=5,J=17;W.selectAll("text").attr("transform",function(t,e,n){return U(0,n%2==0?G:J)});var q=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;B.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return U(0,0===e||q%2!==0?J:G)})}b&&W.filter(function(t,e){return e%Math.ceil(v[0].values.length/(P/100))!==0}).selectAll("text, line").style("opacity",0),w&&W.selectAll(".tick text").attr("transform","rotate("+w+" 0,0)").style("text-anchor",w>0?"start":"end"),B.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}m&&(r.scale(n).ticks(I/36).tickSize(-P,0),B.select(".nv-y.nv-axis").transition().call(r)),o.dispatch.on("stateChange",function(e){T=e,C.stateChange(T),t.update()}),s.dispatch.on("legendClick",function(e,n){if(e.disabled){switch(V=V.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case $:i.stacked(!1);break;case z:i.stacked(!0)}T.stacked=i.stacked(),C.stateChange(T),t.update()}}),C.on("tooltipShow",function(t){k&&N(t,E.parentNode)}),C.on("changeState",function(e){"undefined"!=typeof e.disabled&&(v.forEach(function(t,n){t.disabled=e.disabled[n]}),T.disabled=e.disabled),"undefined"!=typeof e.stacked&&(i.stacked(e.stacked),T.stacked=e.stacked),t.update()})}),t}var e,n,i=nv.models.multiBar(),a=nv.models.axis(),r=nv.models.axis(),o=nv.models.customizedLegend(),s=nv.models.customizedLegend(),l={top:30,right:20,bottom:50,left:60},d=null,c=null,u=nv.utils.defaultColor(),h=!0,p=!0,f=!0,m=!0,g=!1,v=!1,y=!1,b=!0,x=!1,w=0,k=!0,S=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},T={stacked:!1},D=null,A="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),M=function(){return h?300:0},_=250;i.stacked(!1),a.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(t){return t}),r.orient(y?"right":"left").tickFormat(d3.format(",.1f")),s.updateState(!1);var N=function(e,n){var o=e.pos[0]+(n.offsetLeft||0),s=e.pos[1]+(n.offsetTop||0),l=a.tickFormat()(i.x()(e.point,e.pointIndex)),d=r.tickFormat()(i.y()(e.point,e.pointIndex)),c=S(e.series.key,l,d,e,t);nv.tooltip.show([o,s],c,e.value<0?"n":"s",null,n)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+l.left,t.pos[1]+l.top],C.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),C.on("tooltipHide",function(){k&&nv.tooltip.cleanup()}),t.dispatch=C,t.multibar=i,t.legend=o,t.controls=s,t.xAxis=a,t.yAxis=r,d3.rebind(t,i,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),t.options=nv.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(l.top="undefined"!=typeof e.top?e.top:l.top,l.right="undefined"!=typeof e.right?e.right:l.right,l.bottom="undefined"!=typeof e.bottom?e.bottom:l.bottom,l.left="undefined"!=typeof e.left?e.left:l.left,t):l},t.rigthAlign=function(e){return arguments.length?(v=e,t):v},t.rtl=function(e){return arguments.length?(g=e,t):g},t.width=function(e){return arguments.length?(d=e,t):d},t.height=function(e){return arguments.length?(c=e,t):c},t.color=function(e){return arguments.length?(u=nv.utils.getColor(e),o.color(u),t):u},t.showControls=function(e){return arguments.length?(h=e,t):h},t.showLegend=function(e){return arguments.length?(p=e,t):p},t.showXAxis=function(e){return arguments.length?(f=e,t):f},t.showYAxis=function(e){return arguments.length?(m=e,t):m},t.rightAlignYAxis=function(e){return arguments.length?(y=e,r.orient(e?"right":"left"),t):y},t.reduceXTicks=function(e){return arguments.length?(b=e,t):b},t.rotateLabels=function(e){return arguments.length?(w=e,t):w},t.staggerLabels=function(e){return arguments.length?(x=e,t):x},t.tooltip=function(e){return arguments.length?(S=e,t):S},t.tooltips=function(e){return arguments.length?(k=e,t):k},t.tooltipContent=function(e){return arguments.length?(S=e,t):S},t.state=function(e){return arguments.length?(T=e,t):T},t.defaultState=function(e){return arguments.length?(D=e,t):D},t.noData=function(e){return arguments.length?(A=e,t):A},t.transitionDuration=function(e){return arguments.length?(_=e,t):_},t}},{}],14:[function(t,e,n){nv.models.customizedPieChart=function(){"use strict";function t(s){return v.reset(),v.models(e),s.each(function(s){var l=d3.select(this);nv.utils.initSVG(l);var c=(a||parseInt(l.style("width"),10)||960)-i.left-i.right,f=(r||parseInt(l.style("height"),10)||400)-i.top-i.bottom;if(t.update=function(){l.transition().call(t)},t.container=this,u.setter(b(s),t.update).getter(y(s)).update(),u.disabled=s.map(function(t){return!!t.disabled}),!h){var g;h={};for(g in u)u[g]instanceof Array?h[g]=u[g].slice(0):h[g]=u[g]}if(!s||!s.length){var v=l.selectAll(".nv-noData").data([p]);return v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",i.left+c/2).attr("y",i.top+f/2).text(function(t){return t}),t}l.selectAll(".nv-noData").remove();var x=l.selectAll("g.nv-wrap.nv-pieChart").data([s]),w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),k=x.select("g"),S=$($(l[0])[0]).find(".legend.nvd3-svg")[0].getBoundingClientRect().height;w.append("g").attr("class","nv-pieWrap").attr("transform","translate(0,"+S+")"),w.append("g").attr("class","nv-legendWrap"),o&&(n.width(c).key(e.x()),x.select(".nv-legendWrap").datum(s).call(n)),e.width(c).height(f);var T=k.select(".nv-pieWrap").datum([s]);d3.transition(T).call(e),n.dispatch.on("stateChange",function(e){for(var n in e)u[n]=e[n];m.stateChange(u),t.update()}),e.dispatch.on("elementMouseout.tooltip",function(t){m.tooltipHide(t)}),d&&x.select(".nv-pieLabels").selectAll("text")[0].forEach(function(t){t.textContent.length>0&&t.textContent.lastIndexOf("%")&&(t.textContent="%"+t.textContent.substring(0,t.textContent.length-1))}),m.on("changeState",function(e){"undefined"!=typeof e.disabled&&(s.forEach(function(t,n){t.disabled=e.disabled[n]}),u.disabled=e.disabled),t.update()})}),v.renderEnd("pieChart immediate"),t}var e=nv.models.pie(),n=nv.models.legend().margin({top:0,right:0,bottom:0,left:0}),i={top:30,right:20,bottom:20,left:20},a=null,r=null,o=!0,s=nv.utils.defaultColor(),l=!0,d=!1,c=function(t,e,n,i){return'<h3 style="background-color: '+n.color+'">'+t+"</h3><p>"+e+"</p>"},u=nv.utils.state(),h=null,p="No Data Available.",f=250,m=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),g=function(n,i){var a=e.x()(n.point),r=n.pos[0]+(i&&i.offsetLeft||0),o=n.pos[1]+(i&&i.offsetTop||0),s=e.valueFormat()(e.y()(n.point)),l=c(a,s,n,t);nv.tooltip.show([r,o],l,n.value<0?"n":"s",null,i)},v=nv.utils.renderWatch(m),y=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},b=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return e.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],m.tooltipShow(t)}),m.on("tooltipShow",function(t){l&&g(t)}),m.on("tooltipHide",function(){l&&nv.tooltip.cleanup()}),t.legend=n,t.dispatch=m,t.pie=e,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{noData:{get:function(){return p},set:function(t){p=t}},tooltipContent:{get:function(){return c},set:function(t){c=t}},tooltips:{get:function(){return l},set:function(t){l=t}},showLegend:{get:function(){return o},set:function(t){o=t}},defaultState:{get:function(){return h},set:function(t){h=t}},color:{get:function(){return s},set:function(t){s=t,n.color(s),e.color(s)}},duration:{get:function(){return f},set:function(t){f=t,v.reset(f)}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}}}),t.rtl=function(e){return arguments.length?(d=e,t):d},nv.utils.inheritOptions(t,e),nv.utils.initOptions(t),t}},{}],15:[function(t,e,n){function i(){return!!document.querySelector}function a(){try{return document.createElementNS("http://w3.org/2000/svg","svg"),!0}catch(t){return!1}}function r(){return!!document.createElement("canvas").getContext}function o(){if(!r())return!1;var t=document.createElement("canvas").getContext("2d").fillText;return"function"==typeof t}function s(){return!d()}function l(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){return navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin}}var d=function(){var t=!!function(){var t,e=navigator.userAgent,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],"MSIE "+(t[1]||"")):"Chrome"===n[1]&&(t=e.match(/\bOPR\/(\d+)/))?"Opera "+t[1]:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=!!e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" "))}().match(/^MSIE/);return function(){return t}}();e.exports=function(){var t=[];return i()||t.push({feature:"querySelector",severity:"critical"}),a()||t.push({feature:"SVG",severity:"critical"}),o()||t.push({feature:"canvas",severity:"major"}),s()||t.push({feature:"download",severity:l()?"minor":"major"}),l()||t.push({feature:"flash",severity:d()?"major":"minor"}),t}},{}],16:[function(t,e,n){var i=t("backbone");e.exports=i.Model.extend({url:"/rest/security/layout",defaults:{email:void 0},fetch:function(t){return t=t||{},t.cache=!1,i.Model.prototype.fetch.call(this,t)}})},{backbone:"backbone"}],17:[function(t,e,n){var i=t("underscore"),a=t("./chart-model-base");e.exports=a.extend({defaults:{title:"",showPlannedDisbursements:!0,showActualDisbursements:!0,chartType:"aidPredictability"},_prepareTranslations:function(){var t=this,e={};e["amp.dashboard:aid-predictability-planned-disbursements"]="Planned Disbursements",e["amp.dashboard:aid-predictability-actual-disbursements"]="Actual Disbursements",this.localizedPredictability=this.app.translator.translateList(e).then(function(e){t.localizedPredictabilityList=e})},parse:function(t){function e(t){return function(e){return{x:e.year,y:e[t].amount,z:e[t].formattedAmount}}}return this.set("title",t.title),i.isUndefined(t.showPlannedDisbursements)||this.set("showPlannedDisbursements",t.showPlannedDisbursements),i.isUndefined(t.showActualDisbursements)||this.set("showActualDisbursements",t.showActualDisbursements),t.processed=[{key:this.localizedPredictabilityList["amp.dashboard:aid-predictability-planned-disbursements"],originalKey:"planned",values:i(t.years).map(e("planned disbursements")),disabled:!this.get("showPlannedDisbursements")},{key:this.localizedPredictabilityList["amp.dashboard:aid-predictability-actual-disbursements"],originalKey:"actual",values:i(t.years).map(e("actual disbursements")),disabled:!this.get("showActualDisbursements")}],t}})},{"./chart-model-base":20,underscore:"underscore"}],18:[function(t,e,n){var i=t("underscore"),a=t("./chart-model-base"),r=t("../charts/common");e.exports=a.extend({defaults:{typed:!0,limit:3,title:"",stacked:!1,seriesToExclude:[],yearTotals:{},chartType:"fundingType"},_prepareTranslations:function(){var t=this,e={},n=["amp.dashboard:chart-",this.get("name").replace(/ /g,""),"-"].join("");"Funding Type"===this.get("name")&&(e[n+"Grant"]="Grant",e[n+"Loan"]="Loan",e[n+"others"]="Others"),this.localizedFType=this.app.translator.translateList(e).then(function(e){t.localizedLookup=e})},parse:function(t){this.set("title",t.title);var e,n=this;e=t.values.length>0&&!isNaN(parseInt(t.values[0].Year,10))?i.sortBy(t.values,function(t){return parseInt(t.Year,10)}):i(t.values).sortBy("Year");var a=["amp.dashboard:chart-",this.get("name").replace(/ /g,""),"-"].join(""),o=n.localizedLookup[a+"others"];if(t.processed=i(e).chain().reduce(function(t,e){return t.push.apply(t,i(e.values).pluck("type")),t},[]).uniq().map(function(t){var r,o=t.replace(/[ :.]/g,""),s=t;return n.localizedLookup[a+o]&&(s=n.localizedLookup[a+o]),{key:s,values:i(e).map(function(e){var n=i(e.values).findWhere({type:t});return r=n.id,{x:e.Year,y:n&&n.amount||0,z:n&&n.formattedAmount||0}}),disabled:i.indexOf(n.get("seriesToExclude"),s)!=-1,keyId:r}}).value(),this.get("limit")<t.processed.length){var s=i(t.processed).chain().map(function(t){return{key:t.key,total:i(t.values).reduce(function(t,e){return t+e.y},0)}}).sortBy("total").reverse().rest(this.get("limit")).pluck("key").value(),l=i(t.processed).filter(function(t){return i(s).contains(t.key)}),d=[];s.forEach(function(t){var e=!1;l=l.filter(function(n){return!(!e&&n.key===t)||(d.push(n),e=!0,!1)})}),l=i(d).chain().map(function(t){return t.values}).transpose().map(function(t){return{x:t[0].x,y:i(t).reduce(function(t,e){return t+e.y},0),z:""}}).map(function(t){return{x:t.x,y:t.y,z:r.formatNumber(t.y)}}).value();var c={key:o,color:"#777",special:"others",disabled:i.indexOf(n.get("seriesToExclude"),o)!=-1,values:l};t.processed=i(t.processed).filter(function(t){return!i(s).contains(t.key)}),t.processed.push(c)}var u={};return i.each(t.processed,function(t){i.each(t.values,function(t){u[t.x]=(u[t.x]||0)+t.y})}),this.set("yearTotals",u),t}})},{"../charts/common":10,"./chart-model-base":20,underscore:"underscore"}],19:[function(t,e,n){var i=(t("jquery").param,t("underscore")),a=t("./chart-model-base");t("../charts/common");e.exports=a.extend({defaults:{xLimit:30,yLimit:10,originalYLimit:10,title:"",name:"",bigN:0,alternativeContainerClass:"heatmap-chart-wrap",values:[],chartType:"fragmentation",swapAxes:!1,heatmap_type:null,showResetButton:!1,showFullLegends:!1},_prepareTranslations:function(){var t={};["amp.dashboard:chart-",this.get("name").replace(/ /g,""),"-"].join("");this.localizedTopChart=this.app.translator.translateList(t).done(i(function(t){this.localizedLookup=t}).bind(this))},parse:function(t){var e=this;e.values=new Array,(i.isUndefined(t.xDataSet)||i.isUndefined(t.yDataSet))&&(t.yDataSet=[],t.xDataSet=[],t.yDataSetIds=[],t.xDataSetIds=[],t.matrix=[],t.xTotals=0,t.yTotals=0,t.xCount=0,t.yCount=0,t.xTotalCount=0,t.yTotalCount=0),e.values.x=t.xDataSet,e.values.xid=t.xDataSetIds,e.values.y=t.yDataSet,e.values.yid=t.yDataSetIds;for(var n=0;n<t.yDataSet.length;n++)for(var a=0;a<t.xDataSet.length;a++)if(null!==t.matrix[n]){var r=null!==t.matrix[n][a]?t.matrix[n][a]:{p:-1,amount:"0"},o={y:n+1,x:a+1,value:r.p,amount:r.dv,yid:t.yDataSetIds[n],xid:t.xDataSetIds[a]};e.values.push(o)}else e.values.push({y:n+1,x:a+1,value:-1,amount:"0",yid:t.yDataSetIds[n],xid:t.xDataSetIds[a]});e.values=this.normalizeValues(e.values),e.values.xPTotals=this.normalizeValues(t.xPTotals),e.values.yPTotals=this.normalizeValues(t.yPTotals),e.values.xTotals=t.xTotals,e.values.yTotals=t.yTotals,e.values.xCount=t.xCount,e.values.yCount=t.yCount,e.values.xTotalCount=t.xTotalCount,e.values.yTotalCount=t.yTotalCount,e.values.model=this,this.localizedLookup||this.app.report("Loading error",["Translations for the application were not loaded before rendering"]);["amp.dashboard:chart-",this.get("name").replace(/ /g,""),"-"].join("");return t.processed=[{values:this.values}],t.values=this.values,t.yCount>this.get("originalYLimit")+1?this.set("showResetButton",!0):this.set("showResetButton",!1),t},normalizeValues:function(t){if(i.isUndefined(t)===!1)for(var e=0;e<t.length;e++){var n=void 0!==t[e].value?t[e].value:t[e];n>0&&n<1||(null==n&&(n=-99),void 0!==t[e].value?t[e].value=Math.floor(n):t[e]=Math.floor(n))}return t},fetch:function(t){var e=this;t=i.defaults(t||{},{url:this.url});var n=this.get("heatmap_config").models[0],r=i.find(n.get("charts"),function(t){return t.name===e.get("name")}),o=""!==e.get("xAxisColumn")?e.get("xAxisColumn"):n.get("columns")[r.xColumns[0]].origName,s=n.get("columns")[r.yColumns[0]].origName;if(e.get("swapAxes")===!0){var l=s;s=o,o=l}var d={xCount:e.get("xLimit"),xColumn:o,yColumn:s,yCount:e.get("yLimit")},c=JSON.parse(t.data);return d.filters=c&&c.filters?c.filters:{},t.data=JSON.stringify(d),a.prototype.fetch.call(this,t)}})},{"../charts/common":10,"./chart-model-base":20,jquery:"jquery",underscore:"underscore"}],20:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash");e.exports=a.Model.extend({defaults:{},initialize:function(t,e){this.app=e.app,this.url=e.url,this._prepareTranslations()},hasData:function(){return i(this.get("processed")).chain().pluck("values").reduce(function(t,e){return e.length&&!0||t},!1).value()},fetch:function(t){var e=JSON.parse(t.data);return e.settings=this.app.settingsWidget.toAPIFormat(),this.get("adjtype")&&(e.settings=i({}).extend(e.settings,{"funding-type":this.get("adjtype")})),i.defaults(e.settings,{"currency-code":this.app.settingsWidget.definitions.getDefaultCurrencyId()}),t.data=JSON.stringify(e),a.Model.prototype.fetch.call(this,t)}})},{"../backbone-dash":3,underscore:"underscore"}],21:[function(t,e,n){var i=t("jquery").param,a=t("underscore"),r=t("./chart-model-base"),o=t("../charts/common");e.exports=r.extend({defaults:{limit:5,title:"",bigN:0,chartType:"top"},_prepareTranslations:function(){var t={},e=["amp.dashboard:chart-",this.get("name").replace(/ /g,""),"-"].join("");"Top Regions"===this.get("name")&&(t[e+"DistrictUndefined"]="Districts: Undefined"),t[e+"others"]="Others",this.localizedTopChart=this.app.translator.translateList(t).done(a(function(t){this.localizedLookup=t}).bind(this))},parse:function(t){this.set("title",t.title),this.localizedLookup||this.app.report("Loading error",["Translations for the application were not loaded before rendering"]);var e=["amp.dashboard:chart-",this.get("name").replace(/ /g,""),"-"].join("");this.localizedOthers=this.localizedLookup[e+"others"],void 0===this.localizedOthers&&console.error("missing translation in .json file: "+e+"others");var n=a(t.values.slice()).map(function(t){var n=t.name.replace(/[ :.]/g,""),i=t.name;return this.localizedLookup[e+n]&&(i=this.localizedLookup[e+n]),{x:i,y:t.amount,z:t.formattedAmount,id:t.id}},this);if(a(a(n).pluck("x")).uniq().length<n.length&&this.app.report("Data Error",["The data for "+this.get("name")+" was inconsistent due to duplicate keys","The chart will be shown, but it may have errors or other issues as a result."]),t.maxLimit>n.length){var i={x:this.localizedOthers,y:t.total-a.chain(n).pluck("y").reduce(function(t,e){return t+e},0).value(),color:"#777",special:"others"};i.z=o.formatNumber(i.y/app.generalSettings.numberDivider);var r=app.generalSettings.get("rtl-direction");r?n.unshift(i):n.push(i)}return t.processed=[{values:n}],t},fetch:function(t){return t=a.defaults(t||{},{url:this.url+"?"+i(this.pick("limit"))}),r.prototype.fetch.call(this,t)}})},{"../charts/common":10,"./chart-model-base":20,jquery:"jquery",underscore:"underscore"}],22:[function(t,e,n){var i=t("../backbone-dash");e.exports=i.Collection.extend({initialize:function(t,e){this.app=e.app}})},{"../backbone-dash":3}],23:[function(t,e,n){var i=t("backbone"),a=(t("underscore"),i.Model.extend({})),r=i.Collection.extend({model:a,url:"/rest/common/fm",fetchData:function(){var t={"detail-modules":["DASHBOARDS"]};this.fetch({type:"POST",async:!1,processData:!1,mimeType:"application/json",traditional:!0,headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},data:JSON.stringify(t),error:function(t,e){console.error("error loading charts.")},success:function(t,e){}})}});e.exports=r},{backbone:"backbone",underscore:"underscore"}],24:[function(t,e,n){var i=t("backbone"),a=(t("underscore"),i.Model.extend({})),r=i.Collection.extend({model:a,url:"/rest/dashboard/heat-map/configs",fetchData:function(){this.fetch({type:"GET",async:!1,processData:!1,mimeType:"application/json",traditional:!0,headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},data:JSON.stringify(),error:function(t,e){console.error("error loading heatmap configs.")},success:function(t,e){}})}});e.exports=r},{backbone:"backbone",underscore:"underscore"}],25:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r="mapId";e.exports=a.Model.extend({defaults:{name:void 0,description:void 0,stateBlob:void 0},parse:function(t){return i(t).has(r)&&(t.id=t[r],delete t[r]),t},initialize:function(t,e){this.app=e.app,this.url=e.url},toJSON:function(){var t=a.Model.prototype.toJSON.apply(this,arguments);return i(t).has("id")&&(t[r]=t.id,
delete t.id),t}},{fromId:function(t,e){return new this({id:t},e)}})},{"../backbone-dash":3,underscore:"underscore"}],26:[function(t,e,n){var i=t("underscore"),a=t("jquery").Deferred,r=t("../backbone-dash"),o=t("./saved-dash");e.exports=r.Collection.extend({url:"/rest/dashboard/saved-charts",model:o,timer:void 0,initializedOnce:!1,initialize:function(t,e){this.app=e.app},load:function(t){var e=this;if(e.initializedOnce===!1){e.initializedOnce=!0;var n=new a,r=this.get(t);if(r)n.resolve(r);else{var o=this.model.fromId(t,{app:this.app});this.add(o),o.fetch().done(function(){n.resolve(o),void 0===e.timer&&(e.timer=setInterval(function(){void 0!==this.app&&void 0!==this.app.filter&&this.app.filter.finishedFirstLoad===!0&&(clearInterval(e.timer),this.app.filter.trigger("apply"),this.app.rendered===!1&&(this.app.rendered=!0,app.render()))},100))}).fail(i(function(){this.app.report("Failed to load saved dashboard",["Could not retrieve the saved state."]),n.reject()}).bind(this))}return n.promise()}}})},{"../backbone-dash":3,"./saved-dash":25,jquery:"jquery",underscore:"underscore"}],27:[function(t,e,n){var i=(t("d3"),t("./chart-view-base")),a=t("underscore"),r=t("../../ugly/util"),o=t("./chart-detail-info-modal");e.exports=i.extend({uiDefaults:{big:!1,view:"multibar",showTotal:!0,showMeasuresSelector:!0,showTopLegends:!0,showCommonChartArea:!0},events:function(){return a.extend({},i.prototype.events,{"click .nv-series":"changeChartColumns"})},changeChartColumns:function(t){var e=$(t.currentTarget).find(".nv-legend-text").text(),n=app.translator.translateSync("amp.dashboard:aid-predictability-planned-disbursements","Planned Disbursements"),i=app.translator.translateSync("amp.dashboard:aid-predictability-actual-disbursements","Actual Disbursements");e==n?this.model.set("showPlannedDisbursements",!this.model.get("showPlannedDisbursements")):e==i&&this.model.set("showActualDisbursements",!this.model.get("showActualDisbursements"))},chartViews:["multibar","table"],modalView:void 0,chartOptions:{nvControls:!1},downloadChartOptions:{nvControls:!1,trimLabels:!1},getTTContent:function(t){var e=this.app,n=e.translator.translateSync("amp.dashboard:of","of"),i=e.translator.translateSync("amp.dashboard:total","total"),a=e.translator.translateSync(e.generalSettings.numberDividerDescription),o=-1;o=t.data[0].disabled===!0?1:t.series.index;var s=t.x.raw+" "+e.translator.translateSync("amp.dashboard:aid-predictability-"+t.data[o].originalKey+"-"+this.model.get("measure"),""),l=n+" "+t.x.raw+" "+i,d=t.data[1-o],c=d.values[t.x.index],u=r.formatOfTotal(t.y.raw,c.y,l),h=this,p=e.settingsWidget.definitions.findCurrencyById(h.model.get("currency")).value;return{tt:{heading:s,bodyText:"<b>"+t.y.fmt+"</b> "+p+" ("+a+")",footerText:u}}},getNiceContext:function(t){var e=t.data[t.series.index].values[t.x.index].x,n=t.data[t.series.index].key;return void 0==e||void 0==n?null:{data:t.data,series:t.series,x:{raw:e,fmt:e,index:e},y:{raw:n,fmt:n,index:n}}},chartClickHandler:function(t){var e=this,n=e.getNiceContext(t);n&&(this.modalView=new o({app:app,context:n,model:this.model}),this.openInfoWindow((n.x.fmt||n.x.raw)+" "+n.series.key))}})},{"../../ugly/util":45,"./chart-detail-info-modal":28,"./chart-view-base":32,d3:"d3",underscore:"underscore"}],28:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=(t("../../ugly/util"),i.template('<div>\n\t<span class="number-divider-detail"></span>\n</div>\n<div class="panel-default">\n\t<div class="chart-tops-info-container">\n\t\t<div class="chart-tops-info-content">\n\t\t\t<% if(error) { %>\n\t\t\t\t<div class="alert alert-danger" role="alert">\n\t\t\t\t\t<strong><span data-i18n="amp.dashboard:error">Error</span></strong>\n\t\t\t\t\t<span data-i18n="amp.dashboard:error-detail">The Aid Management Platform has temporarily encountered an issue. We apologize for any inconvenience.</span>\n\t\t\t\t</div>\n\t\t\t<% } else if(values === undefined) { %>\n\t\t\t\t<img alt="" src="/TEMPLATE/ampTemplate/dashboard/build/img/loading-icon.gif">\n\t\t\t\t<span data-i18n="amp.dashboard:download-rendering">Rendering...</span>\n\t\t\t<% } else { %>\n\t\t\t\t<% var rowClass = \'\'; %>\n\t\t\t\t<table class="table table-striped">\n\t\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th class="header-row"><span data-i18n="amp.dashboard:chart-tops-table-projecttitle">Project Title</span></th>\n\t\t\t\t\t\t<th class="header-row"><span class="funding-type-title-column"></span> (<%=\n\t\t\t\t\t\t\tmodel.get(\'currency\') %>)</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t<% _(values).each(function(row, i) { %>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td scope="row">\n\t\t\t\t\t\t\t<a class="title-column" target="_blank"\n\t\t\t\t\t\t\t   href="/aim/viewActivityPreview.do~activityId=<%=row.id%>" title="<%=row.name%>">\n\t\t\t\t\t\t\t\t<%=row.name%>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class="amount-column"><%=row.formattedAmount%></td>\n\t\t\t\t\t</tr>\n\t\t\t\t<% }) %>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t<% } %>\n\t\t\t<div class="btn btn-success load-more" style="display: none"><span\n\t\t\t\t\tdata-i18n="amp.dashboard:chart-tops-table-loadmore">load\n\t\t\t\tmore</span>...</div>\n\t\t</div>\n\t</div>\n</div>\n'));e.exports=a.View.extend({_currentPage:0,PAGE_SIZE:50,TOP:"top",FRAGMENTATION:"fragmentation",AID_PREDICTABILITY:"aidPredictability",FUNDING_TYPE:"fundingType",initialize:function(t){this.app=t.app,this.context=t.context,this.model=t.model,this.numberDivider=app.generalSettings.numberDivider},getUrl:function(){var t=this,e=t.model.url+"/";if(this.model.get("chartType")==this.AID_PREDICTABILITY)e+=this.context.x.index+"/"+this.context.y.index;else if(this.model.get("chartType")==this.FUNDING_TYPE)e+=this.context.x.raw+"/"+this.context.data[this.context.series.index].keyId;else if(this.model.get("chartType")==this.FRAGMENTATION)e+=this.context.x.index+"/"+this.context.y.index;else{if(this.model.get("chartType")!=this.TOP)throw new Error("error building url, wrong chartType.");e+=this.context.data[0].values[this.context.x.index].id}return e},getConfig:function(){var t=this,e=t.app.filter.serialize();if(e.settings=t.app.settingsWidget.toAPIFormat(),e.settings["funding-type"]=t.model.get("adjtype"),e.offset=t._currentPage*t.PAGE_SIZE,this.model.get("chartType")==this.FRAGMENTATION){var n=t.model.get("heatmap_config").models[0],a=i.find(n.get("charts"),function(e){return e.name===t.model.get("name")}),r=""!==t.model.get("xAxisColumn")?t.model.get("xAxisColumn"):n.get("columns")[a.xColumns[0]].origName,o=n.get("columns")[a.yColumns[0]].origName;if(t.model.get("swapAxes")===!0){var s=o;o=r,r=s}e.xCount=t.model.get("xLimit"),e.xColumn=r,e.yColumn=o,e.yCount=t.model.get("yLimit")}return e},render:function(){var t=this;this.$el.html(r({error:void 0,model:this.model,context:this.context,values:void 0,numberDivider:this.numberDivider})),app.translator.translateDOM($(".chart-tops-info-container"));var e=t.getConfig(),n=t.getUrl();return $.ajax({method:"POST",url:n,dataType:"json",contentType:"application/json",processData:!1,data:JSON.stringify(e)}).done(function(e){t.$el.html(r({error:void 0,model:t.model,context:t.context,values:e.values,numberDivider:t.numberDivider})),t.$el.find(".load-more").click(function(){t._currentPage++,t.render()});var n=t._currentPage*t.PAGE_SIZE;if(n+t.PAGE_SIZE>=e.totalRecords?t.$el.find(".load-more").hide():(t.$el.find(".load-more").html('<span data-i18n="amp.dashboard:chart-tops-table-loadmore">load more</span> '+(n+t.PAGE_SIZE)+"/"+e.totalRecords),t.$el.find(".load-more").show()),1!=t.app.generalSettings.numberDivider){var i;1e3===t.app.generalSettings.numberDivider?i='<span data-i18n="amp.dashboard:chart-tops-detail-inthousands">Amounts in Thousands (000)</span>':1e6===t.app.generalSettings.numberDivider?i='<span data-i18n="amp.dashboard:chart-tops-detail-inmillions">Amounts in Millions (000 000)</span>':1e9===t.app.generalSettings.numberDivider&&(i='<span data-i18n="amp.dashboard:chart-tops-detail-inbillions">Amounts in Billions (000 000 000)</span>'),t.$el.find(".number-divider-detail").html(i)}var a;if(t.model.get("chartType")==t.AID_PREDICTABILITY)a=t.context.series.key;else{var o=t.app.settingsWidget.definitions.getFundingTypeSetting();a=$.map(o.get("value").options,function(e){if(e.id===t.model.get("adjtype"))return e.name})}t.$el.find(".funding-type-title-column").html(a),app.translator.translateDOM($(".modal-body"))}).fail(function(e,n){var i=JSON.parse(e.responseText).error;console.error("Error Getting chart-detail-info-modal from EP",i),t.$el.html(r({model:t.model,context:t.context,error:n,numberDivider:t.numberDivider}))}),this}})},{"../../ugly/util":45,"../backbone-dash":3,underscore:"underscore"}],29:[function(t,e,n){var i=(t("d3"),t("./chart-view-base")),a=t("underscore"),r=t("../../ugly/util"),o=t("./chart-detail-info-modal");e.exports=i.extend({uiDefaults:{big:!0,adjtype:"FAKE",view:"multibar",showTotal:!0,showMeasuresSelector:!0,showTopLegends:!0,showCommonChartArea:!0},events:function(){return a.extend({},i.prototype.events,{"click .nv-series":"changeChartColumns"})},changeChartColumns:function(t){var e=$(t.currentTarget).find(".nv-legend-text").text(),n=app.translator.translateSync("amp.dashboard:filters-chart-legends-Stacked","Stacked"),i=app.translator.translateSync("amp.dashboard:filters-chart-legends-Grouped","Grouped");if(e==n||e==i)this.model.set("stacked",e==n);else{var r=this.model.get("seriesToExclude")?this.model.get("seriesToExclude"):[],o=a.indexOf(r,e);$(t.currentTarget).attr("class").indexOf("disabled")!=-1?o==-1&&r.push(e):o!=-1&&r.splice(o,1),this.model.set("seriesToExclude",r)}},chartViews:["multibar","table"],downloadChartOptions:{trimLabels:!1},getTTContent:function(t){var e=this.app,n=e.translator.translateSync("amp.dashboard:of","of"),i=e.translator.translateSync("amp.dashboard:total","total"),o=e.translator.translateSync(e.generalSettings.numberDividerDescription),s=a.filter(t.data,function(t){return t.disabled!==!0}),l=this.model.get("yearTotals")?this.model.get("yearTotals")[t.x.raw]:null,d=" &nbsp<span>"+i+"</span>",c=n+"</span>&nbsp"+t.x.raw+d,u=r.formatOfTotal(t.y.raw,l,c),h=this,p=e.settingsWidget.definitions.findCurrencyById(h.model.get("currency")).value;return{tt:{heading:t.x.raw+" "+s[t.series.index].key,bodyText:"<b>"+t.y.fmt+"</b> "+p+" ("+o+")",footerText:u+"</span>"}}},chartClickHandler:function(t){"others"===t.data[t.series.index].special?this.model.set("limit",this.model.get("limit")+1):(this.modalView=new o({app:app,context:t,model:this.model}),this.openInfoWindow((t.x.fmt||t.x.raw)+" "+t.data[t.series.index].key))}})},{"../../ugly/util":45,"./chart-detail-info-modal":28,"./chart-view-base":32,d3:"d3",underscore:"underscore"}],30:[function(t,e,n){var i=(t("d3"),t("./chart-view-base"));t("underscore");e.exports=i.extend({uiDefaults:{adjtype:"FAKE",xAxisColumn:"",showTotal:!1,showMeasuresSelector:!0,showTopLegends:!1,showCommonChartArea:!1,disableResize:!0},chartViews:["heatmap","table"],modalView:void 0,chartClickHandler:function(t){t.y.fmt===app.translator.translateSync("amp.dashboard:chart-heatmap-others")&&(this.model.set("yLimit",this.model.get("yLimit")+10),this.updateData())},downloadChartOptions:{trimLabels:!1}})},{"./chart-view-base":32,d3:"d3",underscore:"underscore"}],31:[function(t,e,n){var i=(t("d3"),t("./chart-view-base")),a=t("./chart-detail-info-modal"),r=(t("underscore"),t("../../ugly/util"));e.exports=i.extend({uiDefaults:{adjtype:"FAKE",showTotal:!0,showMeasuresSelector:!0,showTopLegends:!0,showCommonChartArea:!0},chartViews:["bar","pie","table"],modalView:void 0,downloadChartOptions:{trimLabels:!1},getTTContent:function(t){var e=app.translator.translateSync("amp.dashboard:of-total","of total"),n=app.translator.translateSync(app.generalSettings.numberDividerDescription),i=this,a=app.settingsWidget.definitions.findCurrencyById(i.model.get("currency")).value,e=app.translator.translateSync("amp.dashboard:of-total","of total"),o=r.formatOfTotal(t.y.raw,this.model.get("totalPositive"),e);return{tt:{heading:t.x.raw,bodyText:"<b>"+t.y.fmt+"</b> "+a+" ("+n+")",footerText:o+"</span>"}}},chartClickHandler:function(t){"others"===t.data[t.series.index].values[t.x.index].special?(this.model.set("limit",this.model.get("limit")+5),this.model.set("big",!0)):(this.modalView=new a({app:app,context:t,model:this.model}),this.openInfoWindow(t.x.fmt||t.x.raw))}})},{"../../ugly/util":45,"./chart-detail-info-modal":28,"./chart-view-base":32,d3:"d3",underscore:"underscore"}],32:[function(t,e,n){var i=t("jquery").Deferred,a=t("underscore"),r=t("../backbone-dash"),o=t("../charts/chart"),s=t("../../ugly/util"),l=t("./download"),d=t("./chart-detail-info-modal"),c=a.template('<div class="col-xs-12 <% if (!model.get(\'big\')) { %>col-md-6<% } else { %> big-chart-<%= model.get(\'bigN\')%> <% } %>">\n\n  <div class="panel panel-chart">\n    <div class="panel-heading fix-title-height">\n      <% if (model.get(\'showTotal\') === true) { %>\n\t      <div class="pull-right big-number">\n\t        <b class="chart-total"></b>\n\t        <span class="chart-currency"></span>\n\t      </div>\n      <% } %>\n      <div class="chart-title">\n\t      <h2 data-i18n="amp.dashboard:chart-<%= model.get(\'name\').replace(/ /g,\'\') %>"><%= model.get(\'title\') %></h2>\n\t      <% if (model.get(\'chartType\') === \'fragmentation\') { %>\n\t      \t<% var help_icon_text = app.translator.translateSync(\'amp.dashboard:chart-heatmap-help-text-\' + model.get(\'heatmap_type\'));%>\n\t      \t<img src="/TEMPLATE/ampTemplate/dashboard/build/img/questionmark1.png" class="question_mark nv-series" data-title="<%= help_icon_text %>">\n\t      <% } %>\n      </div>\n    </div>\n\t\n    <div class="panel-body">\n      <div class="chart-container">\n        <h3 class="dash-chart-diagnostic text-center"></h3>\n        <div class="dash-chart-wrap <%= (model.get(\'alternativeContainerClass\') !== undefined ? model.get(\'alternativeContainerClass\') : \'\')%>">\n        </div>\n        <button type="button" class="btn btn-link btn-xs pull-right reset" style="display:none" data-i18n="amp.dashboard:chart-reset">reset others</button>\n      </div>\n      <div class="alert alert-warning negative-values-message" role="alert">\n          <strong data-i18n="amp.dashboard:negatives-values">Negative values are not represented in this chart.</strong><br>\n          <span data-i18n="amp.dashboard:negatives-values-parag">Please switch to bar chart or table view to view all values.</span>\n      </div>\n    </div>\n\n    <div class="panel-footer clearfix">\n\n      <div class="pull-right">\n\n        <div class="btn-group">\n          <% _(views).each(function(view) { %>\n            <button data-i18n="amp.dashboard:chart-tooltip-<%= view %>-chart[title]" data-toggle="tooltip" title="View data in <%= view %> chart" type="button" data-view="<%= view %>"\n                class="chart-view btn btn-sm btn-<%= (view === model.get(\'view\')) ? \'primary\' : \'default\' %>">\n              <span class="glyphicon glyphicon-<%= {\n                bar: \'signal\',\n                multibar: \'signal\',\n                heatmap: \'stats\',\n                pie: \'adjust\',\n                table: \'th-list\'\n              }[view] %>"></span>\n            </button>\n          <% }) %>\n        </div>\n\n        <div class="btn-group">\n          <a data-i18n="amp.dashboard:chart-tooltip-download-chart[title]" data-toggle="tooltip" title="Download image or table"\n            class="btn btn-sm btn-default download"\n            download="AMP <%= model.get(\'title\') %> - <%= (new Date()).toISOString().split(\'T\')[0] %>.png"\n            target="_blank">\n            <span class="glyphicon glyphicon-cloud-download"></span>\n          </a>\n          <button data-i18n="<%= model.get(\'big\') ? \'amp.dashboard:chart-tooltip-collapse-chart[title]\' : \'amp.dashboard:chart-tooltip-expand-chart[title]\' %>" data-toggle="tooltip" title="<%= model.get(\'big\') ? \'Collapse chart\' : \'Expand chart\' %>" type="button" class="btn btn-sm btn-<%= model.get(\'big\') ? \'primary\' : \'default\' %> expand hidden-xs hidden-sm" <%= model.get(\'disableResize\') ? \'disabled\' : \'\'%>>\n            <span class="glyphicon glyphicon-fullscreen"></span>\n          </button>\n        </div>\n\n      </div><!-- buttons in .pull-right -->\n\n      <% if (model.get(\'adjtype\') && model.get(\'showMeasuresSelector\') === true) { %>\n        <form class="form-inline dash-form dash-adj-type" role="form">\n          <select class="form-control like-btn-sm ftype-options">\n            <option>...</option>\n            <!-- gets populated after settings load -->\n          </select>\n          <span class="cheat-lineheight"></span>\n        </form>\n      <% } %>\n      \n      <% if (model.get(\'chartType\') === \'fragmentation\') { %>\n\t\t<form class="form-inline dash-form dash-xaxis-options" role="form">\n        \t<select class="form-control like-btn-sm xaxis-options">\n            \t<option>...</option>\n            \t<!-- gets populated after settings load -->\n          \t</select>\n          \t<span class="cheat-lineheight"></span>\n        </form>\n        <button type="button" class="btn btn-sm btn-default heatmap-switch">\n            <span data-i18n="amp.dashboard:chart-swap-axes">Swap Axes</span>\n        </button>\n\t <% } %>\n\n    </div>\n  </div>\n\n  <div class="export-modal"></div>\n</div>'),u=a.template('<option value="<%=opt.id%>" <%= current ? selected="selected" : \'\' %>><%=opt.name%></option>');e.exports=r.View.extend({uiDefaults:{big:!1,view:"bar"},events:{"change .dash-adj-type select":"changeAdjType","change .dash-xaxis-options select":"changeXAxis","click .reset":"resetLimit","click .chart-view":"changeChartView","click .download":"download","click .expand":"big","click .retry":"render","click .heatmap-switch":"heatmapSwitchAxis"},chartViews:["bar","pie","heatmap","table"],initialize:function(t){this.app=t.app,this.model.set(this.uiDefaults),this.rendered=!1,this._stateWait=new i,this.message=null,this.showChartPromise=new i,this.renderedPromise=new i,this.app.savedDashes.length?this.app.state.loadPromise.always(this._stateWait.resolve):this._stateWait.resolve(),this.listenTo(this.app.filter,"apply",this.updateData),this.listenTo(this.app.settingsWidget,"applySettings",this.updateData),this.listenTo(this.model,"change:adjtype",this.render),this.listenTo(this.model,"change:xAxisColumn",this.render),this.listenTo(this.model,"change:limit",this.updateData),this.listenTo(this.model,"change:view",this.render),this.app.state.register(this,"chart:"+this.model.url,{get:a.partial(a(this.model.pick).bind(this.model),"limit","adjtype","xAxisColumn","view","big","stacked","showPlannedDisbursements","showActualDisbursements","seriesToExclude","xLimit","yLimit","swapAxes"),set:a(this.model.set).bind(this.model),empty:null}),a.bindAll(this,"showChart","failLoading","hideExportInPublicView","extractNumberFormatSettings"),this.getTTContent&&a.bindAll(this,"getTTContent"),this.chartClickHandler&&a.bindAll(this,"chartClickHandler")},render:function(){var t=this;this.renderedPromise=new i;var e={views:this.chartViews,model:this.model,chart:this.chartEl,util:s};return $.when(this._stateWait,this.app.filter.loaded,this.app.translator.promise,this.app.settingsWidget.definitions.loaded,this.app.generalSettings.loaded).done(function(){if(t.extractNumberFormatSettings(),t.$el.html(c(e)),t.hideExportInPublicView(),t.message=t.$(".dash-chart-diagnostic"),t.chartContainer=t.$(".dash-chart-wrap"),void 0!==t.model.get("adjtype")){t.rendered=!0;var n=t.app.settingsWidget.definitions.getFundingTypeSetting();n?"FAKE"===t.model.get("adjtype")&&t.model.set("adjtype",n.get("value").defaultId):t.app.report("Could not find Funding Type settings"),t.$(".ftype-options").html(a(n.get("value").options).map(function(e){return u({opt:e,current:e.id===t.model.get("adjtype")})},t))}else t.rendered=!0;if("fragmentation"===t.model.get("chartType")){var i=t.model.get("heatmap_config").models[0],r=a.find(i.get("charts"),function(e){return e.name===t.model.get("name")});t.$(".xaxis-options").html(a(r.xColumns).map(function(e){var n=a.find(i.get("columns"),function(t,n){return n===e}),r={id:n.origName,name:n.name,selected:!1,value:n.origName};return u({opt:r,current:r.id===t.model.get("xAxisColumn")})},t))}"pending"!==t._stateWait.state()&&t.updateData(),t.app.translator.translateDOM(t.$el),t.$el.find('[data-toggle="tooltip"]').tooltip(),t.renderedPromise.resolve()}),this},updateData:function(){if(this.app.rendered===!0&&this.rendered){if("pending"===this._stateWait.state())return this.message.html("Loading...").attr("data-i18n","amp.dashboard:chart-loading-saved-settings"),void app.translator.translateDOM($(".chart-container"));this.showChartPromise=new i,this.chartContainer.empty(),this.message.html('<span data-i18n="amp.dashboard:loading">Loading...</span>').fadeIn(100),this.app.translator.getTranslations().done(a(function(){"fragmentation"===this.model.get("chartType")&&this.app.translator.translateDOM(this.el),this.model.fetch({type:"POST",data:JSON.stringify(this.app.filter.serialize())}).always(a(function(){}).bind(this)).done(this.showChart).fail(this.failLoading)}).bind(this)).fail(a(function(){this.app.report("Could not load translations",["Refreshing the page may fix the issue."])}).bind(this))}},showChart:function(){if(this.showNegativeAlert(),!this.model.hasData())return this.message.html("No Data Available").attr("data-i18n","amp.dashboard:chart-no-data-available"),app.translator.translateDOM($(".chart-container")),void this.resetNumbers();var t=o(this.model.get("view"),this.model.get("processed"),this.getChartOptions(),this.model);if(this.chartContainer.html(t.el),"fragmentation"!==this.model.get("chartType")&&(this.renderNumbers(),this.fixTitleWidth()),"fragmentation"!==this.model.get("chartType")){var e=this.model.get("limit");e&&this.$(".reset")[e===this.model.defaults.limit?"hide":"show"]()}else this.model.get("showResetButton")?this.$(".reset").show():this.$(".reset").hide();this.message.stop().fadeOut(200),this.beautifyLegends(this),"heatmap"===this.model.get("view")&&this.handleHeatmapClicks(),this.showChartPromise.resolve()},getCellContext:function(t,e){var n=t.target,i=n.getAttribute("xid"),a=n.getAttribute("yid"),r=e.x[e.xid.indexOf(parseInt(n.getAttribute("xid"),10))],o=e.y[e.yid.indexOf(parseInt(n.getAttribute("yid"),10))];return void 0==i||void 0==a?null:{data:e,series:{},x:{raw:r,fmt:r,index:i},y:{raw:o,fmt:o,index:a}}},handleHeatmapClicks:function(){var t=this,e=this.$(".heatmap-cell");e&&$(e).on("click",function(e){var n=t.getCellContext(e,t.model.values);n&&(t.modalView=new d({app:app,context:n,model:t.model}),t.openInfoWindow((n.x.fmt||n.x.raw)+" - "+(n.y.fmt||n.y.raw)))});var n=this.$(".legend-others");n&&$(n).on("click",function(e){t.model.set("yLimit",t.model.get("yLimit")+t.model.get("originalYLimit")),t.updateData()})},showNegativeAlert:function(){"pie"===this.model.get("view")&&a.find(this.model.get("processed")[0].values,function(t){return t.y<0})?this.$(".negative-values-message").show():this.$(".negative-values-message").hide()},getChartOptions:function(){var t=a(a(this.chartOptions).clone()||{}).defaults({trimLabels:!this.model.get("big"),getTTContent:this.getTTContent,clickHandler:this.chartClickHandler,width:this.$(".panel-body").width(),height:this.$(".panel-body").height()});return"multibar"==this.model.get("view")&&(t.stacked=this.model.get("stacked")),t.model=this.model,t},failLoading:function(){this.message.html("Failed to load data <small>"+arguments[2]+' <button type="button" class="retry btn btn-warning btn-sm"><span class="glyphicon glyphicon-refresh"></span> Retry</button></small>').show(),console.error("failed loading chart :(",arguments)},renderNumbers:function(){this.model.get("total")&&this.$(".chart-total").html(s.translateLanguage(this.model.get("sumarizedTotal")));var t=this,e=app.settingsWidget.definitions.findCurrencyById(t.model.get("currency")).value;this.$(".chart-currency").html(e)},resetNumbers:function(){this.$(".chart-total").html(""),this.$(".chart-currency").html("")},fixTitleWidth:function(){var t=10,e=2,n=5,i=this.$(".chart-title h2"),a=$(i).width(),r=this.$(".panel-heading").width(),o=this.$(".big-number").width();if(r<a+o)for($(i).css("width",r-o-t+"px");this.calculateTextLines(i)>e;)$(i).html($(i).html().substring(0,$(i).html().length-n)+"..."),$(i).attr("data-title",this.model.get("title")),this.addSimpleTooltip(i)},calculateTextLines:function(t){var e=24,n=Math.floor($(t).height()/e);return n},resetLimit:function(){"fragmentation"===this.model.get("chartType")?(this.model.set("yLimit",this.model.get("originalYLimit")),this.updateData()):this.model.set("limit",this.model.defaults.limit)},changeAdjType:function(t){var e=t.currentTarget.value;this.model.set("adjtype",e)},changeXAxis:function(t){var e=t.currentTarget.value;this.model.set("xAxisColumn",e)},changeChartView:function(t){var e=s.data(t.currentTarget,"view");this.model.set("view",e),this.hideExportInPublicView()},hideExportInPublicView:function(){var t=this.app.generalSettings.get("hide-editable-export-formats-public-view");"table"===this.model.get("view")&&1==t&&0==this.app.user.get("logged")?this.$el.find(".download").hide():this.$el.find(".download").show()},big:function(){this.model.set("big",!this.model.get("big"))},setClear:function(t){this.$el[t?"addClass":"removeClass"]("clearfix")},download:function(){var t=a(this.getChartOptions()).omit("height","width"),e=new l({app:this.app,model:this.model,chartOptions:t}),n="dash-download-modal";this.app.modal("Download chart",{bodyEl:e.render().el,specialClass:n,i18nTitle:"amp.dashboard:download-download-chart"}),app.translator.translateDOM($("."+n))},heatmapSwitchAxis:function(){this.model.get("swapAxes")===!0?this.model.set("swapAxes",!1):this.model.set("swapAxes",!0),this.updateData()},beautifyLegends:function(t){var e=!1,n=!1;void 0!==t.model&&void 0!==t.model.get("values")&&t.model.get("values").length>0&&(e=!0),void 0!==t.model&&void 0!==t.model.get("processed")&&t.model.get("processed").length>1&&(n=!0),$(this.$el).find(".nv-series").each(function(i,a){"heatmap"!==t.model.get("view")&&(e&&!n?void 0!==t.model.get("values")[i]?$(a).data("data-title",t.model.get("values")[i].name):$(a).data("data-title",app.translator.translateSync("amp.dashboard:chart-FundingType-others","Others")):n&&void 0!==t.model.get("processed")[i]&&$(a).data("data-title",t.model.get("processed")[i].key)),t.addSimpleTooltip(a)})},addSimpleTooltip:function(t){($(t).data("data-title")||$(t).data("title"))&&$(t).hover(function(){var e=$(t).data("data-title")?$(t).data("data-title"):$(t).data("title"),n=$(t).offset();nv.tooltip.show([n.left,n.top],"<div class='panel panel-primary panel-popover'><div class='panel-heading'>"+e+"</div></div>")},function(){nv.tooltip.cleanup()})},extractNumberFormatSettings:function(t){var e={};e.numberFormat=this.app.generalSettings.get("number-format")||"#,#.#",e.numberFormat.indexOf(",")!==-1?e.groupSeparator=this.app.generalSettings.get("number-group-separator")||",":e.groupSeparator="",e.decimalSeparator=this.app.generalSettings.get("number-decimal-separator")||".",this.app.generalSettings.numberFormatSettings=e,this.app.generalSettings.numberDivider=this.app.generalSettings.get("number-divider"),1===this.app.generalSettings.numberDivider?this.app.generalSettings.numberDividerDescription="amp.dashboard:chart-tops-inunits":1e3===this.app.generalSettings.numberDivider?this.app.generalSettings.numberDividerDescription="amp.dashboard:chart-tops-inthousands":1e6===this.app.generalSettings.numberDivider?this.app.generalSettings.numberDividerDescription="amp.dashboard:chart-tops-inmillions":1e9===this.app.generalSettings.numberDivider&&(this.app.generalSettings.numberDividerDescription="amp.dashboard:chart-tops-inbillions")},openInfoWindow:function(t){var e="dash-settings-modal";this.app.modal(t,{specialClass:e,bodyEl:this.modalView.render().el}),app.translator.translateDOM($("."+e))}})},{"../../ugly/util":45,"../backbone-dash":3,"../charts/chart":9,"./chart-detail-info-modal":28,"./download":35,jquery:"jquery",underscore:"underscore"}],33:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=t("../models/chart-tops"),o=t("../models/chart-aid-predictability"),s=t("../models/chart-funding-type"),l=t("../models/chart-heatmaps"),d=t("./chart-tops"),c=t("./chart-heatmaps"),u=t("./chart-aid-predictability"),h=t("./chart-funding-type");e.exports=a.View.extend({className:"row",initialize:function(t){this.app=t.app,this.chartViews=this.collection.map(function(t){var e=t instanceof r?d:t instanceof o?u:t instanceof s?h:t instanceof l?c:null;return new e({model:t,app:this.app})},this),this.listenToOnce(this.app.filter,"apply",this.applyFilter),this.listenTo(this.collection,"change:big",this.injectBreaks),this.listenTo(this.collection,"change:bigN",this.redrawContainer)},render:function(){return this.$el.html(i(this.chartViews).map(function(t){return t.render().el})),this.injectBreaks(),this},injectBreaks:function(t){if(i(this.chartViews).reduce(function(t,e){return e.setClear(t),!t&&!e.model.get("big")},!1),t){var e=i(this.chartViews).find(function(e){return e.model===t});e&&e.render()}},redrawContainer:function(t){if(t){var e=i(this.chartViews).find(function(e){return e.model===t});e&&e.render()}}})},{"../backbone-dash":3,"../models/chart-aid-predictability":17,"../models/chart-funding-type":18,"../models/chart-heatmaps":19,"../models/chart-tops":21,"./chart-aid-predictability":27,"./chart-funding-type":29,"./chart-heatmaps":30,"./chart-tops":31,underscore:"underscore"}],34:[function(t,e,n){var i=t("../backbone-dash"),a=t("./filters"),r=t("./settings"),o=t("./share");e.exports=i.View.extend({className:"row",initialize:function(t){this.app=t.app,this.settings=new r({app:this.app}),this.filters=new a({app:this.app}),this.share=new o({app:this.app})},render:function(){return this.$el.html([this.filters.render().el,this.settings.render().el,this.share.render().el]),this}})},{"../backbone-dash":3,"./filters":37,"./settings":39,"./share":40}],35:[function(t,e,n){var i=t("underscore"),a=t("babyparse"),r=t("../../ugly/lib-load-hacks").canvg,o=t("../../ugly/util"),i=t("underscore"),s=t("../backbone-dash"),l=t("../charts/chart"),o=t("../../ugly/util"),d=i.template('<h4 data-i18n="amp.dashboard:download-preview">Preview:</h4>\n\n<!-- This \'modal\' div fixes AMP-19525: In FF when the chart is drawn (for less than a second) in \'svg-wrap\', sometimes the mouse cursor is over one of the bars and triggers the tooltip,\nthat process is not fully performed thus resulting in incomplete html which is rejected by the browser :(  -->\n<div class="modal-preview-area">\n</div>\n<div class="preview-area">\n\t<div class="svg-wrap hidden">\n  \t</div>\n  \t<div class="canvas-wrap hidden">\n  \t</div>\n  \t<div class="table-wrap hidden">\n  \t</div>\n</div>\n\n<div class="text-center">\n  <a class="btn btn-success download-chart disabled">\n    <span class="glyphicon glyphicon-download"></span>\n    <span data-i18n="amp.dashboard:download-rendering" class="word">Rendering...</span>\n  </a>\n</div>\n'),c=null,u=null;e.exports=s.View.extend({initialize:function(t){var e=this;this.app=t.app,app&&app.generalSettings&&app.generalSettings.attributes&&app.generalSettings.attributes["rtl-direction"]?this.isRtl=!0:this.isRtl=!1;var n=this.model.get("values")?this.model.get("values").length:0,a=o.calculateChartHeight(n,!0);if(this.dashChartOptions=i({}).extend(t.chartOptions,{height:a,width:$(".container").width(),trimLabels:!1,nvControls:!1}),"fragmentation"===this.model.get("chartType")){c=this.model.get("xLimit"),u=this.model.get("yLimit"),this.model.set("yLimit",-1),this.model.set("xLimit",-1),this.model.set("showFullLegends",!0);var r=i.find(this.app.view.charts.chartViews,function(t){return t.model.get("name")===e.model.get("name")});r.render();
}},render:function(){var t=this;this.$el.html(d()),this.chart=i.find(t.app.view.charts.chartViews,function(e){return e.model.get("name")===t.model.get("name")});var e=!1,n=window.setInterval(function(){$(".dash-download-modal").closest(".in").length>0&&(window.clearInterval(n),$.when(t.chart.renderedPromise,t.chart.showChartPromise).done(function(){if("fragmentation"===t.model.get("chartType")&&$(".dash-download-modal").closest(".in").on("hide.bs.modal",function(){t.model.set("yLimit",u),t.model.set("xLimit",c),t.model.set("showFullLegends",!1),t.chart.render()}),"table"===t.model.get("view"))t.renderCSV(t.$(".preview-area .table-wrap").removeClass("hidden"));else if(nv.tooltip.cleanup(),e===!1){if(e=!0,"fragmentation"===t.model.get("chartType")){var n=$($($(t.chart)[0].el).find("svg"))[0].getBBox();t.dashChartOptions.height=n.height+100,t.dashChartOptions.width=n.width+80}t.renderChart(t.$(".preview-area .svg-wrap").removeClass("hidden"),t.$(".preview-area .canvas-wrap"),t.chart)}}))},100);return this},renderChart:function(t,e,n){var a=this;i(this.app.browserIssues).findWhere({feature:"canvas"})&&this.app.viewFail(this,"Chart export requires a modern web browser");var r=this.model.get("view"),o=this.model.get("processed"),s=document.createElement("canvas"),d=l(r,o,i({}).extend(this.dashChartOptions,{height:this.dashChartOptions.height-42})).el;if(t.html(d),this.prepareCanvas(s,this.dashChartOptions.height,this.dashChartOptions.width),t.hide(),this.chartToCanvas(d,s,function(){var t=new Image;t.src=s.toDataURL("image/png"),e.html(t),$(e).removeClass("hidden"),$(".modal-preview-area").remove(),this.makeDownloadable(t.src,"chart",".png")}),"fragmentation"===a.model.get("chartType")){var c=$(".dash-download-modal").closest(".in").find(".dash-download-modal");$(t).width()>$(c).width()&&($(c).find(".preview-area").css("max-width","90%"),$(c).closest(".in").find(".preview-area").css("overflow","auto")),$(t).height()>$(window).height()&&($(c).find(".preview-area").css("max-height",$(window).height()-270+"px"),$(c).closest(".in").find(".preview-area").css("overflow","auto"))}},prepareCanvas:function(t,e,n){var i=this,a=app.settingsWidget.definitions.findCurrencyById(i.model.get("currency")),r=void 0!==a?a.value:"",s="",l=this.model.get("adjtype"),d="";l&&(d=this.chart.$el.find(".ftype-options option:selected").text()),i.isRtl?(s=r+" "+(void 0!==this.model.get("sumarizedTotal")?o.translateLanguage(this.model.get("sumarizedTotal"))+" :  ":" "),s+=d):(s=(void 0!==this.model.get("sumarizedTotal")?": "+o.translateLanguage(this.model.get("sumarizedTotal"))+" ":" ")+r,s=d+s),t.setAttribute("width",n),t.setAttribute("height",e);var c=t.getContext("2d");c.beginPath(),c.rect(0,0,n,e),c.fillStyle="#fff",c.fill(),c.fillStyle="#163f66",c.font='bold 22px "Open Sans"';var u=this.model.get("title"),h=10,p="",f=10,m="left",g=n-10,v="right",y="left";i.isRtl&&(h=n-u.length,c.textAlign="right",f=n-10,g=10,v="left",y="left"),m=p,c.fillText(u.toUpperCase(),h,32),c.fillStyle="#333","fragmentation"===i.model.get("chartType")?(c.font='normal 14px "Open Sans"',c.textAlign=m,c.fillText(d,f,50)):(c.textAlign=v,c.fillText(s,g,32),c.textAlign=y),c.font='normal 12px "sans-serif"',c.textAlign="start",$(".modal.in .modal-dialog").width(n+60)},chartToCanvas:function(t,e,n){var a=this;if("fragmentation"===this.model.get("chartType")){var o="rect.bordered {stroke: #E6E6E6;stroke-width: 2px;} text.mono {font-size: 9pt;font-family: Arial;fill: #000;}",s=document.createElement("style");s.setAttribute("type","text/css"),s.innerHTML="<![CDATA[\n"+o+"\n]]>",t.getElementsByTagName("defs")[0].appendChild(s)}var l=i(n).bind(this);window.setTimeout(function(){this.app.tryTo(function(){this.isRtl&&$(".preview-area .svg-wrap .nv-group .nv-bar text").each(function(t,e){var n=/[-]{0,1}[\d]*[\.]{0,1}[\d]+/,i=/[^0-9.]/;if(this.textContent.match(n)&&this.textContent.match(i)){var a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttributeNS(null,"x",parseFloat(e.getAttributeNS(null,"x"))-20),a.setAttributeNS(null,"y",e.getAttributeNS(null,"y"));var r=document.createTextNode(this.textContent.match(i)[0]);a.appendChild(r),this.parentNode.appendChild(a),this.textContent=this.textContent.match(n)[0]}}),r(e,t.parentNode.innerHTML,{offsetY:"fragmentation"!==a.model.get("chartType")?42:65,ignoreDimensions:!0,ignoreClear:!0,ignoreMouse:!0,renderCallback:l})},this)}.bind(this),1500)},renderCSV:function(t){var e,n,r,s,l=this,d=app.settingsWidget.definitions.findCurrencyById(l.model.get("currency")).value,c=this.model.get("processed"),u=d,h=this.model.get("adjtype")||!1,l=this,p=i(c).pluck("key");"fragmentation"!==l.model.get("chartType")?e=i(c).chain().pluck("values").transpose().map(function(t){return i(t).reduce(function(t,e){return t.push(e.y),t},[t[0].x])}).map(function(t){var e="";return t.push(u||""),h&&(e=l.chart.$el.find(".ftype-options option:selected").text(),t.push(e)),t}).value():(e=i.map(l.model.get("matrix"),function(t,e){return i.map(t,function(t,n){return[l.model.get("yDataSet")[e],l.model.get("xDataSet")[n],l.model.get("matrix")[e][n]?l.model.get("matrix")[e][n].dv:"",l.model.get("matrix")[e][n]?l.model.get("matrix")[e][n].p:""]})}),e=[].concat.apply([],e),e=i.each(e,function(t){if(t.push(u),h){var e=l.chart.$el.find(".ftype-options option:selected").text();t.push(e)}})),n=[];var f=this.app.translator.translateSync("amp.dashboard:download-amount","Amount"),m=this.app.translator.translateSync("amp.dashboard:currency","Currency"),g=this.app.translator.translateSync("amp.dashboard:percentage","Percentage"),v=this.app.translator.translateSync("amp.dashboard:type","Type"),y=this.app.translator.translateSync("amp.dashboard:year","Year");if(this.model.url.indexOf("/tops")>-1)l.isRtl?(n.push(v),n.push(m),n.push(f),n.push(this.model.get("title"))):(n.push(this.model.get("title")),n.push(f),n.push(m),n.push(v));else{if(this.model.url.indexOf("/aid-predictability")>-1)n.push(y),i.each(p,function(t){n.push(t)}),n.push(m);else if(this.model.url.indexOf("/ftype")>-1)n.push(y),i.each(p,function(t){n.push(t)}),n.push(m),n.push(v);else if("fragmentation"===this.model.get("chartType")){var b=i.find(l.model.get("heatmap_config").models[0].get("columns"),function(t){return t.origName===l.model.get("summary")[0]}).name,x=i.find(l.model.get("heatmap_config").models[0].get("columns"),function(t){return t.origName===l.model.get("summary")[1]}).name;n.push(b),n.push(x),n.push(f),n.push(g),n.push(m),n.push(v)}l.isRtl&&n.reverse()}l.isRtl&&e.forEach(function(t){t.reverse()}),e.unshift(n),r=a.unparse(e,{delimiter:";",encoding:"utf-16",quotes:!0}),s=document.createElement("textarea"),s.setAttribute("class","csv-preview"),s.value=r,t.html(s),this.app.hasIssue("download")||(r=o.textAsDataURL(r)),window.setTimeout(i(function(){this.makeDownloadable(r,"data",".csv")}).bind(this),100)},makeDownloadable:function(t,e,n){var i=["amp.dashboard:chart-",this.model.get("name").replace(/ /g,"")].join(""),a=app.translator.translateSync(i,this.model.get("name")),r=a+n,o=this.$(".download-chart").removeClass("disabled");o.find(".word").text("Download "+e).attr("data-i18n","amp.dashboard:download-download-"+e),app.translator.translateDOM(o),this.app.hasIssue("download")?this.app.hasIssue("flash")?this.app.report("Your browser is missing features to initiate the download",['You might be able to save this chart manually by right-clicking the preview and selecting "Save Picture As...']):this.app.tryTo(function(){window.Downloadify.create(o[0],{swf:"/TEMPLATE/ampTemplate/commonMedia/downloadify.swf",downloadImage:"/TEMPLATE/ampTemplate/commonMedia/download-button-states.png?rev=4",transparent:!0,width:176,height:34,filename:r,data:t.replace("data:text/plain;base64,//","").replace("data:image/png;base64,",""),dataType:".csv"===n?"string":"base64",append:!0,onError:function(){this.app.report("Could not download the file.")}})},this):this.$(".download-chart").attr("href",t).attr("download",r),n.indexOf("csv")!==-1&&$(".modal-preview-area").remove()}})},{"../../ugly/lib-load-hacks":41,"../../ugly/util":45,"../backbone-dash":3,"../charts/chart":9,babyparse:46,underscore:"underscore"}],36:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=i.template('<div class="container">\n  <header class="spaced text-center">\n    <h2>\n      The application encountered an\n      <span class="text-danger">error</span>\n      <small>:(</small>\n    </h2>\n    <p><%= err %></p>\n  </header>\n</div>\n');e.exports=a.View.extend({initialize:function(t){this.app=t.app,this.err=t.err},render:function(){return this.$el.html(r({err:this.err})),this}})},{"../backbone-dash":3,underscore:"underscore"}],37:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=i.template('<div class="col-xs-12 col-md-5">\n  <div class="panel">\n    <div class="panel-body">\n      <button type="button" class="btn btn-sm btn-default pull-right show-filters">\n        <span class="glyphicon glyphicon-edit"></span>\n        <span data-i18n="amp.dashboard:filters-edit">Edit filters</span>\n      </button>\n      <h3 class="inline-heading" data-i18n="amp.common:title-filters">Filters</h3>\n      <div class="applied-filters">\n        <em data-i18n="amp.common:filters-loading">Loading...</em>\n      </div>\n    </div>\n  </div>\n</div>\n<div id="filter-popup"></div>\n'),o=i.template('<% if (!countApplied) { %>\n  <em data-i18n="amp.dashboard:filters-none-applied">No filters applied</em>\n<% } else { %>\n  <span>\n    <button class="btn btn-default btn-sm show-filter-details">\n      <span class="glyphicon glyphicon-eye-open"></span>\n      <span data-i18n="amp.dashboard:filters-show-settings">Show filter settings</span>\n      (<b><%= countApplied %></b>)\n    </button>\n  </span>\n<% } %>\n'),s=i.template('<div>\n  <h4 class="inline-heading" data-i18n="amp.dashboard:filters-active">Active Filters</h4>\n  <button type="button" class="btn btn-sm btn-default hide-filter-details">\n    <span class="glyphicon glyphicon-eye-close"></span>\n    <span data-i18n="amp.dashboard:filters-hide-details">Hide filter details</span>\n  </button>\n</div>\n<% _(applied).each(function(filter) { %>\n  <h5>\n    <a href="#filter-detail-<%= filter.id %>" data-toggle="collapse" aria-expanded="false"><%= filter.name %></a>\n    (<%= filter.detail.length %>)\n  </h5>\n  <ul id="filter-detail-<%= filter.id %>" class="collapse">\n    <% _(filter.detail).each(function(detail) { %>\n      <li><%= detail %></li>\n    <% }) %>\n  </ul>\n<% }) %>');t("../../../../../../../reamp/tools/log")("amp:dashboards:filters:view");e.exports=a.View.extend({events:{"click .show-filters":"showFilter","click .show-filter-details":"showFilterDetails","click .hide-filter-details":"hideFilterDetails"},initialize:function(t){var e=this;this.finishedFirstLoad=!1,this.app=t.app,this.listenTo(this.app.filter,"cancel",this.hideFilter),this.listenTo(this.app.filter,"apply",this.applyFilter),this.app.generalSettings.load().done(i(function(){this.app.filter.loaded.done(i(function(){this.app.state.register(this,"filters",{get:i(function(){return this.app.filter.serialize()}).bind(this),set:i(function(t){i.isEmpty(t)&&e.app.filter.extractDates(e.app.generalSettings,t,"dashboard-default-min-date","dashboard-default-max-date"),this.app.filter.deserialize(t),this.app.filter.finishedFirstLoad=!0}).bind(this),empty:{}})}).bind(this))}).bind(this))},render:function(){return this.$el.html(r()),this.app.filter.setElement(this.el.querySelector("#filter-popup")),this.hideFilter(),this.app.filter.loaded.done(i(this.renderApplied).bind(this)).fail(i(function(){this.$(".applied-filters").html('<strong class="text-danger filters-err">Failed to load filters</strong> <a href="" class="btn btn-warning btn-sm"><span class="glyphicon glyphicon-refresh"></span> Refresh page</a>'),this.$("button").addClass("disabled")}).bind(this)),this},renderApplied:function(){var t=this.app.filter.serializeToModels(),e=i(t.filters).keys().length;this.$(".applied-filters").html(o({countApplied:e})),this.app.translator.translateDOM(this.el)},showFilter:function(){this.app.filter.showFilters(),this.$("#filter-popup").show()},hideFilter:function(){this.$("#filter-popup").hide()},applyFilter:function(){this.hideFilter(),this.renderApplied()},showFilterDetails:function(){var t=this,e=this.app.filter.serializeToModels(),n=i(e.filters).map(function(n,a){var r=e.filters[a];return"YEAR-SINGLE-VALUE"===r.modelType||"DATE-RANGE-VALUES"===r.modelType?t.getAppliedDateObject(e,a):{name:n.filterName||a,id:a.replace(/[^\w]/g,""),detail:i(n).map(function(t){return void 0!==t.attributes?t.get("name"):t!==a&&t!==n.filterName?t:void 0})}});this.$(".applied-filters").html(s({applied:n})),this.app.translator.translateDOM(this.el)},getAppliedDateObject:function(t,e){var n=t.filters[e],i="",a=n.filterName?n.filterName:e;i="date"===e?app.translator.translateSync("amp.dashboard:date-range","Date Range"):"computed-year"===e?app.translator.translateSync("amp.dashboard:computedYear","Computed Year"):app.translator.translateSync("amp.dashboard:"+a.replace(/[^\w]/g,"-"),a);var r="YEAR-SINGLE-VALUE"===n.modelType?n.year:this.app.filter.formatDate(n.start)+"&mdash;"+this.app.filter.formatDate(n.end);return{id:e.replace(/[^\w]/g,"-"),name:i,detail:[r]}},hideFilterDetails:function(){this.renderApplied()}})},{"../../../../../../../reamp/tools/log":101,"../backbone-dash":3,underscore:"underscore"}],38:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=(t("amp-state/index").StateLoadError,t("./controls")),o=t("./charts"),s=t("../models/charts-collection"),l=t("amp-boilerplate"),d=t("../models/chart-heatmaps"),c=t("../models/chart-tops"),u=t("../models/chart-aid-predictability"),h=t("../models/chart-funding-type"),p=i.template('<div class="container">\n</div>\n'),f=i.template('<div class="modal fade" data-keyboard="false" data-backdrop="static" id="<%= m.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-dialog <%= m.specialClass %>">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span data-i18n="amp.dashboard:close" class="sr-only">Close</span></button>\n        <h4 class="modal-title text-<%= m.tone %>" data-i18n="<%= m.i18nTitle %>"><%= m.title %></h4>\n      </div>\n      <div class="modal-body">\n        <% if (m.content) { %>\n          <%= m.content %>\n        <% } %>\n        <% if (m.messages) { %>\n          <% _(m.messages).each(function(message) { %>\n            <p><%= message %></p>\n          <% }) %>\n        <% } %>\n      </div>      \n    </div>\n  </div>\n</div>\n'),m=t("../models/enabled-charts-collection"),g=t("../models/heatmaps-config-collection");e.exports=a.View.extend({initialize:function(t){this.app=t.app,this.app.user.fetch(),this.controls=new r({app:this.app});var e=new m;e.fetchData();var n=new g;n.fetchData(),void 0!==e.models[0].get("error")&&(window.location="/");var a=[];i.find(e.models[0].get("DASHBOARDS"),function(t){return"Top Donors"===t})&&a.push(new c({name:"Top Donor Agencies",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/do"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Top Donor Group"===t})&&a.push(new c({name:"Top Donor Groups",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/dg"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Top Regions"===t})&&a.push(new c({name:"Top Regions",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/re"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Top Sectors"===t})&&a.push(new c({name:"Top Sectors",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/ps"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Aid Predictability"===t})&&a.push(new u({name:"Aid Predictability"},{app:this.app,url:"/rest/dashboard/aid-predictability"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Funding Type"===t})&&a.push(new h({name:"Funding Type"},{app:this.app,url:"/rest/dashboard/ftype"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Responsible Organizations"===t})&&a.push(new c({name:"Responsible Organizations",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/ro"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Beneficiary Agencies"===t})&&a.push(new c({name:"Beneficiary Agencies",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/ba"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Executing Agencies"===t})&&a.push(new c({name:"Executing Agencies",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/ea"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Implementing Agencies"===t})&&a.push(new c({name:"Implementing Agencies",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/ia"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Peace-building and State-building Goals"===t})&&a.push(new c({name:"Peace-building and State-building Goals",big:!0,showCategoriesInfo:!0,view:"pie"},{app:this.app,url:"/rest/dashboard/tops/ndd"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Sector Fragmentation"===t})&&a.push(new d({name:"HeatMap by Sector and Donor Group",title:"Sector Fragmentation",big:!0,view:"heatmap",heatmap_config:n,heatmap_type:"sector"},{app:this.app,url:"/rest/dashboard/heat-map/sec"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Location Fragmentation"===t})&&a.push(new d({name:"HeatMap by Location and Donor Group",title:"Location Fragmentation",big:!0,view:"heatmap",heatmap_config:n,heatmap_type:"location"},{app:this.app,url:"/rest/dashboard/heat-map/loc"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Program Fragmentation"===t})&&a.push(new d({name:"HeatMap by Program and Donor Group",title:"Program Fragmentation",big:!0,view:"heatmap",heatmap_config:n,heatmap_type:"program"},{app:this.app,url:"/rest/dashboard/heat-map/prg"}));var p=new s(a,{app:this.app});this.charts=new o({app:this.app,collection:p}),this.headerWidget=new l.layout({caller:"DASHBOARD"})},render:function(){return this.$el.html(p()),this.$(".container").html([this.controls.render().el,this.charts.render().el]),this},modal:function(t,e){e=i({title:t,id:i.uniqueId("modal")}).extend(e),this.$el.parent().append(f({m:e}));var n=this.$el.parent().find("#"+e.id);return e.bodyEl&&n.find(".modal-body").html(e.bodyEl),n.modal(),n[0]}})},{"../backbone-dash":3,"../models/chart-aid-predictability":17,"../models/chart-funding-type":18,"../models/chart-heatmaps":19,"../models/chart-tops":21,"../models/charts-collection":22,"../models/enabled-charts-collection":23,"../models/heatmaps-config-collection":24,"./charts":33,"./controls":34,"amp-boilerplate":49,"amp-state/index":98,underscore:"underscore"}],39:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=i.template('<div class="col-xs-12 col-sm-6 col-md-3">\n  <div class="panel">\n    <div class="panel-body">\n      <h3 data-i18n="amp.dashboard:dashboard-settings" class="inline-heading">Settings</h3>\n      <button type="button" class="btn btn-sm btn-default pull-right dash-settings-button">\n        <span class="glyphicon glyphicon-edit"></span>\n        <span data-i18n="amp.dashboard:settings-edit">edit settings</span>\n      </button>\n    </div>\n  </div>\n</div>\n<div id="amp-settings" style="display:none;"></div>\n');e.exports=a.View.extend({events:{"click .dash-settings-button":"editSettings"},initialize:function(t){this.app=t.app,this.app.settingsWidget.definitions.loaded.done(i(function(){this.app.state.register(this,"settings",{get:this.app.settingsWidget.toAPIFormat,set:this.app.settingsWidget.restoreFromSaved})}).bind(this))},render:function(){return this.$el.html(r()),this.app.settingsWidget.setElement(this.el.querySelector("#amp-settings")),this},editSettings:function(){var t=this;this.app.settingsWidget.show(),this.$("#amp-settings").show(),this.app.settingsWidget.on("close",function(){t.$("#amp-settings").hide()}),this.app.settingsWidget.on("applySettings",function(){t.$("#amp-settings").hide()})}})},{"../backbone-dash":3,underscore:"underscore"}],40:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=i.template('<div class="col-xs-12 col-sm-6 col-md-4">\n  <div class="panel">\n    <div class="panel-body">\n      <h3 data-i18n="amp.dashboard:share-dashboard-top" class="inline-heading">Share</h3>\n      <button type="button" class="btn btn-sm btn-default pull-right dash-share-button">\n        <span class="glyphicon glyphicon-link"></span>\n        <span data-i18n="amp.dashboard:share-link">link</span>\n      </button>\n    </div>\n  </div>\n</div>\n\n<div class="dash-share-modal modal fade" id="<%= details.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="panel panel-primary">\n      <div class="panel-heading fix-title-height">\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span data-i18n="amp.dashboard:close" class="sr-only">Close</span></button>\n        <span data-i18n="amp.dashboard:share-dashboard">Share this dashboard view</span>\n      </div>\n      <div class="panel-body">\n        <form role="form">\n          <label data-i18n="amp.dashboard:share-link" for="dash-share-url">Link</label>\n          <input type="url" class="form-control" id="dash-share-url" />\n        </form>\n      </div>\n      <div class="panel-footer">\n        <button type="button" class="btn btn-primary" data-i18n="amp.dashboard:close" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n');e.exports=a.View.extend({events:{"click .dash-share-button":"share"},initialize:function(t){this.app=t.app},render:function(){return this.$el.html(r({details:{}})),this},share:function(){var t=app.translator.translateSync("amp.dashboard:saving-state","Saving dashboard state, please wait...");this.$("#dash-share-url").attr("disabled","disabled").val(t);var e=this.app.state.freeze();this.listenToOnce(this.app.savedDashes,"request",function(t,e){e.done(i(function(){var e=t.get("id");this.app.url.hash(this.app.state.toHash(e),{silent:!0}),this.$("#dash-share-url").removeAttr("disabled").val(this.app.url.full())}).bind(this)).fail(i(function(){this.$("#dash-share-url").val("Error: could not save dashboard for sharing.")}).bind(this))}),this.app.savedDashes.create({title:"Dashboard",description:"Saved dashboard",stateBlob:e},{app:this.app}),this.$(".dash-share-modal").modal()}})},{"../backbone-dash":3,underscore:"underscore"}],41:[function(t,e,n){t("../../../node_modules/nvd3/build/nv.d3"),t("./underscore-transpose"),window.RGBColor=t("./lib-src/rgbcolor"),t("./lib-src/canvg"),e.exports={canvg:window.canvg}},{"../../../node_modules/nvd3/build/nv.d3":48,"./lib-src/canvg":42,"./lib-src/rgbcolor":43,"./underscore-transpose":44}],42:[function(t,e,n){!function(){function t(t){var e={opts:t};e.FRAMERATE=30,e.MAX_VIRTUAL_PIXELS=3e4,e.log=function(t){},1==e.opts.log&&"undefined"!=typeof console&&(e.log=function(t){console.log(t)}),e.init=function(t){var n=0;e.UniqueId=function(){return n++,"canvg"+n},e.Definitions={},e.Styles={},e.Animations=[],e.Images=[],e.ctx=t,e.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},e.init(),e.ImagesLoaded=function(){for(var t=0;t<e.Images.length;t++)if(!e.Images[t].loaded)return!1;return!0},e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},e.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},e.ajax=function(t){var e;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e?(e.open("GET",t,!1),e.send(null),e.responseText):null},e.parseXml=function(t){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var e=new Windows.Data.Xml.Dom.XmlDocument,n=new Windows.Data.Xml.Dom.XmlLoadSettings;return n.prohibitDtd=!1,e.loadXml(t,n),e}if(window.DOMParser){var i=new DOMParser;return i.parseFromString(t,"text/xml")}t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},e.Property=function(t,e){this.name=t,this.value=e},e.Property.prototype.getValue=function(){return this.value},e.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},e.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},e.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},e.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},e.Property.prototype.addOpacity=function(t){var n=this.value;if(null!=t.value&&""!=t.value&&"string"==typeof this.value){var i=new RGBColor(this.value);i.ok&&(n="rgba("+i.r+", "+i.g+", "+i.b+", "+t.numValue()+")")}return new e.Property(this.name,n)},e.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),e.Definitions[t]},e.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},e.Property.prototype.getFillStyleDefinition=function(t,n){var i=this.getDefinition();if(null!=i&&i.createGradient)return i.createGradient(e.ctx,t,n);if(null!=i&&i.createPattern){if(i.getHrefAttribute().hasValue()){var a=i.attribute("patternTransform");i=i.getHrefAttribute().getDefinition(),a.hasValue()&&(i.attribute("patternTransform",!0).value=a.value)}return i.createPattern(e.ctx,t)}return null},e.Property.prototype.getDPI=function(t){return 96},e.Property.prototype.getEM=function(t){var n=12,i=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);return i.hasValue()&&(n=i.toPixels(t)),n},e.Property.prototype.getUnits=function(){var t=this.value+"";return t.replace(/[0-9\.\-]/g,"")},e.Property.prototype.toPixels=function(t,n){if(!this.hasValue())return 0;var i=this.value+"";if(i.match(/em$/))return this.numValue()*this.getEM(t);if(i.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(i.match(/px$/))return this.numValue();if(i.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(i.match(/pc$/))return 15*this.numValue();if(i.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(i.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(i.match(/in$/))return this.numValue()*this.getDPI(t);if(i.match(/%$/))return this.numValue()*e.ViewPort.ComputeSize(t);var a=this.numValue();return n&&a<1?a*e.ViewPort.ComputeSize(t):a},e.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():t.match(/ms$/)?this.numValue():this.numValue()},e.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var n={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return e.Property.prototype.toTextBaseline=function(){return this.hasValue()?n[this.value]:null},e.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,n,i,a,r,o){var s=null!=o?this.Parse(o):this.CreateFont("","","","","",e.ctx.font);return{fontFamily:r||s.fontFamily,fontSize:a||s.fontSize,fontStyle:t||s.fontStyle,fontWeight:i||s.fontWeight,fontVariant:n||s.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(n){for(var i={},a=e.trim(e.compressSpaces(n||"")).split(" "),r={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},o="",s=0;s<a.length;s++)r.fontStyle||t.Styles.indexOf(a[s])==-1?r.fontVariant||t.Variants.indexOf(a[s])==-1?r.fontWeight||t.Weights.indexOf(a[s])==-1?r.fontSize?"inherit"!=a[s]&&(o+=a[s]):("inherit"!=a[s]&&(i.fontSize=a[s].split("/")[0]),r.fontStyle=r.fontVariant=r.fontWeight=r.fontSize=!0):("inherit"!=a[s]&&(i.fontWeight=a[s]),r.fontStyle=r.fontVariant=r.fontWeight=!0):("inherit"!=a[s]&&(i.fontVariant=a[s]),r.fontStyle=r.fontVariant=!0):("inherit"!=a[s]&&(i.fontStyle=a[s]),r.fontStyle=!0);return""!=o&&(i.fontFamily=o),i}},e.ToNumberArray=function(t){for(var n=e.trim(e.compressSpaces((t||"").replace(/,/g," "))).split(" "),i=0;i<n.length;i++)n[i]=parseFloat(n[i]);return n},e.Point=function(t,e){this.x=t,this.y=e},e.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},e.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},e.CreatePoint=function(t){var n=e.ToNumberArray(t);return new e.Point(n[0],n[1])},e.CreatePath=function(t){for(var n=e.ToNumberArray(t),i=[],a=0;a<n.length;a+=2)i.push(new e.Point(n[a],n[a+1]));return i},e.BoundingBox=function(t,e,n,a){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,n,i,a,r){var o=t+2/3*(n-t),s=e+2/3*(i-e),l=o+1/3*(a-t),d=s+1/3*(r-e);this.addBezierCurve(t,e,o,l,s,d,a,r)},this.addBezierCurve=function(t,e,n,a,r,o,s,l){var d=[t,e],c=[n,a],u=[r,o],h=[s,l];for(this.addPoint(d[0],d[1]),this.addPoint(h[0],h[1]),i=0;i<=1;i++){var p=function(t){return Math.pow(1-t,3)*d[i]+3*Math.pow(1-t,2)*t*c[i]+3*(1-t)*Math.pow(t,2)*u[i]+Math.pow(t,3)*h[i]},f=6*d[i]-12*c[i]+6*u[i],m=-3*d[i]+9*c[i]-9*u[i]+3*h[i],g=3*c[i]-3*d[i];if(0!=m){var v=Math.pow(f,2)-4*g*m;if(!(v<0)){var y=(-f+Math.sqrt(v))/(2*m);0<y&&y<1&&(0==i&&this.addX(p(y)),1==i&&this.addY(p(y)));var b=(-f-Math.sqrt(v))/(2*m);0<b&&b<1&&(0==i&&this.addX(p(b)),1==i&&this.addY(p(b)))}}else{if(0==f)continue;var x=-g/f;0<x&&x<1&&(0==i&&this.addX(p(x)),1==i&&this.addY(p(x)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,a)},e.Transform=function(t){var n=this;this.Type={},this.Type.translate=function(t){this.p=e.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var n=e.ToNumberArray(t);this.angle=new e.Property("angle",n[0]),this.cx=n[1]||0,this.cy=n[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy);
},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=e.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=e.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],n=this.m[2],i=this.m[4],a=this.m[1],r=this.m[3],o=this.m[5],s=0,l=0,d=1,c=1/(e*(r*d-o*l)-n*(a*d-o*s)+i*(a*l-r*s));t.transform(c*(r*d-o*l),c*(o*s-a*d),c*(i*l-n*d),c*(e*d-i*s),c*(n*o-i*r),c*(i*a-e*o))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=n.Type.matrix,this.base(t),this.angle=new e.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var i=e.trim(e.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),a=0;a<i.length;a++){var r=e.trim(i[a].split("(")[0]),o=i[a].split("(")[1].replace(")",""),s=new this.Type[r](o);s.type=r,this.transforms.push(s)}},e.AspectRatio=function(t,n,i,a,r,o,s,l,d,c){n=e.compressSpaces(n),n=n.replace(/^defer\s/,"");var u=n.split(" ")[0]||"xMidYMid",h=n.split(" ")[1]||"meet",p=i/a,f=r/o,m=Math.min(p,f),g=Math.max(p,f);"meet"==h&&(a*=m,o*=m),"slice"==h&&(a*=g,o*=g),d=new e.Property("refX",d),c=new e.Property("refY",c),d.hasValue()&&c.hasValue()?t.translate(-m*d.toPixels("x"),-m*c.toPixels("y")):(u.match(/^xMid/)&&("meet"==h&&m==f||"slice"==h&&g==f)&&t.translate(i/2-a/2,0),u.match(/YMid$/)&&("meet"==h&&m==p||"slice"==h&&g==p)&&t.translate(0,r/2-o/2),u.match(/^xMax/)&&("meet"==h&&m==f||"slice"==h&&g==f)&&t.translate(i-a,0),u.match(/YMax$/)&&("meet"==h&&m==p||"slice"==h&&g==p)&&t.translate(0,r-o)),"none"==u?t.scale(p,f):"meet"==h?t.scale(m,m):"slice"==h&&t.scale(g,g),t.translate(null==s?0:-s,null==l?0:-l)},e.Element={},e.EmptyProperty=new e.Property("EMPTY",""),e.Element.ElementBase=function(t){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(t,n){var i=this.attributes[t];return null!=i?i:(1==n&&(i=new e.Property(t,""),this.attributes[t]=i),i||e.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if(t.match(/:href$/))return this.attributes[t];return e.EmptyProperty},this.style=function(t,n,i){var a=this.styles[t];if(null!=a)return a;var r=this.attribute(t);if(null!=r&&r.hasValue())return this.styles[t]=r,r;if(1!=i){var o=this.parent;if(null!=o){var s=o.style(t);if(null!=s&&s.hasValue())return s}}return 1==n&&(a=new e.Property(t,""),this.styles[t]=a),a||e.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.attribute("mask").hasValue()){var e=this.attribute("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,n){var i=t;n&&(i=e.CreateElement(t)),i.parent=this,"title"!=i.type&&this.children.push(i)},null!=t&&1==t.nodeType){for(var n=0;n<t.attributes.length;n++){var i=t.attributes[n];this.attributes[i.nodeName]=new e.Property(i.nodeName,i.nodeValue)}var a=e.Styles[t.nodeName];if(null!=a)for(var r in a)this.styles[r]=a[r];if(this.attribute("class").hasValue())for(var o=e.compressSpaces(this.attribute("class").value).split(" "),s=0;s<o.length;s++){if(a=e.Styles["."+o[s]],null!=a)for(var r in a)this.styles[r]=a[r];if(a=e.Styles[t.nodeName+"."+o[s]],null!=a)for(var r in a)this.styles[r]=a[r]}if(this.attribute("id").hasValue()){var a=e.Styles["#"+this.attribute("id").value];if(null!=a)for(var r in a)this.styles[r]=a[r]}if(this.attribute("style").hasValue())for(var a=this.attribute("style").value.split(";"),n=0;n<a.length;n++)if(""!=e.trim(a[n])){var l=a[n].split(":"),r=e.trim(l[0]),d=e.trim(l[1]);this.styles[r]=new e.Property(r,d)}this.attribute("id").hasValue()&&null==e.Definitions[this.attribute("id").value]&&(e.Definitions[this.attribute("id").value]=this);for(var n=0;n<t.childNodes.length;n++){var c=t.childNodes[n];if(1==c.nodeType&&this.addChild(c,!0),this.captureTextNodes&&(3==c.nodeType||4==c.nodeType)){var u=c.nodeValue||c.text||"";""!=e.trim(e.compressSpaces(u))&&this.addChild(new e.Element.tspan(c),!1)}}}},e.Element.RenderedElementBase=function(t){this.base=e.Element.ElementBase,this.base(t),this.setContext=function(t){if(this.style("fill").isUrlDefinition()){var n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=n&&(t.fillStyle=n)}else if(this.style("fill").hasValue()){var i=this.style("fill");"currentColor"==i.value&&(i.value=this.style("color").value),t.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value}if(this.style("fill-opacity").hasValue()){var i=new e.Property("fill",t.fillStyle);i=i.addOpacity(this.style("fill-opacity")),t.fillStyle=i.value}if(this.style("stroke").isUrlDefinition()){var n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=n&&(t.strokeStyle=n)}else if(this.style("stroke").hasValue()){var a=this.style("stroke");"currentColor"==a.value&&(a.value=this.style("color").value),t.strokeStyle="none"==a.value?"rgba(0,0,0,0)":a.value}if(this.style("stroke-opacity").hasValue()){var a=new e.Property("stroke",t.strokeStyle);a=a.addOpacity(this.style("stroke-opacity")),t.strokeStyle=a.value}if(this.style("stroke-width").hasValue()){var r=this.style("stroke-width").toPixels();t.lineWidth=0==r?.001:r}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var o=e.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof t.setLineDash?t.setLineDash(o):"undefined"!=typeof t.webkitLineDash?t.webkitLineDash=o:"undefined"==typeof t.mozDash||1==o.length&&0==o[0]||(t.mozDash=o);var s=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof t.lineDashOffset?t.lineDashOffset=s:"undefined"!=typeof t.webkitLineDashOffset?t.webkitLineDashOffset=s:"undefined"!=typeof t.mozDashOffset&&(t.mozDashOffset=s)}if("undefined"!=typeof t.font&&(t.font=e.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var l=new e.Transform(this.attribute("transform").value);l.apply(t)}if(this.style("clip-path",!1,!0).hasValue()){var d=this.style("clip-path",!1,!0).getDefinition();null!=d&&d.apply(t)}this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},e.Element.RenderedElementBase.prototype=new e.Element.ElementBase,e.Element.PathElementBase=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new e.BoundingBox},this.renderChildren=function(t){this.path(t),e.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var n=this.getMarkers();if(null!=n){if(this.style("marker-start").isUrlDefinition()){var i=this.style("marker-start").getDefinition();i.render(t,n[0][0],n[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var i=this.style("marker-mid").getDefinition(),a=1;a<n.length-1;a++)i.render(t,n[a][0],n[a][1]);if(this.style("marker-end").isUrlDefinition()){var i=this.style("marker-end").getDefinition();i.render(t,n[n.length-1][0],n[n.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},e.Element.PathElementBase.prototype=new e.Element.RenderedElementBase,e.Element.svg=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),e.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,"undefined"!=typeof t.font&&"undefined"!=typeof window.getComputedStyle&&(t.font=window.getComputedStyle(t.canvas).getPropertyValue("font")),this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=e.ViewPort.width(),i=e.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");var a=0,r=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(a=-this.attribute("refX").toPixels("x"),r=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(a,r),t.lineTo(n,r),t.lineTo(n,i),t.lineTo(a,i),t.closePath(),t.clip())}if(e.ViewPort.SetCurrent(n,i),this.attribute("viewBox").hasValue()){var o=e.ToNumberArray(this.attribute("viewBox").value),s=o[0],l=o[1];n=o[2],i=o[3],e.AspectRatio(t,this.attribute("preserveAspectRatio").value,e.ViewPort.width(),n,e.ViewPort.height(),i,s,l,this.attribute("refX").value,this.attribute("refY").value),e.ViewPort.RemoveCurrent(),e.ViewPort.SetCurrent(o[2],o[3])}}},e.Element.svg.prototype=new e.Element.RenderedElementBase,e.Element.rect=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y"),o=this.attribute("rx").toPixels("x"),s=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(s=o),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(o=s),o=Math.min(o,a/2),s=Math.min(s,r/2),null!=t&&(t.beginPath(),t.moveTo(n+o,i),t.lineTo(n+a-o,i),t.quadraticCurveTo(n+a,i,n+a,i+s),t.lineTo(n+a,i+r-s),t.quadraticCurveTo(n+a,i+r,n+a-o,i+r),t.lineTo(n+o,i+r),t.quadraticCurveTo(n,i+r,n,i+r-s),t.lineTo(n,i+s),t.quadraticCurveTo(n,i,n+o,i),t.closePath()),new e.BoundingBox(n,i,n+a,i+r)}},e.Element.rect.prototype=new e.Element.PathElementBase,e.Element.circle=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=this.attribute("cx").toPixels("x"),i=this.attribute("cy").toPixels("y"),a=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(n,i,a,0,2*Math.PI,!0),t.closePath()),new e.BoundingBox(n-a,i-a,n+a,i+a)}},e.Element.circle.prototype=new e.Element.PathElementBase,e.Element.ellipse=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=4*((Math.sqrt(2)-1)/3),i=this.attribute("rx").toPixels("x"),a=this.attribute("ry").toPixels("y"),r=this.attribute("cx").toPixels("x"),o=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(r,o-a),t.bezierCurveTo(r+n*i,o-a,r+i,o-n*a,r+i,o),t.bezierCurveTo(r+i,o+n*a,r+n*i,o+a,r,o+a),t.bezierCurveTo(r-n*i,o+a,r-i,o+n*a,r-i,o),t.bezierCurveTo(r-i,o-n*a,r-n*i,o-a,r,o-a),t.closePath()),new e.BoundingBox(r-i,o-a,r+i,o+a)}},e.Element.ellipse.prototype=new e.Element.PathElementBase,e.Element.line=function(t){this.base=e.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new e.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new e.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var n=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y)),new e.BoundingBox(n[0].x,n[0].y,n[1].x,n[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},e.Element.line.prototype=new e.Element.PathElementBase,e.Element.polyline=function(t){this.base=e.Element.PathElementBase,this.base(t),this.points=e.CreatePath(this.attribute("points").value),this.path=function(t){var n=new e.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var i=1;i<this.points.length;i++)n.addPoint(this.points[i].x,this.points[i].y),null!=t&&t.lineTo(this.points[i].x,this.points[i].y);return n},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},e.Element.polyline.prototype=new e.Element.PathElementBase,e.Element.polygon=function(t){this.base=e.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},e.Element.polygon.prototype=new e.Element.polyline,e.Element.path=function(t){this.base=e.Element.PathElementBase,this.base(t);var n=this.attribute("d").value;n=n.replace(/,/gm," "),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),n=n.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([0-9])([+\-])/gm,"$1 $2"),n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),n=e.compressSpaces(n),n=e.trim(n),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new e.Point(0,0),this.control=new e.Point(0,0),this.current=new e.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new e.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var t=new e.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return t},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(n),this.path=function(t){var n=this.PathParser;n.reset();var i=new e.BoundingBox;for(null!=t&&t.beginPath();!n.isEnd();)switch(n.nextCommand(),n.command){case"M":case"m":var a=n.getAsCurrentPoint();for(n.addMarker(a),i.addPoint(a.x,a.y),null!=t&&t.moveTo(a.x,a.y),n.start=n.current;!n.isCommandOrEnd();){var a=n.getAsCurrentPoint();n.addMarker(a,n.start),i.addPoint(a.x,a.y),null!=t&&t.lineTo(a.x,a.y)}break;case"L":case"l":for(;!n.isCommandOrEnd();){var r=n.current,a=n.getAsCurrentPoint();n.addMarker(a,r),i.addPoint(a.x,a.y),null!=t&&t.lineTo(a.x,a.y)}break;case"H":case"h":for(;!n.isCommandOrEnd();){var o=new e.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);n.addMarker(o,n.current),n.current=o,i.addPoint(n.current.x,n.current.y),null!=t&&t.lineTo(n.current.x,n.current.y)}break;case"V":case"v":for(;!n.isCommandOrEnd();){var o=new e.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar());n.addMarker(o,n.current),n.current=o,i.addPoint(n.current.x,n.current.y),null!=t&&t.lineTo(n.current.x,n.current.y)}break;case"C":case"c":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getPoint(),d=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,d,l),i.addBezierCurve(s.x,s.y,l.x,l.y,d.x,d.y,c.x,c.y),null!=t&&t.bezierCurveTo(l.x,l.y,d.x,d.y,c.x,c.y)}break;case"S":case"s":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getReflectedControlPoint(),d=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,d,l),i.addBezierCurve(s.x,s.y,l.x,l.y,d.x,d.y,c.x,c.y),null!=t&&t.bezierCurveTo(l.x,l.y,d.x,d.y,c.x,c.y)}break;case"Q":case"q":for(;!n.isCommandOrEnd();){var s=n.current,d=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,d,d),i.addQuadraticCurve(s.x,s.y,d.x,d.y,c.x,c.y),null!=t&&t.quadraticCurveTo(d.x,d.y,c.x,c.y)}break;case"T":case"t":for(;!n.isCommandOrEnd();){var s=n.current,d=n.getReflectedControlPoint();n.control=d;var c=n.getAsCurrentPoint();n.addMarker(c,d,d),i.addQuadraticCurve(s.x,s.y,d.x,d.y,c.x,c.y),null!=t&&t.quadraticCurveTo(d.x,d.y,c.x,c.y)}break;case"A":case"a":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getScalar(),h=n.getScalar(),p=n.getScalar()*(Math.PI/180),f=n.getScalar(),m=n.getScalar(),c=n.getAsCurrentPoint(),g=new e.Point(Math.cos(p)*(s.x-c.x)/2+Math.sin(p)*(s.y-c.y)/2,-Math.sin(p)*(s.x-c.x)/2+Math.cos(p)*(s.y-c.y)/2),v=Math.pow(g.x,2)/Math.pow(u,2)+Math.pow(g.y,2)/Math.pow(h,2);v>1&&(u*=Math.sqrt(v),h*=Math.sqrt(v));var y=(f==m?-1:1)*Math.sqrt((Math.pow(u,2)*Math.pow(h,2)-Math.pow(u,2)*Math.pow(g.y,2)-Math.pow(h,2)*Math.pow(g.x,2))/(Math.pow(u,2)*Math.pow(g.y,2)+Math.pow(h,2)*Math.pow(g.x,2)));isNaN(y)&&(y=0);var b=new e.Point(y*u*g.y/h,y*-h*g.x/u),x=new e.Point((s.x+c.x)/2+Math.cos(p)*b.x-Math.sin(p)*b.y,(s.y+c.y)/2+Math.sin(p)*b.x+Math.cos(p)*b.y),w=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},k=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(w(t)*w(e))},S=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(k(t,e))},T=S([1,0],[(g.x-b.x)/u,(g.y-b.y)/h]),D=[(g.x-b.x)/u,(g.y-b.y)/h],A=[(-g.x-b.x)/u,(-g.y-b.y)/h],C=S(D,A);k(D,A)<=-1&&(C=Math.PI),k(D,A)>=1&&(C=0);var M=1-m?1:-1,_=T+M*(C/2),N=new e.Point(x.x+u*Math.cos(_),x.y+h*Math.sin(_));if(n.addMarkerAngle(N,_-M*Math.PI/2),n.addMarkerAngle(c,_-M*Math.PI),i.addPoint(c.x,c.y),null!=t){var k=u>h?u:h,E=u>h?1:u/h,P=u>h?h/u:1;t.translate(x.x,x.y),t.rotate(p),t.scale(E,P),t.arc(0,0,k,T,T+C,1-m),t.scale(1/E,1/P),t.rotate(-p),t.translate(-x.x,-x.y)}}break;case"Z":case"z":null!=t&&t.closePath(),n.current=n.start}return i},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],i=0;i<t.length;i++)n.push([t[i],e[i]]);return n}},e.Element.path.prototype=new e.Element.PathElementBase,e.Element.pattern=function(t){this.base=e.Element.ElementBase,this.base(t),this.createPattern=function(t,n){var i=this.attribute("width").toPixels("x",!0),a=this.attribute("height").toPixels("y",!0),r=new e.Element.svg;r.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value),r.attributes.width=new e.Property("width",i+"px"),r.attributes.height=new e.Property("height",a+"px"),r.attributes.transform=new e.Property("transform",this.attribute("patternTransform").value),r.children=this.children;var o=document.createElement("canvas");o.width=i,o.height=a;var s=o.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&s.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var l=-1;l<=1;l++)for(var d=-1;d<=1;d++)s.save(),s.translate(l*o.width,d*o.height),r.render(s),s.restore();var c=t.createPattern(o,"repeat");return c}},e.Element.pattern.prototype=new e.Element.ElementBase,e.Element.marker=function(t){this.base=e.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,n,i){t.translate(n.x,n.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(i),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var a=new e.Element.svg;a.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value),a.attributes.refX=new e.Property("refX",this.attribute("refX").value),a.attributes.refY=new e.Property("refY",this.attribute("refY").value),a.attributes.width=new e.Property("width",this.attribute("markerWidth").value),a.attributes.height=new e.Property("height",this.attribute("markerHeight").value),a.attributes.fill=new e.Property("fill",this.attribute("fill").valueOrDefault("black")),a.attributes.stroke=new e.Property("stroke",this.attribute("stroke").valueOrDefault("none")),a.children=this.children,a.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-i),t.translate(-n.x,-n.y)}},e.Element.marker.prototype=new e.Element.ElementBase,e.Element.defs=function(t){this.base=e.Element.ElementBase,this.base(t),this.render=function(t){}},e.Element.defs.prototype=new e.Element.ElementBase,e.Element.GradientBase=function(t){this.base=e.Element.ElementBase,this.base(t),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"stop"==i.type&&this.stops.push(i)}this.getGradient=function(){},this.createGradient=function(t,n,i){var a=this;this.getHrefAttribute().hasValue()&&(a=this.getHrefAttribute().getDefinition());var r=function(t){if(i.hasValue()){var n=new e.Property("color",t);return n.addOpacity(i).value}return t},o=this.getGradient(t,n);if(null==o)return r(a.stops[a.stops.length-1].color);for(var s=0;s<a.stops.length;s++)o.addColorStop(a.stops[s].offset,r(a.stops[s].color));if(this.attribute("gradientTransform").hasValue()){var l=e.ViewPort.viewPorts[0],d=new e.Element.rect;d.attributes.x=new e.Property("x",-e.MAX_VIRTUAL_PIXELS/3),d.attributes.y=new e.Property("y",-e.MAX_VIRTUAL_PIXELS/3),d.attributes.width=new e.Property("width",e.MAX_VIRTUAL_PIXELS),d.attributes.height=new e.Property("height",e.MAX_VIRTUAL_PIXELS);var c=new e.Element.g;c.attributes.transform=new e.Property("transform",this.attribute("gradientTransform").value),c.children=[d];var u=new e.Element.svg;u.attributes.x=new e.Property("x",0),u.attributes.y=new e.Property("y",0),u.attributes.width=new e.Property("width",l.width),u.attributes.height=new e.Property("height",l.height),u.children=[c];var h=document.createElement("canvas");h.width=l.width,h.height=l.height;var p=h.getContext("2d");return p.fillStyle=o,u.render(p),p.createPattern(h,"no-repeat")}return o}},e.Element.GradientBase.prototype=new e.Element.ElementBase,e.Element.linearGradient=function(t){this.base=e.Element.GradientBase,this.base(t),this.getGradient=function(t,e){var n="objectBoundingBox"==this.gradientUnits?e.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),a="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),r="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),o="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==r&&a==o?null:t.createLinearGradient(i,a,r,o)}},e.Element.linearGradient.prototype=new e.Element.GradientBase,e.Element.radialGradient=function(t){this.base=e.Element.GradientBase,this.base(t),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),a="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),r=i,o=a;this.attribute("fx").hasValue()&&(r="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(o="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var s="objectBoundingBox"==this.gradientUnits?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(r,o,0,i,a,s)}},e.Element.radialGradient.prototype=new e.Element.GradientBase,e.Element.stop=function(t){this.base=e.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var n=this.style("stop-color");this.style("stop-opacity").hasValue()&&(n=n.addOpacity(this.style("stop-opacity"))),this.color=n.value},e.Element.stop.prototype=new e.Element.ElementBase,e.Element.AnimateBase=function(t){this.base=e.Element.ElementBase,this.base(t),e.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue()){var i=this.attribute("type").value;n=i+"("+n+")"}this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var n=t.progress*(this.values.value.length-1),i=Math.floor(n),a=Math.ceil(n);t.from=new e.Property("from",parseFloat(this.values.value[i])),t.to=new e.Property("to",parseFloat(this.values.value[a])),t.progress=(n-i)/(a-i)}else t.from=this.from,t.to=this.to;return t}},e.Element.AnimateBase.prototype=new e.Element.ElementBase,e.Element.animate=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress;return e+this.initialUnits}},e.Element.animate.prototype=new e.Element.AnimateBase,e.Element.animateColor=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=new RGBColor(t.from.value),n=new RGBColor(t.to.value);if(e.ok&&n.ok){var i=e.r+(n.r-e.r)*t.progress,a=e.g+(n.g-e.g)*t.progress,r=e.b+(n.b-e.b)*t.progress;return"rgb("+parseInt(i,10)+","+parseInt(a,10)+","+parseInt(r,10)+")"}return this.attribute("from").value}},e.Element.animateColor.prototype=new e.Element.AnimateBase,e.Element.animateTransform=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),n=e.ToNumberArray(t.from.value),i=e.ToNumberArray(t.to.value),a="",r=0;r<n.length;r++)a+=n[r]+(i[r]-n[r])*t.progress+" ";return a}},e.Element.animateTransform.prototype=new e.Element.animate,e.Element.font=function(t){this.base=e.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(e.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)}},e.Element.font.prototype=new e.Element.ElementBase,e.Element.fontface=function(t){this.base=e.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},e.Element.fontface.prototype=new e.Element.ElementBase,e.Element.missingglyph=function(t){this.base=e.Element.path,this.base(t),this.horizAdvX=0},e.Element.missingglyph.prototype=new e.Element.path,e.Element.glyph=function(t){this.base=e.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},e.Element.glyph.prototype=new e.Element.path,e.Element.text=function(t){this.captureTextNodes=!0,this.base=e.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,
this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize);return new e.BoundingBox(t,n-i,t+Math.floor(2*i/3)*this.children[0].getText().length,n)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,e)},this.getAnchorDelta=function(t,e,n){var i=this.style("text-anchor").valueOrDefault("start");if("start"!=i){for(var a=0,r=n;r<e.children.length;r++){var o=e.children[r];if(r>n&&o.attribute("x").hasValue())break;a+=o.measureTextRecursive(t)}return-1*("end"==i?a:a/2)}return 0},this.renderChild=function(t,e,n){var i=e.children[n];i.attribute("x").hasValue()?(i.x=i.attribute("x").toPixels("x")+this.getAnchorDelta(t,e,n),i.attribute("dx").hasValue()&&(i.x+=i.attribute("dx").toPixels("x"))):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),i.attribute("dx").hasValue()&&(this.x+=i.attribute("dx").toPixels("x")),i.x=this.x),this.x=i.x+i.measureText(t),i.attribute("y").hasValue()?(i.y=i.attribute("y").toPixels("y"),i.attribute("dy").hasValue()&&(i.y+=i.attribute("dy").toPixels("y"))):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),i.attribute("dy").hasValue()&&(this.y+=i.attribute("dy").toPixels("y")),i.y=this.y),this.y=i.y,i.render(t);for(var n=0;n<i.children.length;n++)this.renderChild(t,i,n)}},e.Element.text.prototype=new e.Element.RenderedElementBase,e.Element.TextElementBase=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,n){var i=e[n],a=null;if(t.isArabic){var r="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(r="terminal"),n>0&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(r="medial"),n>0&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(r="initial"),"undefined"!=typeof t.glyphs[i]&&(a=t.glyphs[i][r],null==a&&"glyph"==t.glyphs[i].type&&(a=t.glyphs[i]))}else a=t.glyphs[i];return null==a&&(a=t.missingGlyph),a},this.renderChildren=function(t){var n=this.parent.style("font-family").getDefinition();if(null==n)""!=t.fillStyle&&t.fillText(e.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(e.compressSpaces(this.getText()),this.x,this.y);else{var i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),a=this.parent.style("font-style").valueOrDefault(e.Font.Parse(e.ctx.font).fontStyle),r=this.getText();n.isRTL&&(r=r.split("").reverse().join(""));for(var o=e.ToNumberArray(this.parent.attribute("dx").value),s=0;s<r.length;s++){var l=this.getGlyph(n,r,s),d=i/n.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(d,-d);var c=t.lineWidth;t.lineWidth=t.lineWidth*n.fontFace.unitsPerEm/i,"italic"==a&&t.transform(1,0,.4,1,0,0),l.render(t),"italic"==a&&t.transform(1,0,-.4,1,0,0),t.lineWidth=c,t.scale(1/d,-1/d),t.translate(-this.x,-this.y),this.x+=i*(l.horizAdvX||n.horizAdvX)/n.fontFace.unitsPerEm,"undefined"==typeof o[s]||isNaN(o[s])||(this.x+=o[s])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),n=0;n<this.children.length;n++)e+=this.children[n].measureTextRecursive(t);return e},this.measureText=function(t){var n=this.parent.style("font-family").getDefinition();if(null!=n){var i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),a=0,r=this.getText();n.isRTL&&(r=r.split("").reverse().join(""));for(var o=e.ToNumberArray(this.parent.attribute("dx").value),s=0;s<r.length;s++){var l=this.getGlyph(n,r,s);a+=(l.horizAdvX||n.horizAdvX)*i/n.fontFace.unitsPerEm,"undefined"==typeof o[s]||isNaN(o[s])||(a+=o[s])}return a}var d=e.compressSpaces(this.getText());if(!t.measureText)return 10*d.length;t.save(),this.setContext(t);var c=t.measureText(d).width;return t.restore(),c}},e.Element.TextElementBase.prototype=new e.Element.RenderedElementBase,e.Element.tspan=function(t){this.captureTextNodes=!0,this.base=e.Element.TextElementBase,this.base(t),this.text=t.nodeValue||t.text||"",this.getText=function(){return this.text}},e.Element.tspan.prototype=new e.Element.TextElementBase,e.Element.tref=function(t){this.base=e.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();if(null!=t)return t.children[0].getText()}},e.Element.tref.prototype=new e.Element.TextElementBase,e.Element.a=function(t){this.base=e.Element.TextElementBase,this.base(t),this.hasText=!0;for(var n=0;n<t.childNodes.length;n++)3!=t.childNodes[n].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var n=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);e.Mouse.checkBoundingBox(this,new e.BoundingBox(this.x,this.y-n.toPixels("y"),this.x+this.measureText(t),this.y))}else{var i=new e.Element.g;i.children=this.children,i.parent=this,i.render(t)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){e.ctx.canvas.style.cursor="pointer"}},e.Element.a.prototype=new e.Element.TextElementBase,e.Element.image=function(t){this.base=e.Element.RenderedElementBase,this.base(t);var n=this.getHrefAttribute().value;if(""!=n){var i=n.match(/\.svg$/);if(e.Images.push(this),this.loaded=!1,i)this.img=e.ajax(n),this.loaded=!0;else{this.img=document.createElement("img"),1==e.opts.useCORS&&(this.img.crossOrigin="Anonymous");var a=this;this.img.onload=function(){a.loaded=!0},this.img.onerror=function(){e.log('ERROR: image "'+n+'" not found'),a.loaded=!0},this.img.src=n}this.renderChildren=function(t){var n=this.attribute("x").toPixels("x"),a=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");0!=r&&0!=o&&(t.save(),i?t.drawSvg(this.img,n,a,r,o):(t.translate(n,a),e.AspectRatio(t,this.attribute("preserveAspectRatio").value,r,this.img.width,o,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y");return new e.BoundingBox(t,n,t+i,n+a)}}},e.Element.image.prototype=new e.Element.RenderedElementBase,e.Element.g=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(){for(var t=new e.BoundingBox,n=0;n<this.children.length;n++)t.addBoundingBox(this.children[n].getBoundingBox());return t}},e.Element.g.prototype=new e.Element.RenderedElementBase,e.Element.symbol=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.render=function(t){}},e.Element.symbol.prototype=new e.Element.RenderedElementBase,e.Element.style=function(t){this.base=e.Element.ElementBase,this.base(t);for(var n="",i=0;i<t.childNodes.length;i++)n+=t.childNodes[i].nodeValue;n=n.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),n=e.compressSpaces(n);for(var a=n.split("}"),i=0;i<a.length;i++)if(""!=e.trim(a[i]))for(var r=a[i].split("{"),o=r[0].split(","),s=r[1].split(";"),l=0;l<o.length;l++){var d=e.trim(o[l]);if(""!=d){for(var c={},u=0;u<s.length;u++){var h=s[u].indexOf(":"),p=s[u].substr(0,h),f=s[u].substr(h+1,s[u].length-h);null!=p&&null!=f&&(c[e.trim(p)]=new e.Property(e.trim(p),e.trim(f)))}if(e.Styles[d]=c,"@font-face"==d)for(var m=c["font-family"].value.replace(/"/g,""),g=c.src.value.split(","),v=0;v<g.length;v++)if(g[v].indexOf('format("svg")')>0)for(var y=g[v].indexOf("url"),b=g[v].indexOf(")",y),x=g[v].substr(y+5,b-y-6),w=e.parseXml(e.ajax(x)),k=w.getElementsByTagName("font"),S=0;S<k.length;S++){var T=e.CreateElement(k[S]);e.Definitions[m]=T}}}},e.Element.style.prototype=new e.Element.ElementBase,e.Element.use=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var n=this.getHrefAttribute().getDefinition();this.path=function(t){null!=n&&n.path(t)},this.getBoundingBox=function(){if(null!=n)return n.getBoundingBox()},this.renderChildren=function(t){if(null!=n){var i=n;"symbol"==n.type&&(i=new e.Element.svg,i.type="svg",i.attributes.viewBox=new e.Property("viewBox",n.attribute("viewBox").value),i.attributes.preserveAspectRatio=new e.Property("preserveAspectRatio",n.attribute("preserveAspectRatio").value),i.attributes.overflow=new e.Property("overflow",n.attribute("overflow").value),i.children=n.children),"svg"==i.type&&(this.attribute("width").hasValue()&&(i.attributes.width=new e.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(i.attributes.height=new e.Property("height",this.attribute("height").value)));var a=i.parent;i.parent=null,i.render(t),i.parent=a}}},e.Element.use.prototype=new e.Element.RenderedElementBase,e.Element.mask=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,n){var i=this.attribute("x").toPixels("x"),a=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");if(0==r&&0==o){for(var s=new e.BoundingBox,l=0;l<this.children.length;l++)s.addBoundingBox(this.children[l].getBoundingBox());var i=Math.floor(s.x1),a=Math.floor(s.y1),r=Math.floor(s.width()),o=Math.floor(s.height())}var d=n.attribute("mask").value;n.attribute("mask").value="";var c=document.createElement("canvas");c.width=i+r,c.height=a+o;var u=c.getContext("2d");this.renderChildren(u);var h=document.createElement("canvas");h.width=i+r,h.height=a+o;var p=h.getContext("2d");n.render(p),p.globalCompositeOperation="destination-in",p.fillStyle=u.createPattern(c,"no-repeat"),p.fillRect(0,0,i+r,a+o),t.fillStyle=p.createPattern(h,"no-repeat"),t.fillRect(0,0,i+r,a+o),n.attribute("mask").value=d},this.render=function(t){}},e.Element.mask.prototype=new e.Element.ElementBase,e.Element.clipPath=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t){var n=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var i=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},n.call(t);for(var a=0;a<this.children.length;a++){var r=this.children[a];if("undefined"!=typeof r.path){var o=null;r.attribute("transform").hasValue()&&(o=new e.Transform(r.attribute("transform").value),o.apply(t)),r.path(t),CanvasRenderingContext2D.prototype.closePath=i,o&&o.unapply(t)}}i.call(t),t.clip(),CanvasRenderingContext2D.prototype.beginPath=n,CanvasRenderingContext2D.prototype.closePath=i},this.render=function(t){}},e.Element.clipPath.prototype=new e.Element.ElementBase,e.Element.filter=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=e.getBoundingBox(),i=Math.floor(n.x1),a=Math.floor(n.y1),r=Math.floor(n.width()),o=Math.floor(n.height()),s=e.style("filter").value;e.style("filter").value="";for(var l=0,d=0,c=0;c<this.children.length;c++){var u=this.children[c].extraFilterDistance||0;l=Math.max(l,u),d=Math.max(d,u)}var h=document.createElement("canvas");h.width=r+2*l,h.height=o+2*d;var p=h.getContext("2d");p.translate(-i+l,-a+d),e.render(p);for(var c=0;c<this.children.length;c++)this.children[c].apply(p,0,0,r+2*l,o+2*d);t.drawImage(h,0,0,r+2*l,o+2*d,i-l,a-d,r+2*l,o+2*d),e.style("filter",!0).value=s},this.render=function(t){}},e.Element.filter.prototype=new e.Element.ElementBase,e.Element.feMorphology=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e,n,i,a){}},e.Element.feMorphology.prototype=new e.Element.ElementBase,e.Element.feComposite=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e,n,i,a){}},e.Element.feComposite.prototype=new e.Element.ElementBase,e.Element.feColorMatrix=function(t){function n(t,e,n,i,a,r){return t[n*i*4+4*e+r]}function i(t,e,n,i,a,r,o){t[n*i*4+4*e+r]=o}function a(t,e){var n=r[t];return n*(n<0?e-255:e)}this.base=e.Element.ElementBase,this.base(t);var r=e.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var o=r[0];r=[.213+.787*o,.715-.715*o,.072-.072*o,0,0,.213-.213*o,.715+.285*o,.072-.072*o,0,0,.213-.213*o,.715-.715*o,.072+.928*o,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var s=r[0]*Math.PI/180,l=function(t,e,n){return t+Math.cos(s)*e+Math.sin(s)*n};r=[l(.213,.787,-.213),l(.715,-.715,-.715),l(.072,-.072,.928),0,0,l(.213,-.213,.143),l(.715,.285,.14),l(.072,-.072,-.283),0,0,l(.213,-.213,-.787),l(.715,-.715,.715),l(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(t,e,r,o,s){for(var l=t.getImageData(0,0,o,s),r=0;r<s;r++)for(var e=0;e<o;e++){var d=n(l.data,e,r,o,s,0),c=n(l.data,e,r,o,s,1),u=n(l.data,e,r,o,s,2),h=n(l.data,e,r,o,s,3);i(l.data,e,r,o,s,0,a(0,d)+a(1,c)+a(2,u)+a(3,h)+a(4,1)),i(l.data,e,r,o,s,1,a(5,d)+a(6,c)+a(7,u)+a(8,h)+a(9,1)),i(l.data,e,r,o,s,2,a(10,d)+a(11,c)+a(12,u)+a(13,h)+a(14,1)),i(l.data,e,r,o,s,3,a(15,d)+a(16,c)+a(17,u)+a(18,h)+a(19,1))}t.clearRect(0,0,o,s),t.putImageData(l,0,0)}},e.Element.feColorMatrix.prototype=new e.Element.ElementBase,e.Element.feGaussianBlur=function(t){this.base=e.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,n,i,a,r){return"undefined"==typeof stackBlurCanvasRGBA?void e.log("ERROR: StackBlur.js must be included for blur to work"):(t.canvas.id=e.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),stackBlurCanvasRGBA(t.canvas.id,n,i,a,r,this.blurRadius),void document.body.removeChild(t.canvas))}},e.Element.feGaussianBlur.prototype=new e.Element.ElementBase,e.Element.title=function(t){},e.Element.title.prototype=new e.Element.ElementBase,e.Element.desc=function(t){},e.Element.desc.prototype=new e.Element.ElementBase,e.Element.MISSING=function(t){e.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},e.Element.MISSING.prototype=new e.Element.ElementBase,e.CreateElement=function(t){var n=t.nodeName.replace(/^[^:]+:/,"");n=n.replace(/\-/g,"");var i=null;return i="undefined"!=typeof e.Element[n]?new e.Element[n](t):new e.Element.MISSING(t),i.type=t.nodeName,i},e.load=function(t,n){e.loadXml(t,e.ajax(n))},e.loadXml=function(t,n){e.loadXmlDoc(t,e.parseXml(n))},e.loadXmlDoc=function(t,n){e.init(t);var i=function(e){for(var n=t.canvas;n;)e.x-=n.offsetLeft,e.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(e.x+=window.scrollX),window.scrollY&&(e.y+=window.scrollY),e};1!=e.opts.ignoreMouse&&(t.canvas.onclick=function(t){var n=i(new e.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));e.Mouse.onclick(n.x,n.y)},t.canvas.onmousemove=function(t){var n=i(new e.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));e.Mouse.onmousemove(n.x,n.y)});var a=e.CreateElement(n.documentElement);a.root=!0;var r=!0,o=function(){e.ViewPort.Clear(),t.canvas.parentNode&&e.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),1!=e.opts.ignoreDimensions&&(a.style("width").hasValue()&&(t.canvas.width=a.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),a.style("height").hasValue()&&(t.canvas.height=a.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px"));var i=t.canvas.clientWidth||t.canvas.width,o=t.canvas.clientHeight||t.canvas.height;if(1==e.opts.ignoreDimensions&&a.style("width").hasValue()&&a.style("height").hasValue()&&(i=a.style("width").toPixels("x"),o=a.style("height").toPixels("y")),e.ViewPort.SetCurrent(i,o),null!=e.opts.offsetX&&(a.attribute("x",!0).value=e.opts.offsetX),null!=e.opts.offsetY&&(a.attribute("y",!0).value=e.opts.offsetY),null!=e.opts.scaleWidth||null!=e.opts.scaleHeight){var s=null,l=null,d=e.ToNumberArray(a.attribute("viewBox").value);null!=e.opts.scaleWidth&&(a.attribute("width").hasValue()?s=a.attribute("width").toPixels("x")/e.opts.scaleWidth:isNaN(d[2])||(s=d[2]/e.opts.scaleWidth)),null!=e.opts.scaleHeight&&(a.attribute("height").hasValue()?l=a.attribute("height").toPixels("y")/e.opts.scaleHeight:isNaN(d[3])||(l=d[3]/e.opts.scaleHeight)),null==s&&(s=l),null==l&&(l=s),a.attribute("width",!0).value=e.opts.scaleWidth,a.attribute("height",!0).value=e.opts.scaleHeight,a.attribute("transform",!0).value+=" scale("+1/s+","+1/l+")"}1!=e.opts.ignoreClear&&t.clearRect(0,0,i,o),a.render(t),r&&(r=!1,"function"==typeof e.opts.renderCallback&&e.opts.renderCallback(n))},s=!0;e.ImagesLoaded()&&(s=!1,o()),e.intervalID=setInterval(function(){var t=!1;if(s&&e.ImagesLoaded()&&(s=!1,t=!0),1!=e.opts.ignoreMouse&&(t|=e.Mouse.hasEvents()),1!=e.opts.ignoreAnimation)for(var n=0;n<e.Animations.length;n++)t|=e.Animations[n].update(1e3/e.FRAMERATE);"function"==typeof e.opts.forceRedraw&&1==e.opts.forceRedraw()&&(t=!0),t&&(o(),e.Mouse.runEvents())},1e3/e.FRAMERATE)},e.stop=function(){e.intervalID&&clearInterval(e.intervalID)},e.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInPath&&e.isPointInPath(i.x,i.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInBox(i.x,i.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){e.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var n=this.events[t],i=this.eventElements[t];i;)n.run(i),i=i.parent;this.events=[],this.eventElements=[]}},e}this.canvg=function(e,n,i){if(null!=e||null!=n||null!=i){"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop();var a=t(i||{});1==e.childNodes.length&&"OBJECT"==e.childNodes[0].nodeName||(e.svg=a);var r=e.getContext("2d");"undefined"!=typeof n.documentElement?a.loadXmlDoc(r,n):"<"==n.substr(0,1)?a.loadXml(r,n):a.load(r,n)}else for(var o=document.querySelectorAll("svg"),s=0;s<o.length;s++){var l=o[s],d=document.createElement("canvas");d.width=l.clientWidth,d.height=l.clientHeight,l.parentNode.insertBefore(d,l),l.parentNode.removeChild(l);var c=document.createElement("div");c.appendChild(l),canvg(d,c.innerHTML)}}}(),"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,n,i,a){canvg(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:n,scaleWidth:i,scaleHeight:a})})},{}],43:[function(t,e,n){function i(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var n in e)t==n&&(t=e[n]);for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<a.length;r++){var o=a[r].re,s=a[r].process,l=o.exec(t);l&&(channels=s(l),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,n=0;n<a.length;n++)for(var r=a[n].example,o=0;o<r.length;o++)t[t.length]=r[o];for(var s in e)t[t.length]=s;var l=document.createElement("ul");l.setAttribute("id","rgbcolor-examples");for(var n=0;n<t.length;n++)try{var d=document.createElement("li"),c=new i(t[n]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+c.toHex()+"; color:"+c.toHex(),u.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+t[n]+" -> "+c.toRGB()+" -> "+c.toHex());d.appendChild(u),d.appendChild(h),l.appendChild(d)}catch(p){}return l}}e.exports=i},{}],44:[function(t,e,n){var i=t("underscore");i.mixin({transpose:function(t){return i.zip.apply(i,t)}})},{underscore:"underscore"}],45:[function(t,e,n){function i(t,e){return function(){var n=t.apply(null,arguments);return e.apply(null,n)}}function a(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function r(t,e,n){return void 0===n?t.getAttribute("data-"+a(e)):void t.setAttribute("data-"+a(e),n)}function o(t,e,n){var i=null,a=null;return t<30?(a="0",e===!0&&(i=450)):t>=30&&t<40?(i=e===!0?550:475,a="1"):t>=40&&t<50?(i=e===!0?700:625,a="2"):t>=50&&t<60?(i=e===!0?850:775,a="3"):t>=60&&t<70?(i=e===!0?1e3:925,a="4"):t>=70&&t<80?(i=e===!0?1150:1075,a="5"):t>=80&&t<90?(i=e===!0?1150:1225,a="6"):t>=90&&(i=e===!0?1300:1375,a="7"),void 0!==n&&n.set("bigN",a),i}var s=t("d3"),l=function(t,e){var n=window.app,i=s.format("."+(t||3)+"s");return e=e||".",function(t){return i(t).replace("k",n.translator.translateSync("amp.dashboard:chart-thousand")).replace("M",n.translator.translateSync("amp.dashboard:chart-million")).replace("G",n.translator.translateSync("amp.dashboard:chart-billion")).replace("T",n.translator.translateSync("amp.dashboard:chart-trillion")).replace("P",n.translator.translateSync("amp.dashboard:chart-peta")).replace("E",n.translator.translateSync("amp.dashboard:chart-exa")).replace(".",e)}},d=function(t){var e=window.app;return t.replace("k",e.translator.translateSync("amp.dashboard:chart-thousand")).replace("M",e.translator.translateSync("amp.dashboard:chart-million")).replace("B",e.translator.translateSync("amp.dashboard:chart-billion")).replace("T",e.translator.translateSync("amp.dashboard:chart-trillion")).replace("P",e.translator.translateSync("amp.dashboard:chart-peta")).replace("E",e.translator.translateSync("amp.dashboard:chart-exa"))},c=function(t){var e=1;return function(n){return n.length-e>t&&(n=n.slice(0,t-e)+"..."),n}},u=function(t,e,n){var i=app.generalSettings.attributes["rtl-direction"];if(t>0){var a=s.format("f")(t/e*100);n=i?n+" &nbsp<span><b>% "+a+"</b>":"<b>"+a+" %</b>&nbsp<span>"+n}return n},h=function(t){var e=s.scale.category20().range();return function(t,n){return t.color||t.data&&t.data.color||e[n%e.length]}},p=function(t){var e,n=String.fromCharCode(255)+String.fromCharCode(254);return n+=Array.prototype.reduce.call(t,function(t,n){return e=n.charCodeAt(0),t+String.fromCharCode(255&e)+String.fromCharCode(e>>8)},""),btoa(n)},f=function(t){return"data:text/plain;base64,"+p(t)};e.exports={formatKMB:l,translateLanguage:d,formatShortText:c,categoryColours:h,u16le64:p,textAsDataURL:f,transformArgs:i,data:r,calculateChartHeight:o,formatOfTotal:u}},{d3:"d3"}],46:[function(t,e,n){!function(t){function n(t,e){var n=o(e),i=new a(n),r=i.parse(t);return l(n.complete)&&n.complete(r),r}function i(t,e){function n(){"object"==typeof e&&("string"==typeof e.delimiter&&1==e.delimiter.length&&c.BAD_DELIMITERS.indexOf(e.delimiter)==-1&&(l=e.delimiter),("boolean"==typeof e.quotes||e.quotes instanceof Array)&&(s=e.quotes),"string"==typeof e.newline&&(d=e.newline))}function i(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function a(t,e){var n="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var i=t instanceof Array&&t.length>0,a=!(e[0]instanceof Array);if(i){for(var o=0;o<t.length;o++)o>0&&(n+=l),n+=r(t[o],o);e.length>0&&(n+=d)}for(var s=0;s<e.length;s++){for(var c=i?t.length:e[s].length,u=0;u<c;u++){u>0&&(n+=l);var h=i&&a?t[u]:u;n+=r(e[s][h],u)}s<e.length-1&&(n+=d)}return n}function r(t,e){if("undefined"==typeof t)return"";t=t.toString().replace(/"/g,'""');var n="boolean"==typeof s&&s||s instanceof Array&&s[e]||o(t,c.BAD_DELIMITERS)||t.indexOf(l)>-1||" "==t.charAt(0)||" "==t.charAt(t.length-1);return n?'"'+t+'"':t}function o(t,e){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return!0;return!1}var s=!1,l=",",d="\r\n";if(n(),"string"==typeof t&&(t=JSON.parse(t)),t instanceof Array){if(!t.length||t[0]instanceof Array)return a(null,t);if("object"==typeof t[0])return a(i(t[0]),t)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),t.data instanceof Array&&(t.fields||(t.fields=t.data[0]instanceof Array?t.fields:i(t.data[0])),t.data[0]instanceof Array||"object"==typeof t.data[0]||(t.data=[t.data])),a(t.fields||[],t.data||[]);throw"exception: Unable to serialize unrecognized input"}function a(t){function e(){return m&&h&&(u("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to comma"),h=!1),n()&&i(),a()}function n(){return t.header&&0==f.length}function i(){if(m){for(var t=0;n()&&t<m.data.length;t++)for(var e=0;e<m.data[t].length;e++)f.push(m.data[t][e]);m.data.splice(0,1)}}function a(){if(!m||!t.header&&!t.dynamicTyping)return m;for(var e=0;e<m.data.length;e++){for(var n={},i=0;i<m.data[e].length;i++){if(t.dynamicTyping){var a=m.data[e][i];"true"==a?m.data[e][i]=!0:"false"==a?m.data[e][i]=!1:m.data[e][i]=d(a)}t.header&&(i>=f.length&&(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(m.data[e][i])),n[f[i]]=m.data[e][i])}t.header&&(m.data[e]=n,i>f.length?u("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+i,e):i<f.length&&u("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+i,e))}return t.header&&m.meta,m.meta.fields=f,m}function o(e){for(var n,i,a,o=[",","\t","|",";",c.RECORD_SEP,c.UNIT_SEP],s=0;s<o.length;s++){var l=o[s],d=0,u=0;a=void 0;for(var h=new r({delimiter:l,preview:10}).parse(e),p=0;p<h.data.length;p++){var f=h.data[p].length;u+=f,"undefined"!=typeof a?f>1&&(d+=Math.abs(f-a),a=f):a=f}u/=h.data.length,("undefined"==typeof i||d<i)&&u>1.99&&(i=d,n=l)}return t.delimiter=n,{successful:!!n,bestDelimiter:n}}function d(t){var e=p.test(t);return e?parseFloat(t):t}function u(t,e,n,i){m.errors.push({type:t,code:e,message:n,row:i})}var h,p=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,f=[],m={data:[],errors:[],meta:{}};t=s(t),this.parse=function(i){if(h=!1,!t.delimiter){var a=o(i);a.successful?t.delimiter=a.bestDelimiter:(h=!0,t.delimiter=","),m.meta.delimiter=t.delimiter}if(l(t.step)){var s=t.step;t.step=function(t,i){m=t,n()?e():s(e(),i)}}return m=new r(t).parse(i),e()}}function r(t){function e(){for(;E<D.length&&!z&&!(_>0&&R>=_);){if(V)return i();'"'==N?a():P?r():o(),n()}return i()}function n(){E++,N=D[E]}function i(){if(z&&w("Abort","ParseAbort","Parsing was aborted by the user's step function"),P&&w("Quotes","MissingQuotes","Unescaped or mismatched quotes"),f(),!l(M))return T()}function a(){b()&&!y()?P=!P:(u(),P&&y()?E++:w("Quotes","UnexpectedQuotes","Unexpected quotes"))}function r(){(g(E)||v(E))&&I++,u()}function o(){N==A?h():g(E)?(p(),n()):v(E)?p():s()?d():u()}function s(){if(!C)return!1;var t=0==E||v(E-1)||g(E-2);return t&&D[E]===C}function d(){for(;!g(E)&&!v(E)&&E<D.length;)n()}function u(){F[j][L]+=N}function h(){F[j].push(""),L=F[j].length-1}function p(){f(),I++,R++,F.push([]),j=F.length-1,h()}function f(){m(),l(M)&&(F[j]&&M(T(),B),S())}function m(){1==F[j].length&&$.test(F[j][0])&&(t.keepEmptyRows?F[j].splice(0,1):F.splice(j,1),j=F.length-1)}function g(t){return t<D.length-1&&("\r"==D[t]&&"\n"==D[t+1]||"\n"==D[t]&&"\r"==D[t+1])}function v(t){return"\r"==D[t]||"\n"==D[t]}function y(){return!b()&&E<D.length-1&&'"'==D[E+1]}function b(){return!P&&x(E-1)||x(E+1)}function x(t){"number"!=typeof t&&(t=E);var e=D[t];return t<=-1||t>=D.length||e==A||"\r"==e||"\n"==e}function w(t,e,n){O.push({type:t,code:e,message:n,line:I,row:j,index:E})}function k(t){D=t,P=!1,E=0,R=0,I=1,S(),F=[[""]],N=D[E]}function S(){F=[],O=[],j=0,L=0}function T(){return{data:F,errors:O,meta:{lines:I,delimiter:A,aborted:z}}}var D,A,C,M,_,N,E,P,I,F,O,j,L,R,B=this,$=/^\s*$/,z=!1,V=!1;t=t||{},A=t.delimiter,C=t.comments,M=t.step,_=t.preview,("string"!=typeof A||1!=A.length||c.BAD_DELIMITERS.indexOf(A)>-1)&&(A=","),C===!0?C="#":("string"!=typeof C||1!=C.length||c.BAD_DELIMITERS.indexOf(C)>-1||C==A)&&(C=!1),this.parse=function(t){if("string"!=typeof t)throw"Input must be a string";return k(t),e()},this.abort=function(){z=!0}}function o(t){
"object"!=typeof t&&(t={});var e=s(t);return("string"!=typeof e.delimiter||1!=e.delimiter.length||c.BAD_DELIMITERS.indexOf(e.delimiter)>-1)&&(e.delimiter=d.delimiter),"boolean"!=typeof e.header&&(e.header=d.header),"boolean"!=typeof e.dynamicTyping&&(e.dynamicTyping=d.dynamicTyping),"number"!=typeof e.preview&&(e.preview=d.preview),"function"!=typeof e.step&&(e.step=d.step),"function"!=typeof e.complete&&(e.complete=d.complete),"boolean"!=typeof e.keepEmptyRows&&(e.keepEmptyRows=d.keepEmptyRows),e}function s(t){if("object"!=typeof t)return t;var e=t instanceof Array?[]:{};for(var n in t)e[n]=s(t[n]);return e}function l(t){return"function"==typeof t}var d={delimiter:"",header:!1,dynamicTyping:!1,preview:0,step:void 0,comments:!1,complete:void 0,keepEmptyRows:!1},c={};c.parse=n,c.unparse=i,c.RECORD_SEP=String.fromCharCode(30),c.UNIT_SEP=String.fromCharCode(31),c.BYTE_ORDER_MARK="\ufeff",c.BAD_DELIMITERS=["\r","\n",'"',c.BYTE_ORDER_MARK],"undefined"!=typeof e&&e.exports?e.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t.Baby=c}("undefined"!=typeof window?window:this)},{}],47:[function(t,e,n){(function(){function t(t){this._value=t}function n(t,e,n,i){var a,r,o=Math.pow(10,e);return r=(n(t*o)/o).toFixed(e),i&&(a=new RegExp("0{1,"+i+"}$"),r=r.replace(a,"")),r}function i(t,e,n){var i;return i=e.indexOf("$")>-1?r(t,e,n):e.indexOf("%")>-1?o(t,e,n):e.indexOf(":")>-1?s(t,e):d(t._value,e,n)}function a(t,e){var n,i,a,r,o,s=e,d=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1;if(e.indexOf(":")>-1)t._value=l(e);else if(e===v)t._value=0;else{for("."!==m[g].delimiters.decimal&&(e=e.replace(/\./g,"").replace(m[g].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+m[g].abbreviations.thousand+"(?:\\)|(\\"+m[g].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+m[g].abbreviations.million+"(?:\\)|(\\"+m[g].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+m[g].abbreviations.billion+"(?:\\)|(\\"+m[g].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+m[g].abbreviations.trillion+"(?:\\)|(\\"+m[g].currency.symbol+")?(?:\\))?)?$"),o=0;o<=d.length&&!(c=e.indexOf(d[o])>-1&&Math.pow(1024,o+1));o++);t._value=(c?c:1)*(s.match(n)?Math.pow(10,3):1)*(s.match(i)?Math.pow(10,6):1)*(s.match(a)?Math.pow(10,9):1)*(s.match(r)?Math.pow(10,12):1)*(e.indexOf("%")>-1?.01:1)*((e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1)*Number(e.replace(/[^0-9\.]+/g,"")),t._value=c?Math.ceil(t._value):t._value}return t._value}function r(t,e,n){var i,a,r=e.indexOf("$"),o=e.indexOf("("),s=e.indexOf("-"),l="";return e.indexOf(" $")>-1?(l=" ",e=e.replace(" $","")):e.indexOf("$ ")>-1?(l=" ",e=e.replace("$ ","")):e=e.replace("$",""),a=d(t._value,e,n),r<=1?a.indexOf("(")>-1||a.indexOf("-")>-1?(a=a.split(""),i=1,(r<o||r<s)&&(i=0),a.splice(i,0,m[g].currency.symbol+l),a=a.join("")):a=m[g].currency.symbol+l+a:a.indexOf(")")>-1?(a=a.split(""),a.splice(-1,0,l+m[g].currency.symbol),a=a.join("")):a=a+l+m[g].currency.symbol,a}function o(t,e,n){var i,a="",r=100*t._value;return e.indexOf(" %")>-1?(a=" ",e=e.replace(" %","")):e=e.replace("%",""),i=d(r,e,n),i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,a+"%"),i=i.join("")):i=i+a+"%",i}function s(t){var e=Math.floor(t._value/60/60),n=Math.floor((t._value-60*e*60)/60),i=Math.round(t._value-60*e*60-60*n);return e+":"+(n<10?"0"+n:n)+":"+(i<10?"0"+i:i)}function l(t){var e=t.split(":"),n=0;return 3===e.length?(n+=60*Number(e[0])*60,n+=60*Number(e[1]),n+=Number(e[2])):2===e.length&&(n+=60*Number(e[0]),n+=Number(e[1])),Number(n)}function d(t,e,i){var a,r,o,s,l,d,c=!1,u=!1,h=!1,p="",f=!1,y=!1,b=!1,x=!1,w=!1,k="",S="",T=Math.abs(t),D=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A="",C=!1;if(0===t&&null!==v)return v;if(e.indexOf("(")>-1?(c=!0,e=e.slice(1,-1)):e.indexOf("+")>-1&&(u=!0,e=e.replace(/\+/g,"")),e.indexOf("a")>-1&&(f=e.indexOf("aK")>=0,y=e.indexOf("aM")>=0,b=e.indexOf("aB")>=0,x=e.indexOf("aT")>=0,w=f||y||b||x,e.indexOf(" a")>-1?(p=" ",e=e.replace(" a","")):e=e.replace("a",""),T>=Math.pow(10,12)&&!w||x?(p+=m[g].abbreviations.trillion,t/=Math.pow(10,12)):T<Math.pow(10,12)&&T>=Math.pow(10,9)&&!w||b?(p+=m[g].abbreviations.billion,t/=Math.pow(10,9)):T<Math.pow(10,9)&&T>=Math.pow(10,6)&&!w||y?(p+=m[g].abbreviations.million,t/=Math.pow(10,6)):(T<Math.pow(10,6)&&T>=Math.pow(10,3)&&!w||f)&&(p+=m[g].abbreviations.thousand,t/=Math.pow(10,3))),e.indexOf("b")>-1)for(e.indexOf(" b")>-1?(k=" ",e=e.replace(" b","")):e=e.replace("b",""),o=0;o<=D.length;o++)if(a=Math.pow(1024,o),r=Math.pow(1024,o+1),t>=a&&t<r){k+=D[o],a>0&&(t/=a);break}return e.indexOf("o")>-1&&(e.indexOf(" o")>-1?(S=" ",e=e.replace(" o","")):e=e.replace("o",""),S+=m[g].ordinal(t)),e.indexOf("[.]")>-1&&(h=!0,e=e.replace("[.]",".")),s=t.toString().split(".")[0],l=e.split(".")[1],d=e.indexOf(","),l?(l.indexOf("[")>-1?(l=l.replace("]",""),l=l.split("["),A=n(t,l[0].length+l[1].length,i,l[1].length)):A=n(t,l.length,i),s=A.split(".")[0],A=A.split(".")[1].length?m[g].delimiters.decimal+A.split(".")[1]:"",h&&0===Number(A.slice(1))&&(A="")):s=n(t,null,i),s.indexOf("-")>-1&&(s=s.slice(1),C=!0),d>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m[g].delimiters.thousands)),0===e.indexOf(".")&&(s=""),(c&&C?"(":"")+(!c&&C?"-":"")+(!C&&u?"+":"")+s+A+(S?S:"")+(p?p:"")+(k?k:"")+(c&&C?")":"")}function c(t,e){m[t]=e}function u(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)}function h(){var t=Array.prototype.slice.call(arguments);return t.reduce(function(t,e){var n=u(t),i=u(e);return n>i?n:i},-(1/0))}var p,f="1.5.3",m={},g="en",v=null,y="0,0",b="undefined"!=typeof e&&e.exports;p=function(e){return p.isNumeral(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=p.fn.unformat(e)),new t(Number(e))},p.version=f,p.isNumeral=function(e){return e instanceof t},p.language=function(t,e){if(!t)return g;if(t&&!e){if(!m[t])throw new Error("Unknown language : "+t);g=t}return!e&&m[t]||c(t,e),p},p.languageData=function(t){if(!t)return m[g];if(!m[t])throw new Error("Unknown language : "+t);return m[t]},p.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),p.zeroFormat=function(t){v="string"==typeof t?t:null},p.defaultFormat=function(t){y="string"==typeof t?t:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var n,i,a=this.length>>>0,r=!1;for(1<arguments.length&&(i=e,r=!0),n=0;a>n;++n)this.hasOwnProperty(n)&&(r?i=t(i,this[n],n,this):(i=this[n],r=!0));if(!r)throw new TypeError("Reduce of empty array with no initial value");return i}),p.fn=t.prototype={clone:function(){return p(this)},format:function(t,e){return i(this,t?t:y,void 0!==e?e:Math.round)},unformat:function(t){return"[object Number]"===Object.prototype.toString.call(t)?t:a(this,t?t:y)},value:function(){return this._value},valueOf:function(){return this._value},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e,i,a){return t+n*e}var n=h.call(null,this._value,t);return this._value=[this._value,t].reduce(e,0)/n,this},subtract:function(t){function e(t,e,i,a){return t-n*e}var n=h.call(null,this._value,t);return this._value=[t].reduce(e,this._value*n)/n,this},multiply:function(t){function e(t,e,n,i){var a=h(t,e);return t*a*(e*a)/(a*a)}return this._value=[this._value,t].reduce(e,1),this},divide:function(t){function e(t,e,n,i){var a=h(t,e);return t*a/(e*a)}return this._value=[this._value,t].reduce(e),this},difference:function(t){return Math.abs(p(this._value).subtract(t).value())}},b&&(e.exports=p),"undefined"==typeof ender&&(this.numeral=p),"function"==typeof define&&define.amd&&define([],function(){return p})}).call(this)},{}],48:[function(t,e,n){!function(){var t=window.nv||{};window.nv=t,t.dev=!1,t.tooltip=t.tooltip||{},t.utils=t.utils||{},t.models=t.models||{},t.charts={},t.graphs=[],t.logs={},t.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},a=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,a.prototype=new i,a}),t.dev&&(t.dispatch.on("render_start",function(e){t.logs.startTime=+new Date}),t.dispatch.on("render_end",function(e){t.logs.endTime=+new Date,t.logs.totalTime=t.logs.endTime-t.logs.startTime,t.log("total",t.logs.totalTime)})),t.log=function(){if(t.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(t.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){var e=Function.prototype.bind.call(console.log,console);e.apply(console,arguments)}return arguments[arguments.length-1]},t.deprecated=function(e){t.dev&&console&&console.warn&&console.warn("`"+e+"` has been deprecated.")},t.render=function(e){e=e||1,t.render.active=!0,t.dispatch.render_start(),setTimeout(function(){for(var n,i,a=0;a<e&&(i=t.render.queue[a]);a++)n=i.generate(),typeof i.callback==typeof Function&&i.callback(n),t.graphs.push(n);t.render.queue.splice(0,a),t.render.queue.length?setTimeout(arguments.callee,0):(t.dispatch.render_end(),t.render.active=!1)},0)},t.render.active=!1,t.render.queue=[],t.addGraph=function(e){typeof arguments[0]==typeof Function&&(e={generate:arguments[0],callback:arguments[1]}),t.render.queue.push(e),t.render.active||t.render()},t.interactiveGuideline=function(){"use strict";function e(u){u.each(function(u){function h(){var t=d3.mouse(this),i=t[0],a=t[1],l=!0,d=!1;if(c&&(i=d3.event.offsetX,a=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(l=!1),d3.event.target.className.baseVal.match("nv-legend")&&(d=!0)),l&&(i-=r.left,a-=r.top),i<0||a<0||i>f||a>m||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||d){if(c&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(n.nvPointerEventsClass))return;return s.elementMouseout({mouseX:i,mouseY:a}),void e.renderGuideLine(null)}var u=o.invert(i);s.elementMousemove({mouseX:i,mouseY:a,pointXValue:u}),"dblclick"===d3.event.type&&s.elementDblclick({mouseX:i,mouseY:a,pointXValue:u}),"click"===d3.event.type&&s.elementClick({mouseX:i,mouseY:a,pointXValue:u})}var p=d3.select(this),f=i||960,m=a||400,g=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([u]),v=g.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");v.append("g").attr("class","nv-interactiveGuideLine"),d&&(d.on("mousemove",h,!0).on("mouseout",h,!0).on("dblclick",h).on("click",h),e.renderGuideLine=function(e){if(l){var n=g.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[t.utils.NaNtoZero(e)]:[],String);n.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",m).attr("y2",0),n.exit().remove()}})})}var n=t.models.tooltip(),i=null,a=null,r={left:0,top:0},o=d3.scale.linear(),s=(d3.scale.linear(),d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick")),l=!0,d=null,c="ActiveXObject"in window;return e.dispatch=s,e.tooltip=n,e.margin=function(t){return arguments.length?(r.top="undefined"!=typeof t.top?t.top:r.top,r.left="undefined"!=typeof t.left?t.left:r.left,e):r},e.width=function(t){return arguments.length?(i=t,e):i},e.height=function(t){return arguments.length?(a=t,e):a},e.xScale=function(t){return arguments.length?(o=t,e):o},e.showGuideLine=function(t){return arguments.length?(l=t,e):l},e.svgContainer=function(t){return arguments.length?(d=t,e):d},e},t.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;"function"!=typeof n&&(n=function(t,e){return t.x});var i=d3.bisector(n).left,a=d3.max([0,i(t,e)-1]),r=n(t[a],a);if("undefined"==typeof r&&(r=a),r===e)return a;var o=d3.min([a+1,t.length-1]),s=n(t[o],o);return"undefined"==typeof s&&(s=o),Math.abs(s-e)>=Math.abs(r-e)?a:o},t.nearestValueIndex=function(t,e,n){"use strict";var i=1/0,a=null;return t.forEach(function(t,r){var o=Math.abs(e-t);o<=i&&o<n&&(i=o,a=r)}),a},function(){"use strict";window.nv.tooltip={},window.nv.models.tooltip=function(){function e(){if(u){var t=d3.select(u);"svg"!==t.node().tagName&&(t=t.select("svg"));var e=t.node()?t.attr("viewBox"):null;if(e){e=e.split(" ");var n=parseInt(t.style("width"))/e[2];p.left=p.left*n,p.top=p.top*n}}}function n(t){var e;e=u?d3.select(u):d3.select("body");var n=e.select(".nvtooltip");return null===n.node()&&(n=e.append("div").attr("class","nvtooltip "+(c?c:"xy-tooltip")).attr("id",m)),n.node().innerHTML=t,n.style("top",0).style("left",0).style("opacity",0),n.selectAll("div, table, td, tr").classed(g,!0),n.classed(g,!0),n.node()}function i(){if(f&&x(r)){e();var a=p.left,c=null!=d?d:p.top,m=n(b(r));if(h=m,u){var g=u.getElementsByTagName("svg")[0],v=(g?g.getBoundingClientRect():u.getBoundingClientRect(),{left:0,top:0});if(g){var y=g.getBoundingClientRect(),w=u.getBoundingClientRect(),k=y.top;if(k<0){var S=u.getBoundingClientRect();k=Math.abs(k)>S.height?0:k}v.top=Math.abs(k-w.top),v.left=Math.abs(y.left-w.left)}a+=u.offsetLeft+v.left-2*u.scrollLeft,c+=u.offsetTop+v.top-2*u.scrollTop}return l&&l>0&&(c=Math.floor(c/l)*l),t.tooltip.calcTooltipPosition([a,c],o,s,m),i}}var a=null,r=null,o="w",s=50,l=25,d=null,c=null,u=null,h=null,p={left:null,top:null},f=!0,m="nvtooltip-"+Math.floor(1e5*Math.random()),g="nv-pointer-events-none",v=function(t,e){return t},y=function(t){return t},b=function(t){if(null!=a)return a;if(null==t)return"";var e=d3.select(document.createElement("table")),n=e.selectAll("thead").data([t]).enter().append("thead");n.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(y(t.value));var i=e.selectAll("tbody").data([t]).enter().append("tbody"),r=i.selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});r.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),r.append("td").classed("key",!0).html(function(t){return t.key}),r.append("td").classed("value",!0).html(function(t,e){return v(t.value,e)}),r.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]),n=.6;d3.select(this).style("border-bottom-color",e(n)).style("border-top-color",e(n))}});var o=e.node().outerHTML;return void 0!==t.footer&&(o+="<div class='footer'>"+t.footer+"</div>"),o},x=function(t){return!!(t&&t.series&&t.series.length>0)};return i.nvPointerEventsClass=g,i.content=function(t){return arguments.length?(a=t,i):a},i.tooltipElem=function(){return h},i.contentGenerator=function(t){return arguments.length?("function"==typeof t&&(b=t),i):b},i.data=function(t){return arguments.length?(r=t,i):r},i.gravity=function(t){return arguments.length?(o=t,i):o},i.distance=function(t){return arguments.length?(s=t,i):s},i.snapDistance=function(t){return arguments.length?(l=t,i):l},i.classes=function(t){return arguments.length?(c=t,i):c},i.chartContainer=function(t){return arguments.length?(u=t,i):u},i.position=function(t){return arguments.length?(p.left="undefined"!=typeof t.left?t.left:p.left,p.top="undefined"!=typeof t.top?t.top:p.top,i):p},i.fixedTop=function(t){return arguments.length?(d=t,i):d},i.enabled=function(t){return arguments.length?(f=t,i):f},i.valueFormatter=function(t){return arguments.length?("function"==typeof t&&(v=t),i):v},i.headerFormatter=function(t){return arguments.length?("function"==typeof t&&(y=t),i):y},i.id=function(){return m},i},t.tooltip.show=function(e,n,i,a,r,o){var s=document.createElement("div");s.className="nvtooltip "+(o?o:"xy-tooltip");var l=r;r&&!r.tagName.match(/g|svg/i)||(l=document.getElementsByTagName("body")[0]),s.style.left=0,s.style.top=0,s.style.opacity=0,"string"!=typeof n?s.appendChild(n):s.innerHTML=n,l.appendChild(s),r&&(e[0]=e[0]-r.scrollLeft,e[1]=e[1]-r.scrollTop),t.tooltip.calcTooltipPosition(e,i,a,s)},t.tooltip.findFirstNonSVGParent=function(t){for(;null!==t.tagName.match(/^g|svg$/i);)t=t.parentNode;return t},t.tooltip.findTotalOffsetTop=function(t,e){var n=e;do isNaN(t.offsetTop)||(n+=t.offsetTop);while(t=t.offsetParent);return n},t.tooltip.findTotalOffsetLeft=function(t,e){var n=e;do isNaN(t.offsetLeft)||(n+=t.offsetLeft);while(t=t.offsetParent);return n},t.tooltip.calcTooltipPosition=function(e,n,i,a){var r,o,s=parseInt(a.offsetHeight),l=parseInt(a.offsetWidth),d=t.utils.windowSize().width,c=t.utils.windowSize().height,u=window.pageYOffset,h=window.pageXOffset;c=window.innerWidth>=document.body.scrollWidth?c:c-16,d=window.innerHeight>=document.body.scrollHeight?d:d-16,n=n||"s",i=i||20;var p=function(e){return t.tooltip.findTotalOffsetTop(e,o)},f=function(e){return t.tooltip.findTotalOffsetLeft(e,r)};switch(n){case"e":r=e[0]-l-i,o=e[1]-s/2;var m=f(a),g=p(a);m<h&&(r=e[0]+i>h?e[0]+i:h-m+r),g<u&&(o=u-g+o),g+s>u+c&&(o=u+c-g+o-s);break;case"w":r=e[0]+i,o=e[1]-s/2;var m=f(a),g=p(a);m+l>d&&(r=e[0]-l-i),g<u&&(o=u+5),g+s>u+c&&(o=u+c-g+o-s);break;case"n":r=e[0]-l/2-5,o=e[1]+i;var m=f(a),g=p(a);m<h&&(r=h+5),m+l>d&&(r=r-l/2+5),g+s>u+c&&(o=u+c-g+o-s);break;case"s":r=e[0]-l/2,o=e[1]-s-i;var m=f(a),g=p(a);m<h&&(r=h+5),m+l>d&&(r=r-l/2+5),u>g&&(o=u);break;case"none":r=e[0],o=e[1]-i;var m=f(a),g=p(a)}return a.style.left=r+"px",a.style.top=o+"px",a.style.opacity=1,a.style.position="absolute",a},t.tooltip.cleanup=function(){for(var t=document.getElementsByClassName("nvtooltip"),e=[];t.length;)e.push(t[0]),t[0].style.transitionDelay="0 !important",t[0].style.opacity=0,t[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;e.length;){var t=e.pop();t.parentNode.removeChild(t)}},500)}}(),t.utils.windowSize=function(){var t={width:640,height:480};return document.body&&document.body.offsetWidth&&(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(t.width=window.innerWidth,t.height=window.innerHeight),t},t.utils.windowResize=function(e){return window.addEventListener?window.addEventListener("resize",e):t.log("ERROR: Failed to bind to window.resize with: ",e),{callback:e,clear:function(){window.removeEventListener("resize",e)}}},t.utils.getColor=function(e){return arguments.length?e instanceof Array?function(t,n){return t.color||e[n%e.length]}:e:t.utils.defaultColor()},t.utils.defaultColor=function(){var t=d3.scale.category20().range();return function(e,n){return e.color||t[n%t.length]}},t.utils.customTheme=function(t,e,n){e=e||function(t){return t.key},n=n||d3.scale.category20().range();var i=n.length;return function(a,r){var o=e(a);return"function"==typeof t[o]?t[o]():void 0!==t[o]?t[o]:(i||(i=n.length),i-=1,n[i])}},t.utils.pjax=function(e,n){var i=function(i){d3.html(i,function(i){var a=d3.select(n).node();a.parentNode.replaceChild(d3.select(i).select(n).node(),a),t.utils.pjax(e,n)})};d3.selectAll(e).on("click",function(){history.pushState(this.href,this.textContent,this.href),i(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&i(d3.event.state)})},t.utils.calcApproxTextWidth=function(t){if("function"==typeof t.style&&"function"==typeof t.text){var e=parseInt(t.style("font-size").replace("px","")),n=t.text().length;return n*e*.5}return 0},t.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||t===1/0||t===-(1/0)?0:t},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},t.utils.renderWatch=function(e,n){if(!(this instanceof t.utils.renderWatch))return new t.utils.renderWatch(e,n);var i=void 0!==n?n:250,a=[],r=this;this.models=function(t){return t=[].slice.call(arguments,0),t.forEach(function(t){t.__rendered=!1,function(t){t.dispatch.on("renderEnd",function(e){t.__rendered=!0,r.renderEnd("model")})}(t),a.indexOf(t)<0&&a.push(t)}),this},this.reset=function(t){void 0!==t&&(i=t),a=[]},this.transition=function(t,e,n){if(e=arguments.length>1?[].slice.call(arguments,1):[],n=e.length>1?e.pop():void 0!==i?i:250,t.__rendered=!1,a.indexOf(t)<0&&a.push(t),0===n)return t.__rendered=!0,t.delay=function(){return this},t.duration=function(){return this},t;0===t.length?t.__rendered=!0:t.every(function(t){return!t.length})?t.__rendered=!0:t.__rendered=!1;var o=0;return t.transition().duration(n).each(function(){++o}).each("end",function(n,i){0===--o&&(t.__rendered=!0,r.renderEnd.apply(this,e))})},this.renderEnd=function(){a.every(function(t){return t.__rendered})&&(a.forEach(function(t){t.__rendered=!1}),e.renderEnd.apply(this,arguments))}},t.utils.deepExtend=function(e){var n=arguments.length>1?[].slice.call(arguments,1):[];n.forEach(function(n){for(key in n){var i=e[key]instanceof Array,a="object"==typeof e[key],r="object"==typeof n[key];a&&!i&&r?t.utils.deepExtend(e[key],n[key]):e[key]=n[key]}})},t.utils.state=function(){if(!(this instanceof t.utils.state))return new t.utils.state;var e={},n=function(){},i=function(){return{}},a=null,r=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(t){n(t,!0)}),this.getter=function(t){return i=t,this},this.setter=function(t,e){return e||(e=function(){}),n=function(n,i){t(n),i&&e()},this},this.init=function(e){a=a||{},t.utils.deepExtend(a,e)};var o=function(){var t=i();if(JSON.stringify(t)===JSON.stringify(e))return!1;for(var n in t)void 0===e[n]&&(e[n]={}),e[n]=t[n],r=!0;return!0};this.update=function(){a&&(n(a,!1),a=null),o.call(this)&&this.dispatch.change(e)}},t.utils.optionsFunc=function(e){return t.deprecated("nv.utils.optionsFunc"),e&&d3.map(e).forEach(function(t,e){"function"==typeof this[t]&&this[t](e)}.bind(this)),this},t.utils.calcTicksX=function(e,n){var i=1,a=0;for(a;a<n.length;a+=1){var r=n[a]&&n[a].values?n[a].values.length:0;i=r>i?r:i}return t.log("Requested number of ticks: ",e),t.log("Calculated max values to be: ",i),e=e>i?e=i-1:e,e=e<1?1:e,e=Math.floor(e),t.log("Calculating tick count as: ",e),e},t.utils.calcTicksY=function(e,n){return t.utils.calcTicksX(e,n)},t.utils.initOption=function(t,e){t._calls&&t._calls[e]?t[e]=t._calls[e]:t[e]=function(n){return arguments.length?(t._options[e]=n,t):t._options[e]}},t.utils.initOptions=function(e){var n=Object.getOwnPropertyNames(e._options||{}),i=Object.getOwnPropertyNames(e._calls||{});n=n.concat(i);for(var a in n)t.utils.initOption(e,n[a])},t.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},t.utils.arrayUnique=function(t){return t.sort().filter(function(e,n){return!n||e!=t[n-1]})},t.utils.symbolMap=d3.map(),t.utils.symbol=function(){function e(e,a){var r=n.call(this,e,a),o=i.call(this,e,a);return d3.svg.symbolTypes.indexOf(r)!==-1?d3.svg.symbol().type(r).size(o)():t.utils.symbolMap.get(r)(o)}var n,i=64;return e.type=function(t){return arguments.length?(n=d3.functor(t),e):n},e.size=function(t){return arguments.length?(i=d3.functor(t),e):i},e},t.utils.inheritOptions=function(e,n){var i=Object.getOwnPropertyNames(n._options||{}),a=Object.getOwnPropertyNames(n._calls||{}),r=n._inherited||[],o=n._d3options||[],s=i.concat(a).concat(r).concat(o);s.unshift(n),s.unshift(e),d3.rebind.apply(this,s),e._inherited=t.utils.arrayUnique(i.concat(a).concat(r).concat(i).concat(e._inherited||[])),e._d3options=t.utils.arrayUnique(o.concat(e._d3options||[]))},t.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},t.models.axis=function(){"use strict";function e(o){return b.reset(),o.each(function(e){var o=d3.select(this);t.utils.initSVG(o);var g=o.selectAll("g.nv-wrap.nv-axis").data([e]),v=g.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),x=(v.append("g"),g.select("g"));null!==f?n.ticks(f):"top"!=n.orient()&&"bottom"!=n.orient()||n.ticks(Math.abs(i.range()[1]-i.range()[0])/100),x.watchTransition(b,"axis").call(n),y=y||n.scale();var w=n.tickFormat();null==w&&(w=y.tickFormat());var k=x.selectAll("text.nv-axislabel").data([s||null]);switch(k.exit().remove(),n.orient()){case"top":k.enter().append("text").attr("class","nv-axislabel");var S;if(S=i.range().length<2?0:2===i.range().length?i.range()[1]:i.range()[i.range().length-1]+(i.range()[1]-i.range()[0]),k.attr("text-anchor","middle").attr("y",0).attr("x",S/2),l){var T=g.selectAll("g.nv-axisMaxMin").data(i.domain());T.enter().append("g").attr("class","nv-axisMaxMin").append("text"),T.exit().remove(),T.attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(i(e))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-n.tickPadding()).attr("text-anchor","middle").text(function(t,e){var n=w(t);return(""+n).match("NaN")?"":n}),T.watchTransition(b,"min-max top").attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(i.range()[n])+",0)"})}break;case"bottom":var D=m+36,A=30,C=x.selectAll("g").select("text");if(c%360){C.each(function(t,e){var n=this.getBoundingClientRect().width;n>A&&(A=n)});var M=Math.abs(Math.sin(c*Math.PI/180)),D=(M?M*A:A)+30;C.attr("transform",function(t,e,n){return"rotate("+c+" 0,0)"}).style("text-anchor",c%360>0?"start":"end")}k.enter().append("text").attr("class","nv-axislabel");var S;if(S=i.range().length<2?0:2===i.range().length?i.range()[1]:i.range()[i.range().length-1]+(i.range()[1]-i.range()[0]),k.attr("text-anchor","middle").attr("y",D).attr("x",S/2),l){var T=g.selectAll("g.nv-axisMaxMin").data([i.domain()[0],i.domain()[i.domain().length-1]]);T.enter().append("g").attr("class","nv-axisMaxMin").append("text"),T.exit().remove(),T.attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(i(e)+(p?i.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",n.tickPadding()).attr("transform",function(t,e,n){return"rotate("+c+" 0,0)"}).style("text-anchor",c?c%360>0?"start":"end":"middle").text(function(t,e){var n=w(t);return(""+n).match("NaN")?"":n}),T.watchTransition(b,"min-max bottom").attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(i(e)+(p?i.rangeBand()/2:0))+",0)"})}h&&C.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"});break;case"right":if(k.enter().append("text").attr("class","nv-axislabel"),k.style("text-anchor",u?"middle":"begin").attr("transform",u?"rotate(90)":"").attr("y",u?-Math.max(a.right,r)+12:-10).attr("x",u?i.range()[0]/2:n.tickPadding()),l){var T=g.selectAll("g.nv-axisMaxMin").data(i.domain());T.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),T.exit().remove(),T.attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(i(e))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",n.tickPadding()).style("text-anchor","start").text(function(t,e){var n=w(t);return(""+n).match("NaN")?"":n}),T.watchTransition(b,"min-max right").attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(i.range()[n])+")"}).select("text").style("opacity",1)}break;case"left":if(k.enter().append("text").attr("class","nv-axislabel"),k.style("text-anchor",u?"middle":"end").attr("transform",u?"rotate(-90)":"").attr("y",u?-Math.max(a.left,r)+25-(m||0):-10).attr("x",u?-i.range()[0]/2:-n.tickPadding()),l){var T=g.selectAll("g.nv-axisMaxMin").data(i.domain());T.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),T.exit().remove(),T.attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(y(e))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-n.tickPadding()).attr("text-anchor","end").text(function(t,e){var n=w(t);return(""+n).match("NaN")?"":n}),T.watchTransition(b,"min-max right").attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(i.range()[n])+")"}).select("text").style("opacity",1)}}if(k.text(function(t){return t}),!l||"left"!==n.orient()&&"right"!==n.orient()||(x.selectAll("g").each(function(t,e){d3.select(this).select("text").attr("opacity",1),(i(t)<i.range()[1]+10||i(t)>i.range()[0]-10)&&((t>1e-10||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),i.domain()[0]==i.domain()[1]&&0==i.domain()[0]&&g.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),l&&("top"===n.orient()||"bottom"===n.orient())){var _=[];g.selectAll("g.nv-axisMaxMin").each(function(t,e){try{e?_.push(i(t)-this.getBoundingClientRect().width-4):_.push(i(t)+this.getBoundingClientRect().width+4)}catch(n){e?_.push(i(t)-4):_.push(i(t)+4)}}),x.selectAll("g").each(function(t,e){(i(t)<_[0]||i(t)>_[1])&&(t>1e-10||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}d&&x.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*this.__data__)/1e6)&&void 0!==this.__data__}).classed("zero",!0),y=i.copy()}),b.renderEnd("axis immediate"),e}var n=d3.svg.axis(),i=d3.scale.linear(),a={top:0,right:0,bottom:0,left:0},r=75,o=60,s=null,l=!0,d=!0,c=0,u=!0,h=!1,p=!1,f=null,m=0,g=250,v=d3.dispatch("renderEnd");n.scale(i).orient("bottom").tickFormat(function(t){return t});var y,b=t.utils.renderWatch(v,g);return e.axis=n,e.dispatch=v,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{axisLabelDistance:{get:function(){return m},set:function(t){m=t}},staggerLabels:{get:function(){return h},set:function(t){h=t}},rotateLabels:{get:function(){return c},set:function(t){c=t}},rotateYLabel:{get:function(){return u},set:function(t){u=t}},highlightZero:{get:function(){return d},set:function(t){d=t}},showMaxMin:{get:function(){return l},set:function(t){l=t}},axisLabel:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return o},set:function(t){o=t}},ticks:{get:function(){return f},set:function(t){f=t}},width:{get:function(){return r},set:function(t){r=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},duration:{get:function(){return g},set:function(t){g=t,b.reset(g)}},scale:{get:function(){return i},set:function(a){i=a,n.scale(i),p="function"==typeof i.rangeBands,t.utils.inheritOptionsD3(e,i,["domain","range","rangeBand","rangeBands"])}}}),t.utils.initOptions(e),t.utils.inheritOptionsD3(e,n,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),t.utils.inheritOptionsD3(e,i,["domain","range","rangeBand","rangeBands"]),e},t.models.bullet=function(){"use strict";function e(i){return i.each(function(e,i){var f=h-n.left-n.right,v=p-n.top-n.bottom,y=d3.select(this);t.utils.initSVG(y);var b=r.call(this,e,i).slice().sort(d3.descending),x=o.call(this,e,i).slice().sort(d3.descending),w=s.call(this,e,i).slice().sort(d3.descending),k=l.call(this,e,i).slice(),S=d.call(this,e,i).slice(),T=c.call(this,e,i).slice(),D=d3.scale.linear().domain(d3.extent(d3.merge([u,b]))).range(a?[f,0]:[0,f]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(D.range());this.__chart__=D;var A=d3.min(b),C=d3.max(b),M=b[1],_=y.selectAll("g.nv-wrap.nv-bullet").data([e]),N=_.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),E=N.append("g"),P=_.select("g");E.append("rect").attr("class","nv-range nv-rangeMax"),E.append("rect").attr("class","nv-range nv-rangeAvg"),E.append("rect").attr("class","nv-range nv-rangeMin"),E.append("rect").attr("class","nv-measure"),E.append("path").attr("class","nv-markerTriangle"),_.attr("transform","translate("+n.left+","+n.top+")");var I=function(t){return Math.abs(D(t)-D(0))},F=function(t){return D(t<0?t:0)};P.select("rect.nv-rangeMax").attr("height",v).attr("width",I(C>0?C:A)).attr("x",F(C>0?C:A)).datum(C>0?C:A),
P.select("rect.nv-rangeAvg").attr("height",v).attr("width",I(M)).attr("x",F(M)).datum(M),P.select("rect.nv-rangeMin").attr("height",v).attr("width",I(C)).attr("x",F(C)).attr("width",I(C>0?A:C)).attr("x",F(C>0?A:C)).datum(C>0?A:C),P.select("rect.nv-measure").style("fill",m).attr("height",v/3).attr("y",v/3).attr("width",w<0?D(0)-D(w[0]):D(w[0])-D(0)).attr("x",F(w)).on("mouseover",function(){g.elementMouseover({value:w[0],label:T[0]||"Current",pos:[D(w[0]),v/2]})}).on("mouseout",function(){g.elementMouseout({value:w[0],label:T[0]||"Current"})});var O=v/6;x[0]?P.selectAll("path.nv-markerTriangle").attr("transform",function(t){return"translate("+D(x[0])+","+v/2+")"}).attr("d","M0,"+O+"L"+O+","+-O+" "+-O+","+-O+"Z").on("mouseover",function(){g.elementMouseover({value:x[0],label:S[0]||"Previous",pos:[D(x[0]),v/2]})}).on("mouseout",function(){g.elementMouseout({value:x[0],label:S[0]||"Previous"})}):P.selectAll("path.nv-markerTriangle").remove(),_.selectAll(".nv-range").on("mouseover",function(t,e){var n=k[e]||(e?1==e?"Mean":"Minimum":"Maximum");g.elementMouseover({value:t,label:n,pos:[D(t),v/2]})}).on("mouseout",function(t,e){var n=k[e]||(e?1==e?"Mean":"Minimum":"Maximum");g.elementMouseout({value:t,label:n})})}),e}var n={top:0,right:0,bottom:0,left:0},i="left",a=!1,r=function(t){return t.ranges},o=function(t){return t.markers?t.markers:[0]},s=function(t){return t.measures},l=function(t){return t.rangeLabels?t.rangeLabels:[]},d=function(t){return t.markerLabels?t.markerLabels:[]},c=function(t){return t.measureLabels?t.measureLabels:[]},u=[0],h=380,p=30,f=null,m=t.utils.getColor(["#1f77b4"]),g=d3.dispatch("elementMouseover","elementMouseout");return e.dispatch=g,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{ranges:{get:function(){return r},set:function(t){r=t}},markers:{get:function(){return o},set:function(t){o=t}},measures:{get:function(){return s},set:function(t){s=t}},forceX:{get:function(){return u},set:function(t){u=t}},width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return p},set:function(t){p=t}},tickFormat:{get:function(){return f},set:function(t){f=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},orient:{get:function(){return i},set:function(t){i=t,a="right"==i||"bottom"==i}},color:{get:function(){return m},set:function(e){m=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.bulletChart=function(){"use strict";function e(i){return i.each(function(p,v){var y=d3.select(this);t.utils.initSVG(y);var b=(d||parseInt(y.style("width"))||960)-r.left-r.right,x=c-r.top-r.bottom,w=this;if(e.update=function(){e(i)},e.container=this,!p||!o.call(this,p,v)){var k=y.selectAll(".nv-noData").data([f]);return k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",r.left+b/2).attr("y",18+r.top+x/2).text(function(t){return t}),e}y.selectAll(".nv-noData").remove();var S=o.call(this,p,v).slice().sort(d3.descending),T=s.call(this,p,v).slice().sort(d3.descending),D=l.call(this,p,v).slice().sort(d3.descending),A=y.selectAll("g.nv-wrap.nv-bulletChart").data([p]),C=A.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),M=C.append("g"),_=A.select("g");M.append("g").attr("class","nv-bulletWrap"),M.append("g").attr("class","nv-titles"),A.attr("transform","translate("+r.left+","+r.top+")");var N=d3.scale.linear().domain([0,Math.max(S[0],T[0],D[0])]).range(a?[b,0]:[0,b]),E=this.__chart__||d3.scale.linear().domain([0,1/0]).range(N.range());this.__chart__=N;var P=M.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(c-r.top-r.bottom)/2+")");P.append("text").attr("class","nv-title").text(function(t){return t.title}),P.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),n.width(b).height(x);var I=_.select(".nv-bulletWrap");d3.transition(I).call(n);var F=u||N.tickFormat(b/100),O=_.selectAll("g.nv-tick").data(N.ticks(b/50),function(t){return this.textContent||F(t)}),j=O.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+E(t)+",0)"}).style("opacity",1e-6);j.append("line").attr("y1",x).attr("y2",7*x/6),j.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*x/6).text(F);var L=d3.transition(O).attr("transform",function(t){return"translate("+N(t)+",0)"}).style("opacity",1);L.select("line").attr("y1",x).attr("y2",7*x/6),L.select("text").attr("y",7*x/6),d3.transition(O.exit()).attr("transform",function(t){return"translate("+N(t)+",0)"}).style("opacity",1e-6).remove(),m.on("tooltipShow",function(t){t.key=p.title,h&&g(t,w.parentNode)})}),d3.timer.flush(),e}var n=t.models.bullet(),i="left",a=!1,r={top:5,right:40,bottom:20,left:120},o=function(t){return t.ranges},s=function(t){return t.markers?t.markers:[0]},l=function(t){return t.measures},d=null,c=55,u=null,h=!0,p=function(t,e,n,i,a){return"<h3>"+e+"</h3><p>"+n+"</p>"},f="No Data Available.",m=d3.dispatch("tooltipShow","tooltipHide"),g=function(n,i){var a=n.pos[0]+(i.offsetLeft||0)+r.left,o=n.pos[1]+(i.offsetTop||0)+r.top,s=p(n.key,n.label,n.value,n,e);t.tooltip.show([a,o],s,n.value<0?"e":"w",null,i)};return n.dispatch.on("elementMouseover.tooltip",function(t){m.tooltipShow(t)}),n.dispatch.on("elementMouseout.tooltip",function(t){m.tooltipHide(t)}),m.on("tooltipHide",function(){h&&t.tooltip.cleanup()}),e.bullet=n,e.dispatch=m,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{ranges:{get:function(){return o},set:function(t){o=t}},markers:{get:function(){return s},set:function(t){s=t}},measures:{get:function(){return l},set:function(t){l=t}},width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return c},set:function(t){c=t}},tickFormat:{get:function(){return u},set:function(t){u=t}},tooltips:{get:function(){return h},set:function(t){h=t}},tooltipContent:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return f},set:function(t){f=t}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},orient:{get:function(){return i},set:function(t){i=t,a="right"==i||"bottom"==i}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.cumulativeLineChart=function(){"use strict";function e(S){return F.reset(),F.models(r),g&&F.models(o),v&&F.models(s),S.each(function(S){function E(t,n){d3.select(e.container).style("cursor","ew-resize")}function F(t,e){I.x=d3.event.x,I.i=Math.round(P.invert(I.x)),B()}function R(t,n){d3.select(e.container).style("cursor","auto"),D.index=I.i,_.stateChange(D)}function B(){rt.data([I]);var t=e.duration();e.duration(0),e.update(),e.duration(t)}var $=d3.select(this);t.utils.initSVG($),$.classed("nv-chart-"+T,!0);var z=this,V=(p||parseInt($.style("width"))||960)-u.left-u.right,Y=(f||parseInt($.style("height"))||400)-u.top-u.bottom;if(e.update=function(){0===N?$.call(e):$.transition().duration(N).call(e)},e.container=this,D.setter(L(S),e.update).getter(j(S)).update(),D.disabled=S.map(function(t){return!!t.disabled}),!A){var H;A={};for(H in D)D[H]instanceof Array?A[H]=D[H].slice(0):A[H]=D[H]}var W=d3.behavior.drag().on("dragstart",E).on("drag",F).on("dragend",R);if(!(S&&S.length&&S.filter(function(t){return t.values.length}).length)){var U=$.selectAll(".nv-noData").data([C]);return U.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),U.attr("x",u.left+V/2).attr("y",u.top+Y/2).text(function(t){return t}),e}if($.selectAll(".nv-noData").remove(),i=r.xScale(),a=r.yScale(),k)r.yDomain(null);else{var G=S.filter(function(t){return!t.disabled}).map(function(t,e){var n=d3.extent(t.values,r.y());return n[0]<-.95&&(n[0]=-.95),[(n[0]-n[1])/(1+n[1]),(n[1]-n[0])/(1+n[0])]}),J=[d3.min(G,function(t){return t[0]}),d3.max(G,function(t){return t[1]})];r.yDomain(J)}P.domain([0,S[0].values.length-1]).range([0,V]).clamp(!0);var S=n(I.i,S),q=w?"none":"all",X=$.selectAll("g.nv-wrap.nv-cumulativeLine").data([S]),Q=X.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),K=X.select("g");if(Q.append("g").attr("class","nv-interactive"),Q.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),Q.append("g").attr("class","nv-y nv-axis"),Q.append("g").attr("class","nv-background"),Q.append("g").attr("class","nv-linesWrap").style("pointer-events",q),Q.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),Q.append("g").attr("class","nv-legendWrap"),Q.append("g").attr("class","nv-controlsWrap"),m&&(l.width(V),K.select(".nv-legendWrap").datum(S).call(l),u.top!=l.height()&&(u.top=l.height(),Y=(f||parseInt($.style("height"))||400)-u.top-u.bottom),K.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")),x){var Z=[{key:"Re-scale y-axis",disabled:!k}];d.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),K.select(".nv-controlsWrap").datum(Z).attr("transform","translate(0,"+-u.top+")").call(d)}X.attr("transform","translate("+u.left+","+u.top+")"),y&&K.select(".nv-y.nv-axis").attr("transform","translate("+V+",0)");var tt=S.filter(function(t){return t.tempDisabled});X.select(".tempDisabled").remove(),tt.length&&X.append("text").attr("class","tempDisabled").attr("x",V/2).attr("y","-.71em").style("text-anchor","end").text(tt.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),w&&(c.width(V).height(Y).margin({left:u.left,top:u.top}).svgContainer($).xScale(i),X.select(".nv-interactive").call(c)),Q.select(".nv-background").append("rect"),K.select(".nv-background rect").attr("width",V).attr("height",Y),r.y(function(t){return t.display.y}).width(V).height(Y).color(S.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!S[e].disabled&&!S[e].tempDisabled}));var et=K.select(".nv-linesWrap").datum(S.filter(function(t){return!t.disabled&&!t.tempDisabled}));et.call(r),S.forEach(function(t,e){t.seriesIndex=e});var nt=S.filter(function(t){return!t.disabled&&!!M(t)}),it=K.select(".nv-avgLinesWrap").selectAll("line").data(nt,function(t){return t.key}),at=function(t){var e=a(M(t));return e<0?0:e>Y?Y:e};it.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t,e){return r.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",V).attr("y1",at).attr("y2",at),it.style("stroke-opacity",function(t){var e=a(M(t));return e<0||e>Y?0:1}).attr("x1",0).attr("x2",V).attr("y1",at).attr("y2",at),it.exit().remove();var rt=et.selectAll(".nv-indexLine").data([I]);rt.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(W),rt.attr("transform",function(t){return"translate("+P(t.i)+",0)"}).attr("height",Y),g&&(o.scale(i).ticks(t.utils.calcTicksX(V/70,S)).tickSize(-Y,0),K.select(".nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),K.select(".nv-x.nv-axis").call(o)),v&&(s.scale(a).ticks(t.utils.calcTicksY(Y/36,S)).tickSize(-V,0),K.select(".nv-y.nv-axis").call(s)),K.select(".nv-background rect").on("click",function(){I.x=d3.mouse(this)[0],I.i=Math.round(P.invert(I.x)),D.index=I.i,_.stateChange(D),B()}),r.dispatch.on("elementClick",function(t){I.i=t.pointIndex,I.x=P(I.i),D.index=I.i,_.stateChange(D),B()}),d.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,k=!t.disabled,D.rescaleY=k,_.stateChange(D),e.update()}),l.dispatch.on("stateChange",function(t){for(var n in t)D[n]=t[n];_.stateChange(D),e.update()}),c.dispatch.on("elementMousemove",function(n){r.clearHighlights();var i,a,l,d=[];if(S.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(o,s){a=t.interactiveBisect(o.values,n.pointXValue,e.x()),r.highlightPoint(s,a,!0);var c=o.values[a];"undefined"!=typeof c&&("undefined"==typeof i&&(i=c),"undefined"==typeof l&&(l=e.xScale()(e.x()(c,a))),d.push({key:o.key,value:e.y()(c,a),color:h(o,o.seriesIndex)}))}),d.length>2){var p=e.yScale().invert(n.mouseY),f=Math.abs(e.yScale().domain()[0]-e.yScale().domain()[1]),m=.03*f,g=t.nearestValueIndex(d.map(function(t){return t.value}),p,m);null!==g&&(d[g].highlight=!0)}var v=o.tickFormat()(e.x()(i,a),a);c.tooltip.position({left:l+u.left,top:n.mouseY+u.top}).chartContainer(z.parentNode).enabled(b).valueFormatter(function(t,e){return s.tickFormat()(t)}).data({value:v,series:d})(),c.renderGuideLine(l)}),c.dispatch.on("elementMouseout",function(t){_.tooltipHide(),r.clearHighlights()}),_.on("tooltipShow",function(t){b&&O(t,z.parentNode)}),_.on("changeState",function(t){"undefined"!=typeof t.disabled&&(S.forEach(function(e,n){e.disabled=t.disabled[n]}),D.disabled=t.disabled),"undefined"!=typeof t.index&&(I.i=t.index,I.x=P(I.i),D.index=t.index,rt.data([I])),"undefined"!=typeof t.rescaleY&&(k=t.rescaleY),e.update()})}),F.renderEnd("cumulativeLineChart immediate"),e}function n(t,e){return R||(R=r.y()),e.map(function(e,n){if(!e.values)return e;var i=e.values[t];if(null==i)return e;var a=R(i,t);return a<-.95&&!E?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map(function(t,e){return t.display={y:(R(t,e)-a)/(1+a)},t}),e)})}var i,a,r=t.models.line(),o=t.models.axis(),s=t.models.axis(),l=t.models.legend(),d=t.models.legend(),c=t.interactiveGuideline(),u={top:30,right:30,bottom:50,left:60},h=t.utils.defaultColor(),p=null,f=null,m=!0,g=!0,v=!0,y=!1,b=!0,x=!0,w=!1,k=!0,S=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},T=r.id(),D=t.utils.state(),A=null,C="No Data Available.",M=function(t){return t.average},_=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),N=250,E=!1;D.index=0,D.rescaleY=k,o.orient("bottom").tickPadding(7),s.orient(y?"right":"left"),d.updateState(!1);var P=d3.scale.linear(),I={i:0,x:0},F=t.utils.renderWatch(_,N),O=function(n,i){var a=n.pos[0]+(i.offsetLeft||0),l=n.pos[1]+(i.offsetTop||0),d=o.tickFormat()(r.x()(n.point,n.pointIndex)),c=s.tickFormat()(r.y()(n.point,n.pointIndex)),u=S(n.series.key,d,c,n,e);t.tooltip.show([a,l],u,null,null,i)},j=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),index:I.i,rescaleY:k}}},L=function(t){return function(e){void 0!==e.index&&(I.i=e.index),void 0!==e.rescaleY&&(k=e.rescaleY),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};r.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],_.tooltipShow(t)}),r.dispatch.on("elementMouseout.tooltip",function(t){_.tooltipHide(t)}),_.on("tooltipHide",function(){b&&t.tooltip.cleanup()});var R=null;return e.dispatch=_,e.lines=r,e.legend=l,e.xAxis=o,e.yAxis=s,e.interactiveLayer=c,e.state=D,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return f},set:function(t){f=t}},rescaleY:{get:function(){return k},set:function(t){k=t}},showControls:{get:function(){return x},set:function(t){x=t}},showLegend:{get:function(){return m},set:function(t){m=t}},average:{get:function(){return M},set:function(t){M=t}},tooltips:{get:function(){return b},set:function(t){b=t}},tooltipContent:{get:function(){return S},set:function(t){S=t}},defaultState:{get:function(){return A},set:function(t){A=t}},noData:{get:function(){return C},set:function(t){C=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},noErrorCheck:{get:function(){return E},set:function(t){E=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),l.color(h)}},useInteractiveGuideline:{get:function(){return w},set:function(t){w=t,t===!0&&(e.interactive(!1),e.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return y},set:function(t){y=t,s.orient(t?"right":"left")}},duration:{get:function(){return N},set:function(t){N=t,r.duration(N),o.duration(N),s.duration(N),F.reset(N)}}}),t.utils.inheritOptions(e,r),t.utils.initOptions(e),e},t.models.discreteBar=function(){"use strict";function e(u){return S.reset(),u.each(function(e){var u=d-l.left-l.right,k=c-l.top-l.bottom,T=d3.select(this);t.utils.initSVG(T),e.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var D=n&&i?[]:e.map(function(t){return t.values.map(function(t,e){return{x:f(t,e),y:m(t,e),y0:t.y0}})});h.domain(n||d3.merge(D).map(function(t){return t.x})).rangeBands(a||[0,u],.1),p.domain(i||d3.extent(d3.merge(D).map(function(t){return t.y}).concat(g))),y?p.range(r||[k-(p.domain()[0]<0?12:0),p.domain()[1]>0?12:0]):p.range(r||[k,0]),o=o||h,s=s||p.copy().range([p(0),p(0)]);var A=T.selectAll("g.nv-wrap.nv-discretebar").data([e]),C=A.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),M=C.append("g");A.select("g");M.append("g").attr("class","nv-groups"),A.attr("transform","translate("+l.left+","+l.top+")");var _=A.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});_.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),_.exit().watchTransition(S,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),_.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),_.watchTransition(S,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var N=_.selectAll("g.nv-bar").data(function(t){return t.values});N.exit().remove();var E=N.enter().append("g").attr("transform",function(t,e,n){return"translate("+(h(f(t,e))+.05*h.rangeBand())+", "+p(0)+")"}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),x.elementMouseover({value:m(t,n),point:t,series:e[t.series],pos:[h(f(t,n))+h.rangeBand()*(t.series+.5)/e.length,p(m(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),x.elementMouseout({value:m(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){x.elementClick({value:m(t,n),point:t,series:e[t.series],pos:[h(f(t,n))+h.rangeBand()*(t.series+.5)/e.length,p(m(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){x.elementDblClick({value:m(t,n),point:t,series:e[t.series],pos:[h(f(t,n))+h.rangeBand()*(t.series+.5)/e.length,p(m(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()});E.append("rect").attr("height",0).attr("width",.9*h.rangeBand()/e.length),y?(E.append("text").attr("text-anchor","middle"),N.select("text").text(function(t,e){return b(m(t,e))}).watchTransition(S,"discreteBar: bars text").attr("x",.9*h.rangeBand()/2).attr("y",function(t,e){return m(t,e)<0?p(m(t,e))-p(0)+12:-4})):N.selectAll("text").remove(),N.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||v(t,e)}).style("stroke",function(t,e){return t.color||v(t,e)}).select("rect").attr("class",w).watchTransition(S,"discreteBar: bars rect").attr("width",.9*h.rangeBand()/e.length),N.watchTransition(S,"discreteBar: bars").attr("transform",function(t,e){var n=h(f(t,e))+.05*h.rangeBand(),i=m(t,e)<0?p(0):p(0)-p(m(t,e))<1?p(0)-1:p(m(t,e));return"translate("+n+", "+i+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(p(m(t,e))-p(i&&i[0]||0))||1)}),o=h.copy(),s=p.copy()}),S.renderEnd("discreteBar immediate"),e}var n,i,a,r,o,s,l={top:0,right:0,bottom:0,left:0},d=960,c=500,u=Math.floor(1e4*Math.random()),h=d3.scale.ordinal(),p=d3.scale.linear(),f=function(t){return t.x},m=function(t){return t.y},g=[0],v=t.utils.defaultColor(),y=!1,b=d3.format(",.2f"),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),w="discreteBar",k=250,S=t.utils.renderWatch(x,k);return e.dispatch=x,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return c},set:function(t){c=t}},forceY:{get:function(){return g},set:function(t){g=t}},showValues:{get:function(){return y},set:function(t){y=t}},x:{get:function(){return f},set:function(t){f=t}},y:{get:function(){return m},set:function(t){m=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return a},set:function(t){a=t}},yRange:{get:function(){return r},set:function(t){r=t}},valueFormat:{get:function(){return b},set:function(t){b=t}},id:{get:function(){return u},set:function(t){u=t}},rectClass:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},color:{get:function(){return v},set:function(e){v=t.utils.getColor(e)}},duration:{get:function(){return k},set:function(t){k=t,S.reset(k)}}}),t.utils.initOptions(e),e},t.models.discreteBarChart=function(){"use strict";function e(c){return w.reset(),w.models(a),u&&w.models(r),h&&w.models(o),c.each(function(c){var g=d3.select(this),w=this;t.utils.initSVG(g);var k=(l||parseInt(g.style("width"))||960)-s.left-s.right,S=(d||parseInt(g.style("height"))||400)-s.top-s.bottom;if(e.update=function(){y.beforeUpdate(),g.transition().duration(b).call(e)},e.container=this,!(c&&c.length&&c.filter(function(t){return t.values.length}).length)){var T=g.selectAll(".nv-noData").data([v]);return T.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),T.attr("x",s.left+k/2).attr("y",s.top+S/2).text(function(t){return t}),e}g.selectAll(".nv-noData").remove(),n=a.xScale(),i=a.yScale().clamp(!0);var D=g.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([c]),A=D.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),C=A.append("defs"),M=D.select("g");A.append("g").attr("class","nv-x nv-axis"),A.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),A.append("g").attr("class","nv-barsWrap"),M.attr("transform","translate("+s.left+","+s.top+")"),p&&M.select(".nv-y.nv-axis").attr("transform","translate("+k+",0)"),a.width(k).height(S);var _=M.select(".nv-barsWrap").datum(c.filter(function(t){return!t.disabled}));if(_.transition().call(a),C.append("clipPath").attr("id","nv-x-label-clip-"+a.id()).append("rect"),M.select("#nv-x-label-clip-"+a.id()+" rect").attr("width",n.rangeBand()*(f?2:1)).attr("height",16).attr("x",-n.rangeBand()/(f?1:2)),u){r.scale(n).ticks(t.utils.calcTicksX(k/100,c)).tickSize(-S,0),M.select(".nv-x.nv-axis").attr("transform","translate(0,"+(i.range()[0]+(a.showValues()&&i.domain()[0]<0?16:0))+")"),M.select(".nv-x.nv-axis").call(r);var N=M.select(".nv-x.nv-axis").selectAll("g");f&&N.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}h&&(o.scale(i).ticks(t.utils.calcTicksY(S/36,c)).tickSize(-k,0),M.select(".nv-y.nv-axis").call(o)),M.select(".nv-zeroLine line").attr("x1",0).attr("x2",k).attr("y1",i(0)).attr("y2",i(0)),y.on("tooltipShow",function(t){m&&x(t,w.parentNode)})}),w.renderEnd("discreteBar chart immediate"),e}var n,i,a=t.models.discreteBar(),r=t.models.axis(),o=t.models.axis(),s={top:15,right:10,bottom:50,left:60},l=null,d=null,c=t.utils.getColor(),u=!0,h=!0,p=!1,f=!1,m=!0,g=function(t,e,n,i,a){return"<h3>"+e+"</h3><p>"+n+"</p>"},v="No Data Available.",y=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),b=250;r.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(t){return t}),o.orient(p?"right":"left").tickFormat(d3.format(",.1f"));var x=function(n,i){var s=n.pos[0]+(i.offsetLeft||0),l=n.pos[1]+(i.offsetTop||0),d=r.tickFormat()(a.x()(n.point,n.pointIndex)),c=o.tickFormat()(a.y()(n.point,n.pointIndex)),u=g(n.series.key,d,c,n,e);t.tooltip.show([s,l],u,n.value<0?"n":"s",null,i)},w=t.utils.renderWatch(y,b);return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+s.left,t.pos[1]+s.top],y.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){y.tooltipHide(t)}),y.on("tooltipHide",function(){m&&t.tooltip.cleanup()}),e.dispatch=y,e.discretebar=a,e.xAxis=r,e.yAxis=o,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return d},set:function(t){d=t}},staggerLabels:{get:function(){return f},set:function(t){f=t}},showXAxis:{get:function(){return u},set:function(t){u=t}},showYAxis:{get:function(){return h},set:function(t){h=t}},tooltips:{get:function(){return m},set:function(t){m=t}},tooltipContent:{get:function(){return g},set:function(t){g=t}},noData:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},duration:{get:function(){return b},set:function(t){b=t,w.reset(b),a.duration(b),r.duration(b),o.duration(b)}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),a.color(c)}},rightAlignYAxis:{get:function(){return p},set:function(t){p=t,o.orient(t?"right":"left")}}}),t.utils.inheritOptions(e,a),t.utils.initOptions(e),e},t.models.distribution=function(){"use strict";function e(c){return h.reset(),c.each(function(e){var c=(a-("x"===o?i.left+i.right:i.top+i.bottom),"x"==o?"y":"x"),u=d3.select(this);t.utils.initSVG(u),n=n||d;var p=u.selectAll("g.nv-distribution").data([e]),f=p.enter().append("g").attr("class","nvd3 nv-distribution"),m=(f.append("g"),p.select("g"));p.attr("transform","translate("+i.left+","+i.top+")");var g=m.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});g.enter().append("g"),g.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return l(t,e)});var v=g.selectAll("line.nv-dist"+o).data(function(t){return t.values});v.enter().append("line").attr(o+"1",function(t,e){return n(s(t,e))}).attr(o+"2",function(t,e){return n(s(t,e))}),h.transition(g.exit().selectAll("line.nv-dist"+o),"dist exit").attr(o+"1",function(t,e){return d(s(t,e))}).attr(o+"2",function(t,e){return d(s(t,e))}).style("stroke-opacity",0).remove(),v.attr("class",function(t,e){return"nv-dist"+o+" nv-dist"+o+"-"+e}).attr(c+"1",0).attr(c+"2",r),h.transition(v,"dist").attr(o+"1",function(t,e){return d(s(t,e))}).attr(o+"2",function(t,e){return d(s(t,e))}),n=d.copy()}),h.renderEnd("distribution immediate"),e}var n,i={top:0,right:0,bottom:0,left:0},a=400,r=8,o="x",s=function(t){return t[o]},l=t.utils.defaultColor(),d=d3.scale.linear(),c=250,u=d3.dispatch("renderEnd"),h=t.utils.renderWatch(u,c);return e.options=t.utils.optionsFunc.bind(e),e.dispatch=u,e.margin=function(t){return arguments.length?(i.top="undefined"!=typeof t.top?t.top:i.top,i.right="undefined"!=typeof t.right?t.right:i.right,i.bottom="undefined"!=typeof t.bottom?t.bottom:i.bottom,i.left="undefined"!=typeof t.left?t.left:i.left,e):i},e.width=function(t){return arguments.length?(a=t,e):a},e.axis=function(t){return arguments.length?(o=t,e):o},e.size=function(t){return arguments.length?(r=t,e):r},e.getData=function(t){return arguments.length?(s=d3.functor(t),e):s},e.scale=function(t){return arguments.length?(d=t,e):d},e.color=function(n){return arguments.length?(l=t.utils.getColor(n),e):l},e.duration=function(t){return arguments.length?(c=t,h.reset(c),e):c},e},t.models.historicalBar=function(){"use strict";function e(k){return k.each(function(e){w.reset();var k=d3.select(this),S=(s||parseInt(k.style("width"))||960)-o.left-o.right,T=(l||parseInt(k.style("height"))||400)-o.top-o.bottom;t.utils.initSVG(k),c.domain(n||d3.extent(e[0].values.map(h).concat(f))),g?c.range(a||[.5*S/e[0].values.length,S*(e[0].values.length-.5)/e[0].values.length]):c.range(a||[0,S]),u.domain(i||d3.extent(e[0].values.map(p).concat(m))).range(r||[T,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]+.01*u.domain()[0],u.domain()[1]-.01*u.domain()[1]]):u.domain([-1,1]));var D=k.selectAll("g.nv-wrap.nv-historicalBar-"+d).data([e[0].values]),A=D.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+d),C=A.append("defs"),M=A.append("g"),_=D.select("g");M.append("g").attr("class","nv-bars"),D.attr("transform","translate("+o.left+","+o.top+")"),k.on("click",function(t,e){b.chartClick({data:t,index:e,pos:d3.event,id:d})}),C.append("clipPath").attr("id","nv-chart-clip-path-"+d).append("rect"),D.select("#nv-chart-clip-path-"+d+" rect").attr("width",S).attr("height",T),_.attr("clip-path",v?"url(#nv-chart-clip-path-"+d+")":"");var N=D.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return h(t,e)});N.exit().remove();N.enter().append("rect").attr("x",0).attr("y",function(e,n){return t.utils.NaNtoZero(u(Math.max(0,p(e,n))))}).attr("height",function(e,n){return t.utils.NaNtoZero(Math.abs(u(p(e,n))-u(0)))}).attr("transform",function(t,n){return"translate("+(c(h(t,n))-S/e[0].values.length*.45)+",0)"}).on("mouseover",function(t,n){x&&(d3.select(this).classed("hover",!0),b.elementMouseover({point:t,series:e[0],pos:[c(h(t,n)),u(p(t,n))],pointIndex:n,seriesIndex:0,e:d3.event}))}).on("mouseout",function(t,n){x&&(d3.select(this).classed("hover",!1),b.elementMouseout({point:t,series:e[0],pointIndex:n,seriesIndex:0,e:d3.event}))}).on("click",function(t,e){x&&(b.elementClick({value:p(t,e),data:t,index:e,pos:[c(h(t,e)),u(p(t,e))],e:d3.event,id:d}),d3.event.stopPropagation())}).on("dblclick",function(t,e){x&&(b.elementDblClick({value:p(t,e),data:t,index:e,pos:[c(h(t,e)),u(p(t,e))],e:d3.event,id:d}),d3.event.stopPropagation())});N.attr("fill",function(t,e){return y(t,e)}).attr("class",function(t,e,n){return(p(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).watchTransition(w,"bars").attr("transform",function(t,n){return"translate("+(c(h(t,n))-S/e[0].values.length*.45)+",0)"}).attr("width",S/e[0].values.length*.9),N.watchTransition(w,"bars").attr("y",function(e,n){var i=p(e,n)<0?u(0):u(0)-u(p(e,n))<1?u(0)-1:u(p(e,n));return t.utils.NaNtoZero(i)}).attr("height",function(e,n){return t.utils.NaNtoZero(Math.max(Math.abs(u(p(e,n))-u(0)),1))})}),w.renderEnd("historicalBar immediate"),e}var n,i,a,r,o={top:0,right:0,bottom:0,left:0},s=null,l=null,d=Math.floor(1e4*Math.random()),c=d3.scale.linear(),u=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},f=[],m=[0],g=!1,v=!0,y=t.utils.defaultColor(),b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),x=!0,w=t.utils.renderWatch(b,0);return e.highlightPoint=function(t,e){d3.select(".nv-historicalBar-"+d).select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},e.clearHighlights=function(){d3.select(".nv-historicalBar-"+d).select(".nv-bars .nv-bar.hover").classed("hover",!1)},e.dispatch=b,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},forceX:{get:function(){return f},set:function(t){f=t}},forceY:{get:function(){return m},set:function(t){m=t}},padData:{get:function(){return g},set:function(t){g=t}},x:{get:function(){return h},set:function(t){
h=t}},y:{get:function(){return p},set:function(t){p=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return u},set:function(t){u=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return a},set:function(t){a=t}},yRange:{get:function(){return r},set:function(t){r=t}},clipEdge:{get:function(){return v},set:function(t){v=t}},id:{get:function(){return d},set:function(t){d=t}},interactive:{get:function(){return x},set:function(t){x=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return y},set:function(e){y=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.historicalBarChart=function(e){"use strict";function n(e){return e.each(function(x){C.reset(),C.models(r),m&&C.models(o),g&&C.models(s);var M=d3.select(this),_=this;t.utils.initSVG(M);var N=(h||parseInt(M.style("width"))||960)-c.left-c.right,E=(p||parseInt(M.style("height"))||400)-c.top-c.bottom;if(n.update=function(){M.transition().duration(D).call(n)},n.container=this,w.disabled=x.map(function(t){return!!t.disabled}),!k){var P;k={};for(P in w)w[P]instanceof Array?k[P]=w[P].slice(0):k[P]=w[P]}if(!(x&&x.length&&x.filter(function(t){return t.values.length}).length)){var I=M.selectAll(".nv-noData").data([S]);return I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),I.attr("x",c.left+N/2).attr("y",c.top+E/2).text(function(t){return t}),n}M.selectAll(".nv-noData").remove(),i=r.xScale(),a=r.yScale();var F=M.selectAll("g.nv-wrap.nv-historicalBarChart").data([x]),O=F.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),j=F.select("g");O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis"),O.append("g").attr("class","nv-barsWrap"),O.append("g").attr("class","nv-legendWrap"),O.append("g").attr("class","nv-interactive"),f&&(l.width(N),j.select(".nv-legendWrap").datum(x).call(l),c.top!=l.height()&&(c.top=l.height(),E=(p||parseInt(M.style("height"))||400)-c.top-c.bottom),F.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")),F.attr("transform","translate("+c.left+","+c.top+")"),v&&j.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)"),y&&(d.width(N).height(E).margin({left:c.left,top:c.top}).svgContainer(M).xScale(i),F.select(".nv-interactive").call(d)),r.width(N).height(E).color(x.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!x[e].disabled}));var L=j.select(".nv-barsWrap").datum(x.filter(function(t){return!t.disabled}));L.transition().call(r),m&&(o.scale(i).tickSize(-E,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),j.select(".nv-x.nv-axis").transition().call(o)),g&&(s.scale(a).ticks(t.utils.calcTicksY(E/36,x)).tickSize(-N,0),j.select(".nv-y.nv-axis").transition().call(s)),d.dispatch.on("elementMousemove",function(e){r.clearHighlights();var i,a,l,h=[];x.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(o,s){a=t.interactiveBisect(o.values,e.pointXValue,n.x()),r.highlightPoint(a,!0);var d=o.values[a];"undefined"!=typeof d&&("undefined"==typeof i&&(i=d),"undefined"==typeof l&&(l=n.xScale()(n.x()(d,a))),h.push({key:o.key,value:n.y()(d,a),color:u(o,o.seriesIndex),data:o.values[a]}))});var p=o.tickFormat()(n.x()(i,a));d.tooltip.position({left:l+c.left,top:e.mouseY+c.top}).chartContainer(_.parentNode).enabled(b).valueFormatter(function(t,e){return s.tickFormat()(t)}).data({value:p,series:h})(),d.renderGuideLine(l)}),d.dispatch.on("elementMouseout",function(t){T.tooltipHide(),r.clearHighlights()}),l.dispatch.on("legendClick",function(t,i){t.disabled=!t.disabled,x.filter(function(t){return!t.disabled}).length||x.map(function(t){return t.disabled=!1,F.selectAll(".nv-series").classed("disabled",!1),t}),w.disabled=x.map(function(t){return!!t.disabled}),T.stateChange(w),e.transition().call(n)}),l.dispatch.on("legendDblclick",function(t){x.forEach(function(t){t.disabled=!0}),t.disabled=!1,w.disabled=x.map(function(t){return!!t.disabled}),T.stateChange(w),n.update()}),T.on("tooltipShow",function(t){b&&A(t,_.parentNode)}),T.on("changeState",function(t){"undefined"!=typeof t.disabled&&(x.forEach(function(e,n){e.disabled=t.disabled[n]}),w.disabled=t.disabled),n.update()})}),C.renderEnd("historicalBarChart immediate"),n}var i,a,r=e||t.models.historicalBar(),o=t.models.axis(),s=t.models.axis(),l=t.models.legend(),d=t.interactiveGuideline(),c={top:30,right:90,bottom:50,left:90},u=t.utils.defaultColor(),h=null,p=null,f=!1,m=!0,g=!0,v=!1,y=!1,b=!0,x=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},w={},k=null,S="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),D=250;o.orient("bottom").tickPadding(7),s.orient(v?"right":"left");var A=function(e,i){if(i){var a=d3.select(i).select("svg"),l=a.node()?a.attr("viewBox"):null;if(l){l=l.split(" ");var d=parseInt(a.style("width"))/l[2];e.pos[0]=e.pos[0]*d,e.pos[1]=e.pos[1]*d}}var c=e.pos[0]+(i.offsetLeft||0),u=e.pos[1]+(i.offsetTop||0),h=o.tickFormat()(r.x()(e.point,e.pointIndex)),p=s.tickFormat()(r.y()(e.point,e.pointIndex)),f=x(e.series.key,h,p,e,n);t.tooltip.show([c,u],f,null,null,i)},C=t.utils.renderWatch(T,0);return r.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],T.tooltipShow(t)}),r.dispatch.on("elementMouseout.tooltip",function(t){T.tooltipHide(t)}),T.on("tooltipHide",function(){b&&t.tooltip.cleanup()}),n.dispatch=T,n.bars=r,n.legend=l,n.xAxis=o,n.yAxis=s,n.interactiveLayer=d,n.options=t.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return f},set:function(t){f=t}},showXAxis:{get:function(){return m},set:function(t){m=t}},showYAxis:{get:function(){return g},set:function(t){g=t}},tooltips:{get:function(){return b},set:function(t){b=t}},tooltipContent:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return u},set:function(e){u=t.utils.getColor(e),l.color(u),r.color(u)}},duration:{get:function(){return D},set:function(t){D=t,C.reset(D),s.duration(D),o.duration(D)}},rightAlignYAxis:{get:function(){return v},set:function(t){v=t,s.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return y},set:function(t){y=t,t===!0&&n.interactive(!1)}}}),t.utils.inheritOptions(n,r),t.utils.initOptions(n),n},t.models.ohlcBarChart=function(){var e=t.models.historicalBarChart(t.models.ohlcBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator(function(t){var n=t.series[0].data,i=n.open<n.close?"2ca02c":"d62728";return'<h3 style="color: #'+i+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),e},t.models.legend=function(){"use strict";function e(h){return h.each(function(e){var h=i-n.left-n.right,p=d3.select(this);t.utils.initSVG(p);var f=p.selectAll("g.nv-legend").data([e]),m=(f.enter().append("g").attr("class","nvd3 nv-legend").append("g"),f.select("g"));f.attr("transform","translate("+n.left+","+n.top+")");var g=m.selectAll(".nv-series").data(function(t){return t}),v=g.enter().append("g").attr("class","nv-series").on("mouseover",function(t,e){u.legendMouseover(t,e)}).on("mouseout",function(t,e){u.legendMouseout(t,e)}).on("click",function(t,n){u.legendClick(t,n),d&&(c?(e.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,e.every(function(t){return t.disabled})&&e.forEach(function(t){t.disabled=!1})),u.stateChange({disabled:e.map(function(t){return!!t.disabled})}))}).on("dblclick",function(t,n){u.legendDblclick(t,n),d&&(e.forEach(function(t){t.disabled=!0}),t.disabled=!1,u.stateChange({disabled:e.map(function(t){return!!t.disabled})}))});if(v.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),v.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),g.classed("nv-disabled",function(t){return t.disabled}),g.exit().remove(),g.select("circle").style("fill",function(t,e){return t.color||o(t,e)}).style("stroke",function(t,e){return t.color||o(t,e)}),g.select("text").text(r),s){var y=[];g.each(function(e,n){var i,a=d3.select(this).select("text");try{if(i=a.node().getComputedTextLength(),i<=0)throw Error()}catch(r){i=t.utils.calcApproxTextWidth(a)}y.push(i+28)});for(var b=0,x=0,w=[];x<h&&b<y.length;)w[b]=y[b],x+=y[b++];for(0===b&&(b=1);x>h&&b>1;){w=[],b--;for(var k=0;k<y.length;k++)y[k]>(w[k%b]||0)&&(w[k%b]=y[k]);x=w.reduce(function(t,e,n,i){return t+e})}for(var S=[],T=0,D=0;T<b;T++)S[T]=D,D+=w[T];g.attr("transform",function(t,e){return"translate("+S[e%b]+","+(5+20*Math.floor(e/b))+")"}),l?m.attr("transform","translate("+(i-n.right-x)+","+n.top+")"):m.attr("transform","translate(0,"+n.top+")"),a=n.top+n.bottom+20*Math.ceil(y.length/b)}else{var A,C=5,M=5,_=0;g.attr("transform",function(t,e){var a=d3.select(this).select("text").node().getComputedTextLength()+28;return A=M,i<n.left+n.right+A+a&&(M=A=5,C+=20),M+=a,M>_&&(_=M),"translate("+A+","+C+")"}),m.attr("transform","translate("+(i-n.right-_)+","+n.top+")"),a=n.top+n.bottom+C+15}}),e}var n={top:5,right:0,bottom:5,left:0},i=400,a=20,r=function(t){return t.key},o=t.utils.defaultColor(),s=!0,l=!0,d=!0,c=!1,u=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return e.dispatch=u,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return a},set:function(t){a=t}},key:{get:function(){return r},set:function(t){r=t}},align:{get:function(){return s},set:function(t){s=t}},rightAlign:{get:function(){return l},set:function(t){l=t}},updateState:{get:function(){return d},set:function(t){d=t}},radioButtonMode:{get:function(){return c},set:function(t){c=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return o},set:function(e){o=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.line=function(){"use strict";function e(m){return b.reset(),b.models(a),m.each(function(e){var m=o-r.left-r.right,g=s-r.top-r.bottom,x=d3.select(this);t.utils.initSVG(x),n=a.xScale(),i=a.yScale(),v=v||n,y=y||i;var w=x.selectAll("g.nv-wrap.nv-line").data([e]),k=w.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),S=k.append("defs"),T=k.append("g"),D=w.select("g");T.append("g").attr("class","nv-groups"),T.append("g").attr("class","nv-scatterWrap"),w.attr("transform","translate("+r.left+","+r.top+")"),a.width(m).height(g);var A=w.select(".nv-scatterWrap");A.call(a),S.append("clipPath").attr("id","nv-edge-clip-"+a.id()).append("rect"),w.select("#nv-edge-clip-"+a.id()+" rect").attr("width",m).attr("height",g>0?g:0),D.attr("clip-path",p?"url(#nv-edge-clip-"+a.id()+")":""),A.attr("clip-path",p?"url(#nv-edge-clip-"+a.id()+")":"");var C=w.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});C.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),C.exit().remove(),C.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return l(t,e)}).style("stroke",function(t,e){return l(t,e)}),C.watchTransition(b,"line: groups").style("stroke-opacity",1).style("fill-opacity",.5);var M=C.selectAll("path.nv-area").data(function(t){return h(t)?[t]:[]});M.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(f).defined(u).x(function(e,n){return t.utils.NaNtoZero(v(d(e,n)))}).y0(function(e,n){return t.utils.NaNtoZero(y(c(e,n)))}).y1(function(t,e){return y(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[e.values])}),C.exit().selectAll("path.nv-area").remove(),M.watchTransition(b,"line: areaPaths").attr("d",function(e){return d3.svg.area().interpolate(f).defined(u).x(function(e,i){return t.utils.NaNtoZero(n(d(e,i)))}).y0(function(e,n){return t.utils.NaNtoZero(i(c(e,n)))}).y1(function(t,e){return i(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[e.values])});var _=C.selectAll("path.nv-line").data(function(t){return[t.values]});_.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(f).defined(u).x(function(e,n){return t.utils.NaNtoZero(v(d(e,n)))}).y(function(e,n){return t.utils.NaNtoZero(y(c(e,n)))})),_.watchTransition(b,"line: linePaths").attr("d",d3.svg.line().interpolate(f).defined(u).x(function(e,i){return t.utils.NaNtoZero(n(d(e,i)))}).y(function(e,n){return t.utils.NaNtoZero(i(c(e,n)))})),v=n.copy(),y=i.copy()}),b.renderEnd("line immediate"),e}var n,i,a=t.models.scatter(),r={top:0,right:0,bottom:0,left:0},o=960,s=500,l=t.utils.defaultColor(),d=function(t){return t.x},c=function(t){return t.y},u=function(t,e){return!isNaN(c(t,e))&&null!==c(t,e)},h=function(t){return t.area},p=!1,f="linear",m=250,g=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");a.pointSize(16).pointDomain([16,256]);var v,y,b=t.utils.renderWatch(g,m);return e.dispatch=g,e.scatter=a,a.dispatch.on("elementClick",function(){g.elementClick.apply(this,arguments)}),a.dispatch.on("elementMouseover",function(){g.elementMouseover.apply(this,arguments)}),a.dispatch.on("elementMouseout",function(){g.elementMouseout.apply(this,arguments)}),e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return s},set:function(t){s=t}},defined:{get:function(){return u},set:function(t){u=t}},interpolate:{get:function(){return f},set:function(t){f=t}},clipEdge:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},duration:{get:function(){return m},set:function(t){m=t,b.reset(m),a.duration(m)}},isArea:{get:function(){return h},set:function(t){h=d3.functor(t)}},x:{get:function(){return d},set:function(t){d=t,a.x(t)}},y:{get:function(){return c},set:function(t){c=t,a.y(t)}},color:{get:function(){return l},set:function(e){l=t.utils.getColor(e),a.color(l)}}}),t.utils.inheritOptions(e,a),t.utils.initOptions(e),e},t.models.lineChart=function(){"use strict";function e(b){return A.reset(),A.models(a),f&&A.models(r),m&&A.models(o),b.each(function(b){var A=d3.select(this),_=this;t.utils.initSVG(A);var N=(u||parseInt(A.style("width"))||960)-d.left-d.right,E=(h||parseInt(A.style("height"))||400)-d.top-d.bottom;if(e.update=function(){0===T?A.call(e):A.transition().duration(T).call(e)},e.container=this,x.setter(M(b),e.update).getter(C(b)).update(),x.disabled=b.map(function(t){return!!t.disabled}),!w){var P;w={};for(P in x)x[P]instanceof Array?w[P]=x[P].slice(0):w[P]=x[P]}if(!(b&&b.length&&b.filter(function(t){return t.values.length}).length)){var I=A.selectAll(".nv-noData").data([k]);return I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),I.attr("x",d.left+N/2).attr("y",d.top+E/2).text(function(t){return t}),e}A.selectAll(".nv-noData").remove(),n=a.xScale(),i=a.yScale();var F=A.selectAll("g.nv-wrap.nv-lineChart").data([b]),O=F.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),j=F.select("g");O.append("rect").style("opacity",0),O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis"),O.append("g").attr("class","nv-linesWrap"),O.append("g").attr("class","nv-legendWrap"),O.append("g").attr("class","nv-interactive"),j.select("rect").attr("width",N).attr("height",E>0?E:0),p&&(s.width(N),j.select(".nv-legendWrap").datum(b).call(s),d.top!=s.height()&&(d.top=s.height(),E=(h||parseInt(A.style("height"))||400)-d.top-d.bottom),F.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")),F.attr("transform","translate("+d.left+","+d.top+")"),g&&j.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)"),v&&(l.width(N).height(E).margin({left:d.left,top:d.top}).svgContainer(A).xScale(n),F.select(".nv-interactive").call(l)),a.width(N).height(E).color(b.map(function(t,e){return t.color||c(t,e)}).filter(function(t,e){return!b[e].disabled}));var L=j.select(".nv-linesWrap").datum(b.filter(function(t){return!t.disabled}));L.call(a),f&&(r.scale(n).ticks(t.utils.calcTicksX(N/100,b)).tickSize(-E,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),j.select(".nv-x.nv-axis").call(r)),m&&(o.scale(i).ticks(t.utils.calcTicksY(E/36,b)).tickSize(-N,0),j.select(".nv-y.nv-axis").call(o)),s.dispatch.on("stateChange",function(t){for(var n in t)x[n]=t[n];S.stateChange(x),e.update()}),l.dispatch.on("elementMousemove",function(n){a.clearHighlights();var i,s,u,h=[];if(b.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(r,o){s=t.interactiveBisect(r.values,n.pointXValue,e.x()),a.highlightPoint(o,s,!0);var l=r.values[s];"undefined"!=typeof l&&("undefined"==typeof i&&(i=l),"undefined"==typeof u&&(u=e.xScale()(e.x()(l,s))),h.push({key:r.key,value:e.y()(l,s),color:c(r,r.seriesIndex)}))}),h.length>2){var p=e.yScale().invert(n.mouseY),f=Math.abs(e.yScale().domain()[0]-e.yScale().domain()[1]),m=.03*f,g=t.nearestValueIndex(h.map(function(t){return t.value}),p,m);null!==g&&(h[g].highlight=!0)}var v=r.tickFormat()(e.x()(i,s));l.tooltip.position({left:u+d.left,top:n.mouseY+d.top}).chartContainer(_.parentNode).enabled(y).valueFormatter(function(t,e){return o.tickFormat()(t)}).data({value:v,series:h})(),l.renderGuideLine(u)}),l.dispatch.on("elementClick",function(n){var i,r=[];b.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(a){var o=t.interactiveBisect(a.values,n.pointXValue,e.x()),s=a.values[o];if("undefined"!=typeof s){"undefined"==typeof i&&(i=e.xScale()(e.x()(s,o)));var l=e.yScale()(e.y()(s,o));r.push({point:s,pointIndex:o,pos:[i,l],seriesIndex:a.seriesIndex,series:a})}}),a.dispatch.elementClick(r)}),l.dispatch.on("elementMouseout",function(t){S.tooltipHide(),a.clearHighlights()}),S.on("tooltipShow",function(t){y&&D(t,_.parentNode)}),S.on("changeState",function(t){"undefined"!=typeof t.disabled&&b.length===t.disabled.length&&(b.forEach(function(e,n){e.disabled=t.disabled[n]}),x.disabled=t.disabled),e.update()})}),A.renderEnd("lineChart immediate"),e}var n,i,a=t.models.line(),r=t.models.axis(),o=t.models.axis(),s=t.models.legend(),l=t.interactiveGuideline(),d={top:30,right:20,bottom:50,left:60},c=t.utils.defaultColor(),u=null,h=null,p=!0,f=!0,m=!0,g=!1,v=!1,y=!0,b=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},x=t.utils.state(),w=null,k="No Data Available.",S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),T=250;r.orient("bottom").tickPadding(7),o.orient(g?"right":"left");var D=function(n,i){var s=n.pos[0]+(i.offsetLeft||0),l=n.pos[1]+(i.offsetTop||0),d=r.tickFormat()(a.x()(n.point,n.pointIndex)),c=o.tickFormat()(a.y()(n.point,n.pointIndex)),u=b(n.series.key,d,c,n,e);t.tooltip.show([s,l],u,null,null,i)},A=t.utils.renderWatch(S,T),C=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},M=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],S.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){S.tooltipHide(t)}),S.on("tooltipHide",function(){y&&t.tooltip.cleanup()}),e.dispatch=S,e.lines=a,e.legend=s,e.xAxis=r,e.yAxis=o,e.interactiveLayer=l,e.dispatch=S,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return f},set:function(t){f=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},tooltips:{get:function(){return y},set:function(t){y=t}},tooltipContent:{get:function(){return b},set:function(t){b=t}},defaultState:{get:function(){return w},set:function(t){w=t}},noData:{get:function(){return k},set:function(t){k=t}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},duration:{get:function(){return T},set:function(t){T=t,A.reset(T),a.duration(T),r.duration(T),o.duration(T)}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),s.color(c),a.color(c)}},rightAlignYAxis:{get:function(){return g},set:function(t){g=t,o.orient(g?"right":"left")}},useInteractiveGuideline:{get:function(){return v},set:function(t){v=t,v&&(a.interactive(!1),a.useVoronoi(!1))}}}),t.utils.inheritOptions(e,a),t.utils.initOptions(e),e},t.models.linePlusBarChart=function(){"use strict";function e(O){return O.each(function(O){function U(t){var e=+("e"==t),n=e?1:-1,i=Z/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(i+8)+"V"+(2*i-8)+"M"+4.5*n+","+(i+8)+"V"+(2*i-8)}function G(){x.empty()||x.extent(I),pt.data([x.empty()?a.domain():I]).each(function(t,e){var n=a(t[0])-a.range()[0],i=a.range()[1]-a(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",a(t[1])).attr("width",i<0?0:i)})}function J(){I=x.empty()?null:x.extent(),n=x.empty()?a.domain():x.extent(),L.brush({extent:n,brush:x}),G(),u.width(Q).height(K).color(O.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!O[e].disabled&&O[e].bar})),d.width(Q).height(K).color(O.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!O[e].disabled&&!O[e].bar}));var e=lt.select(".nv-focus .nv-barsWrap").datum(nt.length?nt.map(function(t,e){return{key:t.key,values:t.values.filter(function(t,e){return u.x()(t,e)>=n[0]&&u.x()(t,e)<=n[1]})}}):[{values:[]}]),s=lt.select(".nv-focus .nv-linesWrap").datum(it[0].disabled?[{values:[]}]:it.map(function(t,e){return{key:t.key,values:t.values.filter(function(t,e){return d.x()(t,e)>=n[0]&&d.x()(t,e)<=n[1]})}}));i=nt.length?u.xScale():d.xScale(),p.scale(i).ticks(t.utils.calcTicksX(Q/100,O)).tickSize(-K,0),p.domain([Math.ceil(n[0]),Math.floor(n[1])]),lt.select(".nv-x.nv-axis").transition().duration(R).call(p),e.transition().duration(R).call(u),s.transition().duration(R).call(d),lt.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),m.scale(r).ticks(t.utils.calcTicksY(K/36,O)).tickSize(-Q,0),g.scale(o).ticks(t.utils.calcTicksY(K/36,O)).tickSize(nt.length?0:-Q,0),lt.select(".nv-focus .nv-y1.nv-axis").style("opacity",nt.length?1:0),lt.select(".nv-focus .nv-y2.nv-axis").style("opacity",it.length&&!it[0].disabled?1:0).attr("transform","translate("+i.range()[1]+",0)"),lt.select(".nv-focus .nv-y1.nv-axis").transition().duration(R).call(m),lt.select(".nv-focus .nv-y2.nv-axis").transition().duration(R).call(g)}var q=d3.select(this),X=this;t.utils.initSVG(q);var Q=(S||parseInt(q.style("width"))||960)-w.left-w.right,K=(T||parseInt(q.style("height"))||400)-w.top-w.bottom-(_?P:0),Z=P-k.top-k.bottom;if(e.update=function(){q.transition().duration(R).call(e)},e.container=this,B.setter(W(O),e.update).getter(H(O)).update(),B.disabled=O.map(function(t){return!!t.disabled}),!$){var tt;$={};for(tt in B)B[tt]instanceof Array?$[tt]=B[tt].slice(0):$[tt]=B[tt]}if(!(O&&O.length&&O.filter(function(t){return t.values.length}).length)){var et=q.selectAll(".nv-noData").data([j]);return et.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),et.attr("x",w.left+Q/2).attr("y",w.top+K/2).text(function(t){return t}),e}q.selectAll(".nv-noData").remove();var nt=O.filter(function(t){return!t.disabled&&t.bar}),it=O.filter(function(t){return!t.bar});i=u.xScale(),a=f.scale(),r=u.yScale(),o=d.yScale(),s=h.yScale(),l=c.yScale();var at=O.filter(function(t){return!t.disabled&&t.bar}).map(function(t){return t.values.map(function(t,e){return{x:D(t,e),y:A(t,e)}})}),rt=O.filter(function(t){return!t.disabled&&!t.bar}).map(function(t){return t.values.map(function(t,e){return{x:D(t,e),y:A(t,e)}})});i.range([0,Q]),a.domain(d3.extent(d3.merge(at.concat(rt)),function(t){return t.x})).range([0,Q]);var ot=q.selectAll("g.nv-wrap.nv-linePlusBar").data([O]),st=ot.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),lt=ot.select("g");st.append("g").attr("class","nv-legendWrap");var dt=st.append("g").attr("class","nv-focus");dt.append("g").attr("class","nv-x nv-axis"),dt.append("g").attr("class","nv-y1 nv-axis"),dt.append("g").attr("class","nv-y2 nv-axis"),dt.append("g").attr("class","nv-barsWrap"),dt.append("g").attr("class","nv-linesWrap");var ct=st.append("g").attr("class","nv-context");ct.append("g").attr("class","nv-x nv-axis"),ct.append("g").attr("class","nv-y1 nv-axis"),ct.append("g").attr("class","nv-y2 nv-axis"),ct.append("g").attr("class","nv-barsWrap"),ct.append("g").attr("class","nv-linesWrap"),ct.append("g").attr("class","nv-brushBackground"),ct.append("g").attr("class","nv-x nv-brush"),M&&(b.width(Q/2),lt.select(".nv-legendWrap").datum(O.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?z:V),t})).call(b),w.top!=b.height()&&(w.top=b.height(),K=(T||parseInt(q.style("height"))||400)-w.top-w.bottom-P),lt.select(".nv-legendWrap").attr("transform","translate("+Q/2+","+-w.top+")")),ot.attr("transform","translate("+w.left+","+w.top+")"),lt.select(".nv-context").style("display",_?"initial":"none"),h.width(Q).height(Z).color(O.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!O[e].disabled&&O[e].bar})),c.width(Q).height(Z).color(O.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!O[e].disabled&&!O[e].bar}));var ut=lt.select(".nv-context .nv-barsWrap").datum(nt.length?nt:[{values:[]}]),ht=lt.select(".nv-context .nv-linesWrap").datum(it[0].disabled?[{values:[]}]:it);lt.select(".nv-context").attr("transform","translate(0,"+(K+w.bottom+k.top)+")"),ut.transition().call(h),ht.transition().call(c),E&&(f.ticks(t.utils.calcTicksX(Q/100,O)).tickSize(-Z,0),lt.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+s.range()[0]+")"),lt.select(".nv-context .nv-x.nv-axis").transition().call(f)),N&&(v.scale(s).ticks(Z/36).tickSize(-Q,0),y.scale(l).ticks(Z/36).tickSize(nt.length?0:-Q,0),lt.select(".nv-context .nv-y3.nv-axis").style("opacity",nt.length?1:0).attr("transform","translate(0,"+a.range()[0]+")"),lt.select(".nv-context .nv-y2.nv-axis").style("opacity",it.length?1:0).attr("transform","translate("+a.range()[1]+",0)"),lt.select(".nv-context .nv-y1.nv-axis").transition().call(v),lt.select(".nv-context .nv-y2.nv-axis").transition().call(y)),x.x(a).on("brush",J),I&&x.extent(I);var pt=lt.select(".nv-brushBackground").selectAll("g").data([I||x.extent()]),ft=pt.enter().append("g");ft.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",Z),ft.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",Z);var mt=lt.select(".nv-x.nv-brush").call(x);mt.selectAll("rect").attr("height",Z),mt.selectAll(".resize").append("path").attr("d",U),b.dispatch.on("stateChange",function(t){for(var n in t)B[n]=t[n];L.stateChange(B),e.update()}),L.on("tooltipShow",function(t){F&&Y(t,X.parentNode)}),L.on("changeState",function(t){"undefined"!=typeof t.disabled&&(O.forEach(function(e,n){e.disabled=t.disabled[n]}),B.disabled=t.disabled),e.update()}),J()}),e}var n,i,a,r,o,s,l,d=t.models.line(),c=t.models.line(),u=t.models.historicalBar(),h=t.models.historicalBar(),p=t.models.axis(),f=t.models.axis(),m=t.models.axis(),g=t.models.axis(),v=t.models.axis(),y=t.models.axis(),b=t.models.legend(),x=d3.svg.brush(),w={top:30,right:30,bottom:30,left:60},k={top:0,right:30,bottom:20,left:60},S=null,T=null,D=function(t){return t.x},A=function(t){return t.y},C=t.utils.defaultColor(),M=!0,_=!0,N=!1,E=!0,P=50,I=null,F=!0,O=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},j="No Data Available.",L=d3.dispatch("tooltipShow","tooltipHide","brush","stateChange","changeState"),R=0,B=t.utils.state(),$=null,z=" (left axis)",V=" (right axis)";d.clipEdge(!0),c.interactive(!1),p.orient("bottom").tickPadding(5),m.orient("left"),g.orient("right"),f.orient("bottom").tickPadding(5),v.orient("left"),y.orient("right");var Y=function(i,a){n&&(i.pointIndex+=Math.ceil(n[0]));var r=i.pos[0]+(a.offsetLeft||0),o=i.pos[1]+(a.offsetTop||0),s=p.tickFormat()(d.x()(i.point,i.pointIndex)),l=(i.series.bar?m:g).tickFormat()(d.y()(i.point,i.pointIndex)),c=O(i.series.key,s,l,i,e);t.tooltip.show([r,o],c,i.value<0?"n":"s",null,a)},H=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},W=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return d.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+w.left,t.pos[1]+w.top],L.tooltipShow(t)}),d.dispatch.on("elementMouseout.tooltip",function(t){L.tooltipHide(t)}),u.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+w.left,t.pos[1]+w.top],L.tooltipShow(t)}),u.dispatch.on("elementMouseout.tooltip",function(t){L.tooltipHide(t)}),L.on("tooltipHide",function(){F&&t.tooltip.cleanup()}),e.dispatch=L,e.legend=b,e.lines=d,e.lines2=c,e.bars=u,e.bars2=h,e.xAxis=p,e.x2Axis=f,e.y1Axis=m,e.y2Axis=g,e.y3Axis=v,e.y4Axis=y,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return S},set:function(t){S=t}},height:{get:function(){return T},set:function(t){T=t}},showLegend:{get:function(){return M},set:function(t){M=t}},tooltips:{get:function(){return F},set:function(t){F=t}},tooltipContent:{get:function(){return O},set:function(t){O=t}},brushExtent:{get:function(){return I},set:function(t){I=t}},noData:{get:function(){return j},set:function(t){j=t}},focusEnable:{get:function(){return _},set:function(t){_=t}},focusHeight:{get:function(){return P},set:function(t){P=t}},focusShowAxisX:{get:function(){return E},set:function(t){E=t}},focusShowAxisY:{get:function(){return N},set:function(t){N=t}},legendLeftAxisHint:{get:function(){return z},set:function(t){z=t}},legendRightAxisHint:{get:function(){return V},set:function(t){V=t}},margin:{get:function(){return w},set:function(t){w.top=void 0!==t.top?t.top:w.top,w.right=void 0!==t.right?t.right:w.right,w.bottom=void 0!==t.bottom?t.bottom:w.bottom,w.left=void 0!==t.left?t.left:w.left}},duration:{get:function(){return R},set:function(t){R=t}},color:{get:function(){return C},set:function(e){C=t.utils.getColor(e),b.color(C)}},x:{get:function(){return D},set:function(t){D=t,d.x(t),c.x(t),u.x(t),h.x(t)}},y:{get:function(){return A},set:function(t){A=t,d.y(t),c.y(t),u.y(t),h.y(t)}}}),t.utils.inheritOptions(e,d),t.utils.initOptions(e),e},t.models.lineWithFocusChart=function(){"use strict";function e(S){return S.each(function(S){function P(t){
var e=+("e"==t),n=e?1:-1,i=B/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(i+8)+"V"+(2*i-8)+"M"+4.5*n+","+(i+8)+"V"+(2*i-8)}function I(){p.empty()||p.extent(w),J.data([p.empty()?a.domain():w]).each(function(t,e){var i=a(t[0])-n.range()[0],r=n.range()[1]-a(t[1]);d3.select(this).select(".left").attr("width",i<0?0:i),d3.select(this).select(".right").attr("x",a(t[1])).attr("width",r<0?0:r)})}function F(){w=p.empty()?null:p.extent();var t=p.empty()?a.domain():p.extent();if(!(Math.abs(t[0]-t[1])<=1)){D.brush({extent:t,brush:p}),I();var e=H.select(".nv-focus .nv-linesWrap").datum(S.filter(function(t){return!t.disabled}).map(function(e,n){return{key:e.key,area:e.area,values:e.values.filter(function(e,n){return o.x()(e,n)>=t[0]&&o.x()(e,n)<=t[1]})}}));e.transition().duration(A).call(o),H.select(".nv-focus .nv-x.nv-axis").transition().duration(A).call(l),H.select(".nv-focus .nv-y.nv-axis").transition().duration(A).call(d)}}var O=d3.select(this),j=this;t.utils.initSVG(O);var L=(v||parseInt(O.style("width"))||960)-f.left-f.right,R=(y||parseInt(O.style("height"))||400)-f.top-f.bottom-b,B=b-m.top-m.bottom;if(e.update=function(){O.transition().duration(A).call(e)},e.container=this,C.setter(E(S),e.update).getter(N(S)).update(),C.disabled=S.map(function(t){return!!t.disabled}),!M){var $;M={};for($ in C)C[$]instanceof Array?M[$]=C[$].slice(0):M[$]=C[$]}if(!(S&&S.length&&S.filter(function(t){return t.values.length}).length)){var z=O.selectAll(".nv-noData").data([T]);return z.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),z.attr("x",f.left+L/2).attr("y",f.top+R/2).text(function(t){return t}),e}O.selectAll(".nv-noData").remove(),n=o.xScale(),i=o.yScale(),a=s.xScale(),r=s.yScale();var V=O.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([S]),Y=V.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),H=V.select("g");Y.append("g").attr("class","nv-legendWrap");var W=Y.append("g").attr("class","nv-focus");W.append("g").attr("class","nv-x nv-axis"),W.append("g").attr("class","nv-y nv-axis"),W.append("g").attr("class","nv-linesWrap");var U=Y.append("g").attr("class","nv-context");U.append("g").attr("class","nv-x nv-axis"),U.append("g").attr("class","nv-y nv-axis"),U.append("g").attr("class","nv-linesWrap"),U.append("g").attr("class","nv-brushBackground"),U.append("g").attr("class","nv-x nv-brush"),x&&(h.width(L),H.select(".nv-legendWrap").datum(S).call(h),f.top!=h.height()&&(f.top=h.height(),R=(y||parseInt(O.style("height"))||400)-f.top-f.bottom-b),H.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")")),V.attr("transform","translate("+f.left+","+f.top+")"),o.width(L).height(R).color(S.map(function(t,e){return t.color||g(t,e)}).filter(function(t,e){return!S[e].disabled})),s.defined(o.defined()).width(L).height(B).color(S.map(function(t,e){return t.color||g(t,e)}).filter(function(t,e){return!S[e].disabled})),H.select(".nv-context").attr("transform","translate(0,"+(R+f.bottom+m.top)+")");var G=H.select(".nv-context .nv-linesWrap").datum(S.filter(function(t){return!t.disabled}));d3.transition(G).call(s),l.scale(n).ticks(t.utils.calcTicksX(L/100,S)).tickSize(-R,0),d.scale(i).ticks(t.utils.calcTicksY(R/36,S)).tickSize(-L,0),H.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+R+")"),p.x(a).on("brush",function(){var t=e.duration();e.duration(0),F(),e.duration(t)}),w&&p.extent(w);var J=H.select(".nv-brushBackground").selectAll("g").data([w||p.extent()]),q=J.enter().append("g");q.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",B),q.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",B);var X=H.select(".nv-x.nv-brush").call(p);X.selectAll("rect").attr("height",B),X.selectAll(".resize").append("path").attr("d",P),F(),c.scale(a).ticks(t.utils.calcTicksX(L/100,S)).tickSize(-B,0),H.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),d3.transition(H.select(".nv-context .nv-x.nv-axis")).call(c),u.scale(r).ticks(t.utils.calcTicksY(B/36,S)).tickSize(-L,0),d3.transition(H.select(".nv-context .nv-y.nv-axis")).call(u),H.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),h.dispatch.on("stateChange",function(t){for(var n in t)C[n]=t[n];D.stateChange(C),e.update()}),D.on("tooltipShow",function(t){k&&_(t,j.parentNode)}),D.on("changeState",function(t){"undefined"!=typeof t.disabled&&S.forEach(function(e,n){e.disabled=t.disabled[n]}),e.update()})}),e}var n,i,a,r,o=t.models.line(),s=t.models.line(),l=t.models.axis(),d=t.models.axis(),c=t.models.axis(),u=t.models.axis(),h=t.models.legend(),p=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},m={top:0,right:30,bottom:20,left:60},g=t.utils.defaultColor(),v=null,y=null,b=100,x=!0,w=null,k=!0,S=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},T="No Data Available.",D=d3.dispatch("tooltipShow","tooltipHide","brush","stateChange","changeState"),A=250,C=t.utils.state(),M=null;o.clipEdge(!0),s.interactive(!1),l.orient("bottom").tickPadding(5),d.orient("left"),c.orient("bottom").tickPadding(5),u.orient("left");var _=function(n,i){var a=n.pos[0]+(i.offsetLeft||0),r=n.pos[1]+(i.offsetTop||0),s=l.tickFormat()(o.x()(n.point,n.pointIndex)),c=d.tickFormat()(o.y()(n.point,n.pointIndex)),u=S(n.series.key,s,c,n,e);t.tooltip.show([a,r],u,null,null,i)},N=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},E=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return o.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+f.left,t.pos[1]+f.top],D.tooltipShow(t)}),o.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),D.on("tooltipHide",function(){k&&t.tooltip.cleanup()}),e.dispatch=D,e.legend=h,e.lines=o,e.lines2=s,e.xAxis=l,e.yAxis=d,e.x2Axis=c,e.y2Axis=u,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return y},set:function(t){y=t}},focusHeight:{get:function(){return b},set:function(t){b=t}},showLegend:{get:function(){return x},set:function(t){x=t}},brushExtent:{get:function(){return w},set:function(t){w=t}},tooltips:{get:function(){return k},set:function(t){k=t}},tooltipContent:{get:function(){return S},set:function(t){S=t}},defaultState:{get:function(){return M},set:function(t){M=t}},noData:{get:function(){return T},set:function(t){T=t}},margin:{get:function(){return f},set:function(t){f.top=void 0!==t.top?t.top:f.top,f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}},color:{get:function(){return g},set:function(e){g=t.utils.getColor(e),h.color(g)}},interpolate:{get:function(){return o.interpolate()},set:function(t){o.interpolate(t),s.interpolate(t)}},xTickFormat:{get:function(){return l.xTickFormat()},set:function(t){l.xTickFormat(t),c.xTickFormat(t)}},yTickFormat:{get:function(){return d.yTickFormat()},set:function(t){d.yTickFormat(t),u.yTickFormat(t)}},duration:{get:function(){return A},set:function(t){A=t,d.duration(A),l.duration(A)}},x:{get:function(){return o.x()},set:function(t){o.x(t),s.x(t)}},y:{get:function(){return o.y()},set:function(t){o.y(t),s.y(t)}}}),t.utils.inheritOptions(e,o),t.utils.initOptions(e),e},t.models.multiBar=function(){"use strict";function e(_){return C.reset(),_.each(function(e){var _=c-d.left-d.right,N=u-d.top-d.bottom,E=d3.select(this);t.utils.initSVG(E);k&&e.length&&(k=[{values:e[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),b&&(e=d3.layout.stack().offset(x).values(function(t){return t.values}).y(g)(!e.length&&k?k:e)),e.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),b&&e[0].values.map(function(t,n){var i=0,a=0;e.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=a,a-=e.size):(e.y1=e.size+i,i+=e.size)})});var P=i&&a?[]:e.map(function(t){return t.values.map(function(t,e){return{x:m(t,e),y:g(t,e),y0:t.y0,y1:t.y1}})});h.domain(i||d3.merge(P).map(function(t){return t.x})).rangeBands(r||[0,_],D),p.domain(a||d3.extent(d3.merge(P).map(function(t){return b?t.y>0?t.y1:t.y1+t.y:t.y}).concat(v))).range(o||[N,0]),h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]):h.domain([-1,1])),p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]+.01*p.domain()[0],p.domain()[1]-.01*p.domain()[1]]):p.domain([-1,1])),s=s||h,l=l||p;var I=E.selectAll("g.nv-wrap.nv-multibar").data([e]),F=I.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),O=F.append("defs"),j=F.append("g"),L=I.select("g");j.append("g").attr("class","nv-groups"),I.attr("transform","translate("+d.left+","+d.top+")"),O.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect"),I.select("#nv-edge-clip-"+f+" rect").attr("width",_).attr("height",N),L.attr("clip-path",y?"url(#nv-edge-clip-"+f+")":"");var R=I.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});R.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var B=C.transition(R.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,T)).attr("y",function(t){return l(b?t.y0:0)||0}).attr("height",0).remove();B.delay&&B.delay(function(t,e){var n=e*(T/(M+1))-e;return n}),R.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return w(t,e)}).style("stroke",function(t,e){return w(t,e)}),R.style("stroke-opacity",1).style("fill-opacity",.75);var $=R.selectAll("rect.nv-bar").data(function(t){return k&&!e.length?k.values:t.values});$.exit().remove();$.enter().append("rect").attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,n,i){return b?0:i*h.rangeBand()/e.length}).attr("y",function(t){return l(b?t.y0:0)||0}).attr("height",0).attr("width",h.rangeBand()/(b?1:e.length)).attr("transform",function(t,e){return"translate("+h(m(t,e))+",0)"});$.style("fill",function(t,e,n){return w(t,n,e)}).style("stroke",function(t,e,n){return w(t,n,e)}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),A.elementMouseover({value:g(t,n),point:t,series:e[t.series],pos:[h(m(t,n))+h.rangeBand()*(b?e.length/2:t.series+.5)/e.length,p(g(t,n)+(b?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),A.elementMouseout({value:g(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){A.elementClick({value:g(t,n),point:t,series:e[t.series],pos:[h(m(t,n))+h.rangeBand()*(b?e.length/2:t.series+.5)/e.length,p(g(t,n)+(b?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){A.elementDblClick({value:g(t,n),point:t,series:e[t.series],pos:[h(m(t,n))+h.rangeBand()*(b?e.length/2:t.series+.5)/e.length,p(g(t,n)+(b?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}),$.attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(t,e){return"translate("+h(m(t,e))+",0)"}),S&&(n||(n=e.map(function(){return!0})),$.style("fill",function(t,e,i){return d3.rgb(S(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[i]).toString()}).style("stroke",function(t,e,i){return d3.rgb(S(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[i]).toString()}));var z=$.watchTransition(C,"multibar",Math.min(250,T)).delay(function(t,n){return n*T/e[0].values.length});b?z.attr("y",function(t,e){return p(b?t.y1:0)}).attr("height",function(t,e){return Math.max(Math.abs(p(t.y+(b?t.y0:0))-p(b?t.y0:0)),1)}).attr("x",function(t,n){return b?0:t.series*h.rangeBand()/e.length}).attr("width",h.rangeBand()/(b?1:e.length)):z.attr("x",function(t,n){return t.series*h.rangeBand()/e.length}).attr("width",h.rangeBand()/e.length).attr("y",function(t,e){return g(t,e)<0?p(0):p(0)-p(g(t,e))<1?p(0)-1:p(g(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(p(g(t,e))-p(0)),1)||0}),s=h.copy(),l=p.copy(),e[0]&&e[0].values&&(M=e[0].values.length)}),C.renderEnd("multibar immediate"),e}var n,i,a,r,o,s,l,d={top:0,right:0,bottom:0,left:0},c=960,u=500,h=d3.scale.ordinal(),p=d3.scale.linear(),f=Math.floor(1e4*Math.random()),m=function(t){return t.x},g=function(t){return t.y},v=[0],y=!0,b=!1,x="zero",w=t.utils.defaultColor(),k=!1,S=null,T=500,D=.1,A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),C=t.utils.renderWatch(A,T),M=0;return e.dispatch=A,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return u},set:function(t){u=t}},x:{get:function(){return m},set:function(t){m=t}},y:{get:function(){return g},set:function(t){g=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return i},set:function(t){i=t}},yDomain:{get:function(){return a},set:function(t){a=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return v},set:function(t){v=t}},stacked:{get:function(){return b},set:function(t){b=t}},stackOffset:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return y},set:function(t){y=t}},disabled:{get:function(){return n},set:function(t){n=t}},id:{get:function(){return f},set:function(t){f=t}},hideable:{get:function(){return k},set:function(t){k=t}},groupSpacing:{get:function(){return D},set:function(t){D=t}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},duration:{get:function(){return T},set:function(t){T=t,C.reset(T)}},color:{get:function(){return w},set:function(e){w=t.utils.getColor(e)}},barColor:{get:function(){return S},set:function(e){S=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.multiBarChart=function(){"use strict";function e(S){return N.reset(),N.models(a),g&&N.models(r),v&&N.models(o),S.each(function(S){var N=d3.select(this),O=this;t.utils.initSVG(N);var j=(c||parseInt(N.style("width"))||960)-d.left-d.right,L=(u||parseInt(N.style("height"))||400)-d.top-d.bottom;if(e.update=function(){0===_?N.call(e):N.transition().duration(_).call(e)},e.container=this,T.setter(F(S),e.update).getter(I(S)).update(),T.disabled=S.map(function(t){return!!t.disabled}),!D){var R;D={};for(R in T)T[R]instanceof Array?D[R]=T[R].slice(0):D[R]=T[R]}if(!(S&&S.length&&S.filter(function(t){return t.values.length}).length)){var B=N.selectAll(".nv-noData").data([A]);return B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),B.attr("x",d.left+j/2).attr("y",d.top+L/2).text(function(t){return t}),e}N.selectAll(".nv-noData").remove(),n=a.xScale(),i=a.yScale();var $=N.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([S]),z=$.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),V=$.select("g");if(z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis"),z.append("g").attr("class","nv-barsWrap"),z.append("g").attr("class","nv-legendWrap"),z.append("g").attr("class","nv-controlsWrap"),m&&(s.width(j-M()),a.barColor()&&S.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),V.select(".nv-legendWrap").datum(S).call(s),d.top!=s.height()&&(d.top=s.height(),L=(u||parseInt(N.style("height"))||400)-d.top-d.bottom),V.select(".nv-legendWrap").attr("transform","translate("+M()+","+-d.top+")")),p){var Y=[{key:f.grouped||"Grouped",disabled:a.stacked()},{key:f.stacked||"Stacked",disabled:!a.stacked()}];l.width(M()).color(["#444","#444","#444"]),V.select(".nv-controlsWrap").datum(Y).attr("transform","translate(0,"+-d.top+")").call(l)}$.attr("transform","translate("+d.left+","+d.top+")"),y&&V.select(".nv-y.nv-axis").attr("transform","translate("+j+",0)"),a.disabled(S.map(function(t){return t.disabled})).width(j).height(L).color(S.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!S[e].disabled}));var H=V.select(".nv-barsWrap").datum(S.filter(function(t){return!t.disabled}));if(H.call(a),g){r.scale(n).ticks(t.utils.calcTicksX(j/100,S)).tickSize(-L,0),V.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),V.select(".nv-x.nv-axis").call(r);var W=V.select(".nv-x.nv-axis > g").selectAll("g");if(W.selectAll("line, text").style("opacity",1),x){var U=function(t,e){return"translate("+t+","+e+")"},G=5,J=17;W.selectAll("text").attr("transform",function(t,e,n){return U(0,n%2==0?G:J)});var q=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;V.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return U(0,0===e||q%2!==0?J:G)})}b&&W.filter(function(t,e){return e%Math.ceil(S[0].values.length/(j/100))!==0}).selectAll("text, line").style("opacity",0),w&&W.selectAll(".tick text").attr("transform","rotate("+w+" 0,0)").style("text-anchor",w>0?"start":"end"),V.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}v&&(o.scale(i).ticks(t.utils.calcTicksY(L/36,S)).tickSize(-j,0),V.select(".nv-y.nv-axis").call(o)),s.dispatch.on("stateChange",function(t){for(var n in t)T[n]=t[n];C.stateChange(T),e.update()}),l.dispatch.on("legendClick",function(t,n){if(t.disabled){switch(Y=Y.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":a.stacked(!1);break;case"Stacked":a.stacked(!0)}T.stacked=a.stacked(),C.stateChange(T),e.update()}}),C.on("tooltipShow",function(t){k&&P(t,O.parentNode)}),C.on("changeState",function(t){"undefined"!=typeof t.disabled&&(S.forEach(function(e,n){e.disabled=t.disabled[n]}),T.disabled=t.disabled),"undefined"!=typeof t.stacked&&(a.stacked(t.stacked),T.stacked=t.stacked,E=t.stacked),e.update()})}),N.renderEnd("multibarchart immediate"),e}var n,i,a=t.models.multiBar(),r=t.models.axis(),o=t.models.axis(),s=t.models.legend(),l=t.models.legend(),d={top:30,right:20,bottom:50,left:60},c=null,u=null,h=t.utils.defaultColor(),p=!0,f={},m=!0,g=!0,v=!0,y=!1,b=!0,x=!1,w=0,k=!0,S=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},T=t.utils.state(),D=null,A="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),M=function(){return p?180:0},_=250;T.stacked=!1,a.stacked(!1),r.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(t){return t}),o.orient(y?"right":"left").tickFormat(d3.format(",.1f")),l.updateState(!1);var N=t.utils.renderWatch(C),E=!1,P=function(n,i){var s=n.pos[0]+(i.offsetLeft||0),l=n.pos[1]+(i.offsetTop||0),d=r.tickFormat()(a.x()(n.point,n.pointIndex)),c=o.tickFormat()(a.y()(n.point,n.pointIndex)),u=S(n.series.key,d,c,n,e);t.tooltip.show([s,l],u,n.value<0?"n":"s",null,i)},I=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:E}}},F=function(t){return function(e){void 0!==e.stacked&&(E=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],C.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),C.on("tooltipHide",function(){k&&t.tooltip.cleanup()}),e.dispatch=C,e.multibar=a,e.legend=s,e.xAxis=r,e.yAxis=o,e.state=T,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return u},set:function(t){u=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showControls:{get:function(){return p},set:function(t){p=t}},controlLabels:{get:function(){return f},set:function(t){f=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},tooltips:{get:function(){return k},set:function(t){k=t}},tooltipContent:{get:function(){return S},set:function(t){S=t}},defaultState:{get:function(){return D},set:function(t){D=t}},noData:{get:function(){return A},set:function(t){A=t}},reduceXTicks:{get:function(){return b},set:function(t){b=t}},rotateLabels:{get:function(){return w},set:function(t){w=t}},staggerLabels:{get:function(){return x},set:function(t){x=t}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},duration:{get:function(){return _},set:function(t){_=t,a.duration(_),r.duration(_),o.duration(_),N.reset(_)}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),s.color(h)}},rightAlignYAxis:{get:function(){return y},set:function(t){y=t,o.orient(y?"right":"left")}}}),t.utils.inheritOptions(e,a),t.utils.initOptions(e),e},t.models.multiBarHorizontal=function(){"use strict";function e(h){return M.reset(),h.each(function(e){var h=c-d.left-d.right,A=u-d.top-d.bottom,_=d3.select(this);t.utils.initSVG(_),w&&(e=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(g)(e)),e.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),w&&e[0].values.map(function(t,n){var i=0,a=0;e.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=a-e.size,a-=e.size):(e.y1=i,i+=e.size)})});var N=i&&a?[]:e.map(function(t){return t.values.map(function(t,e){return{x:m(t,e),y:g(t,e),y0:t.y0,y1:t.y1}})});p.domain(i||d3.merge(N).map(function(t){return t.x})).rangeBands(r||[0,A],.1),f.domain(a||d3.extent(d3.merge(N).map(function(t){return w?t.y>0?t.y1+t.y:t.y1:t.y}).concat(y))),k&&!w?f.range(o||[f.domain()[0]<0?T:0,h-(f.domain()[1]>0?T:0)]):f.range(o||[0,h]),s=s||p,l=l||d3.scale.linear().domain(f.domain()).range([f(0),f(0)]);var E=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([e]),P=E.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),I=(P.append("defs"),P.append("g"));E.select("g");I.append("g").attr("class","nv-groups"),E.attr("transform","translate("+d.left+","+d.top+")");var F=E.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});F.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),F.exit().watchTransition(M,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),F.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return b(t,e)}).style("stroke",function(t,e){return b(t,e)}),F.watchTransition(M,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",.75);var O=F.selectAll("g.nv-bar").data(function(t){return t.values});O.exit().remove();var j=O.enter().append("g").attr("transform",function(t,n,i){return"translate("+l(w?t.y0:0)+","+(w?0:i*p.rangeBand()/e.length+p(m(t,n)))+")"});j.append("rect").attr("width",0).attr("height",p.rangeBand()/(w?1:e.length)),O.on("mouseover",function(t,n){d3.select(this).classed("hover",!0),C.elementMouseover({value:g(t,n),point:t,series:e[t.series],pos:[f(g(t,n)+(w?t.y0:0)),p(m(t,n))+p.rangeBand()*(w?e.length/2:t.series+.5)/e.length],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),C.elementMouseout({value:g(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){C.elementClick({value:g(t,n),point:t,series:e[t.series],pos:[p(m(t,n))+p.rangeBand()*(w?e.length/2:t.series+.5)/e.length,f(g(t,n)+(w?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){C.elementDblClick({value:g(t,n),point:t,series:e[t.series],pos:[p(m(t,n))+p.rangeBand()*(w?e.length/2:t.series+.5)/e.length,f(g(t,n)+(w?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}),v(e[0],0)&&(j.append("polyline"),O.select("polyline").attr("fill","none").attr("points",function(t,n){var i=v(t,n),a=.8*p.rangeBand()/(2*(w?1:e.length));i=i.length?i:[-Math.abs(i),Math.abs(i)],i=i.map(function(t){return f(t)-f(0)});var r=[[i[0],-a],[i[0],a],[i[0],0],[i[1],0],[i[1],-a],[i[1],a]];return r.map(function(t){return t.join(",")}).join(" ")}).attr("transform",function(t,n){var i=p.rangeBand()/(2*(w?1:e.length));return"translate("+(g(t,n)<0?0:f(g(t,n))-f(0))+", "+i+")"})),j.append("text"),k&&!w?(O.select("text").attr("text-anchor",function(t,e){return g(t,e)<0?"end":"start"}).attr("y",p.rangeBand()/(2*e.length)).attr("dy",".32em").html(function(t,e){var n=D(g(t,e)),i=v(t,e);return void 0===i?n:i.length?n+"+"+D(Math.abs(i[1]))+"-"+D(Math.abs(i[0])):n+"&plusmn;"+D(Math.abs(i))}),O.watchTransition(M,"multibarhorizontal: bars").select("text").attr("x",function(t,e){return g(t,e)<0?-4:f(g(t,e))-f(0)+4})):O.selectAll("text").text(""),S&&!w?(j.append("text").classed("nv-bar-label",!0),O.select("text.nv-bar-label").attr("text-anchor",function(t,e){return g(t,e)<0?"start":"end"}).attr("y",p.rangeBand()/(2*e.length)).attr("dy",".32em").text(function(t,e){return m(t,e)}),O.watchTransition(M,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(t,e){return g(t,e)<0?f(0)-f(g(t,e))+4:-4})):O.selectAll("text.nv-bar-label").text(""),O.attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}),x&&(n||(n=e.map(function(){return!0})),O.style("fill",function(t,e,i){return d3.rgb(x(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[i]).toString()}).style("stroke",function(t,e,i){return d3.rgb(x(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[i]).toString()})),w?O.watchTransition(M,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+f(t.y1)+","+p(m(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(f(g(t,e)+t.y0)-f(t.y0))}).attr("height",p.rangeBand()):O.watchTransition(M,"multibarhorizontal: bars").attr("transform",function(t,n){return"translate("+f(g(t,n)<0?g(t,n):0)+","+(t.series*p.rangeBand()/e.length+p(m(t,n)))+")"}).select("rect").attr("height",p.rangeBand()/e.length).attr("width",function(t,e){return Math.max(Math.abs(f(g(t,e))-f(0)),1)}),s=p.copy(),l=f.copy()}),M.renderEnd("multibarHorizontal immediate"),e}var n,i,a,r,o,s,l,d={top:0,right:0,bottom:0,left:0},c=960,u=500,h=Math.floor(1e4*Math.random()),p=d3.scale.ordinal(),f=d3.scale.linear(),m=function(t){return t.x},g=function(t){return t.y},v=function(t){return t.yErr},y=[0],b=t.utils.defaultColor(),x=null,w=!1,k=!1,S=!1,T=60,D=d3.format(",.2f"),A=250,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),M=t.utils.renderWatch(C,A);return e.dispatch=C,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return u},set:function(t){u=t}},x:{get:function(){return m},set:function(t){m=t}},y:{get:function(){return g},set:function(t){g=t}},yErr:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return p},set:function(t){p=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return i},set:function(t){i=t}},yDomain:{get:function(){return a},set:function(t){a=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return y},set:function(t){y=t}},stacked:{get:function(){return w},set:function(t){w=t}},showValues:{get:function(){return k},set:function(t){k=t}},disabled:{get:function(){return n},set:function(t){n=t}},id:{get:function(){return h},set:function(t){h=t}},valueFormat:{get:function(){return D},set:function(t){D=t}},valuePadding:{get:function(){return T},set:function(t){T=t}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},duration:{get:function(){return A},set:function(t){A=t,M.reset(A)}},color:{get:function(){return b},set:function(e){b=t.utils.getColor(e)}},barColor:{get:function(){return b},set:function(e){x=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.multiBarHorizontalChart=function(){"use strict";function e(x){return N.reset(),N.models(a),g&&N.models(r),v&&N.models(o),x.each(function(x){var N=d3.select(this),E=this;t.utils.initSVG(N);var P=(c||parseInt(N.style("width"))||960)-d.left-d.right,I=(u||parseInt(N.style("height"))||400)-d.top-d.bottom;if(e.update=function(){N.transition().duration(A).call(e)},e.container=this,y=a.stacked(),w.setter(_(x),e.update).getter(M(x)).update(),w.disabled=x.map(function(t){return!!t.disabled}),!k){var F;k={};for(F in w)w[F]instanceof Array?k[F]=w[F].slice(0):k[F]=w[F]}if(!(x&&x.length&&x.filter(function(t){return t.values.length}).length)){var O=N.selectAll(".nv-noData").data([S]);return O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",d.left+P/2).attr("y",d.top+I/2).text(function(t){return t}),e}N.selectAll(".nv-noData").remove(),n=a.xScale(),i=a.yScale();var j=N.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([x]),L=j.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),R=j.select("g");if(L.append("g").attr("class","nv-x nv-axis"),L.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),L.append("g").attr("class","nv-barsWrap"),L.append("g").attr("class","nv-legendWrap"),L.append("g").attr("class","nv-controlsWrap"),m&&(s.width(P-D()),a.barColor()&&x.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),R.select(".nv-legendWrap").datum(x).call(s),d.top!=s.height()&&(d.top=s.height(),I=(u||parseInt(N.style("height"))||400)-d.top-d.bottom),R.select(".nv-legendWrap").attr("transform","translate("+D()+","+-d.top+")")),p){var B=[{key:f.grouped||"Grouped",disabled:a.stacked()},{key:f.stacked||"Stacked",disabled:!a.stacked()}];l.width(D()).color(["#444","#444","#444"]),R.select(".nv-controlsWrap").datum(B).attr("transform","translate(0,"+-d.top+")").call(l)}j.attr("transform","translate("+d.left+","+d.top+")"),a.disabled(x.map(function(t){return t.disabled})).width(P).height(I).color(x.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!x[e].disabled}));var $=R.select(".nv-barsWrap").datum(x.filter(function(t){return!t.disabled}));if($.transition().call(a),g){r.scale(n).ticks(t.utils.calcTicksY(I/24,x)).tickSize(-P,0),R.select(".nv-x.nv-axis").call(r);var z=R.select(".nv-x.nv-axis").selectAll("g");z.selectAll("line, text")}v&&(o.scale(i).ticks(t.utils.calcTicksX(P/100,x)).tickSize(-I,0),R.select(".nv-y.nv-axis").attr("transform","translate(0,"+I+")"),R.select(".nv-y.nv-axis").call(o)),R.select(".nv-zeroLine line").attr("x1",i(0)).attr("x2",i(0)).attr("y1",0).attr("y2",-I),s.dispatch.on("stateChange",function(t){for(var n in t)w[n]=t[n];T.stateChange(w),e.update()}),l.dispatch.on("legendClick",function(t,n){if(t.disabled){switch(B=B.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":a.stacked(!1);break;case"Stacked":a.stacked(!0)}w.stacked=a.stacked(),T.stateChange(w),y=a.stacked(),e.update()}}),T.on("tooltipShow",function(t){b&&C(t,E.parentNode)}),T.on("changeState",function(t){"undefined"!=typeof t.disabled&&(x.forEach(function(e,n){e.disabled=t.disabled[n]}),w.disabled=t.disabled),"undefined"!=typeof t.stacked&&(a.stacked(t.stacked),w.stacked=t.stacked,y=t.stacked),e.update()})}),N.renderEnd("multibar horizontal chart immediate"),e}var n,i,a=t.models.multiBarHorizontal(),r=t.models.axis(),o=t.models.axis(),s=t.models.legend().height(30),l=t.models.legend().height(30),d={
top:30,right:20,bottom:50,left:60},c=null,u=null,h=t.utils.defaultColor(),p=!0,f={},m=!0,g=!0,v=!0,y=!1,b=!0,x=function(t,e,n,i,a){return"<h3>"+t+" - "+e+"</h3><p>"+n+"</p>"},w=t.utils.state(),k=null,S="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),D=function(){return p?180:0},A=250;w.stacked=!1,a.stacked(y),r.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(t){return t}),o.orient("bottom").tickFormat(d3.format(",.1f")),l.updateState(!1);var C=function(n,i){var s=n.pos[0]+(i.offsetLeft||0),l=n.pos[1]+(i.offsetTop||0),d=r.tickFormat()(a.x()(n.point,n.pointIndex)),c=o.tickFormat()(a.y()(n.point,n.pointIndex)),u=x(n.series.key,d,c,n,e);t.tooltip.show([s,l],u,n.value<0?"e":"w",null,i)},M=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:y}}},_=function(t){return function(e){void 0!==e.stacked&&(y=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},N=t.utils.renderWatch(T,A);return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],T.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){T.tooltipHide(t)}),T.on("tooltipHide",function(){b&&t.tooltip.cleanup()}),e.dispatch=T,e.multibar=a,e.legend=s,e.xAxis=r,e.yAxis=o,e.state=w,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return u},set:function(t){u=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showControls:{get:function(){return p},set:function(t){p=t}},controlLabels:{get:function(){return f},set:function(t){f=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},tooltips:{get:function(){return b},set:function(t){b=t}},tooltipContent:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},duration:{get:function(){return A},set:function(t){A=t,N.reset(A),a.duration(A),r.duration(A),o.duration(A)}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),s.color(h)}}}),t.utils.inheritOptions(e,a),t.utils.initOptions(e),e},t.models.multiChart=function(){"use strict";function e(u){return u.each(function(u){var p=d3.select(this),f=this;t.utils.initSVG(p),e.update=function(){p.transition().call(e)},e.container=this;var N=(s||parseInt(p.style("width"))||960)-r.left-r.right,E=(l||parseInt(p.style("height"))||400)-r.top-r.bottom,P=u.filter(function(t){return"line"==t.type&&1==t.yAxis}),I=u.filter(function(t){return"line"==t.type&&2==t.yAxis}),F=u.filter(function(t){return"bar"==t.type&&1==t.yAxis}),O=u.filter(function(t){return"bar"==t.type&&2==t.yAxis}),j=u.filter(function(t){return"area"==t.type&&1==t.yAxis}),L=u.filter(function(t){return"area"==t.type&&2==t.yAxis});if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length)){var R=p.selectAll(".nv-noData").data([h]);return R.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),R.attr("x",r.left+N/2).attr("y",r.top+E/2).text(function(t){return t}),e}p.selectAll(".nv-noData").remove();var B=u.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:t.x,y:t.y}})}),$=u.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:t.x,y:t.y}})});n.domain(d3.extent(d3.merge(B.concat($)),function(t){return t.x})).range([0,N]);var z=p.selectAll("g.wrap.multiChart").data([u]),V=z.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");V.append("g").attr("class","x axis"),V.append("g").attr("class","y1 axis"),V.append("g").attr("class","y2 axis"),V.append("g").attr("class","lines1Wrap"),V.append("g").attr("class","lines2Wrap"),V.append("g").attr("class","bars1Wrap"),V.append("g").attr("class","bars2Wrap"),V.append("g").attr("class","stack1Wrap"),V.append("g").attr("class","stack2Wrap"),V.append("g").attr("class","legendWrap");var Y=z.select("g"),H=u.map(function(t,e){return u[e].color||o(t,e)});d&&(C.color(H),C.width(N/2),Y.select(".legendWrap").datum(u.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":" (right axis)"),t})).call(C),r.top!=C.height()&&(r.top=C.height(),E=(l||parseInt(p.style("height"))||400)-r.top-r.bottom),Y.select(".legendWrap").attr("transform","translate("+N/2+","+-r.top+")")),y.width(N).height(E).interpolate(m).color(H.filter(function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"line"==u[e].type})),b.width(N).height(E).interpolate(m).color(H.filter(function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"line"==u[e].type})),x.width(N).height(E).color(H.filter(function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"bar"==u[e].type})),w.width(N).height(E).color(H.filter(function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"bar"==u[e].type})),k.width(N).height(E).color(H.filter(function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"area"==u[e].type})),S.width(N).height(E).color(H.filter(function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"area"==u[e].type})),Y.attr("transform","translate("+r.left+","+r.top+")");var W=Y.select(".lines1Wrap").datum(P.filter(function(t){return!t.disabled})),U=Y.select(".bars1Wrap").datum(F.filter(function(t){return!t.disabled})),G=Y.select(".stack1Wrap").datum(j.filter(function(t){return!t.disabled})),J=Y.select(".lines2Wrap").datum(I.filter(function(t){return!t.disabled})),q=Y.select(".bars2Wrap").datum(O.filter(function(t){return!t.disabled})),X=Y.select(".stack2Wrap").datum(L.filter(function(t){return!t.disabled})),Q=j.length?j.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[],K=L.length?L.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[];g.domain(i||d3.extent(d3.merge(B).concat(Q),function(t){return t.y})).range([0,E]),v.domain(a||d3.extent(d3.merge($).concat(K),function(t){return t.y})).range([0,E]),y.yDomain(g.domain()),x.yDomain(g.domain()),k.yDomain(g.domain()),b.yDomain(v.domain()),w.yDomain(v.domain()),S.yDomain(v.domain()),j.length&&d3.transition(G).call(k),L.length&&d3.transition(X).call(S),F.length&&d3.transition(U).call(x),O.length&&d3.transition(q).call(w),P.length&&d3.transition(W).call(y),I.length&&d3.transition(J).call(b),T.ticks(t.utils.calcTicksX(N/100,u)).tickSize(-E,0),Y.select(".x.axis").attr("transform","translate(0,"+E+")"),d3.transition(Y.select(".x.axis")).call(T),D.ticks(t.utils.calcTicksY(E/36,u)).tickSize(-N,0),d3.transition(Y.select(".y1.axis")).call(D),A.ticks(t.utils.calcTicksY(E/36,u)).tickSize(-N,0),d3.transition(Y.select(".y2.axis")).call(A),Y.select(".y1.axis").classed("nv-disabled",!B.length).attr("transform","translate("+n.range()[0]+",0)"),Y.select(".y2.axis").classed("nv-disabled",!$.length).attr("transform","translate("+n.range()[1]+",0)"),C.dispatch.on("stateChange",function(t){e.update()}),M.on("tooltipShow",function(t){c&&_(t,f.parentNode)})}),e}var n,i,a,r={top:30,right:20,bottom:50,left:60},o=t.utils.defaultColor(),s=null,l=null,d=!0,c=!0,u=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},h="No Data Available.",p=function(t){return t.x},f=function(t){return t.y},m="monotone",n=d3.scale.linear(),g=d3.scale.linear(),v=d3.scale.linear(),y=t.models.line().yScale(g),b=t.models.line().yScale(v),x=t.models.multiBar().stacked(!1).yScale(g),w=t.models.multiBar().stacked(!1).yScale(v),k=t.models.stackedArea().yScale(g),S=t.models.stackedArea().yScale(v),T=t.models.axis().scale(n).orient("bottom").tickPadding(5),D=t.models.axis().scale(g).orient("left"),A=t.models.axis().scale(v).orient("right"),C=t.models.legend().height(30),M=d3.dispatch("tooltipShow","tooltipHide"),_=function(n,i){var a=n.pos[0]+(i.offsetLeft||0),r=n.pos[1]+(i.offsetTop||0),o=T.tickFormat()(y.x()(n.point,n.pointIndex)),s=(2==n.series.yAxis?A:D).tickFormat()(y.y()(n.point,n.pointIndex)),l=u(n.series.key,o,s,n,e);t.tooltip.show([a,r],l,void 0,void 0,i.offsetParent)};return y.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],M.tooltipShow(t)}),y.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t)}),b.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],M.tooltipShow(t)}),b.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t)}),x.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],M.tooltipShow(t)}),x.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t)}),w.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],M.tooltipShow(t)}),w.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t)}),k.dispatch.on("tooltipShow",function(t){return Math.round(100*k.y()(t.point))?(t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],void M.tooltipShow(t)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),k.dispatch.on("tooltipHide",function(t){M.tooltipHide(t)}),S.dispatch.on("tooltipShow",function(t){return Math.round(100*S.y()(t.point))?(t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],void M.tooltipShow(t)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),S.dispatch.on("tooltipHide",function(t){M.tooltipHide(t)}),y.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],M.tooltipShow(t)}),y.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t)}),b.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],M.tooltipShow(t)}),b.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t)}),M.on("tooltipHide",function(){c&&t.tooltip.cleanup()}),e.dispatch=M,e.lines1=y,e.lines2=b,e.bars1=x,e.bars2=w,e.stack1=k,e.stack2=S,e.xAxis=T,e.yAxis1=D,e.yAxis2=A,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},showLegend:{get:function(){return d},set:function(t){d=t}},yDomain1:{get:function(){return i},set:function(t){i=t}},yDomain2:{get:function(){return a},set:function(t){a=t}},tooltips:{get:function(){return c},set:function(t){c=t}},tooltipContent:{get:function(){return u},set:function(t){u=t}},noData:{get:function(){return h},set:function(t){h=t}},interpolate:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},color:{get:function(){return o},set:function(e){o=t.utils.getColor(e)}},x:{get:function(){return p},set:function(t){p=t,y.x(t),x.x(t)}},y:{get:function(){return f},set:function(t){f=t,y.y(t),x.y(t)}}}),t.utils.initOptions(e),e},t.models.ohlcBar=function(){"use strict";function e(S){return S.each(function(e){var S=d3.select(this),D=(s||parseInt(S.style("width"))||960)-o.left-o.right,A=(l||parseInt(S.style("height"))||400)-o.top-o.bottom;t.utils.initSVG(S),c.domain(n||d3.extent(e[0].values.map(h).concat(y))),x?c.range(a||[.5*D/e[0].values.length,D*(e[0].values.length-.5)/e[0].values.length]):c.range(a||[0,D]),u.domain(i||[d3.min(e[0].values.map(v).concat(b)),d3.max(e[0].values.map(g).concat(b))]).range(r||[A,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]+.01*u.domain()[0],u.domain()[1]-.01*u.domain()[1]]):u.domain([-1,1]));var C=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([e[0].values]),M=C.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),_=M.append("defs"),N=M.append("g"),E=C.select("g");N.append("g").attr("class","nv-ticks"),C.attr("transform","translate("+o.left+","+o.top+")"),S.on("click",function(t,e){T.chartClick({data:t,index:e,pos:d3.event,id:d})}),_.append("clipPath").attr("id","nv-chart-clip-path-"+d).append("rect"),C.select("#nv-chart-clip-path-"+d+" rect").attr("width",D).attr("height",A),E.attr("clip-path",w?"url(#nv-chart-clip-path-"+d+")":"");var P=C.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});P.exit().remove();P.enter().append("path").attr("class",function(t,e,n){return(f(t,e)>m(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(t,n){var i=D/e[0].values.length*.9;return"m0,0l0,"+(u(f(t,n))-u(g(t,n)))+"l"+-i/2+",0l"+i/2+",0l0,"+(u(v(t,n))-u(f(t,n)))+"l0,"+(u(m(t,n))-u(v(t,n)))+"l"+i/2+",0l"+-i/2+",0z"}).attr("transform",function(t,e){return"translate("+c(h(t,e))+","+u(g(t,e))+")"}).attr("fill",function(t,e){return k[0]}).attr("stroke",function(t,e){return k[0]}).attr("x",0).attr("y",function(t,e){return u(Math.max(0,p(t,e)))}).attr("height",function(t,e){return Math.abs(u(p(t,e))-u(0))});P.attr("class",function(t,e,n){return(f(t,e)>m(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(P).attr("transform",function(t,e){return"translate("+c(h(t,e))+","+u(g(t,e))+")"}).attr("d",function(t,n){var i=D/e[0].values.length*.9;return"m0,0l0,"+(u(f(t,n))-u(g(t,n)))+"l"+-i/2+",0l"+i/2+",0l0,"+(u(v(t,n))-u(f(t,n)))+"l0,"+(u(m(t,n))-u(v(t,n)))+"l"+i/2+",0l"+-i/2+",0z"})}),e}var n,i,a,r,o={top:0,right:0,bottom:0,left:0},s=null,l=null,d=Math.floor(1e4*Math.random()),c=d3.scale.linear(),u=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},f=function(t){return t.open},m=function(t){return t.close},g=function(t){return t.high},v=function(t){return t.low},y=[],b=[],x=!1,w=!0,k=t.utils.defaultColor(),S=!1,T=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return e.highlightPoint=function(t,n){e.clearHighlights(),d3.select(".nv-ohlcBar .nv-tick-0-"+t).classed("hover",n)},e.clearHighlights=function(){d3.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},e.dispatch=T,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return u},set:function(t){u=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return a},set:function(t){a=t}},yRange:{get:function(){return r},set:function(t){r=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return b},set:function(t){b=t}},padData:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return w},set:function(t){w=t}},id:{get:function(){return d},set:function(t){d=t}},interactive:{get:function(){return S},set:function(t){S=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return p},set:function(t){p=t}},open:{get:function(){return f()},set:function(t){f=t}},close:{get:function(){return m()},set:function(t){m=t}},high:{get:function(){return g},set:function(t){g=t}},low:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!=t.top?t.top:o.top,o.right=void 0!=t.right?t.right:o.right,o.bottom=void 0!=t.bottom?t.bottom:o.bottom,o.left=void 0!=t.left?t.left:o.left}},color:{get:function(){return k},set:function(e){k=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.parallelCoordinates=function(){"use strict";function e(h){return h.each(function(h){function p(t){return T(s.map(function(e){return[r(e),o[e](t[e])]}))}function f(){var t=s.filter(function(t){return!o[t].brush.empty()}),e=t.map(function(t){return o[t].brush.extent()});d=[],t.forEach(function(t,n){d[n]={dimension:t,extent:e[n]}}),c=[],S.style("display",function(n){var i=t.every(function(t,i){return e[i][0]<=n[t]&&n[t]<=e[i][1]});return i&&c.push(n),i?null:"none"}),u.brush({filters:d,active:c})}var m=d3.select(this),g=(i||parseInt(m.style("width"))||960)-n.left-n.right,v=(a||parseInt(m.style("height"))||400)-n.top-n.bottom;t.utils.initSVG(m),c=h,e.update=function(){},r.rangePoints([0,g],1).domain(s),s.forEach(function(t){return o[t]=d3.scale.linear().domain(d3.extent(h,function(e){return+e[t]})).range([v,0]),o[t].brush=d3.svg.brush().y(o[t]).on("brush",f),"name"!=t});var y=m.selectAll("g.nv-wrap.nv-parallelCoordinates").data([h]),b=y.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates"),x=b.append("g"),w=y.select("g");x.append("g").attr("class","nv-parallelCoordinatesWrap"),y.attr("transform","translate("+n.left+","+n.top+")");var k,S,T=d3.svg.line(),D=d3.svg.axis().orient("left");k=x.append("g").attr("class","background").selectAll("path").data(h).enter().append("path").attr("d",p),S=x.append("g").attr("class","foreground").selectAll("path").data(h).enter().append("path").attr("d",p).attr("stroke",l);var A=w.selectAll(".dimension").data(s).enter().append("g").attr("class","dimension").attr("transform",function(t){return"translate("+r(t)+",0)"});A.append("g").attr("class","axis").each(function(t){d3.select(this).call(D.scale(o[t]))}).append("text").attr("text-anchor","middle").attr("y",-9).text(String),A.append("g").attr("class","brush").each(function(t){d3.select(this).call(o[t].brush)}).selectAll("rect").attr("x",-8).attr("width",16)}),e}var n={top:30,right:10,bottom:10,left:10},i=null,a=null,r=d3.scale.ordinal(),o={},s=[],l=t.utils.defaultColor(),d=[],c=[],u=d3.dispatch("brush");return e.dispatch=u,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return a},set:function(t){a=t}},dimensions:{get:function(){return s},set:function(t){s=t}},margin:{get:function(){return n},set:function(t){n.top="undefined"!=typeof t.top?t.top:n.top,n.right="undefined"!=typeof t.right?t.right:n.right,n.bottom="undefined"!=typeof t.bottom?t.bottom:n.bottom,n.left="undefined"!=typeof t.left?t.left:n.left}},color:{get:function(){return l},set:function(e){l=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.pie=function(){"use strict";function e(c){return M.reset(),c.each(function(e){function c(t){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,v||(t.innerRadius=0);var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return B(e(t))}}var _=i-n.left-n.right,N=a-n.top-n.bottom,E=Math.min(_,N)/2,P=E-E/5,I=d3.select(this);t.utils.initSVG(I);var F=I.selectAll(".nv-wrap.nv-pie").data(e),O=F.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+s),j=O.append("g"),L=F.select("g"),R=j.append("g").attr("class","nv-pie");j.append("g").attr("class","nv-pieLabels"),F.attr("transform","translate("+n.left+","+n.top+")"),L.select(".nv-pie").attr("transform","translate("+_/2+","+N/2+")"),L.select(".nv-pieLabels").attr("transform","translate("+_/2+","+N/2+")"),I.on("click",function(t,e){C.chartClick({data:t,index:e,pos:d3.event,id:s})});var B=d3.svg.arc().outerRadius(P),$=d3.svg.arc().outerRadius(P+5);k&&(B.startAngle(k),$.startAngle(k)),T&&(B.endAngle(T),$.endAngle(T)),v&&(B.innerRadius(E*A),$.innerRadius(E*A));var z=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:o(t)});if(z.padAngle&&S&&z.padAngle(S),B.cornerRadius&&D&&(B.cornerRadius(D),$.cornerRadius(D)),v&&y){var V=R.append("g").attr("class","nv-pie");V.append("text").style("text-anchor","middle").attr("class","nv-pie-title").text(function(t){return y}).attr("dy","0.35em").attr("transform",function(t,e){return"translate(0, "+x+")"})}var Y=F.select(".nv-pie").selectAll(".nv-slice").data(z),H=F.select(".nv-pieLabels").selectAll(".nv-label").data(z);Y.exit().remove(),H.exit().remove();var W=Y.enter().append("g");W.attr("class","nv-slice"),W.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),b&&d3.select(this).select("path").transition().duration(70).attr("d",$),C.elementMouseover({label:r(t.data),value:o(t.data),point:t.data,pointIndex:e,pos:[d3.event.pageX,d3.event.pageY],id:s,color:d3.select(this).style("fill")})}),W.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),b&&d3.select(this).select("path").transition().duration(50).attr("d",B),C.elementMouseout({label:r(t.data),value:o(t.data),point:t.data,index:e,id:s})}),Y.attr("fill",function(t,e){return l(t,e)}),Y.attr("stroke",function(t,e){return l(t,e)});var U=W.append("path").each(function(t){this._current=t});if(U.on("click",function(t,e){C.elementClick({label:r(t.data),value:o(t.data),point:t.data,index:e,pos:d3.event,id:s}),d3.event.stopPropagation()}),U.on("dblclick",function(t,e){C.elementDblClick({label:r(t.data),value:o(t.data),point:t.data,index:e,pos:d3.event,id:s}),d3.event.stopPropagation()}),Y.select("path").transition().attr("d",B).attrTween("d",c),h){var G=d3.svg.arc().innerRadius(0);if(p)var G=B;f&&(G=d3.svg.arc().outerRadius(B.outerRadius())),H.enter().append("g").classed("nv-label",!0).each(function(t,e){var n=d3.select(this);n.attr("transform",function(t){if(w){t.outerRadius=P+10,t.innerRadius=P+15;var e=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?e-=90:e+=90,"translate("+G.centroid(t)+") rotate("+e+")"}return t.outerRadius=E+10,t.innerRadius=E+15,"translate("+G.centroid(t)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",w?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var J={},q=14,X=140,Q=function(t){return Math.floor(t[0]/X)*X+","+Math.floor(t[1]/q)*q};H.watchTransition(M,"pie labels").attr("transform",function(t){if(w){t.outerRadius=P+10,t.innerRadius=P+15;var e=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?e-=90:e+=90,"translate("+G.centroid(t)+") rotate("+e+")"}t.outerRadius=E+10,t.innerRadius=E+15;var n=G.centroid(t);if(t.value){var i=Q(n);J[i]&&(n[1]-=q),J[Q(n)]=!0}return"translate("+n+")"}),H.select(".nv-label text").style("text-anchor",w?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(t,e){var n=(t.endAngle-t.startAngle)/(2*Math.PI),i={key:r(t.data),value:o(t.data),percent:u(n)};return t.value&&n>g?i[m]:""})}}),M.renderEnd("pie immediate"),e}var n={top:0,right:0,bottom:0,left:0},i=500,a=500,r=function(t){return t.x},o=function(t){return t.y},s=Math.floor(1e4*Math.random()),l=t.utils.defaultColor(),c=d3.format(",.2f"),u=d3.format("%"),h=!0,p=!0,f=!1,m="key",g=.02,v=!1,y=!1,b=!0,x=0,w=!1,k=!1,S=!1,T=!1,D=0,A=.5,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),M=t.utils.renderWatch(C);return e.dispatch=C,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return a},set:function(t){a=t}},showLabels:{get:function(){return h},set:function(t){h=t}},title:{get:function(){return y},set:function(t){y=t}},titleOffset:{get:function(){return x},set:function(t){x=t}},labelThreshold:{get:function(){return g},set:function(t){g=t}},labelFormat:{get:function(){return u},set:function(t){u=t}},valueFormat:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return r},set:function(t){r=t}},id:{get:function(){return s},set:function(t){s=t}},endAngle:{get:function(){return T},set:function(t){T=t}},startAngle:{get:function(){return k},set:function(t){k=t}},padAngle:{get:function(){return S},set:function(t){S=t}},cornerRadius:{get:function(){return D},set:function(t){D=t}},donutRatio:{get:function(){return A},set:function(t){A=t}},pieLabelsOutside:{get:function(){return p},set:function(t){p=t}},donutLabelsOutside:{get:function(){return f},set:function(t){f=t}},labelSunbeamLayout:{get:function(){return w},set:function(t){w=t}},donut:{get:function(){return v},set:function(t){v=t}},growOnHover:{get:function(){return b},set:function(t){b=t}},margin:{get:function(){return n},set:function(t){n.top="undefined"!=typeof t.top?t.top:n.top,n.right="undefined"!=typeof t.right?t.right:n.right,n.bottom="undefined"!=typeof t.bottom?t.bottom:n.bottom,n.left="undefined"!=typeof t.left?t.left:n.left}},y:{get:function(){return o},set:function(t){o=d3.functor(t)}},color:{get:function(){return l},set:function(e){l=t.utils.getColor(e)}},labelType:{get:function(){return m},set:function(t){m=t||"key"}}}),t.utils.initOptions(e),e},t.models.pieChart=function(){"use strict";function e(l){return v.reset(),v.models(n),l.each(function(l){var d=d3.select(this);t.utils.initSVG(d);var c=(r||parseInt(d.style("width"),10)||960)-a.left-a.right,f=(o||parseInt(d.style("height"),10)||400)-a.top-a.bottom;if(e.update=function(){d.transition().call(e)},e.container=this,u.setter(b(l),e.update).getter(y(l)).update(),u.disabled=l.map(function(t){return!!t.disabled}),!h){var g;h={};for(g in u)u[g]instanceof Array?h[g]=u[g].slice(0):h[g]=u[g]}if(!l||!l.length){var v=d.selectAll(".nv-noData").data([p]);return v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",a.left+c/2).attr("y",a.top+f/2).text(function(t){return t}),e}d.selectAll(".nv-noData").remove();var x=d.selectAll("g.nv-wrap.nv-pieChart").data([l]),w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),k=x.select("g");w.append("g").attr("class","nv-pieWrap"),w.append("g").attr("class","nv-legendWrap"),s&&(i.width(c).key(n.x()),x.select(".nv-legendWrap").datum(l).call(i),a.top!=i.height()&&(a.top=i.height(),f=(o||parseInt(d.style("height"))||400)-a.top-a.bottom),x.select(".nv-legendWrap").attr("transform","translate(0,"+-a.top+")")),x.attr("transform","translate("+a.left+","+a.top+")"),n.width(c).height(f);var S=k.select(".nv-pieWrap").datum([l]);d3.transition(S).call(n),i.dispatch.on("stateChange",function(t){for(var n in t)u[n]=t[n];m.stateChange(u),e.update()}),n.dispatch.on("elementMouseout.tooltip",function(t){m.tooltipHide(t)}),m.on("changeState",function(t){"undefined"!=typeof t.disabled&&(l.forEach(function(e,n){e.disabled=t.disabled[n]}),u.disabled=t.disabled),e.update()})}),v.renderEnd("pieChart immediate"),e}var n=t.models.pie(),i=t.models.legend(),a={top:30,right:20,bottom:20,left:20},r=null,o=null,s=!0,l=t.utils.defaultColor(),d=!0,c=function(t,e,n,i){return'<h3 style="background-color: '+n.color+'">'+t+"</h3><p>"+e+"</p>"},u=t.utils.state(),h=null,p="No Data Available.",f=250,m=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),g=function(i,a){var r=n.x()(i.point),o=i.pos[0]+(a&&a.offsetLeft||0),s=i.pos[1]+(a&&a.offsetTop||0),l=n.valueFormat()(n.y()(i.point)),d=c(r,l,i,e);t.tooltip.show([o,s],d,i.value<0?"n":"s",null,a)},v=t.utils.renderWatch(m),y=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},b=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return n.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],m.tooltipShow(t)}),m.on("tooltipShow",function(t){d&&g(t)}),m.on("tooltipHide",function(){d&&t.tooltip.cleanup()}),e.legend=i,e.dispatch=m,e.pie=n,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{noData:{get:function(){return p},set:function(t){p=t}},tooltipContent:{get:function(){return c},set:function(t){c=t}},tooltips:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return s},set:function(t){s=t}},defaultState:{get:function(){return h},set:function(t){h=t}},color:{get:function(){return l},set:function(t){l=t,i.color(l),n.color(l)}},duration:{get:function(){return f},set:function(t){f=t,v.reset(f)}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.scatter=function(){"use strict";function e(L){return B.reset(),L.each(function(e){function L(){if(!w)return!1;var t=d3.merge(e.map(function(t,e){return t.values.map(function(t,n){var i=f(t,n),a=m(t,n);return[u(i)+1e-7*Math.random(),h(a)+1e-7*Math.random(),e,n,t]}).filter(function(t,e){return k(t[4],e)})}));if(j===!0){t.length<3&&(t.push([u.range()[0]-20,h.range()[0]-20,null,null]),t.push([u.range()[1]+20,h.range()[1]+20,null,null]),t.push([u.range()[0]-20,h.range()[0]+20,null,null]),t.push([u.range()[1]+20,h.range()[1]-20,null,null]));var n=d3.geom.polygon([[-10,-10],[-10,l+10],[s+10,l+10],[s+10,-10]]),i=d3.geom.voronoi(t).map(function(e,i){return{data:n.clip(e),series:t[i][2],point:t[i][3]}});H.select(".nv-point-paths").selectAll("path").remove();var a=H.select(".nv-point-paths").selectAll("path").data(i);if(a.enter().append("svg:path").attr("d",function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"}).attr("id",function(t,e){return"nv-path-"+e}).attr("clip-path",function(t,e){return"url(#nv-clip-"+e+")"}),A){var r=H.append("svg:g").attr("id","nv-point-clips");r.selectAll("clipPath").data(t).enter().append("svg:clipPath").attr("id",function(t,e){return"nv-clip-"+e}).append("svg:circle").attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",C)}var d=function(t,n){if(R)return 0;var i=e[t.series];if("undefined"!=typeof i){var a=i.values[t.point];n({point:a,series:i,pos:[u(f(a,t.point))+o.left,h(m(a,t.point))+o.top],seriesIndex:t.series,pointIndex:t.point})}};a.on("click",function(t){d(t,O.elementClick)}).on("dblclick",function(t){d(t,O.elementDblClick)}).on("mouseover",function(t){d(t,O.elementMouseover)}).on("mouseout",function(t,e){d(t,O.elementMouseout)})}else H.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(t,n){if(R||!e[t.series])return 0;var i=e[t.series],a=i.values[n];O.elementClick({point:a,series:i,pos:[u(f(a,n))+o.left,h(m(a,n))+o.top],seriesIndex:t.series,pointIndex:n})}).on("mouseover",function(t,n){if(R||!e[t.series])return 0;var i=e[t.series],a=i.values[n];O.elementMouseover({point:a,series:i,pos:[u(f(a,n))+o.left,h(m(a,n))+o.top],seriesIndex:t.series,pointIndex:n})}).on("mouseout",function(t,n){if(R||!e[t.series])return 0;var i=e[t.series],a=i.values[n];O.elementMouseout({point:a,series:i,seriesIndex:t.series,pointIndex:n})});R=!1}var $=d3.select(this),z=(s||parseInt($.style("width"))||960)-o.left-o.right,V=(l||parseInt($.style("height"))||400)-o.top-o.bottom;t.utils.initSVG($),e.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var Y=M&&_&&P?[]:d3.merge(e.map(function(t){return t.values.map(function(t,e){return{x:f(t,e),y:m(t,e),size:g(t,e)}})}));u.domain(M||d3.extent(Y.map(function(t){return t.x}).concat(y))),S&&e[0]?u.range(N||[(z*T+z)/(2*e[0].values.length),z-z*(1+T)/(2*e[0].values.length)]):u.range(N||[0,z]),h.domain(_||d3.extent(Y.map(function(t){return t.y}).concat(b))).range(E||[V,0]),p.domain(P||d3.extent(Y.map(function(t){return t.size}).concat(x))).range(I||[16,256]),u.domain()[0]!==u.domain()[1]&&h.domain()[0]!==h.domain()[1]||(F=!0),u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]-.01*u.domain()[0],u.domain()[1]+.01*u.domain()[1]]):u.domain([-1,1])),h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]):h.domain([-1,1])),isNaN(u.domain()[0])&&u.domain([-1,1]),isNaN(h.domain()[0])&&h.domain([-1,1]),n=n||u,i=i||h,a=a||p;var H=$.selectAll("g.nv-wrap.nv-scatter").data([e]),W=H.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+c+(F?" nv-single-point":"")),U=W.append("defs"),G=W.append("g"),J=H.select("g");G.append("g").attr("class","nv-groups"),
G.append("g").attr("class","nv-point-paths"),H.attr("transform","translate("+o.left+","+o.top+")"),U.append("clipPath").attr("id","nv-edge-clip-"+c).append("rect"),H.select("#nv-edge-clip-"+c+" rect").attr("width",z).attr("height",V>0?V:0),J.attr("clip-path",D?"url(#nv-edge-clip-"+c+")":""),R=!0;var q=H.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});q.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),q.exit().remove(),q.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),q.watchTransition(B,"scatter: groups").style("fill",function(t,e){return d(t,e)}).style("stroke",function(t,e){return d(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5);var X=q.selectAll("path.nv-point").data(function(t){return t.values});X.enter().append("path").style("fill",function(t,e){return t.color}).style("stroke",function(t,e){return t.color}).attr("transform",function(t,e){return"translate("+n(f(t,e))+","+i(m(t,e))+")"}).attr("d",t.utils.symbol().type(v).size(function(t,e){return p(g(t,e))})),X.exit().remove(),q.exit().selectAll("path.nv-point").watchTransition(B,"scatter exit").attr("transform",function(t,e){return"translate("+u(f(t,e))+","+h(m(t,e))+")"}).remove(),X.each(function(t,e){d3.select(this).classed("nv-point",!0).classed("nv-point-"+e,!0).classed("hover",!1)}),X.watchTransition(B,"scatter points").attr("transform",function(t,e){return"translate("+u(f(t,e))+","+h(m(t,e))+")"}).attr("d",t.utils.symbol().type(v).size(function(t,e){return p(g(t,e))})),clearTimeout(r),r=setTimeout(L,300),n=u.copy(),i=h.copy(),a=p.copy()}),B.renderEnd("scatter immediate"),e}var n,i,a,r,o={top:0,right:0,bottom:0,left:0},s=null,l=null,d=t.utils.defaultColor(),c=Math.floor(1e5*Math.random()),u=d3.scale.linear(),h=d3.scale.linear(),p=d3.scale.linear(),f=function(t){return t.x},m=function(t){return t.y},g=function(t){return t.size||1},v=function(t){return t.shape||"circle"},y=[],b=[],x=[],w=!0,k=function(t){return!t.notActive},S=!1,T=.1,D=!1,A=!0,C=function(){return 25},M=null,_=null,N=null,E=null,P=null,I=null,F=!1,O=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),j=!0,L=250,R=!1,B=t.utils.renderWatch(O,L);return e.dispatch=O,e.options=t.utils.optionsFunc.bind(e),e._calls=new function(){this.clearHighlights=function(){return d3.selectAll(".nv-chart-"+c+" .nv-point.hover").classed("hover",!1),null},this.highlightPoint=function(t,e,n){d3.select(".nv-chart-"+c+" .nv-series-"+t+" .nv-point-"+e).classed("hover",n)}},O.on("elementMouseover.point",function(t){w&&e._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)}),O.on("elementMouseout.point",function(t){w&&e._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)}),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xScale:{get:function(){return u},set:function(t){u=t}},yScale:{get:function(){return h},set:function(t){h=t}},pointScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return M},set:function(t){M=t}},yDomain:{get:function(){return _},set:function(t){_=t}},pointDomain:{get:function(){return P},set:function(t){P=t}},xRange:{get:function(){return N},set:function(t){N=t}},yRange:{get:function(){return E},set:function(t){E=t}},pointRange:{get:function(){return I},set:function(t){I=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return b},set:function(t){b=t}},forcePoint:{get:function(){return x},set:function(t){x=t}},interactive:{get:function(){return w},set:function(t){w=t}},pointActive:{get:function(){return k},set:function(t){k=t}},padDataOuter:{get:function(){return T},set:function(t){T=t}},padData:{get:function(){return S},set:function(t){S=t}},clipEdge:{get:function(){return D},set:function(t){D=t}},clipVoronoi:{get:function(){return A},set:function(t){A=t}},clipRadius:{get:function(){return C},set:function(t){C=t}},id:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return f},set:function(t){f=d3.functor(t)}},y:{get:function(){return m},set:function(t){m=d3.functor(t)}},pointSize:{get:function(){return g},set:function(t){g=d3.functor(t)}},pointShape:{get:function(){return v},set:function(t){v=d3.functor(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},duration:{get:function(){return L},set:function(t){L=t,B.reset(L)}},color:{get:function(){return d},set:function(e){d=t.utils.getColor(e)}},useVoronoi:{get:function(){return j},set:function(t){j=t,j===!1&&(A=!1)}}}),t.utils.initOptions(e),e},t.models.scatterChart=function(){"use strict";function e(w){return E.reset(),E.models(n),v&&E.models(i),y&&E.models(a),f&&E.models(o),m&&E.models(s),w.each(function(w){var k=d3.select(this),S=this;t.utils.initSVG(k);var O=(d||parseInt(k.style("width"))||960)-l.left-l.right,j=(c||parseInt(k.style("height"))||400)-l.top-l.bottom;if(e.update=function(){0===M?k.call(e):k.transition().duration(M).call(e)},e.container=this,T.setter(F(w),e.update).getter(I(w)).update(),T.disabled=w.map(function(t){return!!t.disabled}),!D){var L;D={};for(L in T)T[L]instanceof Array?D[L]=T[L].slice(0):D[L]=T[L]}if(!(w&&w.length&&w.filter(function(t){return t.values.length}).length)){var R=k.selectAll(".nv-noData").data([C]);return R.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),R.attr("x",l.left+O/2).attr("y",l.top+j/2).text(function(t){return t}),E.renderEnd("scatter immediate"),e}k.selectAll(".nv-noData").remove(),h=n.xScale(),p=n.yScale();var B=k.selectAll("g.nv-wrap.nv-scatterChart").data([w]),$=B.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+n.id()),z=$.append("g"),V=B.select("g");z.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis"),z.append("g").attr("class","nv-scatterWrap"),z.append("g").attr("class","nv-regressionLinesWrap"),z.append("g").attr("class","nv-distWrap"),z.append("g").attr("class","nv-legendWrap"),B.attr("transform","translate("+l.left+","+l.top+")"),b&&V.select(".nv-y.nv-axis").attr("transform","translate("+O+",0)"),g&&(r.width(O/2),B.select(".nv-legendWrap").datum(w).call(r),l.top!=r.height()&&(l.top=r.height(),j=(c||parseInt(k.style("height"))||400)-l.top-l.bottom),B.select(".nv-legendWrap").attr("transform","translate("+O/2+","+-l.top+")")),n.width(O).height(j).color(w.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!w[e].disabled})),B.select(".nv-scatterWrap").datum(w.filter(function(t){return!t.disabled})).call(n),B.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+n.id()+")");var Y=B.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});Y.enter().append("g").attr("class","nv-regLines");var H=Y.selectAll(".nv-regLine").data(function(t){return[t]});H.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),H.filter(function(t){return t.intercept&&t.slope}).watchTransition(E,"scatterPlusLineChart: regline").attr("x1",h.range()[0]).attr("x2",h.range()[1]).attr("y1",function(t,e){return p(h.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t,e){return p(h.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return u(t,n)}).style("stroke-opacity",function(t,e){return t.disabled||"undefined"==typeof t.slope||"undefined"==typeof t.intercept?0:1}),v&&(i.scale(h).ticks(i.ticks()?i.ticks():t.utils.calcTicksX(O/100,w)).tickSize(-j,0),V.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(i)),y&&(a.scale(p).ticks(a.ticks()?a.ticks():t.utils.calcTicksY(j/36,w)).tickSize(-O,0),V.select(".nv-y.nv-axis").call(a)),f&&(o.getData(n.x()).scale(h).width(O).color(w.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!w[e].disabled})),z.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),V.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(w.filter(function(t){return!t.disabled})).call(o)),m&&(s.getData(n.y()).scale(p).width(j).color(w.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!w[e].disabled})),z.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),V.select(".nv-distributionY").attr("transform","translate("+(b?O:-s.size())+",0)").datum(w.filter(function(t){return!t.disabled})).call(s)),r.dispatch.on("stateChange",function(t){for(var n in t)T[n]=t[n];A.stateChange(T),e.update()}),n.dispatch.on("elementMouseover.tooltip",function(t){d3.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.pos[1]-j),d3.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos[0]+o.size()),t.pos=[t.pos[0]+l.left,t.pos[1]+l.top],A.tooltipShow(t)}),A.on("tooltipShow",function(t){x&&P(t,S.parentNode)}),A.on("changeState",function(t){"undefined"!=typeof t.disabled&&(w.forEach(function(e,n){e.disabled=t.disabled[n]}),T.disabled=t.disabled),e.update()}),_=h.copy(),N=p.copy()}),E.renderEnd("scatter with line immediate"),e}var n=t.models.scatter(),i=t.models.axis(),a=t.models.axis(),r=t.models.legend(),o=t.models.distribution(),s=t.models.distribution(),l={top:30,right:20,bottom:50,left:75},d=null,c=null,u=t.utils.defaultColor(),h=n.xScale(),p=n.yScale(),f=!1,m=!1,g=!0,v=!0,y=!0,b=!1,x=!0,w=function(t,e,n){return"<strong>"+e+"</strong>"},k=function(t,e,n){return"<strong>"+n+"</strong>"},S=function(t,e,n,i){return"<h3>"+t+"</h3><p>"+i+"</p>"},T=t.utils.state(),D=null,A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),C="No Data Available.",M=250;n.xScale(h).yScale(p),i.orient("bottom").tickPadding(10),a.orient(b?"right":"left").tickPadding(10),o.axis("x"),s.axis("y");var _,N,E=t.utils.renderWatch(A,M),P=function(r,o){var s=r.pos[0]+(o.offsetLeft||0),d=r.pos[1]+(o.offsetTop||0),c=r.pos[0]+(o.offsetLeft||0),u=p.range()[0]+l.top+(o.offsetTop||0),f=h.range()[0]+l.left+(o.offsetLeft||0),m=r.pos[1]+(o.offsetTop||0),g=i.tickFormat()(n.x()(r.point,r.pointIndex)),v=a.tickFormat()(n.y()(r.point,r.pointIndex));null!=w&&t.tooltip.show([c,u],w(r.series.key,g,v,r,e),"n",1,o,"x-nvtooltip"),null!=k&&t.tooltip.show([f,m],k(r.series.key,g,v,r,e),"e",1,o,"y-nvtooltip"),null!=S&&t.tooltip.show([s,d],S(r.series.key,g,v,r.point.tooltip,r,e),r.value<0?"n":"s",null,o)},I=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},F=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return n.dispatch.on("elementMouseout.tooltip",function(t){A.tooltipHide(t),d3.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),d3.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",s.size())}),A.on("tooltipHide",function(){x&&t.tooltip.cleanup()}),e.dispatch=A,e.scatter=n,e.legend=r,e.xAxis=i,e.yAxis=a,e.distX=o,e.distY=s,e._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return c},set:function(t){c=t}},showDistX:{get:function(){return f},set:function(t){f=t}},showDistY:{get:function(){return m},set:function(t){m=t}},showLegend:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return y},set:function(t){y=t}},tooltips:{get:function(){return x},set:function(t){x=t}},tooltipContent:{get:function(){return S},set:function(t){S=t}},tooltipXContent:{get:function(){return w},set:function(t){w=t}},tooltipYContent:{get:function(){return k},set:function(t){k=t}},defaultState:{get:function(){return D},set:function(t){D=t}},noData:{get:function(){return C},set:function(t){C=t}},duration:{get:function(){return M},set:function(t){M=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},rightAlignYAxis:{get:function(){return b},set:function(t){b=t,a.orient(t?"right":"left")}},color:{get:function(){return u},set:function(e){u=t.utils.getColor(e),r.color(u),o.color(u),s.color(u)}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.sparkline=function(){"use strict";function e(d){return d.each(function(e){var d=s-o.left-o.right,m=l-o.top-o.bottom,g=d3.select(this);t.utils.initSVG(g),c.domain(n||d3.extent(e,h)).range(a||[0,d]),u.domain(i||d3.extent(e,p)).range(r||[m,0]);var v=g.selectAll("g.nv-wrap.nv-sparkline").data([e]),y=v.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");y.append("g"),v.select("g");v.attr("transform","translate("+o.left+","+o.top+")");var b=v.selectAll("path").data(function(t){return[t]});b.enter().append("path"),b.exit().remove(),b.style("stroke",function(t,e){return t.color||f(t,e)}).attr("d",d3.svg.line().x(function(t,e){return c(h(t,e))}).y(function(t,e){return u(p(t,e))}));var x=v.selectAll("circle.nv-point").data(function(t){function e(e){if(e!=-1){var n=t[e];return n.pointIndex=e,n}return null}var n=t.map(function(t,e){return p(t,e)}),i=e(n.lastIndexOf(u.domain()[1])),a=e(n.indexOf(u.domain()[0])),r=e(n.length-1);return[a,i,r].filter(function(t){return null!=t})});x.enter().append("circle"),x.exit().remove(),x.attr("cx",function(t,e){return c(h(t,t.pointIndex))}).attr("cy",function(t,e){return u(p(t,t.pointIndex))}).attr("r",2).attr("class",function(t,e){return h(t,t.pointIndex)==c.domain()[1]?"nv-point nv-currentValue":p(t,t.pointIndex)==u.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),e}var n,i,a,r,o={top:2,right:0,bottom:2,left:0},s=400,l=32,d=!0,c=d3.scale.linear(),u=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},f=t.utils.getColor(["#000"]);return e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return a},set:function(t){a=t}},yRange:{get:function(){return r},set:function(t){r=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return u},set:function(t){u=t}},animate:{get:function(){return d},set:function(t){d=t}},x:{get:function(){return h},set:function(t){h=d3.functor(t)}},y:{get:function(){return p},set:function(t){p=d3.functor(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return f},set:function(e){f=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.sparklinePlus=function(){"use strict";function e(h){return h.each(function(g){function v(){if(!d){var t=C.selectAll(".nv-hoverValue").data(l),e=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+n(a.x()(g[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),l.length&&(e.append("line").attr("x1",0).attr("y1",-r.top).attr("x2",0).attr("y2",w),e.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-r.top).attr("text-anchor","end").attr("dy",".9em"),C.select(".nv-hoverValue .nv-xValue").text(c(a.x()(g[l[0]],l[0]))),e.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-r.top).attr("text-anchor","start").attr("dy",".9em"),C.select(".nv-hoverValue .nv-yValue").text(u(a.y()(g[l[0]],l[0]))))}}function y(){function t(t,e){for(var n=Math.abs(a.x()(t[0],0)-e),i=0,r=0;r<t.length;r++)Math.abs(a.x()(t[r],r)-e)<n&&(n=Math.abs(a.x()(t[r],r)-e),i=r);return i}if(!d){var e=d3.mouse(this)[0]-r.left;l=[t(g,Math.round(n.invert(e)))],v()}}var b=d3.select(this);t.utils.initSVG(b);var x=(o||parseInt(b.style("width"))||960)-r.left-r.right,w=(s||parseInt(b.style("height"))||400)-r.top-r.bottom;if(e.update=function(){e(h)},e.container=this,!g||!g.length){var k=b.selectAll(".nv-noData").data([m]);return k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",r.left+x/2).attr("y",r.top+w/2).text(function(t){return t}),e}b.selectAll(".nv-noData").remove();var S=a.y()(g[g.length-1],g.length-1);n=a.xScale(),i=a.yScale();var T=b.selectAll("g.nv-wrap.nv-sparklineplus").data([g]),D=T.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),A=D.append("g"),C=T.select("g");A.append("g").attr("class","nv-sparklineWrap"),A.append("g").attr("class","nv-valueWrap"),A.append("g").attr("class","nv-hoverArea"),T.attr("transform","translate("+r.left+","+r.top+")");var M=C.select(".nv-sparklineWrap");a.width(x).height(w),M.call(a);var _=C.select(".nv-valueWrap"),N=_.selectAll(".nv-currentValue").data([S]);N.enter().append("text").attr("class","nv-currentValue").attr("dx",f?-8:8).attr("dy",".9em").style("text-anchor",f?"end":"start"),N.attr("x",x+(f?r.right:0)).attr("y",p?function(t){return i(t)}:0).style("fill",a.color()(g[g.length-1],g.length-1)).text(u(S)),A.select(".nv-hoverArea").append("rect").on("mousemove",y).on("click",function(){d=!d}).on("mouseout",function(){l=[],v()}),C.select(".nv-hoverArea rect").attr("transform",function(t){return"translate("+-r.left+","+-r.top+")"}).attr("width",x+r.left+r.right).attr("height",w+r.top)}),e}var n,i,a=t.models.sparkline(),r={top:15,right:100,bottom:10,left:50},o=null,s=null,l=[],d=!1,c=d3.format(",r"),u=d3.format(",.2f"),h=!0,p=!0,f=!1,m="No Data Available.";return e.sparkline=a,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return s},set:function(t){s=t}},xTickFormat:{get:function(){return c},set:function(t){c=t}},yTickFormat:{get:function(){return u},set:function(t){u=t}},showValue:{get:function(){return h},set:function(t){h=t}},alignValue:{get:function(){return p},set:function(t){p=t}},rightAlignValue:{get:function(){return f},set:function(t){f=t}},noData:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}}}),t.utils.inheritOptions(e,a),t.utils.initOptions(e),e},t.models.stackedArea=function(){"use strict";function e(u){return b.reset(),b.models(g),u.each(function(u){var v=r-a.left-a.right,x=o-a.top-a.bottom,w=d3.select(this);t.utils.initSVG(w),n=g.xScale(),i=g.yScale();var k=u;u.forEach(function(t,e){t.seriesIndex=e,t.values=t.values.map(function(t,n){return t.index=n,t.seriesIndex=e,t})});var S=u.filter(function(t){return!t.disabled});u=d3.layout.stack().order(p).offset(h).values(function(t){return t.values}).x(d).y(c).out(function(t,e,n){var i=0===c(t)?0:n;t.display={y:i,y0:e}})(S);var T=w.selectAll("g.nv-wrap.nv-stackedarea").data([u]),D=T.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),A=D.append("defs"),C=D.append("g"),M=T.select("g");C.append("g").attr("class","nv-areaWrap"),C.append("g").attr("class","nv-scatterWrap"),T.attr("transform","translate("+a.left+","+a.top+")"),g.width(v).height(x).x(d).y(function(t){return t.display.y+t.display.y0}).forceY([0]).color(u.map(function(t,e){return t.color||s(t,t.seriesIndex)}));var _=M.select(".nv-scatterWrap").datum(u);_.call(g),A.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),T.select("#nv-edge-clip-"+l+" rect").attr("width",v).attr("height",x),M.attr("clip-path",m?"url(#nv-edge-clip-"+l+")":"");var N=d3.svg.area().x(function(t,e){return n(d(t,e))}).y0(function(t){return i(t.display.y0)}).y1(function(t){return i(t.display.y+t.display.y0)}).interpolate(f),E=d3.svg.area().x(function(t,e){return n(d(t,e))}).y0(function(t){return i(t.display.y0)}).y1(function(t){return i(t.display.y0)}),P=M.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});P.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t,e){return E(t.values,t.seriesIndex)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),y.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),y.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t,e){d3.select(this).classed("hover",!1),y.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),P.exit().remove(),P.style("fill",function(t,e){return t.color||s(t,t.seriesIndex)}).style("stroke",function(t,e){return t.color||s(t,t.seriesIndex)}),P.watchTransition(b,"stackedArea path").attr("d",function(t,e){return N(t.values,e)}),g.dispatch.on("elementMouseover.area",function(t){M.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),g.dispatch.on("elementMouseout.area",function(t){M.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),e.d3_stackedOffset_stackPercent=function(t){var e,n,i,a=t.length,r=t[0].length,o=1/a,s=[];for(n=0;n<r;++n){for(e=0,i=0;e<k.length;e++)i+=c(k[e].values[n]);if(i)for(e=0;e<a;e++)t[e][n][1]/=i;else for(e=0;e<a;e++)t[e][n][1]=o}for(n=0;n<r;++n)s[n]=0;return s}}),b.renderEnd("stackedArea immediate"),e}var n,i,a={top:0,right:0,bottom:0,left:0},r=960,o=500,s=t.utils.defaultColor(),l=Math.floor(1e5*Math.random()),d=function(t){return t.x},c=function(t){return t.y},u="stack",h="zero",p="default",f="linear",m=!1,g=t.models.scatter(),v=250,y=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout","renderEnd");g.interactive(!1),g.pointSize(2.2).pointDomain([2.2,2.2]);var b=t.utils.renderWatch(y,v);return g.dispatch.on("elementClick.area",function(t){y.areaClick(t)}),g.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],y.tooltipShow(t)}),g.dispatch.on("elementMouseout.tooltip",function(t){y.tooltipHide(t)}),e.dispatch=y,e.scatter=g,e.interpolate=function(t){return arguments.length?(f=t,e):f},e.duration=function(t){return arguments.length?(v=t,b.reset(v),g.duration(v),e):v},e.dispatch=y,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return r},set:function(t){r=t}},height:{get:function(){return o},set:function(t){o=t}},clipEdge:{get:function(){return m},set:function(t){m=t}},offset:{get:function(){return h},set:function(t){h=t}},order:{get:function(){return p},set:function(t){p=t}},interpolate:{get:function(){return f},set:function(t){f=t}},x:{get:function(){return d},set:function(t){d=d3.functor(t)}},y:{get:function(){return c},set:function(t){c=d3.functor(t)}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}},style:{get:function(){return u},set:function(t){switch(u=t){case"stack":e.offset("zero"),e.order("default");break;case"stream":e.offset("wiggle"),e.order("inside-out");break;case"stream-center":e.offset("silhouette"),e.order("inside-out");break;case"expand":e.offset("expand"),e.order("default");break;case"stack_percent":e.offset(e.d3_stackedOffset_stackPercent),e.order("default")}}},duration:{get:function(){return v},set:function(t){v=t,b.reset(v),g.duration(v)}}}),t.utils.inheritOptions(e,g),t.utils.initOptions(e),e},t.models.stackedAreaChart=function(){"use strict";function e(w){return E.reset(),E.models(a),g&&E.models(r),v&&E.models(o),w.each(function(w){var E=d3.select(this),j=this;t.utils.initSVG(E);var L=(u||parseInt(E.style("width"))||960)-c.left-c.right,R=(h||parseInt(E.style("height"))||400)-c.top-c.bottom;if(e.update=function(){E.transition().duration(N).call(e)},e.container=this,S.setter(O(w),e.update).getter(F(w)).update(),S.disabled=w.map(function(t){return!!t.disabled}),!T){var B;T={};for(B in S)S[B]instanceof Array?T[B]=S[B].slice(0):T[B]=S[B]}if(!(w&&w.length&&w.filter(function(t){return t.values.length}).length)){var $=E.selectAll(".nv-noData").data([D]);return $.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),$.attr("x",c.left+L/2).attr("y",c.top+R/2).text(function(t){return t}),e}E.selectAll(".nv-noData").remove(),n=a.xScale(),i=a.yScale();var z=E.selectAll("g.nv-wrap.nv-stackedAreaChart").data([w]),V=z.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),Y=z.select("g");if(V.append("rect").style("opacity",0),V.append("g").attr("class","nv-x nv-axis"),V.append("g").attr("class","nv-y nv-axis"),V.append("g").attr("class","nv-stackedWrap"),V.append("g").attr("class","nv-legendWrap"),V.append("g").attr("class","nv-controlsWrap"),V.append("g").attr("class","nv-interactive"),Y.select("rect").attr("width",L).attr("height",R),m){var H=f?L-C:L;s.width(H),Y.select(".nv-legendWrap").datum(w).call(s),c.top!=s.height()&&(c.top=s.height(),R=(h||parseInt(E.style("height"))||400)-c.top-c.bottom),Y.select(".nv-legendWrap").attr("transform","translate("+(L-H)+","+-c.top+")")}if(f){var W=[{key:_.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=a.style(),style:"stack"},{key:_.stream||"Stream",metaKey:"Stream",disabled:"stream"!=a.style(),style:"stream"},{key:_.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=a.style(),style:"expand"},{key:_.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=a.style(),style:"stack_percent"}];C=M.length/3*260,W=W.filter(function(t){return M.indexOf(t.metaKey)!==-1}),l.width(C).color(["#444","#444","#444"]),Y.select(".nv-controlsWrap").datum(W).call(l),c.top!=Math.max(l.height(),s.height())&&(c.top=Math.max(l.height(),s.height()),R=(h||parseInt(E.style("height"))||400)-c.top-c.bottom),Y.select(".nv-controlsWrap").attr("transform","translate(0,"+-c.top+")")}z.attr("transform","translate("+c.left+","+c.top+")"),y&&Y.select(".nv-y.nv-axis").attr("transform","translate("+L+",0)"),b&&(d.width(L).height(R).margin({left:c.left,top:c.top}).svgContainer(E).xScale(n),z.select(".nv-interactive").call(d)),a.width(L).height(R);var U=Y.select(".nv-stackedWrap").datum(w);U.transition().call(a),g&&(r.scale(n).ticks(t.utils.calcTicksX(L/100,w)).tickSize(-R,0),Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+R+")"),Y.select(".nv-x.nv-axis").transition().duration(0).call(r)),v&&(o.scale(i).ticks("wiggle"==a.offset()?0:t.utils.calcTicksY(R/36,w)).tickSize(-L,0).setTickFormat("expand"==a.style()||"stack_percent"==a.style()?d3.format("%"):k),Y.select(".nv-y.nv-axis").transition().duration(0).call(o)),a.dispatch.on("areaClick.toggle",function(t){1===w.filter(function(t){return!t.disabled}).length?w.forEach(function(t){t.disabled=!1}):w.forEach(function(e,n){e.disabled=n!=t.seriesIndex}),S.disabled=w.map(function(t){return!!t.disabled}),A.stateChange(S),e.update()}),s.dispatch.on("stateChange",function(t){for(var n in t)S[n]=t[n];A.stateChange(S),e.update()}),l.dispatch.on("legendClick",function(t,n){t.disabled&&(W=W.map(function(t){return t.disabled=!0,t}),t.disabled=!1,a.style(t.style),S.style=a.style(),A.stateChange(S),e.update())}),d.dispatch.on("elementMousemove",function(n){a.clearHighlights();var i,s,l,u=[];if(w.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(r,o){s=t.interactiveBisect(r.values,n.pointXValue,e.x()),a.highlightPoint(o,s,!0);var d=r.values[s];if("undefined"!=typeof d){"undefined"==typeof i&&(i=d),"undefined"==typeof l&&(l=e.xScale()(e.x()(d,s)));var c="expand"==a.style()?d.display.y:e.y()(d,s);u.push({key:r.key,value:c,color:p(r,r.seriesIndex),stackedValue:d.display})}}),u.reverse(),u.length>2){var h=e.yScale().invert(n.mouseY),f=null;u.forEach(function(t,e){h=Math.abs(h);var n=Math.abs(t.stackedValue.y0),i=Math.abs(t.stackedValue.y);if(h>=n&&h<=i+n)return void(f=e)}),null!=f&&(u[f].highlight=!0)}var m=r.tickFormat()(e.x()(i,s)),g="expand"==a.style()?function(t,e){return d3.format(".1%")(t)}:function(t,e){return o.tickFormat()(t)};d.tooltip.position({left:l+c.left,top:n.mouseY+c.top}).chartContainer(j.parentNode).enabled(x).valueFormatter(g).data({value:m,series:u})(),d.renderGuideLine(l)}),d.dispatch.on("elementMouseout",function(t){A.tooltipHide(),a.clearHighlights()}),A.on("tooltipShow",function(t){x&&I(t,j.parentNode)}),A.on("changeState",function(t){"undefined"!=typeof t.disabled&&w.length===t.disabled.length&&(w.forEach(function(e,n){e.disabled=t.disabled[n]}),S.disabled=t.disabled),"undefined"!=typeof t.style&&(a.style(t.style),P=t.style),e.update()})}),E.renderEnd("stacked Area chart immediate"),e}var n,i,a=t.models.stackedArea(),r=t.models.axis(),o=t.models.axis(),s=t.models.legend(),l=t.models.legend(),d=t.interactiveGuideline(),c={top:30,right:25,bottom:50,left:60},u=null,h=null,p=t.utils.defaultColor(),f=!0,m=!0,g=!0,v=!0,y=!1,b=!1,x=!0,w=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},k=d3.format(",.2f"),S=t.utils.state(),T=null,D="No Data Available.",A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),C=250,M=["Stacked","Stream","Expanded"],_={},N=250;S.style=a.style(),r.orient("bottom").tickPadding(7),o.orient(y?"right":"left"),l.updateState(!1);var E=t.utils.renderWatch(A),P=a.style(),I=function(n,i){var s=n.pos[0]+(i.offsetLeft||0),l=n.pos[1]+(i.offsetTop||0),d=r.tickFormat()(a.x()(n.point,n.pointIndex)),c=o.tickFormat()(a.y()(n.point,n.pointIndex)),u=w(n.series.key,d,c,n,e);t.tooltip.show([s,l],u,n.value<0?"n":"s",null,i)},F=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),style:a.style()}}},O=function(t){return function(e){void 0!==e.style&&(P=e.style),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return a.dispatch.on("tooltipShow",function(t){t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],A.tooltipShow(t)}),a.dispatch.on("tooltipHide",function(t){A.tooltipHide(t)}),A.on("tooltipHide",function(){x&&t.tooltip.cleanup()}),e.dispatch=A,e.stacked=a,e.legend=s,e.controls=l,e.xAxis=r,e.yAxis=o,e.interactiveLayer=d,o.setTickFormat=o.tickFormat,e.dispatch=A,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},tooltips:{get:function(){return x},set:function(t){x=t}},tooltipContent:{get:function(){return w},set:function(t){w=t}},defaultState:{get:function(){return T},set:function(t){T=t}},noData:{get:function(){return D},set:function(t){D=t}},showControls:{get:function(){return f},set:function(t){f=t}},controlLabels:{get:function(){return _},set:function(t){_=t}},yAxisTickFormat:{get:function(){return k},set:function(t){k=t}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return N},set:function(t){N=t,E.reset(N),a.duration(N),r.duration(N),o.duration(N)}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e),s.color(p),a.color(p)}},rightAlignYAxis:{get:function(){return y},set:function(t){y=t,o.orient(y?"right":"left");
}},useInteractiveGuideline:{get:function(){return b},set:function(t){b=!!t,t&&(e.interactive(!1),e.useVoronoi(!1))}}}),t.utils.inheritOptions(e,a),t.utils.initOptions(e),e},t.version="1.7.1"}()},{}],49:[function(t,e,n){function i(){this.initialize.apply(this,arguments)}var a=t("underscore"),r=t("backbone"),o=t("jquery");(void 0==window.$||$.fn.jquery.split(" ")[0].split(".")[0]<2)&&(window.jQuery=window.$=r.$=o);var s="function"==typeof $().modal;s&&t("bootstrap/dist/js/bootstrap");var l=t("./src/views/header-view.js"),d=t("./src/views/footer-view.js"),c=t("amp-translate"),u=t("./src/models/amp-layout-model.js");a.extend(i.prototype,r.Events,{layoutFetched:new $.Deferred,initialize:function(t){t=a.defaults(t,{showFooterAdmin:!0,showDGFooter:!0,showLogin:!0,useSingleRowHeader:!1}),a.has(t,"sync")&&(r.sync=t.sync);this.createTranslator(),this.createViews(t),a.bindAll(this,"createTranslator","createViews","bubbleViewEvents","onMenuRendered")},createTranslator:function(){var t=JSON.parse('{\n"amp.common:footer": "Developed in partnership with OECD, UNDP, WB, Government of Ethiopia and DG",\n"amp.common:title": "AMP Toolbar",\n"amp.common:title-help": "Help",\n"amp.common:subtitle-amp-help": "AMP Help",\n"amp.common:subtitle-glossary": "Glossary",\n"amp.common:subtitle-email-support-team": "Email Support Team",\n"amp.common:title-logout": "Log Out",\n"amp.common:platform": "Aid Management Platform (AMP)",\n"[title]amp.common:platform": "Aid Management Platform",\n"amp.common:platform-short": "AMP",\n"amp.common:title-login": "Login",\n"amp.dashboard:close": "Close",\n"amp.about:modal.title": "About AMP",\n"amp.about:credits": "Developed in partnership with OECD, UNDP, WB, Government of Ethiopia and Development Gateway Foundation.",\n"amp.about:trademark": "The Development Gateway and the The Development Gateway logo are trademarks for The Development Gateway Foundation",\n"amp.about:rights": "All Rights Reserved",\n"amp.about:version": "Version"\n}\n\n');this.translator=new c({defaultKeys:t})},createViews:function(t){var e=this;t.translator=this.translator,this.layoutModel=new u,t.layoutFetched=this.layoutFetched,this.layoutModel.fetch().then(function(n){t.model=n,window.buildDate=n.buildDate,window.ampVersion=n.ampVersion,e.header=new l(t),e.footer=new d(t),e.onMenuRendered(),e.bubbleViewEvents(),e.layoutFetched.resolve()})},bubbleViewEvents:function(){this.listenTo(this.footer,"all",function(){this.trigger.apply(this,arguments)}),this.listenTo(this.header,"all",function(){this.trigger.apply(this,arguments)})},onMenuRendered:function(){var t=this;$.when(this.header.menuRendered,this.layoutFetched).then(function(){t.translator.translateDOM(document),void 0!==$.fn.dropdown&&$(".dropdown-toggle").dropdown()})}}),e.exports={layout:i},window.boilerplate=i},{"./src/models/amp-layout-model.js":53,"./src/views/footer-view.js":57,"./src/views/header-view.js":58,"amp-translate":99,backbone:"backbone","bootstrap/dist/js/bootstrap":50,jquery:"jquery",underscore:"underscore"}],50:[function(t,e,n){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var a=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(a,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),a=n.data("bs.alert");a||n.data("bs.alert",a=new i(this)),"string"==typeof e&&a[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.3.0",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){o.detach().trigger("closed.bs.alert").remove()}var a=t(this),r=a.attr("data-target");r||(r=a.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=t(r);e&&e.preventDefault(),o.length||(o=a.closest(".alert")),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var a=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=a,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.button"),r="object"==typeof e&&e;a||i.data("bs.button",a=new n(this,r)),"toggle"==e?a.toggle():e&&a.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.0",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,a=i.is("input")?"val":"html",r=i.data();e+="Text",null==r.resetText&&i.data("resetText",i[a]()),setTimeout(t.proxy(function(){i[a](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus","focus"==e.type)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.carousel"),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),o="string"==typeof e?e:r.slide;a||i.data("bs.carousel",a=new n(this,r)),"number"==typeof e?a.to(e):o?a[o]():r.interval&&a.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.0",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n="prev"==t?-1:1,i=this.getItemIndex(e),a=(i+n)%this.$items.length;return this.$items.eq(a)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(e,i){var a=this.$element.find(".item.active"),r=i||this.getItemForDirection(e,a),o=this.interval,s="next"==e?"left":"right",l="next"==e?"first":"last",d=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[l]()}if(r.hasClass("active"))return this.sliding=!1;var c=r[0],u=t.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(r)]);h&&h.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,a.addClass(s),r.addClass(s),a.one("bsTransitionEnd",function(){r.removeClass([e,s].join(" ")).addClass("active"),a.removeClass(["active",s].join(" ")),d.sliding=!1,setTimeout(function(){d.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(a.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(p)),o&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var a=function(n){var i,a=t(this),r=t(a.attr("data-target")||(i=a.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var o=t.extend({},r.data(),a.data()),s=a.attr("data-slide-to");s&&(o.interval=!1),e.call(r,o),s&&r.data("bs.carousel").to(s),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),a=n.data("bs.collapse"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!a&&r.toggle&&"show"==e&&(r.toggle=!1),a||n.data("bs.collapse",a=new i(this,r)),"string"==typeof e&&a[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.0",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,a=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(a&&a.length&&(e=a.data("bs.collapse"),e&&e.transitioning))){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){a&&a.length&&(n.call(a,"hide"),e||a.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[o](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION):a.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var a=t(i);this.addAriaAndCollapsedClass(e(a),a)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var a=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=a,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var a=t(this);a.attr("data-target")||i.preventDefault();var r=e(a),o=r.data("bs.collapse"),s=o?"toggle":t.extend({},a.data(),{trigger:this});n.call(r,s)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(a).remove(),t(r).each(function(){var i=t(this),a=n(i),r={relatedTarget:this};a.hasClass("open")&&(a.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||(i.attr("aria-expanded","false"),a.removeClass("open").trigger("hidden.bs.dropdown",r)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new o(this)),"string"==typeof e&&i[e].call(n)})}var a=".dropdown-backdrop",r='[data-toggle="dropdown"]',o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.0",o.prototype.toggle=function(i){var a=t(this);if(!a.is(".disabled, :disabled")){var r=n(a),o=r.hasClass("open");if(e(),!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var s={relatedTarget:this};if(r.trigger(i=t.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;a.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},o.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var a=n(i),o=a.hasClass("open");if(!o&&27!=e.which||o&&27==e.which)return 27==e.which&&a.find(r).trigger("focus"),i.trigger("click");var s=" li:not(.divider):visible a",l=a.find('[role="menu"]'+s+', [role="listbox"]'+s);if(l.length){var d=l.index(e.target);38==e.which&&d>0&&d--,40==e.which&&d<l.length-1&&d++,~d||(d=0),l.eq(d).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r,o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',o.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,i){return this.each(function(){var a=t(this),r=a.data("bs.modal"),o=t.extend({},n.DEFAULTS,a.data(),"object"==typeof e&&e);r||a.data("bs.modal",r=new n(this,o)),"string"==typeof e?r[e](i):o.show&&r.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.0",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,a=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var a=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),a&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});a?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&a;if(this.$backdrop=t('<div class="modal-backdrop '+a+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else e&&e()},n.prototype.checkScrollbar=function(){this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){if(document.body.clientWidth>=window.innerWidth)return 0;var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),a=i.attr("href"),r=t(i.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(a)&&a},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(r,o,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.tooltip"),r="object"==typeof e&&e,o=r&&r.selector;(a||"destroy"!=e)&&(o?(a||i.data("bs.tooltip",a={}),a[o]||(a[o]=new n(this,r))):a||i.data("bs.tooltip",a=new n(this,r)),"string"==typeof e&&a[e]())})}var n=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.0",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var a=this.options.trigger.split(" "),r=a.length;r--;){var o=a[r];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var a=this,r=this.tip(),o=this.getUID(this.type);this.setContent(),r.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&r.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,d=l.test(s);d&&(s=s.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var c=this.getPosition(),u=r[0].offsetWidth,h=r[0].offsetHeight;if(d){var p=s,f=this.options.container?t(this.options.container):this.$element.parent(),m=this.getPosition(f);s="bottom"==s&&c.bottom+h>m.bottom?"top":"top"==s&&c.top-h<m.top?"bottom":"right"==s&&c.right+u>m.width?"left":"left"==s&&c.left-u<m.left?"right":s,r.removeClass(p).addClass(s)}var g=this.getCalculatedOffset(s,c,u,h);this.applyPlacement(g,s);var v=function(){var t=a.hoverState;a.$element.trigger("shown.bs."+a.type),a.hoverState=null,"out"==t&&a.leave(a)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),a=i[0].offsetWidth,r=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),e.top=e.top+o,e.left=e.left+s,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,d=i[0].offsetHeight;"top"==n&&d!=r&&(e.top=e.top+r-d);var c=this.getViewportAdjustedDelta(n,e,l,d);c.left?e.left+=c.left:e.top+=c.top;var u=/top|bottom/.test(n),h=u?2*c.left-a+l:2*c.top-r+d,p=u?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(h,i[0][p],u)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=a.hoverState&&r.detach(),a.$element.removeAttr("aria-describedby").trigger("hidden.bs."+a.type),e&&e()}var a=this,r=this.tip(),o=t.Event("hide.bs."+this.type);if(this.$element.trigger(o),!o.isDefaultPrevented())return r.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,a=n.getBoundingClientRect();null==a.width&&(a=t.extend({},a,{width:a.right-a.left,height:a.bottom-a.top}));var r=i?{top:0,left:0}:e.offset(),o={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},a,o,s,r)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var a={top:0,left:0};if(!this.$viewport)return a;var r=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-r-o.scroll,l=e.top+r-o.scroll+i;s<o.top?a.top=o.top-s:l>o.top+o.height&&(a.top=o.top+o.height-l)}else{var d=e.left-r,c=e.left+r+n;d<o.left?a.left=o.left-d:c>o.width&&(a.left=o.left+o.width-c)}return a},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.popover"),r="object"==typeof e&&e,o=r&&r.selector;(a||"destroy"!=e)&&(o?(a||i.data("bs.popover",a={}),a[o]||(a[o]=new n(this,r))):a||i.data("bs.popover",a=new n(this,r)),"string"==typeof e&&a[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.0",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),+function(t){"use strict";function e(n,i){var a=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(n).is("body")?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),a=i.data("bs.scrollspy"),r="object"==typeof n&&n;a||i.data("bs.scrollspy",a=new e(this,r)),"string"==typeof n&&a[n]()})}e.VERSION="3.3.0",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",n=0;t.isWindow(this.$scrollElement[0])||(e="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var i=this;this.$body.find(this.selector).map(function(){var i=t(this),a=i.data("target")||i.attr("href"),r=/^#./.test(a)&&t(a);
return r&&r.length&&r.is(":visible")&&[[r[e]().top+n,a]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),a=this.offsets,r=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return o!=(t=r[r.length-1])&&this.activate(t);if(o&&e<a[0])return this.activeTarget=null,this.clear();for(t=a.length;t--;)o!=r[t]&&e>=a[t]&&(!a[t+1]||e<=a[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.tab");a||i.data("bs.tab",a=new n(this)),"string"==typeof e&&a[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.0",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var a=n.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),o=t.Event("show.bs.tab",{relatedTarget:a[0]});if(a.trigger(r),e.trigger(o),!o.isDefaultPrevented()&&!r.isDefaultPrevented()){var s=t(i);this.activate(e.closest("li"),n),this.activate(s,s.parent(),function(){a.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:a[0]})})}}},n.prototype.activate=function(e,i,a){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),a&&a()}var o=i.find("> .active"),s=a&&t.support.transition&&(o.length&&o.hasClass("fade")||!!i.find("> .fade").length);o.length&&s?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),o.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var a=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',a).on("click.bs.tab.data-api",'[data-toggle="pill"]',a)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.affix"),r="object"==typeof e&&e;a||i.data("bs.affix",a=new n(this,r)),"string"==typeof e&&a[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.0",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var a=this.$target.scrollTop(),r=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return a<n&&"top";if("bottom"==this.affixed)return null!=n?!(a+this.unpin<=r.top)&&"bottom":!(a+o<=t-i)&&"bottom";var s=null==this.affixed,l=s?a:r.top,d=s?o:e;return null!=n&&l<=n?"top":null!=i&&l+d>=t-i&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,a=i.top,r=i.bottom,o=t("body").height();"object"!=typeof i&&(r=a=i),"function"==typeof a&&(a=i.top(this.$element)),"function"==typeof r&&(r=i.bottom(this.$element));var s=this.getState(o,e,a,r);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),d=t.Event(l+".bs.affix");if(this.$element.trigger(d),d.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:o-e-r})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(jQuery)},{}],51:[function(t,e,n){var i=t("backbone"),a=t("../models/amp-menus-model.js");e.exports=i.Collection.extend({url:"/rest/security/menus",model:a,fetch:function(t){return t=t||{},t.cache=!1,i.Model.prototype.fetch.call(this,t)}})},{"../models/amp-menus-model.js":54,backbone:"backbone"}],52:[function(t,e,n){var i=t("backbone");e.exports=i.Collection.extend({url:function(){return"/rest/translations/languages"}})},{backbone:"backbone"}],53:[function(t,e,n){var i=t("backbone");e.exports=i.Model.extend({url:"/rest/security/layout",defaults:{email:void 0},fetch:function(t){return t=t||{},t.cache=!1,i.Model.prototype.fetch.call(this,t)}})},{backbone:"backbone"}],54:[function(t,e,n){var i=t("backbone");e.exports=i.Model.extend({url:"/rest/security/menus",defaults:{name:"Default",children:[]},fetch:function(t){return t=t||{},t.cache=!1,i.Model.prototype.fetch.call(this,t)}})},{backbone:"backbone"}],55:[function(t,e,n){var i=(t("underscore"),t("backbone"));e.exports=i.Model.extend({fetch:function(t){return t=t||{},t.cache=!1,i.Collection.prototype.fetch.call(this,t)},url:"/rest/amp/settings"})},{backbone:"backbone",underscore:"underscore"}],56:[function(t,e,n){var i=(t("jquery"),t("backbone")),a=t("underscore"),r='<div class="modal fade" id="about-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n<div class="modal-dialog">\r\n <div class="modal-content">\r\n <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span data-i18n="amp.dashboard:close" class="sr-only">Close</span></button>\r\n        <h4 class="modal-title text-primary" data-i18n="amp.about:modal.title">About AMP</h4>\r\n </div>\r\n<table width="474" border="0" style="margin:15px;">\r\n\t<tbody><tr>\r\n\t\t<td width="257">\r\n\t\t<p align="center" style="font-size: 16px;"><strong>&nbsp;<span data-i18n="amp.common:platform">Aid Management Platform (AMP)</span></strong></p>\r\n\t\t<p align="center"> Version <%= ampVersion %></p>\r\n\t\t</td>\r\n\t\t<td width="220"><img width="220" height="100" src="/TEMPLATE/ampTemplate/img_2/logo-development-gateway.png"></td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td colspan="2">\r\n\t\t<p  style="font-size: 12px;">&nbsp;<span data-i18n="amp.common:platform">Aid Management Platform (AMP)</span>\r\n\t\t <span data-i18n="amp.about:version">Version</span> <%= ampVersion %> <%= buildDate %>\r\n\t\t<span data-i18n="amp.about:credits">Developed in partnership with OECD, UNDP, WB, Government of Ethiopia and Development Gateway Foundation</span>.\r\n\t\t</p>\r\n\t\t</td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td colspan="2">\r\n\t\t<p style="font-size: 12px;">\r\n\t\t<span data-i18n="amp.about:trademark">The Development Gateway and the The Development Gateway logo are trademarks for The Development Gateway Foundation</span>.<span data-i18n="amp.about:rights">All Rights Reserved</span>.</p>\r\n\t\t</td>\r\n\t</tr>\r\n</tbody></table>\r\n</div>\r\n</div>\r\n</div>';e.exports=i.View.extend({template:a.template(r),id:"aboutModal",initialize:function(t){this.app=t.app,a.bindAll(this,"render")},render:function(){var t=this;return a.defaults(window,{ampVersion:"0",buildDate:"0"}),this.$el.html(t.template({ampVersion:window.ampVersion,buildDate:window.buildDate})),this}})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],57:[function(t,e,n){var i=t("backbone"),a=t("underscore");t("bootstrap/dist/js/bootstrap");var r='<style>\r\n    .footerText {\r\n    padding: 0;\r\n    font-family: arial;\r\n    font-size: 11px;\r\n    border: 0px;\r\n    }\r\n    .footer {\r\n    background-color: #8B8B8B;\r\n    color: #FFF;\r\n    margin-top: 0;\r\n    padding-bottom: 10px;\r\n    padding-top: 10px;\r\n    text-align: center;\r\n    }\r\n    .dgf_footer {\r\n    color: #8B8B8B;\r\n    line-height: 18px;\r\n    text-align: center;\r\n    background-color:white;\r\n    padding-top:10px;\r\n    }\r\n    .dgf_footer img {\r\n    line-height: 18px;\r\n    margin-bottom: 5px;\r\n    }\r\n    .loading{   \r\n      margin: 10px 20px 10px 20px;\r\n    }\r\n    \r\n</style>\r\n\r\n<div class="footer footerText">\r\n    AMP <b><%=  properties.ampVersion %></b> build <b><%=  properties.buildDate %></b> - <%= properties.footerText %>\r\n    <% if(showAdminLinks == true  && properties.adminLinks != undefined) { %>\r\n    <a href=\'<%=  properties.adminLinks[0].url %>\'><%=  properties.adminLinks[0].name %></a>\r\n    <% } %>\r\n</div>\r\n<% if(showDGFooter == true)  { %>\r\n<div class="dgf_footer footerText">\r\n    <img src="/TEMPLATE/ampTemplate/img_2/dgf_logo_bottom.gif" class="dgf_logo_footer">\r\n    <br/>\r\n    Development Gateway\r\n    <br/>\r\n    1110 Vermont Ave, NW, Suite 500\r\n    <br/>\r\n    Washington, DC 20005 USA\r\n    <br/>\r\n    info@developmentgateway.org, Tel: +1.202.572.9200\r\n</div>\r\n<% } %>\r\n\r\n<% if(properties.trackingEnabled === true) { %>\r\n<!-- Piwik\r\nSite id can be checked here: http://stats.ampsite.net/index.php?module=SitesManager&action=index&idSite=1&period=range&date=last30\r\nAlso,the wiki for piwik: https://wiki.dgfoundation.org/display/AMPDOC/Integrating+AMP+with+Piwik\r\n-->\r\n<script type="text/javascript">\r\n\t  var _paq = _paq || [];\r\n    if (window.PiwikAlreadyFetched === undefined ) {\r\n      _paq.push([\'setUserId\', "<%= properties.email %>"]);\r\n      _paq.push([\'setCustomVariable\',\r\n          1,\r\n          "Workspace|WID",\r\n          "<%= properties.workspace %>|<%= properties.workspaceId %>",\r\n          "page"]);\r\n  \t  _paq.push(["trackPageView"]);\r\n  \t  _paq.push(["enableLinkTracking"]);\r\n\r\n      /* TDK: keep track of whether we put the script DOM node on the page already\r\n       *   in case the page reparses this javascript on another modification.\r\n       */\r\n      window.PiwikAlreadyFetched = true;\r\n\r\n      /* Stock Piwik code: */\r\n  \t  (function() {\r\n  \t    var u="<%=  properties.trackingUrl %>";\r\n  \t    _paq.push(["setTrackerUrl", u+"piwik.php"]);\r\n  \t    _paq.push(["setSiteId", "<%=properties.siteId %>"]);\r\n  \t    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";\r\n  \t    g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);\r\n  \t  })();\r\n    }\r\n\t</script>\r\n<!-- End Piwik Code -->\r\n<% } %>\r\n';t("../models/amp-layout-model.js");e.exports=i.View.extend({model:null,template:a.template(r),el:"#amp-footer",layoutFetched:new $.Deferred,showAdminFooter:!0,showDGFooter:!0,initialize:function(t){this.showAdminFooter=t.showAdminFooter,this.showDGFooter=t.showDGFooter,this.model=t.model,this.render(),a.bindAll(this,"render")},render:function(){if(this.model){var t=this;this.$el.html(this.template({properties:t.model,showAdminLinks:t.showAdminFooter,showDGFooter:t.showDGFooter}))}return this}})},{"../models/amp-layout-model.js":53,backbone:"backbone","bootstrap/dist/js/bootstrap":50,underscore:"underscore"}],58:[function(t,e,n){var i=t("backbone");t("bootstrap/dist/js/bootstrap");var a=t("underscore"),r='<link rel="stylesheet" href="/TEMPLATE/ampTemplate/node_modules/amp-boilerplate/src/css/main.css">\n<% if(currentLanguage.get("ltr-direction") === false) { %>\n  <link rel="stylesheet" href="/TEMPLATE/ampTemplate/css_2/amp-rtl.css">\n  <link rel="stylesheet" href="/TEMPLATE/ampTemplate/node_modules/amp-boilerplate/src/css/boilerplate-rtl.css">\n<% } %>\n<script type="text/javascript">\n  function switchTranslation (url) {\n    $(\'#backUrl\').val(document.location.href);\n    document.modeSwitchForm.action = url;\n    document.modeSwitchForm.submit();\n  }\n</script>\n<form name="modeSwitchForm" method="post" action="/translation/switchMode.do" style="display:none;">\n  <input type="hidden" name="backUrl" id="backUrl" value="">\n</form>\n<%\n/***\n * Single Row Header Design (used when optionally requested: on GIS)\n * Useful for fixed height apps.\n *\n * Container-fluid structure:\n * row\n *  column navbar-brand (logo)\n *  column navbar-collapse\n *    nested row:\n *      columns AmpMenus (public or internal menus shown as provided by API)\n *      nested row ampUserLoggedInMenus (shown when logged in, incl: workspace, user, logout):\n *        3 columns\n *  login_here (ignores bootstrap container structure; shown when logged out)\n *  div#logincontainer: inserted by jQuery + rendered by JSP\n ***/\n\n  if (useSingleRowHeader) {\n %>\n<nav class="navbar navbar-default single-row" role="navigation">\n  <div id = "amp-header-menu" class="container-fluid <%= properties.logged === true ? \'ampUserLoggedIn\' : \'\' %>">\n    <div class="row no-gutters">\n      <!-- .ampUserLoggedIn hides public version-->\n\n      <!-- Brand and toggle get grouped for better mobile display -->\n      <span>\n      <div class="navbar-header col-sm-1 col-sm-1-gis">\n        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\n          <span class="sr-only">Toggle navigation</span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n        </button>\n          <a id="headerUrl" class="navbar-brand" href="<%= properties.logged === true ? \'/aim\' : \'/\' %>" data-i18n="[title]amp.common:platform">\n          <span>\n            <img class="flag" src="/aim/default/displayFlag.do" height="20" width="30">\n          </span>\n          <span data-i18n="amp.common:platform-short">AMP</span></a>\n      </div>\n    </span>\n    <span>\n      <div class="col-sm-11 col-sm-11-gis">\n        <div class="collapse navbar-collapse row no-gutters" id="bs-example-navbar-collapse-1">\n          <div class="col-md-8 col-sm-10 col-sm-10-gis">\n            <ul id="AmpMenus" class="nav navbar-nav menus">\n\n              <!-- File -->\n\n            </ul>\n            <div class="clearfix"></div>\n          </div>\n        </div>\n      </div>\n    </span>\n    <span class="header-login-gis">\n         <div class="col-md-4 col-sm-2 col-sm-2-gis">\n              <ul class="row no-gutters nav navbar-nav ampUserLoggedIn ampLoggedInMenus">\n                <li id="header-workspace-li" class="col-sm-9 col-md-6"><a title="Workspace" class="workspace-name" id="header-workspace" title="<%= properties.workspace ? properties.workspace : \'\' %>"><%= properties.workspace ? properties.workspace : " " %></a></li>\n                <li id="header-name" class="hidden-xs hidden-sm col-md-4">\n                  <a class="user-url">\n                    <span id="header-first-name"><%= properties.firstName ? properties.firstName : " "  %></span>&nbsp;<span id="header-last-name"><%= properties.lastName ? properties.lastName : " " %></span>\n                  </a>\n                </li>\n                <li id="header-logout" class="col-sm-2"><a data-i18n="amp.common:title-logout" href="/aim/j_spring_logout" >Logout</a></li>\n              </ul>\n              <% if(showLogin) { %>\n                <% if(loginDropdown){ %>\n                  <div class="login_here" id="show_login_pop">\n                    <div class="login_here_cont">\n                      <a data-i18n="amp.common:title-login" href="javascript:void(0)">Login</a>\n                    </div>\n                  </div>\n                <% } else { %>\n                  <ul class="nav navbar-nav ampPublic navbar-right">\n                    <li id="header-login"><a data-i18n="amp.common:title-login" href="/login.do" >Login</a></li>\n                  </ul>\n                <% } %>\n              <% } %>\n              <!-- div#logincontainer with anchors gets appended here -->\n          </div>\n    </span>\n    </div>\n    <!-- Collect the nav links, forms, and other content for toggling -->\n  </div><!-- /.container-fluid -->\n</nav>\n <% } else { %>\n\n<% /***\n * Double Row Header Design (used by default)\n *\n * Container-Fluid structure:\n * row\n *  column navbar-brand (logo)\n *  column navbar-collapse\n *    nested row:\n *        nested row ampUserLoggedInMenus (shown when logged in, incl: workspace, user, logout):\n            3 columns\n * row\n *    columns AmpMenus (public or internal menus shown as provided by API)\n *  login_here (ignores bootstrap container structure, shown when logged out)\n *  div#logincontainer: inserted by jQuery + rendered by JSP\n ***/ %>\n<nav class="navbar navbar-default double-row" role="navigation">\n  <div class="container-fluid no-gutters <%= properties.logged === true ? \'ampUserLoggedIn\' : \'\' %>">\n    <div class="row no-gutters">\n      <!-- .ampUserLoggedIn hides public version-->\n\n      <!-- Brand and toggle get grouped for better mobile display -->\n      <div class="navbar-header col-sm-1 col-sm-offset-1">\n        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\n          <span class="sr-only">Toggle navigation</span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n        </button>\n          <a id="headerUrl" class="navbar-brand" href="<%= properties.logged === true ? \'/aim\' : \'/\' %>" data-i18n="[title]amp.common:platform">\n          <span>\n            <img class="flag" src="/aim/default/displayFlag.do" height="20" width="30">\n          </span>\n          <span data-i18n="amp.common:platform-short">AMP</span></a>\n      </div>\n\n      <div class="col-sm-9">\n        <div class="collapse navbar-collapse row no-gutters" id="bs-example-navbar-collapse-1">\n          <!-- To change workspace/user truncation length, edit the offset and grid number below:-->\n          <div class="col-sm-offset-5 col-sm-7">\n            <ul class="row no-gutters nav navbar-nav ampUserLoggedIn ampLoggedInMenus">\n              <li id="header-workspace-li" class="col-sm-9 col-md-6"><a title="Workspace" class="workspace-name" id="header-workspace" title="<%= properties.workspace ? properties.workspace : \'\' %>"><%= properties.workspace ? properties.workspace : " " %></a></li>\n              <li id="header-name" class="hidden-xs hidden-sm col-md-4">\n                <a class="user-url">\n                  <span id="header-first-name"><%= properties.firstName ? properties.firstName : " "  %></span>&nbsp;<span id="header-last-name"><%= properties.lastName ? properties.lastName : " " %></span>\n                </a>\n              </li>\n              <li id="header-logout" class="col-sm-2"><a data-i18n="amp.common:title-logout" href="/aim/j_spring_logout" >Logout</a></li>\n            </ul>\n            <% if(showLogin) { %>\n              <% if(loginDropdown){ %>\n                <div class="login_here" id="show_login_pop">\n                  <div class="login_here_cont">\n                    <a data-i18n="amp.common:title-login" href="javascript:void(0)">Login</a>\n                  </div>\n                </div>\n              <% } else { %>\n                <ul class="nav navbar-nav ampPublic navbar-right">\n                  <li id="header-login"><a data-i18n="amp.common:title-login" href="/login.do" >Login</a></li>\n                </ul>\n              <% } %>\n            <% } %>\n            <!-- div#logincontainer with anchors gets appended here -->\n          </div>\n        </div>\n      </div>\n\n    </div>\n\n    <div class="row no-gutters">\n      <div class="col-sm-11 col-sm-offset-1">\n        <ul id="AmpMenus" class="nav navbar-nav menus">\n\n          <!-- File -->\n\n        </ul>\n        <div class="clearfix"></div>\n      </div>\n    </div>\n    <!-- Collect the nav links, forms, and other content for toggling -->\n  </div><!-- /.container-fluid -->\n</nav>\n\n<%\n  } %>\n',o=t("../collections/amp-menus-collection.js"),s=(t("../models/amp-menus-model.js"),t("./submenu-compositeview.js")),l=t("./about-view.js"),d=t("./user-profile-view.js"),c=t("../models/settings"),u=t("../collections/language-collection");e.exports=i.View.extend({el:"#amp-header",appendEl:"#AmpMenus",template:a.template(r),menuRendered:new $.Deferred,events:{"click #show_login_pop":"openLoginBox","click .user-url":"showUserProfile"},initialize:function(t){this.collection=new o,this.translator=t.translator,this.showLogin=t.showLogin,this.useSingleRowHeader=t.useSingleRowHeader,this.loginDropdown=!!t.loginDropdown,this.model=t.model,this.settings=new c,this.languages=new u;var e=this;$.when.apply($,[this.settings.fetch(),this.collection.fetch(),this.languages.fetch()]).then(function(){e.render()}),this.firstRender=!0,this.about=new l(t),this.userProfile=new d(t),a.bindAll(this,"addOne","addAll","showAbout","showUserProfile")},addAll:function(){this.collection.each(this.addOne),this.menuRendered.resolve()},addOne:function(t){view=new s({model:t}),this.listenTo(view,"showAbout",this.showAbout);var e=this;this.listenTo(view,"switchLanguage",function(t){e.translator.setLanguage(t.language).always(function(n,i,a){"error"!==i?location.reload():e.translator.setLanguage(t.language).always(function(t,e,n){location.reload()})})}),view.render(),$(this.appendEl).append(view.el)},render:function(){var t=this,e=this.languages.findWhere({id:this.settings.get("language")});return this.firstRender&&(this.$el.html(this.template({showLogin:t.showLogin,loginDropdown:t.loginDropdown,useSingleRowHeader:t.useSingleRowHeader,properties:this.model,currentLanguage:e})),this.addAll(),this.firstRender=!1,$("#show_login_pop_box").insertBefore("#show_login_pop"),$("#logincontainer").insertAfter("#show_login_pop")),this},showAbout:function(){return 0==$("#about-popup").length&&this.$el.parent().append(this.about.render().el),"function"!=typeof $().modal&&$.noConflict(),$("#about-popup").modal({show:!0,backdrop:!1}),this.translator.translateDOM($("#about-popup")[0]),!1},openLoginBox:function(){$("div#show_login_pop_box").show(),$("#j_username").focus()},showUserProfile:function(){0==$("#user-profile").length&&this.$el.parent().append(this.userProfile.render().el),this.userProfile.showUserProfile()}})},{"../collections/amp-menus-collection.js":51,"../collections/language-collection":52,"../models/amp-menus-model.js":54,"../models/settings":55,"./about-view.js":56,"./submenu-compositeview.js":59,"./user-profile-view.js":60,backbone:"backbone","bootstrap/dist/js/bootstrap":50,underscore:"underscore"}],59:[function(t,e,n){var i=t("backbone"),a=t("underscore"),r='<%\n  /* Prepare the A tag at top level menus */\n  \tif (!obj.url) {\n  \t  obj.url = \'#\';\n  \t  if (!obj.children || obj.children.length === 0) {\n      \tobj.className = \'hidden\';\n      \tobj.dataToggle = \'data-toggle=""\';\n      } else {\n      \tobj.className = \'dropdown-toggle\';\n      \tobj.dataToggle = \'data-toggle="dropdown"\';\n      }\n    } else {\n      obj.className = \'\';\n      obj.dataToggle = \'\';\n    }\n\n    if (obj.tab) {\n      obj.tabTarget = \'target="_blank"\';\n    }\n    else {\n      obj.tabTarget = \'\';\n    }\n    %>\n<%\n/* TODO escape the code in HTML */\n%>\n<a href="<%= url %>" class="<%= className %>" <%= dataToggle %> <%= obj.tabTarget %> >\n  <span class="dropdown-text" title="<%= obj.name.trim() %>"><%= obj.name.trim() %>&nbsp;</span><% if (obj.children && obj.children.length > 0) { %><span class="caret"></span><% } %>\n</a>\n<% if (obj.children && obj.children.length !== 0) { %>\n  <ul class="children dropdown-menu" role="menu">\n  <% _.each(obj.children, function(model) { %>\n\n    <%\n      /* Prepare the A tag at second level menus */\n      if (model.children && model.children.length !== 0) {\n        model.dropdownSubmenu = \'dropdown-submenu\';\n       };\n\n       if (!model.tooltip) {\n         model.tooltip = \'\';\n       };\n       var elementClass = \'2nd-level-item\';\n       if (model.language) {\n\t\t\t elementClass = elementClass+ \' language\';\n\t   }\n       if (model.popup) {\n       \t elementClass = elementClass + \' popup\';\n       }\n       if (model.tab) {\n         model.tabTarget = \'target="_blank"\';\n       } else {\n         model.tabTarget = \'\';\n       }\n       var elementUrl = model.url;\n       if (model.post === true) {\n         elementUrl = \'javascript:switchTranslation ("\'+elementUrl+\'")\';\n\n       }\n       if (!model.url) {\n        elementUrl = \'javascript:;\';\n       }\n       /* if it doesn\'t have children, nor url. then it is the About */\n       if (!model.url && !model.children) {\n       elementClass = elementClass + \' about-amp\';\n       }\n    %>\n\n    <li class=\'dropdown <%= model.dropdownSubmenu %>\' >\n    <a href=\'<%=  elementUrl %>\' title="<%= model.tooltip %>" onclick="return canExit()" class="<%= elementClass %>" <%= model.tabTarget %> ><%= model.name %></a>\n\n    <%\n      if (model.children && model.children.length !== 0) {\n     %>\n\n      <ul class="children dropdown-menu scrollable-menu" role="menu">\n      <% _.each(model.children, function(submodel) { %>\n\n        <%\n          /* Prepare the A tag at third level menus */\n          if (!submodel.url) {\n            submodel.url = \'#\';\n          };\n\t\t  var itemClass = \'3rd-level-item\';\n\t\t  if (submodel.language) {\n\t\t\t itemClass = itemClass+ \' language\';\n\t\t   }\n\t\t  if (!submodel.tooltip) {\n            submodel.tooltip = \'\';\n          };\n\n          if (submodel.tab) {\n            submodel.tabTarget=\'target="_blank"\';\n          } else {\n            submodel.tabTarget = \'\';\n          };\n        %>\n\n        <li class="menu-item"><a href="<%= submodel.url %>" onclick="return canExit()" class="<%= itemClass %>" <%= submodel.tabTarget %> title="<%= submodel.tooltip %>"><%= submodel.name %></a></li>\n\n      <% }) %>\n      </ul>\n    <% } %>\n\n    </li>\n\n  <% }); %>\n  </ul>\n<% }%>\n<!--\n<li class="menu-item dropdown dropdown-submenu"><a class="dropdown-toggle" data-toggle="dropdown">\n<ul class="children dropdown-menu scrollable-menu" role="menu">\n      <li class="menu-item first-of-type" id="yui-gen4" groupindex="0" index="0">\n  <a class="yuiampmenuitemlabel yuimenuitemlabel" href="/selectTeam.do?id=680" onclick="return canExit()">\n    Academy of Sciences\n  </a>\n</li>--!>\n';e.exports=i.View.extend({tagName:"li",className:"dropdown",events:{"click .language":"switchLanguage","click .popup":"openPopup","click .about-amp":"about"},template:a.template(r),initialize:function(t){a.bindAll(this,"render","switchLanguage","about")},render:function(){var t=this;return this.$el.html(this.template(t.model.attributes)),this},switchLanguage:function(t){var e=t.currentTarget.href.lastIndexOf("/"),n=t.currentTarget.href.substr(e+1);if("undefined"!=typeof SwitchLanguageMenu&&$.isFunction(SwitchLanguageMenu)){t.preventDefault();var i="/translation/switchLanguage.do?code="+n+"&rfr=";SwitchLanguageMenu(i)}else this.trigger("switchLanguage",{language:n})},openPopup:function(t){window.name="opener"+(new Date).getTime();var e=768,n=1024,i=(screen.width-768)/2,a=(screen.height-1024)/2,r="height="+n+",width="+e+",top="+a+",left="+i+",menubar=no,scrollbars=yes";return popupPointer=window.open(t.currentTarget.href,"forumPopup",r),t.preventDefault(),popupPointer},about:function(t){return this.trigger("showAbout",{}),!1}})},{backbone:"backbone",underscore:"underscore"}],60:[function(t,e,n){var i=t("backbone"),a=t("underscore");t("bootstrap/dist/js/bootstrap");var r='<div id="user-profile" class="modal fade"  tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n<div class="modal-dialog">\r\n <div class="modal-content">\r\n <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span data-i18n="amp.dashboard:close" class="sr-only">Close</span></button>\r\n        <h4 class="modal-title text-primary" data-i18n="amp.profile:modal.title">Member Details</h4>\r\n </div>\r\n <div class="user-profile-content">\r\n   <div class=\'loading\' data-i18n="amp.profile:modal.loading">Loading...</div>\r\n </div> \r\n </div>\r\n </div>\r\n </div>';e.exports=i.View.extend({model:null,template:a.template(r),id:"userProfileModal",initialize:function(t){this.model=t.model,this.render(),a.bindAll(this,"render")},render:function(){if(this.model){var t=this;this.$el.html(this.template({properties:t.model}))}return this},showUserProfile:function(){if(this.model.email){var t="/aim/default/userProfile.do~edit=true~id="+this.model.userId;this.profileLoaded||(this.$(".user-profile-content").load(t),this.profileLoaded=!0),"function"!=typeof $().modal&&$.noConflict(),this.$("#user-profile").modal({show:!0,backdrop:!1})}}})},{backbone:"backbone","bootstrap/dist/js/bootstrap":50,underscore:"underscore"}],61:[function(t,e,n){e.exports=t(50)},{"/Users/juliandeanquin/dev/code/AmpIntelliJ/amp/TEMPLATE/ampTemplate/node_modules/amp-boilerplate/node_modules/bootstrap/dist/js/bootstrap.js":50}],62:[function(t,e,n){var i=t("jquery");!function(t,e){function n(e,n){var a,r,o,s=e.nodeName.toLowerCase();return"area"===s?(a=e.parentNode,r=a.name,!(!e.href||!r||"map"!==a.nodeName.toLowerCase())&&(o=t("img[usemap=#"+r+"]")[0],!!o&&i(o))):(/input|select|textarea|button|object/.test(s)?!e.disabled:"a"===s?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var a=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);
if(this.length)for(var i,a,r=t(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(a=parseInt(r.css("zIndex"),10),!isNaN(a)&&0!==a))return a;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),a=isNaN(i);return(a||i>=0)&&n(e,!a)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function a(e,n,i,a){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),a&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?s["inner"+i].call(this):this.each(function(){t(this).css(o,a(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?s["outer"+i].call(this,e):this.each(function(){t(this).css(o,a(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var a,r=t.ui[e].prototype;for(a in i)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,i[a]])},call:function(t,e,n){var i,a=t.plugins[e];if(a&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<a.length;i++)t.options[a[i][0]]&&a[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",a=!1;return e[i]>0||(e[i]=1,a=e[i]>0,e[i]=0,a)}})}(i)},{jquery:"jquery"}],63:[function(t,e,n){var i=t("jquery");t("./core"),function(t,e){function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=i(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(n,"mouseout",function(){t(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&t(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){t.datepicker._isDisabledDatepicker(r.inline?e.parent()[0]:r.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&t(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&t(this).addClass("ui-datepicker-next-hover"))})}function a(e,n){t.extend(e,n);for(var i in n)null==n[i]&&(e[i]=n[i]);return e}t.extend(t.ui,{datepicker:{version:"1.10.4"}});var r,o="datepicker";t.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,n){var i,a,r;i=e.nodeName.toLowerCase(),a="div"===i||"span"===i,e.id||(this.uuid+=1,e.id="dp"+this.uuid),r=this._newInst(t(e),a),r.settings=t.extend({},n||{}),"input"===i?this._connectDatepicker(e,r):a&&this._inlineDatepicker(e,r)},_newInst:function(e,n){var a=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:a,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,n){var i=t(e);n.append=t([]),n.trigger=t([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),t.data(e,o,n),n.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,n){var i,a,r,o=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=t("<span class='"+this._appendClass+"'>"+o+"</span>"),e[s?"before":"after"](n.append)),e.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),"focus"!==i&&"both"!==i||e.focus(this._showDatepicker),"button"!==i&&"both"!==i||(a=this._get(n,"buttonText"),r=this._get(n,"buttonImage"),n.trigger=t(this._get(n,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:r,alt:a,title:a}):t("<button type='button'></button>").addClass(this._triggerClass).html(r?t("<img/>").attr({src:r,alt:a,title:a}):a)),e[s?"before":"after"](n.trigger),n.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,a,r=new Date(2009,11,20),o=this._get(t,"dateFormat");o.match(/[DM]/)&&(e=function(t){for(n=0,i=0,a=0;a<t.length;a++)t[a].length>n&&(n=t[a].length,i=a);return i},r.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(e,n){var i=t(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),t.data(e,o,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(e),n.dpDiv.css("display","block"))},_dialogDatepicker:function(e,n,i,r,s){var l,d,c,u,h,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],o,p)),a(p.settings,r||{}),n=n&&n.constructor===Date?this._formatDate(p,n):n,this._dialogInput.val(n),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(d=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[d/2-100+u,c/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],o,p),this},_destroyDatepicker:function(e){var n,i=t(e),a=t.data(e,o);i.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),t.removeData(e,o),"input"===n?(a.append.remove(),a.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==n&&"span"!==n||i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var n,i,a=t(e),r=t.data(e,o);a.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==n&&"span"!==n||(i=a.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var n,i,a=t(e),r=t.data(e,o);a.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==n&&"span"!==n||(i=a.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,o)}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,i,r){var o,s,l,d,c=this._getInst(n);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):c?"all"===i?t.extend({},c.settings):this._get(c,i):null:(o=i||{},"string"==typeof i&&(o={},o[i]=r),void(c&&(this._curInst===c&&this._hideDatepicker(),s=this._getDateDatepicker(n,!0),l=this._getMinMaxDate(c,"min"),d=this._getMinMaxDate(c,"max"),a(c.settings,o),null!==l&&o.dateFormat!==e&&o.minDate===e&&(c.settings.minDate=this._formatDate(c,l)),null!==d&&o.dateFormat!==e&&o.maxDate===e&&(c.settings.maxDate=this._formatDate(c,d)),"disabled"in o&&(o.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(t(n),c),this._autoSize(c),this._setDate(c,s),this._updateAlternate(c),this._updateDatepicker(c))))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(e){var n,i,a,r=t.datepicker._getInst(e.target),o=!0,s=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),o=!1;break;case 13:return a=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",r.dpDiv),a[0]&&t.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,a[0]),n=t.datepicker._get(r,"onSelect"),n?(i=t.datepicker._formatDate(r),n.apply(r.input?r.input[0]:null,[i,r])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,s?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,s?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var n,i,a=t.datepicker._getInst(e.target);if(t.datepicker._get(a,"constrainInput"))return n=t.datepicker._possibleChars(t.datepicker._get(a,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||i<" "||!n||n.indexOf(i)>-1},_doKeyUp:function(e){var n,i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{n=t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i)),n&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(a){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var n,i,r,o,s,l,d;n=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),i=t.datepicker._get(n,"beforeShow"),r=i?i.apply(e,[e,n]):{},r!==!1&&(a(n.settings,r),n.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),o=!1,t(e).parents().each(function(){return o|="fixed"===t(this).css("position"),!o}),s={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),s=t.datepicker._checkOffset(n,s,o),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":o?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),n.inline||(l=t.datepicker._get(n,"showAnim"),d=t.datepicker._get(n,"duration"),n.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?n.dpDiv.show(l,t.datepicker._get(n,"showOptions"),d):n.dpDiv[l||"show"](l?d:null),t.datepicker._shouldFocusInput(n)&&n.input.focus(),t.datepicker._curInst=n))}},_updateDatepicker:function(e){this.maxRows=4,r=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,i=this._getNumberOfMonths(e),a=i[1],o=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",o*a+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(n=e.yearshtml,setTimeout(function(){n===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),n=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,i){var a=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:t(document).scrollLeft()),d=document.documentElement.clientHeight+(i?0:t(document).scrollTop());return n.left-=this._get(e,"isRTL")?a-o:0,n.left-=i&&n.left===e.input.offset().left?t(document).scrollLeft():0,n.top-=i&&n.top===e.input.offset().top+s?t(document).scrollTop():0,n.left-=Math.min(n.left,n.left+a>l&&l>a?Math.abs(n.left+a-l):0),n.top-=Math.min(n.top,n.top+r>d&&d>r?Math.abs(r+s):0),n},_findPos:function(e){for(var n,i=this._getInst(e),a=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[a?"previousSibling":"nextSibling"];return n=t(e).offset(),[n.left,n.top]},_hideDatepicker:function(e){var n,i,a,r,s=this._curInst;!s||e&&s!==t.data(e,o)||this._datepickerShowing&&(n=this._get(s,"showAnim"),i=this._get(s,"duration"),a=function(){t.datepicker._tidyDialog(s)},t.effects&&(t.effects.effect[n]||t.effects[n])?s.dpDiv.hide(n,t.datepicker._get(s,"showOptions"),i,a):s.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,a),n||a(),this._datepickerShowing=!1,r=this._get(s,"onClose"),r&&r.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var n=t(e.target),i=t.datepicker._getInst(n[0]);(n[0].id===t.datepicker._mainDivId||0!==n.parents("#"+t.datepicker._mainDivId).length||n.hasClass(t.datepicker.markerClassName)||n.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!n.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===i)||t.datepicker._hideDatepicker()}},_adjustDate:function(e,n,i){var a=t(e),r=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(r,n+("M"===i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(e){var n,i=t(e),a=this._getInst(i[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(n=new Date,a.selectedDay=n.getDate(),a.drawMonth=a.selectedMonth=n.getMonth(),a.drawYear=a.selectedYear=n.getFullYear()),this._notifyChange(a),this._adjustDate(i)},_selectMonthYear:function(e,n,i){var a=t(e),r=this._getInst(a[0]);r["selected"+("M"===i?"Month":"Year")]=r["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(a)},_selectDay:function(e,n,i,a){var r,o=t(e);t(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(r=this._getInst(o[0]),r.selectedDay=r.currentDay=t("a",a).html(),r.selectedMonth=r.currentMonth=n,r.selectedYear=r.currentYear=i,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var i,a=t(e),r=this._getInst(a[0]);n=null!=n?n:this._formatDate(r),r.input&&r.input.val(n),this._updateAlternate(r),i=this._get(r,"onSelect"),i?i.apply(r.input?r.input[0]:null,[n,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var n,i,a,r=this._get(e,"altField");r&&(n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),a=this.formatDate(n,i,this._getFormatConfig(e)),t(r).each(function(){t(this).val(a)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,i){if(null==e||null==n)throw"Invalid arguments";if(n="object"==typeof n?n.toString():n+"",""===n)return null;var a,r,o,s,l=0,d=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10),u=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,h=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,f=(i?i.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,x=function(t){var n=a+1<e.length&&e.charAt(a+1)===t;return n&&a++,n},w=function(t){var e=x(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,a=new RegExp("^\\d{1,"+i+"}"),r=n.substring(l).match(a);if(!r)throw"Missing number at position "+l;return l+=r[0].length,parseInt(r[0],10)},k=function(e,i,a){var r=-1,o=t.map(x(e)?a:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(o,function(t,e){var i=e[1];if(n.substr(l,i.length).toLowerCase()===i.toLowerCase())return r=e[0],l+=i.length,!1}),r!==-1)return r+1;throw"Unknown name at position "+l},S=function(){if(n.charAt(l)!==e.charAt(a))throw"Unexpected literal at position "+l;l++};for(a=0;a<e.length;a++)if(b)"'"!==e.charAt(a)||x("'")?S():b=!1;else switch(e.charAt(a)){case"d":v=w("d");break;case"D":k("D",u,h);break;case"o":y=w("o");break;case"m":g=w("m");break;case"M":g=k("M",p,f);break;case"y":m=w("y");break;case"@":s=new Date(w("@")),m=s.getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"!":s=new Date((w("!")-this._ticksTo1970)/1e4),m=s.getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"'":x("'")?S():b=!0;break;default:S()}if(l<n.length&&(o=n.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(m===-1?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=c?0:-100)),y>-1)for(g=1,v=y;;){if(r=this._getDaysInMonth(m,g-1),v<=r)break;g++,v-=r}if(s=this._daylightSavingAdjust(new Date(m,g-1,v)),s.getFullYear()!==m||s.getMonth()+1!==g||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,n){if(!e)return"";var i,a=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,r=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},d=function(t,e,n){var i=""+e;if(l(t))for(;i.length<n;)i="0"+i;return i},c=function(t,e,n,i){return l(t)?i[e]:n[e]},u="",h=!1;if(e)for(i=0;i<t.length;i++)if(h)"'"!==t.charAt(i)||l("'")?u+=t.charAt(i):h=!1;else switch(t.charAt(i)){case"d":u+=d("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),a,r);break;case"o":u+=d("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=d("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),o,s);break;case"y":u+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":h=!0;break;default:u+=t.charAt(i)}return u},_possibleChars:function(t){var e,n="",i=!1,a=function(n){var i=e+1<t.length&&t.charAt(e+1)===n;return i&&e++,i};for(e=0;e<t.length;e++)if(i)"'"!==t.charAt(e)||a("'")?n+=t.charAt(e):i=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":a("'")?n+="'":i=!0;break;default:n+=t.charAt(e)}return n},_get:function(t,n){return t.settings[n]!==e?t.settings[n]:this._defaults[n]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,a=this._getDefaultDate(t),r=a,o=this._getFormatConfig(t);try{r=this.parseDate(n,i,o)||a}catch(s){i=e?"":i}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=i?r.getDate():0,t.currentMonth=i?r.getMonth():0,t.currentYear=i?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,n,i){var a=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},r=function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(i){}for(var a=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,r=a.getFullYear(),o=a.getMonth(),s=a.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,d=l.exec(n);d;){switch(d[2]||"d"){case"d":case"D":s+=parseInt(d[1],10);break;case"w":case"W":s+=7*parseInt(d[1],10);break;case"m":case"M":o+=parseInt(d[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(r,o));break;case"y":case"Y":r+=parseInt(d[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(r,o))}d=l.exec(n)}return new Date(r,o,s)},o=null==n||""===n?i:"string"==typeof n?r(n):"number"==typeof n?isNaN(n)?i:a(n):new Date(n.getTime());return o=o&&"Invalid Date"===o.toString()?i:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,a=t.selectedMonth,r=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),a===t.selectedMonth&&r===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(i,-n,"M")},next:function(){t.datepicker._adjustDate(i,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(i)},selectDay:function(){return t.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(i,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,a,r,o,s,l,d,c,u,h,p,f,m,g,v,y,b,x,w,k,S,T,D,A,C,M,_,N,E,P,I,F,O,j,L,R,B,$=new Date,z=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth(),$.getDate())),V=this._get(t,"isRTL"),Y=this._get(t,"showButtonPanel"),H=this._get(t,"hideIfNoPrevNext"),W=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),G=this._get(t,"showCurrentAtPos"),J=this._get(t,"stepMonths"),q=1!==U[0]||1!==U[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,"min"),K=this._getMinMaxDate(t,"max"),Z=t.drawMonth-G,tt=t.drawYear;if(Z<0&&(Z+=12,tt--),K)for(e=this._daylightSavingAdjust(new Date(K.getFullYear(),K.getMonth()-U[0]*U[1]+1,K.getDate())),e=Q&&e<Q?Q:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)Z--,Z<0&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,n=this._get(t,"prevText"),n=W?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,Z-J,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+n+"</span></a>":H?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+n+"</span></a>",a=this._get(t,"nextText"),a=W?this.formatDate(a,this._daylightSavingAdjust(new Date(tt,Z+J,1)),this._getFormatConfig(t)):a,r=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+a+"</span></a>":H?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+a+"</span></a>",o=this._get(t,"currentText"),s=this._get(t,"gotoCurrent")&&t.currentDay?X:z,o=W?this.formatDate(o,s,this._getFormatConfig(t)):o,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",d=Y?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(V?l:"")+(this._isInRange(t,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(V?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),h=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),x="",k=0;k<U[0];k++){for(S="",this.maxRows=4,T=0;T<U[1];T++){if(D=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),A=" ui-corner-all",C="",q){if(C+="<div class='ui-datepicker-group",U[1]>1)switch(T){case 0:C+=" ui-datepicker-group-first",A=" ui-corner-"+(V?"right":"left");break;case U[1]-1:C+=" ui-datepicker-group-last",A=" ui-corner-"+(V?"left":"right");break;default:C+=" ui-datepicker-group-middle",A=""}C+="'>"}for(C+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===k?V?r:i:"")+(/all|right/.test(A)&&0===k?V?i:r:"")+this._generateMonthYearHeader(t,Z,tt,Q,K,k>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",M=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",
w=0;w<7;w++)_=(w+c)%7,M+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[_]+"'>"+p[_]+"</span></th>";for(C+=M+"</tr></thead><tbody>",N=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,N)),E=(this._getFirstDayOfMonth(tt,Z)-c+7)%7,P=Math.ceil((E+N)/7),I=q&&this.maxRows>P?this.maxRows:P,this.maxRows=I,F=this._daylightSavingAdjust(new Date(tt,Z,1-E)),O=0;O<I;O++){for(C+="<tr>",j=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(F)+"</td>":"",w=0;w<7;w++)L=g?g.apply(t.input?t.input[0]:null,[F]):[!0,""],R=F.getMonth()!==Z,B=R&&!y||!L[0]||Q&&F<Q||K&&F>K,j+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(R?" ui-datepicker-other-month":"")+(F.getTime()===D.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===F.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(B?" "+this._unselectableClass+" ui-state-disabled":"")+(R&&!v?"":" "+L[1]+(F.getTime()===X.getTime()?" "+this._currentClass:"")+(F.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+(R&&!v||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(B?"":" data-handler='selectDay' data-event='click' data-month='"+F.getMonth()+"' data-year='"+F.getFullYear()+"'")+">"+(R&&!v?"&#xa0;":B?"<span class='ui-state-default'>"+F.getDate()+"</span>":"<a class='ui-state-default"+(F.getTime()===z.getTime()?" ui-state-highlight":"")+(F.getTime()===X.getTime()?" ui-state-active":"")+(R?" ui-priority-secondary":"")+"' href='#'>"+F.getDate()+"</a>")+"</td>",F.setDate(F.getDate()+1),F=this._daylightSavingAdjust(F);C+=j+"</tr>"}Z++,Z>11&&(Z=0,tt++),C+="</tbody></table>"+(q?"</div>"+(U[0]>0&&T===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),S+=C}x+=S}return x+=d,t._keyEvent=!1,x},_generateMonthYearHeader:function(t,e,n,i,a,r,o,s){var l,d,c,u,h,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",x="";if(r||!g)x+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(l=i&&i.getFullYear()===n,d=a&&a.getFullYear()===n,x+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=i.getMonth())&&(!d||c<=a.getMonth())&&(x+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+s[c]+"</option>");x+="</select>"}if(y||(b+=x+(!r&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(u=this._get(t,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?h+parseInt(t,10):parseInt(t,10);return isNaN(e)?h:e},f=p(u[0]),m=Math.max(f,p(u[1]||"")),f=i?Math.max(f,i.getFullYear()):f,m=a?Math.min(m,a.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=m;f++)t.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!r&&g&&v?"":"&#xa0;")+x),b+="</div>"},_adjustInstDate:function(t,e,n){var i=t.drawYear+("Y"===n?e:0),a=t.drawMonth+("M"===n?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(i,a))+("D"===n?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,a,r)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),a=n&&e<n?n:e;return i&&a>i?i:a},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var a=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(n,i+(e<0?e:a[0]*a[1]),1));return e<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var n,i,a=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),o=null,s=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),o=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=i),n[1].match(/[+\-].*/)&&(s+=i)),(!a||e.getTime()>=a.getTime())&&(!r||e.getTime()<=r.getTime())&&(!o||e.getFullYear()>=o)&&(!s||e.getFullYear()<=s)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var a=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),a,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))},t.datepicker=new n,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.4"}(i)},{"./core":62,jquery:"jquery"}],64:[function(t,e,n){var i=t("jquery");t("./core"),t("./mouse"),t("./widget"),function(t,e){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return!(this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0))},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!t.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1)},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,a=this.options;return a.containment?"window"===a.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===a.containment?void(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):a.containment.constructor===Array?void(this.containment=a.containment):("parent"===a.containment&&(a.containment=this.helper[0].parentNode),n=t(a.containment),i=n[0],void(i&&(e="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n))):void(this.containment=null)},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(e){var n,i,a,r,o=this.options,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,d=e.pageY;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(d=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(d=n[3]+this.offset.click.top)),o.grid&&(a=o.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,d=n?a-this.offset.click.top>=n[1]||a-this.offset.click.top>n[3]?a:a-this.offset.click.top>=n[1]?a-o.grid[1]:a+o.grid[1]:a,r=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-o.grid[0]:r+o.grid[0]:r)),{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var i=t(this).data("ui-draggable"),a=i.options,r=t.extend({},n,{item:i.element});i.sortables=[],t(a.connectToSortable).each(function(){var n=t.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,r))})},stop:function(e,n){var i=t(this).data("ui-draggable"),a=t.extend({},n,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,a))})},drag:function(e,n){var i=t(this).data("ui-draggable"),a=this;t.each(i.sortables,function(){var r=!1,o=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(o.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(a).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("ui-draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var i=t(n.helper),a=t(this).data("ui-draggable").options;i.css("opacity")&&(a._opacity=i.css("opacity")),i.css("opacity",a.opacity)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("ui-draggable"),i=n.options,a=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=a=n.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=a=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=a=n.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=a=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-t(document).scrollTop()<i.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-t(document).scrollLeft()<i.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),a!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=t(this),i=n.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(e,n){var i,a,r,o,s,l,d,c,u,h,p=t(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=n.offset.left,v=g+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)s=p.snapElements[u].left,l=s+p.snapElements[u].width,d=p.snapElements[u].top,c=d+p.snapElements[u].height,v<s-m||g>l+m||b<d-m||y>c+m||!t.contains(p.snapElements[u].item.ownerDocument,p.snapElements[u].item)?(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(i=Math.abs(d-b)<=m,a=Math.abs(c-y)<=m,r=Math.abs(s-v)<=m,o=Math.abs(l-g)<=m,i&&(n.position.top=p._convertPositionTo("relative",{top:d-p.helperProportions.height,left:0}).top-p.margins.top),a&&(n.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),r&&(n.position.left=p._convertPositionTo("relative",{top:0,left:s-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=i||a||r||o,"outer"!==f.snapMode&&(i=Math.abs(d-y)<=m,a=Math.abs(c-b)<=m,r=Math.abs(s-g)<=m,o=Math.abs(l-v)<=m,i&&(n.position.top=p._convertPositionTo("relative",{top:d,left:0}).top-p.margins.top),a&&(n.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),r&&(n.position.left=p._convertPositionTo("relative",{top:0,left:s}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(i||a||r||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=i||a||r||o||h)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,n=this.data("ui-draggable").options,i=t.makeArray(t(n.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});i.length&&(e=parseInt(t(i[0]).css("zIndex"),10)||0,t(i).each(function(n){t(this).css("zIndex",e+n)}),this.css("zIndex",e+i.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var i=t(n.helper),a=t(this).data("ui-draggable").options;i.css("zIndex")&&(a._zIndex=i.css("zIndex")),i.css("zIndex",a.zIndex)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}})}(i)},{"./core":62,"./mouse":65,"./widget":66,jquery:"jquery"}],65:[function(t,e,n){var i=t("jquery");t("./widget"),function(t,e){var n=!1;t(document).mouseup(function(){n=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,a=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(a&&!r&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0))}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(i)},{"./widget":66,jquery:"jquery"}],66:[function(t,e,n){var i=t("jquery");!function(t,e){var n=0,i=Array.prototype.slice,a=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(r){}a(e)},t.widget=function(e,n,i){var a,r,o,s,l={},d=e.split(".")[0];e=e.split(".")[1],a=d+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][a.toLowerCase()]=function(e){return!!t.data(e,a)},t[d]=t[d]||{},r=t[d][e],o=t[d][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},t.extend(o,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},a=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=a,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()):void(l[e]=i)}),o.prototype=t.widget.extend(s,{widgetEventPrefix:r?s.widgetEventPrefix||e:e},l,{constructor:o,namespace:d,widgetName:e,widgetFullName:a}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete r._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(n){for(var a,r,o=i.call(arguments,1),s=0,l=o.length;s<l;s++)for(a in o[s])r=o[s][a],o[s].hasOwnProperty(a)&&r!==e&&(t.isPlainObject(r)?n[a]=t.isPlainObject(n[a])?t.widget.extend({},n[a],r):t.widget.extend({},r):n[a]=r);return n},t.widget.bridge=function(n,a){var r=a.prototype.widgetFullName||n;t.fn[n]=function(o){var s="string"==typeof o,l=i.call(arguments,1),d=this;return o=!s&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,s?this.each(function(){var i,a=t.data(this,r);return a?t.isFunction(a[o])&&"_"!==o.charAt(0)?(i=a[o].apply(a,l),i!==a&&i!==e?(d=i&&i.jquery?d.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var e=t.data(this,r);e?e.option(o||{})._init():t.data(this,r,new a(o,this))}),d}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var a,r,o,s=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(s={},a=n.split("."),n=a.shift(),a.length){for(r=s[n]=t.widget.extend({},this.options[n]),o=0;o<a.length-1;o++)r[a[o]]=r[a[o]]||{},r=r[a[o]];if(n=a.pop(),1===arguments.length)return r[n]===e?null:r[n];r[n]=i}else{if(1===arguments.length)return this.options[n]===e?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),
this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var a,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=a=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,a=this.widget()),t.each(i,function(i,o){function s(){if(e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?r[o]:o).apply(r,arguments)}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),d=l[1]+r.eventNamespace,c=l[2];c?a.delegate(c,d,s):n.bind(d,s)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var a,r,o=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(a in r)a in n||(n[a]=r[a]);return this.element.trigger(n,i),!(t.isFunction(o)&&o.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,a,r){"string"==typeof a&&(a={effect:a});var o,s=a?a===!0||"number"==typeof a?n:a.effect||n:e;a=a||{},"number"==typeof a&&(a={duration:a}),o=!t.isEmptyObject(a),a.complete=r,a.delay&&i.delay(a.delay),o&&t.effects&&t.effects.effect[s]?i[e](a):s!==e&&i[s]?i[s](a.duration,a.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}})}(i)},{jquery:"jquery"}],67:[function(t,e,n){var i=t("backbone"),a=t("underscore"),r=t("jquery"),o=t("../models/generic-filter-model"),s=t("../models/org-role-filter-model"),l=t("../models/years-filter-model"),d=t("../models/years-only-filter-model");e.exports=i.Collection.extend({url:"/rest/filters",_loaded:null,_allDeferreds:[],orgCollection:null,orgGroupCollection:null,orgTypeCollection:null,componentCaller:null,initialize:function(t,e){this.on("add",this._cleanUpAfterAdd),this.load(),e.caller&&(componentCaller=e.caller)},load:function(){var t=this;return this._loaded||(this._loaded=new r.Deferred,this._allDeferreds.push(this._createOrgFilters()),this.fetch({remove:!1}).then(function(){r.when.apply(r,t._allDeferreds).done(t._loaded.resolve).fail(t._loaded.reject)}).fail(t._loaded.reject)),this._loaded},_cleanUpAfterAdd:function(t){var e=this;if(t.get("ui")||e.remove(t),t.get("filterType")){var n=a.some(t.get("filterType"),function(t){return t===componentCaller||"ALL"===t});n||e.remove(t)}this.componentCaller=componentCaller},parse:function(t){return t=a.filter(t,function(t){return t.ui}),t=a.filter(t,function(t){return"/rest/filters/org-groups"!==t.endpoint&&"/rest/filters/org-types"!==t.endpoint&&"/rest/filters/org-roles"!==t.endpoint&&"/rest/filters/orgs"!==t.endpoint})},model:function(t,e){var n=null,a=e.collection;switch(t.id){case"Programs":case"Sectors":a._allDeferreds.push(a._goOneDeeper(a,t)),n=new i.Model({ui:!1});break;default:"date"==t.id||t.id.indexOf("-date")!=-1||t.id.indexOf("date-")!=-1?n=new l(t):"computed-year"==t.id?n=new d(t):(n=new o(t),a._allDeferreds.push(n.getTree()))}return n},_goOneDeeper:function(t,e){var n=e.endpoint,s=r.Deferred(),l=[],d=new i.Collection;return d.url=n,d.fetch().then(function(i){if(a.each(i,function(i){var a=new o({url:n+"/"+i.id,name:i.name,tab:i.tab,ui:!0,group:e.id,empty:!1});t.add(a),l.push(a.getTree())}),a.isEmpty(i)){console.warn("Filters API returned empty",n);var d=new o({url:n,name:e.name,ui:!0,group:e.id,empty:!0});t.add(d),l.push(d.getTree())}r.when.apply(r,l).then(function(){s.resolve()})}),s},_createOrgFilters:function(){var t=this;return this._fetchOrgCollections().then(function(){t.makeTreeHelper(t.orgGroupCollection,t.orgCollection,"orgIds","children"),t.orgRolesCollection.each(function(e){var n=e.toJSON();if("Donor"===e.get("name")?(t.makeTreeHelper(t.orgTypeCollection,t.orgGroupCollection,"groupIds","children"),a.extend(n,{ui:!0,group:"Donor",tab:"Funding Organizations",data:t.orgTypeCollection.toJSON()}),n.data=t._filterDonorOrgs(n.data,e.id)):(a.extend(n,{ui:!0,group:"Role",tab:"All Agencies",data:t.orgGroupCollection.toJSON()}),n.data=t._filterOrgs(n.data,e.id)),n.data.length>0){var i;i=e.get("filterId")?e.get("filterId"):e.get("name")+" Id",n.data=t._setFilterId(n.data,i),t.add(new s(n))}})})},_setFilterId:function(t,e){var n=this;return a.each(t,function(t){t.rolesIds&&(t.filterId=e),t.children&&(t.children=n._setFilterId(t.children,e))}),t},_filterOrgs:function(t,e){return t=a.filter(t,function(t){return t.isOrgGroup=!0,t.children=a.filter(t.children,function(t){return t.rolesIds.indexOf(e)>-1}),t.isSelectable=!1,t.children.length>0})},_filterDonorOrgs:function(t,e){var n=this;return t=a.filter(t,function(t){return t.children=n._filterOrgs(t.children,e),a.each(t.children,function(t){t.filterId="donor-group"}),t.filterId="donor-type",t.isSelectable=!1,t.children.length>0})},_fetchOrgCollections:function(){var t=[];return this.orgCollection=new i.Collection,this.orgCollection.url="/rest/filters/orgs",t.push(this.orgCollection.fetch()),this.orgGroupCollection=new i.Collection,this.orgGroupCollection.url="/rest/filters/org-groups",t.push(this.orgGroupCollection.fetch()),this.orgTypeCollection=new i.Collection,this.orgTypeCollection.url="/rest/filters/org-types",t.push(this.orgTypeCollection.fetch()),this.orgRolesCollection=new i.Collection,this.orgRolesCollection.url="/rest/filters/org-roles",t.push(this.orgRolesCollection.fetch({})),r.when.apply(r,t)},joinHelper:function(t,e,n,i){t.each(function(t){var r=t.get(n),o=e.filter(function(t){return a.indexOf(r,t.get("id"))>=0});t.set(i,o)})},makeTreeHelper:function(t,e,n,i){var r=this,o=a.filter(r.orgRolesCollection.models,function(t){return"Donor"===t.get("name")})[0];t.each(function(t){var r=t.get(n),s=e.toJSON();s=a.each(s,function(t){t.hasFundings===!0&&void 0!=t.rolesIds&&t.rolesIds.push(o)}),s=a.filter(s,function(t){return a.contains(r,t.id)}),t.set(i,s)})}})},{"../models/generic-filter-model":73,"../models/org-role-filter-model":74,"../models/years-filter-model":75,"../models/years-only-filter-model":76,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],68:[function(t,e,n){jQuery(function(t){t.datepicker.regional.af={closeText:"Selekteer",prevText:"Vorige",nextText:"Volgende",currentText:"Vandag",monthNames:["Januarie","Februarie","Maart","April","Mei","Junie","Julie","Augustus","September","Oktober","November","Desember"],monthNamesShort:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des"],dayNames:["Sondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrydag","Saterdag"],dayNamesShort:["Son","Maa","Din","Woe","Don","Vry","Sat"],dayNamesMin:["So","Ma","Di","Wo","Do","Vr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.af)}),jQuery(function(t){t.datepicker.regional["ar-DZ"]={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:6,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["ar-DZ"])}),jQuery(function(t){t.datepicker.regional.ar={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:[" ","","","","","","","",""," "," "," "],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:6,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.ar)}),jQuery(function(t){t.datepicker.regional.az={closeText:"Bala",prevText:"&#x3C;Geri",nextText:"rli&#x3E;",currentText:"Bugn",monthNames:["Yanvar","Fevral","Mart","Aprel","May","yun","yul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],monthNamesShort:["Yan","Fev","Mar","Apr","May","yun","yul","Avq","Sen","Okt","Noy","Dek"],dayNames:["Bazar","Bazar ertsi","rnb axam","rnb","Cm axam","Cm","nb"],dayNamesShort:["B","Be","a","","Ca","C",""],dayNamesMin:["B","B","","","","C",""],weekHeader:"Hf",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.az)}),jQuery(function(t){t.datepicker.regional.be={closeText:"",prevText:"&larr;.",nextText:".&rarr;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.be)}),jQuery(function(t){t.datepicker.regional.bg={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",nextBigText:"&#x3E;&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"Wk",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.bg)}),jQuery(function(t){t.datepicker.regional.bs={closeText:"Zatvori",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Danas",monthNames:["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljak","Utorak","Srijeda","etvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sri","et","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","e","Pe","Su"],weekHeader:"Wk",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.bs)}),jQuery(function(t){t.datepicker.regional.ca={closeText:"Tanca",prevText:"Anterior",nextText:"Segent",currentText:"Avui",monthNames:["gener","febrer","mar","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],monthNamesShort:["gen","feb","mar","abr","maig","juny","jul","ag","set","oct","nov","des"],dayNames:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],dayNamesShort:["dg","dl","dt","dc","dj","dv","ds"],dayNamesMin:["dg","dl","dt","dc","dj","dv","ds"],weekHeader:"Set",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.ca)}),jQuery(function(t){t.datepicker.regional.cs={closeText:"Zavt",prevText:"&#x3C;Dve",nextText:"Pozdji&#x3E;",currentText:"Nyn",monthNames:["leden","nor","bezen","duben","kvten","erven","ervenec","srpen","z","jen","listopad","prosinec"],monthNamesShort:["led","no","be","dub","kv","er","vc","srp","z","j","lis","pro"],dayNames:["nedle","pondl","ter","steda","tvrtek","ptek","sobota"],dayNamesShort:["ne","po","t","st","t","p","so"],dayNamesMin:["ne","po","t","st","t","p","so"],weekHeader:"Td",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.cs)}),jQuery(function(t){t.datepicker.regional["cy-GB"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["Ionawr","Chwefror","Mawrth","Ebrill","Mai","Mehefin","Gorffennaf","Awst","Medi","Hydref","Tachwedd","Rhagfyr"],monthNamesShort:["Ion","Chw","Maw","Ebr","Mai","Meh","Gor","Aws","Med","Hyd","Tac","Rha"],dayNames:["Dydd Sul","Dydd Llun","Dydd Mawrth","Dydd Mercher","Dydd Iau","Dydd Gwener","Dydd Sadwrn"],dayNamesShort:["Sul","Llu","Maw","Mer","Iau","Gwe","Sad"],dayNamesMin:["Su","Ll","Ma","Me","Ia","Gw","Sa"],weekHeader:"Wy",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["cy-GB"])}),jQuery(function(t){t.datepicker.regional.da={closeText:"Luk",prevText:"&#x3C;Forrige",nextText:"Nste&#x3E;",currentText:"Idag",monthNames:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNames:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],dayNamesShort:["Sn","Man","Tir","Ons","Tor","Fre","Lr"],dayNamesMin:["S","Ma","Ti","On","To","Fr","L"],weekHeader:"Uge",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.da)}),jQuery(function(t){t.datepicker.regional.de={closeText:"Schlieen",prevText:"&#x3C;Zurck",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.de)}),jQuery(function(t){t.datepicker.regional.el={closeText:"",prevText:"",nextText:"",currentText:" ",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.el)}),jQuery(function(t){t.datepicker.regional["en-AU"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["en-AU"])}),jQuery(function(t){t.datepicker.regional["en-GB"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["en-GB"])}),jQuery(function(t){t.datepicker.regional["en-NZ"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["en-NZ"])}),jQuery(function(t){t.datepicker.regional.eo={closeText:"Fermi",prevText:"&#x3C;Anta",nextText:"Sekv&#x3E;",currentText:"Nuna",monthNames:["Januaro","Februaro","Marto","Aprilo","Majo","Junio","Julio","Agusto","Septembro","Oktobro","Novembro","Decembro"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Ag","Sep","Okt","Nov","Dec"],dayNames:["Dimano","Lundo","Mardo","Merkredo","ado","Vendredo","Sabato"],dayNamesShort:["Dim","Lun","Mar","Mer","a","Ven","Sab"],dayNamesMin:["Di","Lu","Ma","Me","a","Ve","Sa"],weekHeader:"Sb",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.eo)}),jQuery(function(t){t.datepicker.regional.es={closeText:"Cerrar",prevText:"&#x3C;Ant",nextText:"Sig&#x3E;",currentText:"Hoy",monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ogo","sep","oct","nov","dic"],dayNames:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],dayNamesShort:["dom","lun","mar","mi","juv","vie","sb"],dayNamesMin:["D","L","M","X","J","V","S"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.es)}),jQuery(function(t){t.datepicker.regional.et={closeText:"Sulge",prevText:"Eelnev",nextText:"Jrgnev",currentText:"Tna",monthNames:["Jaanuar","Veebruar","Mrts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],monthNamesShort:["Jaan","Veebr","Mrts","Apr","Mai","Juuni","Juuli","Aug","Sept","Okt","Nov","Dets"],dayNames:["Phapev","Esmaspev","Teisipev","Kolmapev","Neljapev","Reede","Laupev"],dayNamesShort:["Phap","Esmasp","Teisip","Kolmap","Neljap","Reede","Laup"],dayNamesMin:["P","E","T","K","N","R","L"],weekHeader:"nd",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.et)}),jQuery(function(t){t.datepicker.regional.eu={closeText:"Egina",prevText:"&#x3C;Aur",nextText:"Hur&#x3E;",currentText:"Gaur",monthNames:["urtarrila","otsaila","martxoa","apirila","maiatza","ekaina","uztaila","abuztua","iraila","urria","azaroa","abendua"],monthNamesShort:["urt.","ots.","mar.","api.","mai.","eka.","uzt.","abu.","ira.","urr.","aza.","abe."],dayNames:["igandea","astelehena","asteartea","asteazkena","osteguna","ostirala","larunbata"],dayNamesShort:["ig.","al.","ar.","az.","og.","ol.","lr."],dayNamesMin:["ig","al","ar","az","og","ol","lr"],weekHeader:"As",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.eu)}),jQuery(function(t){t.datepicker.regional.fa={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"yy/mm/dd",firstDay:6,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.fa)}),jQuery(function(t){t.datepicker.regional.fi={closeText:"Sulje",prevText:"&#xAB;Edellinen",nextText:"Seuraava&#xBB;",currentText:"Tnn",monthNames:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Keskuu","Heinkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],monthNamesShort:["Tammi","Helmi","Maalis","Huhti","Touko","Kes","Hein","Elo","Syys","Loka","Marras","Joulu"],dayNamesShort:["Su","Ma","Ti","Ke","To","Pe","La"],dayNames:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],dayNamesMin:["Su","Ma","Ti","Ke","To","Pe","La"],weekHeader:"Vk",dateFormat:"d.m.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.fi)}),jQuery(function(t){t.datepicker.regional.fo={closeText:"Lat aftur",prevText:"&#x3C;Fyrra",nextText:"Nsta&#x3E;",currentText:" dag",monthNames:["Januar","Februar","Mars","Aprl","Mei","Juni","Juli","August","September","Oktober","November","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des"],dayNames:["Sunnudagur","Mnadagur","Tsdagur","Mikudagur","Hsdagur","Frggjadagur","Leyardagur"],dayNamesShort:["Sun","Mn","Ts","Mik","Hs","Fr","Ley"],dayNamesMin:["Su","M","T","Mi","H","Fr","Le"],weekHeader:"Vk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.fo)}),jQuery(function(t){t.datepicker.regional["fr-CA"]={closeText:"Fermer",prevText:"Prcdent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],monthNamesShort:["janv.","fvr.","mars","avril","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"yy-mm-dd",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["fr-CA"])}),jQuery(function(t){t.datepicker.regional["fr-CH"]={closeText:"Fermer",prevText:"&#x3C;Prc",nextText:"Suiv&#x3E;",currentText:"Courant",monthNames:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],monthNamesShort:["janv.","fvr.","mars","avril","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sm",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["fr-CH"])}),jQuery(function(t){t.datepicker.regional.fr={closeText:"Fermer",prevText:"Prcdent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],monthNamesShort:["janv.","fvr.","mars","avril","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.fr)}),jQuery(function(t){t.datepicker.regional.gl={closeText:"Pechar",prevText:"&#x3C;Ant",nextText:"Seg&#x3E;",currentText:"Hoxe",monthNames:["Xaneiro","Febreiro","Marzo","Abril","Maio","Xuo","Xullo","Agosto","Setembro","Outubro","Novembro","Decembro"],monthNamesShort:["Xan","Feb","Mar","Abr","Mai","Xu","Xul","Ago","Set","Out","Nov","Dec"],dayNames:["Domingo","Luns","Martes","Mrcores","Xoves","Venres","Sbado"],dayNamesShort:["Dom","Lun","Mar","Mr","Xov","Ven","Sb"],dayNamesMin:["Do","Lu","Ma","M","Xo","Ve","S"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.gl)}),jQuery(function(t){t.datepicker.regional.he={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["'","'","'","'","'","'",""],dayNamesMin:["'","'","'","'","'","'",""],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.he)}),jQuery(function(t){t.datepicker.regional.hi={closeText:"",prevText:"",nextText:"",currentText:"",monthNames:[" ","","","","","",""," ","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.hi)}),jQuery(function(t){t.datepicker.regional.hr={closeText:"Zatvori",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Danas",monthNames:["Sijeanj","Veljaa","Oujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],monthNamesShort:["Sij","Velj","Ou","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],dayNames:["Nedjelja","Ponedjeljak","Utorak","Srijeda","etvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sri","et","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","e","Pe","Su"],weekHeader:"Tje",dateFormat:"dd.mm.yy.",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.hr)}),jQuery(function(t){t.datepicker.regional.hu={closeText:"bezr",prevText:"vissza",nextText:"elre",currentText:"ma",monthNames:["Janur","Februr","Mrcius","prilis","Mjus","Jnius","Jlius","Augusztus","Szeptember","Oktber","November","December"],monthNamesShort:["Jan","Feb","Mr","pr","Mj","Jn","Jl","Aug","Szep","Okt","Nov","Dec"],dayNames:["Vasrnap","Htf","Kedd","Szerda","Cstrtk","Pntek","Szombat"],dayNamesShort:["Vas","Ht","Ked","Sze","Cs","Pn","Szo"],dayNamesMin:["V","H","K","Sze","Cs","P","Szo"],weekHeader:"Ht",dateFormat:"yy.mm.dd.",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.hu)}),jQuery(function(t){t.datepicker.regional.hy={closeText:"",prevText:"&#x3C;.",nextText:".&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.hy)}),jQuery(function(t){t.datepicker.regional.id={closeText:"Tutup",prevText:"&#x3C;mundur",nextText:"maju&#x3E;",currentText:"hari ini",monthNames:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","Nopember","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agus","Sep","Okt","Nop","Des"],dayNames:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],dayNamesShort:["Min","Sen","Sel","Rab","kam","Jum","Sab"],dayNamesMin:["Mg","Sn","Sl","Rb","Km","jm","Sb"],weekHeader:"Mg",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.id)}),jQuery(function(t){t.datepicker.regional.is={closeText:"Loka",prevText:"&#x3C; Fyrri",nextText:"Nsti &#x3E;",currentText:" dag",monthNames:["Janar","Febrar","Mars","Aprl","Ma","Jn","Jl","gst","September","Oktber","Nvember","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Ma","Jn","Jl","g","Sep","Okt","Nv","Des"],dayNames:["Sunnudagur","Mnudagur","rijudagur","Mivikudagur","Fimmtudagur","Fstudagur","Laugardagur"],dayNamesShort:["Sun","Mn","ri","Mi","Fim","Fs","Lau"],dayNamesMin:["Su","M","r","Mi","Fi","F","La"],weekHeader:"Vika",dateFormat:"dd.mm.yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.is)}),jQuery(function(t){t.datepicker.regional.it={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.it)}),jQuery(function(t){t.datepicker.regional.ja={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["1","2","3","4","5","6","7","8","9","10","11","12"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.ja)}),jQuery(function(t){t.datepicker.regional.ka={closeText:"",prevText:"&#x3c; ",nextText:" &#x3e;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.ka)}),jQuery(function(t){t.datepicker.regional.kk={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",
currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.kk)}),jQuery(function(t){t.datepicker.regional.km={closeText:"",prevText:"",nextText:"",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.km)}),jQuery(function(t){t.datepicker.regional.ko={closeText:"",prevText:"",nextText:"",currentText:"",monthNames:["1","2","3","4","5","6","7","8","9","10","11","12"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"Wk",dateFormat:"yy-mm-dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.ko)}),jQuery(function(t){t.datepicker.regional.ky={closeText:"",prevText:"&#x3c;",nextText:"&#x3e;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.ky)}),jQuery(function(t){t.datepicker.regional.lb={closeText:"Ferdeg",prevText:"Zrck",nextText:"Weider",currentText:"Haut",monthNames:["Januar","Februar","Merz","Abrll","Mee","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Me","Abr","Mee","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonndeg","Mindeg","Dnschdeg","Mttwoch","Donneschdeg","Freideg","Samschdeg"],dayNamesShort:["Son","Mi","Dn","Mt","Don","Fre","Sam"],dayNamesMin:["So","M","D","M","Do","Fr","Sa"],weekHeader:"W",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.lb)}),jQuery(function(t){t.datepicker.regional.lt={closeText:"Udaryti",prevText:"&#x3C;Atgal",nextText:"Pirmyn&#x3E;",currentText:"iandien",monthNames:["Sausis","Vasaris","Kovas","Balandis","Gegu","Birelis","Liepa","Rugpjtis","Rugsjis","Spalis","Lapkritis","Gruodis"],monthNamesShort:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rugp","Rugs","Spa","Lap","Gru"],dayNames:["sekmadienis","pirmadienis","antradienis","treiadienis","ketvirtadienis","penktadienis","etadienis"],dayNamesShort:["sek","pir","ant","tre","ket","pen","e"],dayNamesMin:["Se","Pr","An","Tr","Ke","Pe","e"],weekHeader:"SAV",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.lt)}),jQuery(function(t){t.datepicker.regional.lv={closeText:"Aizvrt",prevText:"Iepr.",nextText:"Nk.",currentText:"odien",monthNames:["Janvris","Februris","Marts","Aprlis","Maijs","Jnijs","Jlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],monthNamesShort:["Jan","Feb","Mar","Apr","Mai","Jn","Jl","Aug","Sep","Okt","Nov","Dec"],dayNames:["svtdiena","pirmdiena","otrdiena","trediena","ceturtdiena","piektdiena","sestdiena"],dayNamesShort:["svt","prm","otr","tre","ctr","pkt","sst"],dayNamesMin:["Sv","Pr","Ot","Tr","Ct","Pk","Ss"],weekHeader:"Ned.",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.lv)}),jQuery(function(t){t.datepicker.regional.mk={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.mk)}),jQuery(function(t){t.datepicker.regional.ml={closeText:"",prevText:"",nextText:" ",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.ml)}),jQuery(function(t){t.datepicker.regional.ms={closeText:"Tutup",prevText:"&#x3C;Sebelum",nextText:"Selepas&#x3E;",currentText:"hari ini",monthNames:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember"],monthNamesShort:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ogo","Sep","Okt","Nov","Dis"],dayNames:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"],dayNamesShort:["Aha","Isn","Sel","Rab","kha","Jum","Sab"],dayNamesMin:["Ah","Is","Se","Ra","Kh","Ju","Sa"],weekHeader:"Mg",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.ms)}),jQuery(function(t){t.datepicker.regional.nb={closeText:"Lukk",prevText:"&#xAB;Forrige",nextText:"Neste&#xBB;",currentText:"I dag",monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],dayNamesShort:["sn","man","tir","ons","tor","fre","lr"],dayNames:["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"],dayNamesMin:["s","ma","ti","on","to","fr","l"],weekHeader:"Uke",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.nb)}),jQuery(function(t){t.datepicker.regional["nl-BE"]={closeText:"Sluiten",prevText:"",nextText:"",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["nl-BE"])}),jQuery(function(t){t.datepicker.regional.nl={closeText:"Sluiten",prevText:"",nextText:"",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.nl)}),jQuery(function(t){t.datepicker.regional.nn={closeText:"Lukk",prevText:"&#xAB;Frre",nextText:"Neste&#xBB;",currentText:"I dag",monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],dayNamesShort:["sun","mn","tys","ons","tor","fre","lau"],dayNames:["sundag","mndag","tysdag","onsdag","torsdag","fredag","laurdag"],dayNamesMin:["su","m","ty","on","to","fr","la"],weekHeader:"Veke",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.nn)}),jQuery(function(t){t.datepicker.regional.no={closeText:"Lukk",prevText:"&#xAB;Forrige",nextText:"Neste&#xBB;",currentText:"I dag",monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],dayNamesShort:["sn","man","tir","ons","tor","fre","lr"],dayNames:["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"],dayNamesMin:["s","ma","ti","on","to","fr","l"],weekHeader:"Uke",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.no)}),jQuery(function(t){t.datepicker.regional.pl={closeText:"Zamknij",prevText:"&#x3C;Poprzedni",nextText:"Nastpny&#x3E;",currentText:"Dzi",monthNames:["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],monthNamesShort:["Sty","Lu","Mar","Kw","Maj","Cze","Lip","Sie","Wrz","Pa","Lis","Gru"],dayNames:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"],dayNamesShort:["Nie","Pn","Wt","r","Czw","Pt","So"],dayNamesMin:["N","Pn","Wt","r","Cz","Pt","So"],weekHeader:"Tydz",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.pl)}),jQuery(function(t){t.datepicker.regional["pt-BR"]={closeText:"Fechar",prevText:"&#x3C;Anterior",nextText:"Prximo&#x3E;",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["pt-BR"])}),jQuery(function(t){t.datepicker.regional.pt={closeText:"Fechar",prevText:"Anterior",nextText:"Seguinte",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],weekHeader:"Sem",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.pt)}),jQuery(function(t){t.datepicker.regional.rm={closeText:"Serrar",prevText:"&#x3C;Suandant",nextText:"Precedent&#x3E;",currentText:"Actual",monthNames:["Schaner","Favrer","Mars","Avrigl","Matg","Zercladur","Fanadur","Avust","Settember","October","November","December"],monthNamesShort:["Scha","Fev","Mar","Avr","Matg","Zer","Fan","Avu","Sett","Oct","Nov","Dec"],dayNames:["Dumengia","Glindesdi","Mardi","Mesemna","Gievgia","Venderdi","Sonda"],dayNamesShort:["Dum","Gli","Mar","Mes","Gie","Ven","Som"],dayNamesMin:["Du","Gl","Ma","Me","Gi","Ve","So"],weekHeader:"emna",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.rm)}),jQuery(function(t){t.datepicker.regional.ro={closeText:"nchide",prevText:"&#xAB; Luna precedent",nextText:"Luna urmtoare &#xBB;",currentText:"Azi",monthNames:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],monthNamesShort:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Duminic","Luni","Mari","Miercuri","Joi","Vineri","Smbt"],dayNamesShort:["Dum","Lun","Mar","Mie","Joi","Vin","Sm"],dayNamesMin:["Du","Lu","Ma","Mi","Jo","Vi","S"],weekHeader:"Spt",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.ro)}),jQuery(function(t){t.datepicker.regional.ru={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.ru)}),jQuery(function(t){t.datepicker.regional.sk={closeText:"Zavrie",prevText:"&#x3C;Predchdzajci",nextText:"Nasledujci&#x3E;",currentText:"Dnes",monthNames:["janur","februr","marec","aprl","mj","jn","jl","august","september","oktber","november","december"],monthNamesShort:["Jan","Feb","Mar","Apr","Mj","Jn","Jl","Aug","Sep","Okt","Nov","Dec"],dayNames:["nedea","pondelok","utorok","streda","tvrtok","piatok","sobota"],dayNamesShort:["Ned","Pon","Uto","Str","tv","Pia","Sob"],dayNamesMin:["Ne","Po","Ut","St","t","Pia","So"],weekHeader:"Ty",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.sk)}),jQuery(function(t){t.datepicker.regional.sl={closeText:"Zapri",prevText:"&#x3C;Prejnji",nextText:"Naslednji&#x3E;",currentText:"Trenutni",monthNames:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljek","Torek","Sreda","etrtek","Petek","Sobota"],dayNamesShort:["Ned","Pon","Tor","Sre","et","Pet","Sob"],dayNamesMin:["Ne","Po","To","Sr","e","Pe","So"],weekHeader:"Teden",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.sl)}),jQuery(function(t){t.datepicker.regional.sq={closeText:"mbylle",prevText:"&#x3C;mbrapa",nextText:"Prpara&#x3E;",currentText:"sot",monthNames:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nntor","Dhjetor"],monthNamesShort:["Jan","Shk","Mar","Pri","Maj","Qer","Kor","Gus","Sht","Tet","Nn","Dhj"],dayNames:["E Diel","E Hn","E Mart","E Mrkur","E Enjte","E Premte","E Shtune"],dayNamesShort:["Di","H","Ma","M","En","Pr","Sh"],dayNamesMin:["Di","H","Ma","M","En","Pr","Sh"],weekHeader:"Ja",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.sq)}),jQuery(function(t){t.datepicker.regional["sr-SR"]={closeText:"Zatvori",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Danas",monthNames:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljak","Utorak","Sreda","etvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sre","et","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","e","Pe","Su"],weekHeader:"Sed",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["sr-SR"])}),jQuery(function(t){t.datepicker.regional.sr={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.sr)}),jQuery(function(t){t.datepicker.regional.sv={closeText:"Stng",prevText:"&#xAB;Frra",nextText:"Nsta&#xBB;",currentText:"Idag",monthNames:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNamesShort:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"],dayNames:["Sndag","Mndag","Tisdag","Onsdag","Torsdag","Fredag","Lrdag"],dayNamesMin:["S","M","Ti","On","To","Fr","L"],weekHeader:"Ve",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.sv)}),jQuery(function(t){t.datepicker.regional.ta={closeText:"",prevText:"",nextText:"",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.ta)}),jQuery(function(t){t.datepicker.regional.th={closeText:"",prevText:"&#xAB;&#xA0;",nextText:"&#xA0;&#xBB;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["..","..","..","..","..","..","..","..","..","..","..",".."],dayNames:["","","","","","",""],dayNamesShort:[".",".",".",".",".",".","."],dayNamesMin:[".",".",".",".",".",".","."],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.th)}),jQuery(function(t){t.datepicker.regional.tj={closeText:"",prevText:"&#x3c;",nextText:"&#x3e;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.tj)}),jQuery(function(t){t.datepicker.regional.tm={closeText:"Halo ona",prevText:"Uluk",nextText:"Tuir mai",currentText:"Ohin loron",monthNames:["Janeiru","Fevreiru","Marsu","Abril","Maiu","Junhu","Julhu","Agostu","Septembru","Otubru","Novembru","Dezrembru"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Sep","Oct","Nov","Dez"],dayNames:["Dumingu","Segunda","Tersa","Kuarta","Kinta","Sesta","Sabadu"],dayNamesShort:["Dum","Seg","Ter","Krt","Kin","Ses","Sab"],dayNamesMin:["Dm","Sg","Tr","Kt","Kn","Ss","Sb"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.tm)}),jQuery(function(t){t.datepicker.regional.tr={closeText:"kapat",prevText:"&#x3C;geri",nextText:"ileri&#x3e",currentText:"bugn",monthNames:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],monthNamesShort:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],dayNames:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],dayNamesShort:["Pz","Pt","Sa","a","Pe","Cu","Ct"],dayNamesMin:["Pz","Pt","Sa","a","Pe","Cu","Ct"],weekHeader:"Hf",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.tr)}),jQuery(function(t){t.datepicker.regional.uk={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.uk)}),jQuery(function(t){t.datepicker.regional.vi={closeText:"ng",prevText:"&#x3C;Trc",nextText:"Tip&#x3E;",currentText:"Hm nay",monthNames:["Thng Mt","Thng Hai","Thng Ba","Thng T","Thng Nm","Thng Su","Thng By","Thng Tm","Thng Chn","Thng Mi","Thng Mi Mt","Thng Mi Hai"],monthNamesShort:["Thng 1","Thng 2","Thng 3","Thng 4","Thng 5","Thng 6","Thng 7","Thng 8","Thng 9","Thng 10","Thng 11","Thng 12"],dayNames:["Ch Nht","Th Hai","Th Ba","Th T","Th Nm","Th Su","Th By"],dayNamesShort:["CN","T2","T3","T4","T5","T6","T7"],dayNamesMin:["CN","T2","T3","T4","T5","T6","T7"],weekHeader:"Tu",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.vi)}),jQuery(function(t){t.datepicker.regional["zh-CN"]={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["zh-CN"])}),jQuery(function(t){t.datepicker.regional["zh-HK"]={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd-mm-yy",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["zh-HK"])}),jQuery(function(t){t.datepicker.regional["zh-TW"]={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"yy/mm/dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["zh-TW"])}),jQuery(function(t){t.datepicker.regional.en={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["en-GB"])})},{}],69:[function(t,e,n){!function(t){function e(t,e,n){if((t[e]||t[n])&&t[e]===t[n])throw Error("(Link) '"+e+"' can't match '"+n+"'.'")}function n(n){if(void 0===n&&(n={}),"object"!=typeof n)throw Error("(Format) 'format' option must be an object.");var i={};t(a).each(function(t,e){if(void 0===n[e])i[e]=r[t];else{if(typeof n[e]!=typeof r[t])throw Error("(Format) 'format."+e+"' must be a "+typeof r[t]+".");if("decimals"===e&&(0>n[e]||7<n[e]))throw Error("(Format) 'format.decimals' option must be between 0 and 7.");i[e]=n[e]}}),e(i,"mark","thousand"),e(i,"prefix","negative"),e(i,"prefix","negativeBefore"),this.r=i}function i(e,n){return"object"!=typeof e&&t.error("(Link) Initialize with an object."),new i.prototype.p(e.target||function(){},e.method,e.format||{},n)}var a="decimals mark thousand prefix postfix encoder decoder negative negativeBefore to from".split(" "),r=[2,".","","","",function(t){return t},function(t){return t},"-","",function(t){return t},function(t){return t}];n.prototype.a=function(t){return this.r[t]},n.prototype.L=function(t){function e(t){return t.split("").reverse().join("")}t=this.a("encoder")(t);var n=this.a("decimals"),i="",a="",r="",o="";return 0===parseFloat(t.toFixed(n))&&(t="0"),0>t&&(i=this.a("negative"),a=this.a("negativeBefore")),t=Math.abs(t).toFixed(n).toString(),t=t.split("."),this.a("thousand")?(r=e(t[0]).match(/.{1,3}/g),r=e(r.join(e(this.a("thousand"))))):r=t[0],this.a("mark")&&1<t.length&&(o=this.a("mark")+t[1]),this.a("to")(a+this.a("prefix")+i+r+o+this.a("postfix"))},n.prototype.w=function(t){function e(t){return t.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var n;return null!==t&&void 0!==t&&(t=this.a("from")(t),t=t.toString(),n=t.replace(RegExp("^"+e(this.a("negativeBefore"))),""),t!==n?(t=n,n="-"):n="",t=t.replace(RegExp("^"+e(this.a("prefix"))),""),this.a("negative")&&(n="",t=t.replace(RegExp("^"+e(this.a("negative"))),"-")),t=t.replace(RegExp(e(this.a("postfix"))+"$"),"").replace(RegExp(e(this.a("thousand")),"g"),"").replace(this.a("mark"),"."),t=this.a("decoder")(parseFloat(n+t)),!isNaN(t)&&t)},i.prototype.K=function(e,n){this.method=n||"html",this.j=t(e.replace("-tooltip-","")||"<div/>")[0]},i.prototype.H=function(t){this.method="val",this.j=document.createElement("input"),this.j.name=t,this.j.type="hidden"},i.prototype.G=function(e){function n(t,e){return[e?null:t,e?t:null]}var i=this;this.method="val",this.target=e.on("change",function(e){i.B.val(n(t(e.target).val(),i.t),{link:i,set:!0})})},i.prototype.p=function(e,n,i,a){if(this.g=i,this.update=!a,"string"==typeof e&&0===e.indexOf("-tooltip-"))this.K(e,n);else if("string"==typeof e&&0!==e.indexOf("-"))this.H(e);else{if("function"!=typeof e){if(e instanceof t||t.zepto&&t.zepto.isZ(e)){if(!n){if(e.is("input, select, textarea"))return void this.G(e);n="html"}if("function"==typeof n||"string"==typeof n&&e[n])return this.method=n,void(this.target=e)}throw new RangeError("(Link) Invalid Link.")}this.target=!1,this.method=e}},i.prototype.write=function(t,e,n,i){this.update&&!1===i||(this.u=t,this.F=t=this.format(t),"function"==typeof this.method?this.method.call(this.target[0]||n[0],t,e,n):this.target[this.method](t,e,n))},i.prototype.q=function(e){this.g=new n(t.extend({},e,this.g instanceof n?this.g.r:this.g))},i.prototype.J=function(t){this.B=t},i.prototype.I=function(t){this.t=t},i.prototype.format=function(t){return this.g.L(t)},i.prototype.A=function(t){return this.g.w(t)},i.prototype.p.prototype=i.prototype,t.Link=i}(window.jQuery||window.Zepto),function(t){function e(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function n(e){return t.isArray(e)?e:[e]}function i(t,e){t.addClass(e),setTimeout(function(){t.removeClass(e)},300)}function a(t,e){return 100*e/(t[1]-t[0])}function r(t,e){if(e>=t.d.slice(-1)[0])return 100;for(var n,i,r,o=1;e>=t.d[o];)o++;return n=t.d[o-1],i=t.d[o],r=t.c[o-1],n=[n,i],r+a(n,0>n[0]?e+Math.abs(n[0]):e-n[0])/(100/(t.c[o]-r))}function o(t,e){if(100<=e)return t.d.slice(-1)[0];for(var n,i,a,r=1;e>=t.c[r];)r++;return n=t.d[r-1],i=t.d[r],a=t.c[r-1],n=[n,i],100/(t.c[r]-a)*(e-a)*(n[1]-n[0])/100+n[0]}function s(t,e){for(var n,i=1;(t.dir?100-e:e)>=t.c[i];)i++;return t.m?(n=t.c[i-1],i=t.c[i],e-n>(i-n)/2?i:n):(t.h[i-1]?(n=t.h[i-1],i=t.c[i-1]+Math.round((e-t.c[i-1])/n)*n):i=e,i)}function l(t,n){if(!e(n))throw Error("noUiSlider: 'step' is not numeric.");t.h[0]=n}function d(n,i){if("object"!=typeof i||t.isArray(i))throw Error("noUiSlider: 'range' is not an object.");if(void 0===i.min||void 0===i.max)throw Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.each(i,function(i,a){var r;if("number"==typeof a&&(a=[a]),!t.isArray(a))throw Error("noUiSlider: 'range' contains invalid value.");if(r="min"===i?0:"max"===i?100:parseFloat(i),!e(r)||!e(a[0]))throw Error("noUiSlider: 'range' value isn't numeric.");n.c.push(r),n.d.push(a[0]),r?n.h.push(!isNaN(a[1])&&a[1]):isNaN(a[1])||(n.h[0]=a[1])}),t.each(n.h,function(t,e){return!e||void(n.h[t]=a([n.d[t],n.d[t+1]],e)/(100/(n.c[t+1]-n.c[t])))})}function c(e,n){if("number"==typeof n&&(n=[n]),!t.isArray(n)||!n.length||2<n.length)throw Error("noUiSlider: 'start' option is incorrect.");e.b=n.length,e.start=n}function u(t,e){if(t.m=e,"boolean"!=typeof e)throw Error("noUiSlider: 'snap' option must be a boolean.")}function h(t,e){if("lower"===e&&1===t.b)t.i=1;else if("upper"===e&&1===t.b)t.i=2;else if(!0===e&&2===t.b)t.i=3;else{if(!1!==e)throw Error("noUiSlider: 'connect' option doesn't match handle count.");t.i=0}}function p(t,e){switch(e){case"horizontal":t.k=0;break;case"vertical":t.k=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.")}}function f(t,n){if(2<t.c.length)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.");if(t.margin=a(t.d,n),!e(n))throw Error("noUiSlider: 'margin' option must be numeric.")}function m(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1,t.i=[0,2,1,3][t.i];break;default:throw Error("noUiSlider: 'direction' option was not recognized.")}}function g(t,e){if("string"!=typeof e)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var n=0<=e.indexOf("snap");t.n={s:0<=e.indexOf("tap")||n,extend:0<=e.indexOf("extend"),v:0<=e.indexOf("drag"),fixed:0<=e.indexOf("fixed"),m:n}}function v(e,n,i){e.o=[n.lower,n.upper],e.g=n.format,t.each(e.o,function(e,a){if(!t.isArray(a))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' must be an array.");t.each(a,function(){if(!(this instanceof t.Link))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' can only contain Link instances.");
this.I(e),this.J(i),this.q(n.format)})}),e.dir&&1<e.b&&e.o.reverse()}function y(e,n){var i,a={c:[],d:[],h:[!1],margin:0};return i={step:{e:!1,f:l},start:{e:!0,f:c},connect:{e:!0,f:h},direction:{e:!0,f:m},range:{e:!0,f:d},snap:{e:!1,f:u},orientation:{e:!1,f:p},margin:{e:!1,f:f},behaviour:{e:!0,f:g},serialization:{e:!0,f:v}},e=t.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},e),e.serialization=t.extend({lower:[],upper:[],format:{}},e.serialization),t.each(i,function(t,i){if(void 0===e[t]){if(i.e)throw Error("noUiSlider: '"+t+"' is required.");return!0}i.f(a,e[t],n)}),a.style=a.k?"top":"left",a}function b(e,n){var i=t("<div><div/></div>").addClass(P[2]),a=["-lower","-upper"];return e.dir&&a.reverse(),i.children().addClass(P[3]+" "+P[3]+a[n]),i}function x(e,n){return n.j&&(n=new t.Link({target:t(n.j).clone().appendTo(e),method:n.method,format:n.g},(!0))),n}function w(e,n){var i,a=[];for(i=0;i<e.b;i++){var r=a,o=i,s=e.o[i],l=n[i].children(),d=e.g,c=void 0,u=[],c=new t.Link({},(!0));for(c.q(d),u.push(c),c=0;c<s.length;c++)u.push(x(l,s[c]));r[o]=u}return a}function k(t,e,n){switch(t){case 1:e.addClass(P[7]),n[0].addClass(P[6]);break;case 3:n[1].addClass(P[6]);case 2:n[0].addClass(P[7]);case 0:e.addClass(P[6])}}function S(t,e){var n,i=[];for(n=0;n<t.b;n++)i.push(b(t,n).appendTo(e));return i}function T(e,n){return n.addClass([P[0],P[8+e.dir],P[4+e.k]].join(" ")),t("<div/>").appendTo(n).addClass(P[1])}function D(e,a,l){function d(){return b[["width","height"][a.k]]()}function c(t){var e,n=[A.val()];for(e=0;e<t.length;e++)A.trigger(t[e],n)}function u(e,n,i){var r=e[0]!==D[0][0]?1:0,l=C[0]+a.margin,d=C[1]-a.margin;return i&&1<D.length&&(n=r?Math.max(n,l):Math.min(n,d)),100>n&&(n=s(a,n)),n=Math.max(Math.min(parseFloat(n.toFixed(7)),100),0),n===C[r]?1!==D.length&&((n===l||n===d)&&0):(e.css(a.style,n+"%"),e.is(":first-child")&&e.toggleClass(P[17],50<n),C[r]=n,a.dir&&(n=100-n),t(x[r]).each(function(){this.write(o(a,n),e.children(),A)}),!0)}function h(t,e,n){n||i(A,P[14]),u(t,e,!1),c(["slide","set","change"])}function p(t,e,n,i){t=t.replace(/\s/g,".nui ")+".nui",e.on(t,function(t){var e=A.attr("disabled");if(A.hasClass(P[14])||void 0!==e&&null!==e)return!1;t.preventDefault();var r,o,e=0===t.type.indexOf("touch"),s=0===t.type.indexOf("mouse"),l=0===t.type.indexOf("pointer"),d=t;0===t.type.indexOf("MSPointer")&&(l=!0),t.originalEvent&&(t=t.originalEvent),e&&(r=t.changedTouches[0].pageX,o=t.changedTouches[0].pageY),(s||l)&&(l||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),r=t.clientX+window.pageXOffset,o=t.clientY+window.pageYOffset),d.C=[r,o],d.cursor=s,t=d,t.l=t.C[a.k],n(t,i)})}function f(t,e){var n,i=e.b||D,a=!1,a=100*(t.l-e.start)/d(),r=i[0][0]!==D[0][0]?1:0,o=e.D;n=a+o[0],a+=o[1],1<i.length?(0>n&&(a+=Math.abs(n)),100<a&&(n-=a-100),n=[Math.max(Math.min(n,100),0),Math.max(Math.min(a,100),0)]):n=[n,a],a=u(i[0],n[r],1===i.length),1<i.length&&(a=u(i[1],n[r?0:1],!1)||a),a&&c(["slide"])}function m(e){t("."+P[15]).removeClass(P[15]),e.cursor&&t("body").css("cursor","").off(".nui"),_.off(".nui"),A.removeClass(P[12]),c(["set","change"])}function g(e,n){1===n.b.length&&n.b[0].children().addClass(P[15]),e.stopPropagation(),p(E.move,_,f,{start:e.l,b:n.b,D:[C[0],C[D.length-1]]}),p(E.end,_,m,null),e.cursor&&(t("body").css("cursor",t(e.target).css("cursor")),1<D.length&&A.addClass(P[12]),t("body").on("selectstart.nui",!1))}function v(e){var n=e.l,i=0;e.stopPropagation(),t.each(D,function(){i+=this.offset()[a.style]}),i=n<i/2||1===D.length?0:1,n-=b.offset()[a.style],n=100*n/d(),h(D[i],n,a.n.m),a.n.m&&g(e,{b:[D[i]]})}function y(t){var e=(t=t.l<b.offset()[a.style])?0:100;t=t?0:D.length-1,h(D[t],e,!1)}var b,x,D,A=t(e),C=[-1,-1];if(A.hasClass(P[0]))throw Error("Slider was already initialized.");b=T(a,A),D=S(a,b),x=w(a,D),k(a.i,A,D),function(t){var e;if(!t.fixed)for(e=0;e<D.length;e++)p(E.start,D[e].children(),g,{b:[D[e]]});t.s&&p(E.start,b,v,{b:D}),t.extend&&(A.addClass(P[16]),t.s&&p(E.start,A,y,{b:D})),t.v&&(e=b.find("."+P[7]).addClass(P[10]),t.fixed&&(e=e.add(b.children().not(e).children())),p(E.start,e,g,{b:D}))}(a.n),e.vSet=function(){var e,o,s,l,d,h,p=Array.prototype.slice.call(arguments,0),f=n(p[0]);for("object"==typeof p[1]?(e=p[1].set,o=p[1].link,s=p[1].update,l=p[1].animate):!0===p[1]&&(e=!0),a.dir&&1<a.b&&f.reverse(),l&&i(A,P[14]),p=1<D.length?3:1,1===f.length&&(p=1),d=0;d<p;d++)l=o||x[d%2][0],l=l.A(f[d%2]),!1!==l&&(l=r(a,l),a.dir&&(l=100-l),!0!==u(D[d%2],l,!0)&&t(x[d%2]).each(function(t){return t?void this.write(h,D[d%2].children(),A,s):(h=this.u,!0)}));return!0===e&&c(["set"]),this},e.vGet=function(){var t,e=[];for(t=0;t<a.b;t++)e[t]=x[t][0].F;return 1===e.length?e[0]:a.dir?e.reverse():e},e.destroy=function(){return t.each(x,function(){t.each(this,function(){this.target&&this.target.off(".nui")})}),t(this).off(".nui").removeClass(P.join(" ")).empty(),l},A.val(a.start)}function A(t){if(!this.length)throw Error("noUiSlider: Can't initialize slider on empty selection.");var e=y(t,this);return this.each(function(){D(this,e,t)})}function C(e){return this.each(function(){var n=t(this).val(),i=this.destroy(),a=t.extend({},i,e);t(this).noUiSlider(a),i.start===a.start&&t(this).val(n)})}function M(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}var _=t(document),N=t.fn.val,E=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},P="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active noUi-extended noUi-stacking".split(" ");t.fn.val=function(){var e=arguments,n=t(this[0]);return arguments.length?this.each(function(){(t(this).hasClass(P[0])?M:N).apply(t(this),e)}):(n.hasClass(P[0])?M:N).call(n)},t.noUiSlider={Link:t.Link},t.fn.noUiSlider=function(t,e){return(e?C:A).call(this,t)}}(window.jQuery||window.Zepto)},{}],70:[function(t,e,n){function i(){this.initialize.apply(this,arguments)}var a=t("underscore"),r=t("backbone"),o=t("jquery");(void 0==window.$||$.fn.jquery.split(" ")[0].split(".")[0]<2)&&(window.jQuery=window.$=r.$=o),t("jquery-ui/draggable"),t("bootstrap/dist/js/bootstrap"),t("./lib/jquery-ui-i18n");var s=t("./views/filters-view");a.extend(i.prototype,r.Events,{initialize:function(t){t=a.defaults(t,{draggable:!0}),a.has(t,"sync")&&(r.sync=t.sync),this.view=new s(t),this._cachedAllFilters=null,this.loaded=this.view._loaded.promise(),this.listenTo(this.view,"all",function(){this.trigger.apply(this,arguments)})},setElement:function(){this.view.setElement(arguments)},showFilters:function(){this.view.showFilters()},setStash:function(){this.view.setStash()},getAllFilters:function(){var t=this;return this.loaded.then(function(){return this._cachedAllFilters||(this._cachedAllFilters=t.view.serialize({includeUnselected:!0,wholeModel:!0})),this._cachedAllFilters})},serializeToModels:function(){return this.view.serialize({wholeModel:!0})},formatDate:function(t){return this.view.formatDate(t)},serialize:function(){return this.view.serialize({})},deserialize:function(t,e){return this.view.deserialize(t,e)},reset:function(t){this.view.resetFilters(),t&&t.silent||this.view.applyFilters()},extractDates:function(t,e,n,i){if(e=e||{},a.isUndefined(e.date)||a.isEmpty(e.date)){e.date=e.date||{start:"",end:""};var r=t.get(n);void 0!==r&&""!==r&&(e.date.start=r);var o=t.get(i);void 0!==o&&""!==o&&(e.date.end=o)}}}),e.exports=i},{"./lib/jquery-ui-i18n":68,"./views/filters-view":81,backbone:"backbone","bootstrap/dist/js/bootstrap":61,jquery:"jquery","jquery-ui/draggable":64,underscore:"underscore"}],71:[function(t,e,n){var i=t("backbone");e.exports=i.Model.extend({defaults:{name:"Filter Name",method:"GET",totalCount:0,activeCount:0,_loaded:!1,empty:!1},initialize:function(t){this.set("name",t.name),this.set("group",t.group||t.id),this.set("method",t.method),this.set("columns",t.columns),this.set("empty",t.empty||!1),this.url=t.url||t.endpoint}})},{backbone:"backbone"}],72:[function(t,e,n){var i=(t("underscore"),t("backbone"));e.exports=i.Model.extend({url:"/rest/amp/settings"})},{backbone:"backbone",underscore:"underscore"}],73:[function(t,e,n){var i=t("underscore"),a=t("../models/base-filter-model"),r=t("../tree/tree-node-model");e.exports=a.extend({initialize:function(t){a.prototype.initialize.apply(this,[t]),this.set("modelType","TREE"),this.getTree()},getTree:function(){var t=this,e=this.get("_loaded");return e||t.set("_loaded",this._createTree().then(function(){return void 0!=t.get("tree")&&t.get("tree").on("change:numSelected",function(e,n){t.set("numSelected",n),t.set("numPossible",t.get("tree").get("numPossible"))}),t.get("tree")})),this.get("_loaded")},getNumSelected:function(){var t=this.get("numSelected");return t&&this.get("numSelected")!==this.get("numPossible")?t:0},serialize:function(t){var e=this.get("tree");if(e){var n=e.serialize(t);return n}return{}},deserialize:function(t){var e=this,n=this.get("tree");if(t){if(!n)return console.warn("deserialize no tree found",e),!1;n.deserialize(t)}},reset:function(){var t=this.get("tree");t&&(t.set("selected",!0),t.set("selected",!1))},_createTree:function(){return this.url||(this.url=this.get("endpoint")),this.fetch({type:this.get("method"),data:"{}"}).fail(function(t,e,n){console.error("failed to get filter ",t,e,n)})},parse:function(t){var e=this;if(i.isArray(t)||(t=[t]),i.isArray(t)&&t.length>0){var n=null;1===t.length?(t[0].filterId&&!t[0].name&&(t[0].name=t[0].filterId),t[0].values&&(t[0].children=t[0].values),t[0].isSelectable=!1,n=t[0]):n={id:-1,code:"-1",name:e.get("name"),children:t,selected:void 0,expanded:!1,isSelectable:!1,createUnkowns:!0};var a=new r(n);e.set("tree",a)}}})},{"../models/base-filter-model":71,"../tree/tree-node-model":77,underscore:"underscore"}],74:[function(t,e,n){var i=t("jquery"),a=t("../models/generic-filter-model"),r=t("../tree/tree-node-model");e.exports=a.extend({initialize:function(t){this.loaded=i.Deferred(),this._createTree(t.data),a.prototype.initialize.apply(this,[t])},getTree:function(){return this.loaded},_createTree:function(t){var e=this,n={};n=1===t.length?t[0]:{id:-1,code:"-1",name:e.get("displayName"),filterId:e.get("filterId"),children:t,selected:void 0,expanded:!1,isSelectable:!1,createUnkowns:!1};var i=new r(n);this.set("tree",i),e.get("tree").on("change:numSelected",function(t,n){e.set("numSelected",n),e.set("numPossible",e.get("tree").get("numPossible"))}),this.loaded.resolve(i)}})},{"../models/generic-filter-model":73,"../tree/tree-node-model":77,jquery:"jquery"}],75:[function(t,e,n){var i=t("jquery"),a=(t("underscore"),t("../models/base-filter-model"));e.exports=a.extend({defaults:{selectedStart:null,selectedEnd:null,startYear:"",endYear:"",modelType:"DATE-RANGE-VALUES"},sync:function(){return i.when(!0)},initialize:function(t){a.prototype.initialize.apply(this,[t]),this.url=t.endpoint,this.set("_loaded",i.Deferred())},parse:function(t){return console.log("years-filter-model.parse: data = "+JSON.stringify(t)),t.startYear&&t.startYear!==-1?t.startYear=t.startYear+"-01-01":t.startYear=this.defaults.startYear,t.endYear&&t.endYear!==-1?t.endYear=t.endYear+"-12-31":t.endYear=this.defaults.endYear,t.selectedStart||(t.selectedStart=t.startYear,t.selectedEnd=t.endYear),this.get("_loaded").resolve(),t},serialize:function(t){if(this.get("selectedStart")||this.get("selectedEnd")){var e=this.get("id"),n={};return t.wholeModel===!0?n[e]={modelType:this.get("modelType"),start:this.get("selectedStart"),end:this.get("selectedEnd")}:n[e]={start:this.get("selectedStart"),end:this.get("selectedEnd")},n}return null},postprocess:function(){this.get("selectedStart")||this.set("selectedStart",this.get("startYear")),this.get("selectedEnd")||this.set("selectedEnd",this.get("endYear"))},deserialize:function(t){var e=this.get("id");t&&t[e]?(this.set("selectedStart",this._dateConvert(t[e].start)),this.set("selectedEnd",this._dateConvert(t[e].end)),this.postprocess()):(this.set("selectedStart",this.get("startYear")),this.set("selectedEnd",this.get("endYear")))},reset:function(){this.set("selectedStart",this.get("startYear")),this.set("selectedEnd",this.get("endYear"))},_dateConvert:function(t){console.log("asked to convert input: "+t);var e=null;return t&&(t.indexOf("/")>-1?(t=t.split("/"),e=t[2]+"-"+t[1]+"-"+t[0]):e=t),e}})},{"../models/base-filter-model":71,jquery:"jquery",underscore:"underscore"}],76:[function(t,e,n){var i=t("jquery"),a=t("underscore"),r=t("../models/base-filter-model");e.exports=r.extend({defaults:{selectedYear:void 0,defaultYear:void 0,modelType:"YEAR-SINGLE-VALUE"},initialize:function(t){r.prototype.initialize.apply(this,[t]),this.url=t.endpoint,this.set("_loaded",i.Deferred())},parse:function(t){return t&&t.value&&t.value.options&&(t.defaultYear=a.find(t.value.options,function(e){return e.id===t.value.defaultId}).value),this.get("_loaded").resolve(),t},serialize:function(t){if(this.get("selectedYear")){var e=this.get("id"),n={};return t.wholeModel===!0?n[e]={year:this.get("selectedYear"),modelType:this.get("modelType"),displayName:this.get("name")}:n[e]=this.get("selectedYear"),n}return null},deserialize:function(t){var e=this.get("id");t&&t[e]?this.set("selectedYear",t[e]):this.reset()},reset:function(){this.set("selectedYear",""),this.set("displayName","")}})},{"../models/base-filter-model":71,jquery:"jquery",underscore:"underscore"}],77:[function(t,e,n){var i,a=t("underscore"),r=t("backbone"),o=r.Collection.extend({model:i});i=r.Model.extend({defaults:{selected:void 0,expanded:!0,visible:!0,numSelected:0,numPossible:0,children:null,isSelectable:!1},ignoreList:["donor-group","donor-type","implementing-agency","beneficiary-agency","executing-agency","responsible-organization","component-funding-organization","component-second-responsible-organization"],ignoreOrgGroupList:["implementing-agency","beneficiary-agency","executing-agency","responsible-organization","component-funding-organization","component-second-responsible-organization"],initialize:function(t){var e=this,n=new o;if(this.set("children",n),Array.isArray(t.children)&&a.each(t.children,function(t){var e=new i(t);n.add(e)}),!n.isEmpty()&&this.get("isSelectable")){var r=new i(e.toJSON());r.set("name","unkown: "+this.get("name")),n.add(r)}this._addListenersToChildren(),this.on("change:selected",e._onSelectChange),this._updateCount()},serialize:function(t){var e={},n=this.get("children");return t.includeUnselected?(this.get("filterId")&&!this._isInIgnoreList(this.get("filterId"))?e[this.get("filterId")]=t.wholeModel?[this]:[this.id]:e.unassigned=t.wholeModel?[this]:[this.id],this._serializeChildren(e,n,t)):(this.get("selected")&&(this.get("filterId")&&!this._isInIgnoreList(this.get("filterId"))?e[this.get("filterId")]=t.wholeModel?[this]:[this.id]:e.unassigned=t.wholeModel?[this]:[this.id]),n.length>0?this._serializeChildren(e,n,t):this.get("selected")&&(this.get("filterId")&&!this._isInIgnoreList(this.get("filterId"))?e[this.get("filterId")]=t.wholeModel?[this]:[this.id]:e.unassigned=t.wholeModel?[this]:[this.id])),this._mergeUnassigned(e),e},_isInIgnoreList:function(t){return this.ignoreList.indexOf(t)>-1},_serializeChildren:function(t,e,n){e.each(function(e){var i=e.serialize(n);a.each(i,function(e,n){e&&(t[n]?t[n]=t[n].concat(e):t[n]=e)})})},_mergeUnassigned:function(t){if(this.get("filterId")){var e=this.get("filterId");t[e]&&t.unassigned?(t[e]=t[e].concat(t.unassigned),delete t.unassigned):t.unassigned&&(t[e]=t.unassigned,delete t.unassigned)}},deserialize:function(t){var e=this,n=this.get("children");n.length>0&&n.each(function(n){!n.get("filterId")&&e.get("filterId")&&n.set("filterId",e.get("filterId")),n.deserialize(t)}),t[this.get("filterId")]&&(this.isInFilters(t,this.id)?this.set("selected",!0,{propagation:!0}):0===n.length&&this.set("selected",!1,{propagation:!0}))},isInFilters:function(t,e){var n=!1;return this.ignoreOrgGroupList.indexOf(this.get("filterId"))>-1&&1==this.get("isOrgGroup")||(n=t[this.get("filterId")].indexOf(this.id)>-1),n},_onSelectChange:function(t,e,n){var i=this,a=this.get("children");this.get("selected")?this.set("numSelected",this.get("numPossible")):this.set("numSelected",0),a.isEmpty()||i._updateChildNodes(n.propagation),n.propagation&&i.trigger("updateCount")},_addListenersToChildren:function(){var t=this,e=this.get("children");e.each(function(n){n.on("change:visible",function(){e.findWhere({visible:!0})?t.set({visible:!0}):t.set({visible:!1})}),n.on("updateCount",function(){t._updateCount(),t.trigger("updateCount")})})},_updateCount:function(){var t=this.get("children"),e={selected:0,possible:0};t.isEmpty()?e={selected:this.get("selected")?1:0,possible:1}:t.each(function(t){e.selected+=t.get("numSelected"),e.possible+=t.get("numPossible")}),this.set("numSelected",e.selected),this.set("numPossible",e.possible)},_updateChildNodes:function(t){var e=this,n=this.get("children");n.isEmpty()||n.each(function(n){n.set("selected",e.get("selected"),{propagation:t})})},filterText:function(t){var e=this.get("children");e.isEmpty()?this.get("name")&&this.get("name").toLowerCase().indexOf(t)>-1?this.set("visible",!0):this.set("visible",!1):(this.get("name")&&this.get("name").toLowerCase().indexOf(t)>-1&&this.set("visible",!0),e.each(function(e){e.filterText(t)}))}}),e.exports=i},{backbone:"backbone",underscore:"underscore"}],78:[function(t,e,n){var i=t("underscore"),a=t("backbone"),r=t("jquery"),o='<div class="node small">\n  <div class="selectable"></div>\n  <div class="toggle-nav">\n    <% if(name.length > 63){ %>\n      <span title="<%= name %>"><%= name.substring(0,60) %>...</span>\n    <% } else { %>\n      <%= name %>\n    <% } %>\n\n\n    <span class="count">(<%= numSelected %> / <%= numPossible %>)</span>\n    <span class="expanded">+</span>\n  </div>\n\n  <% /*TODO: fix hardcode of \'unkown\' */\n  if (obj.name && obj.name.indexOf("unkown")>-1) { %>\n    &nbsp;<a href="#"\n      data-toggle="popover"\n      data-container="body"\n      data-placement="right"\n      data-trigger="click"\n      data-content="projects that aren\'t tagged to a specific child.">\n      <span class="glyphicon glyphicon-info-sign"></span>\n    </a>\n  <%}%>\n</div>\n',s=a.View.extend({tagName:"li",className:"parent_li",template:i.template(o),isRoot:!1,initialize:function(t){i.isUndefined(t)||i.isUndefined(t.isRoot)||(this.isRoot=t.isRoot)},render:function(t){return this.model=t,t&&(this.$el.html(this.template(t.toJSON())),this.renderChildren()),this},renderChildren:function(){var t=r("<ul>");this.$el.append(t);var e=this.model.get("children");e.isEmpty()?(this.$(".expanded").remove(),this.$("> .node > .toggle-nav > .count").text("")):e.each(function(e){var n=new s;t.append(n.render(e).$el)}),this._addModelListeners(),this._addUIListeners(),this._updateSelection(),this._updateExpanded(t)},_addModelListeners:function(){var t=this;this.model.on("change:selected",function(){t._updateSelection()}),this.model.on("change:expanded",function(){t._updateExpanded()}),this.model.on("change:numSelected",function(){t._updateCountUI()}),this.model.on("change:visible",function(){t._updateVisibility()})},_addUIListeners:function(){var t=this;this.$("> .node > .selectable").on("click",function(){t.clickBox()}),this.$("> .node > .toggle-nav").on("click",function(){t.clickName()})},_updateSelection:function(){this._updateCheckboxFill()},_updateCountUI:function(){this.model.get("children").isEmpty()||(this.$("> .node > .toggle-nav > .count").text("("+this.model.get("numSelected")+" / "+this.model.get("numPossible")+")"),this._updateCheckboxFill())},_updateVisibility:function(){this.model.get("visible")?this.$el.show():this.$el.hide()},_updateCheckboxFill:function(){this.model.get("children").isEmpty()?this.model.get("selected")?this.$("> .node > .selectable").addClass("selected"):this.$("> .node > .selectable").removeClass("selected"):this.model.get("numSelected")>0?this.model.get("numSelected")<this.model.get("numPossible")?(this.$("> .node > .selectable").addClass("half-fill"),this.$("> .node > .selectable").removeClass("selected")):(this.$("> .node > .selectable").removeClass("half-fill"),this.$("> .node > .selectable").addClass("selected")):0===this.model.get("numSelected")&&(this.$("> .node > .selectable").removeClass("half-fill"),this.$("> .node > .selectable").removeClass("selected"))},_updateExpanded:function(t){var e=this.$("> .node > .toggle-nav > .expanded");this.model.get("expanded")?(this.expand(),e.text("-"),e.addClass("open").removeClass("closed")):(this.collapse(),t&&t.find("> li").hide(),e.text("+"),e.addClass("closed").removeClass("open"))},clickBox:function(){this.isRoot?this.model.set("selected",!this.model.get("selected")):this.model.set("selected",!this.model.get("selected"),{propagation:!0})},clickName:function(){this.model.get("children").isEmpty()?this.clickBox():this.model.set("expanded",!this.model.get("expanded"))},collapse:function(){var t=this.$el.find(" > ul > li");t.hide("fast")},expand:function(){var t=this.$el.find(" > ul > li");t.show("fast")}});e.exports=s},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],79:[function(t,e,n){var i=t("underscore"),a=function(t,e,n,a){if(e=e||{},i.isUndefined(e.date)||i.isEmpty(e.date)){e.date=e.date||{start:"",end:""};var r=t.get(n);void 0!==r&&""!==r&&(e.date.start=r);var o=t.get(a);void 0!==o&&""!==o&&(e.date.end=o)}};e.exports={extractDates:a}},{underscore:"underscore"}],80:[function(t,e,n){var i=t("underscore"),a=t("jquery"),r=t("backbone"),o="<li>\n\t<a href=\"#\">\n\t\t<span data-i18n=\"amp.gis:pane-subfilters-<%= name.replace(/ /g,'') %>\">\n\t\t\t<%= name %>\n\t\t</span>   \n\t\t<span class='filter-count small pull-right'></span>\n\t</a>\n</li>",s='<%\n  // this renders the "big" filter list (the tabs)\n%>\n<div class="panel-heading">\n  <a type="button" class="close cancel"  aria-hidden="true">&times;</a>\n  <h3 data-i18n="amp.gis:title-filters" class="panel-title">Filters</h3>\n</div>\n<div class="panel-body filter-body">\n\n  <ul class="nav nav-tabs filter-titles" role="tablist">\n  </ul>\n\n  <div class="tab-content filter-options">\n    <img src="img_2/loading-icon.gif" />\n  </div>\n</div>\n<div class="panel-footer">\n  &nbsp;\n  <div class="pull-right" style="display: inline-block; margin-bottom: 5px;">\n    <button type="button" class="btn btn-sm btn-danger reset"  data-i18n="amp.gis:button-reset"  title="Turn off all filters.">Reset</button>\n    <button type="button" class="btn btn-sm btn-warning cancel"  data-i18n="amp.gis:button-cancel"  title="Revert filters to state when opened.">Cancel</button>\n    <button type="button" class="btn btn-sm btn-success apply"  data-i18n="amp.gis:button-apply" >Apply</button>\n  </div>\n</div>\n';e.exports=r.View.extend({className:"filter-type",titleTemplate:i.template(o),contentTemplate:i.template(s),initialize:function(t){this.app=t.app},renderFilters:function(){},renderTitle:function(){var t=this;return this.titleEl=this.titleTemplate(this.model.toJSON()),this.$titleEl=a(this.titleEl),this.$titleEl.on("click",function(e){return a(this).siblings().removeClass("active"),a(this).addClass("active"),t.$el.html(""),t.renderFilters(),!1}),this}})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],81:[function(t,e,n){var i=t("jquery"),a=t("underscore"),r=t("backbone"),o=t("amp-translate"),s=t("../views/top-level-filter-view"),l=t("../collections/all-filters-collection"),d='<%\n  // this renders the "big" filter list (the tabs)\n%>\n<div class="panel-heading">\n  <a type="button" class="close cancel"  aria-hidden="true">&times;</a>\n  <h3 data-i18n="amp.gis:title-filters" class="panel-title">Filters</h3>\n</div>\n<div class="panel-body filter-body">\n\n  <ul class="nav nav-tabs filter-titles" role="tablist">\n  </ul>\n\n  <div class="tab-content filter-options">\n    <img src="img_2/loading-icon.gif" />\n  </div>\n</div>\n<div class="panel-footer">\n  &nbsp;\n  <div class="pull-right" style="display: inline-block; margin-bottom: 5px;">\n    <button type="button" class="btn btn-sm btn-danger reset"  data-i18n="amp.gis:button-reset"  title="Turn off all filters.">Reset</button>\n    <button type="button" class="btn btn-sm btn-warning cancel"  data-i18n="amp.gis:button-cancel"  title="Revert filters to state when opened.">Cancel</button>\n    <button type="button" class="btn btn-sm btn-success apply"  data-i18n="amp.gis:button-apply" >Apply</button>\n  </div>\n</div>\n',c='<%\n// renders the title of a tab \n%>\n<li class=""><a data-i18n="amp.gis:pane-filters-<%= name.replace(/ /g,\'\') %>" href="#filter-pane-<%= name.replace(/ /g,\'\') %>" role="tab" data-toggle="tab"><%= name %></a></li>\n',u=t("../../../../../reamp/tools/log")("amp:filters:top-level:view"),h=t("../models/general-settings"),p=t("../utils/date-utils"),f={donors:"Funding Organizations",sectors:"Sectors",programs:"Programs",activity:"Activity",allAgencies:"All Agencies",financials:"Financial",locations:"Location",others:"Other"};e.exports=r.View.extend({id:"tool-filters",name:"Filters",apiURL:"/rest/filters",events:{"click .apply":"applyFilters","click .cancel":"cancel","click .reset":"resetFilters"},PARAMS_DATE_FORMAT:"yy-mm-dd",initialize:function(t){var e=this;this.draggable=t.draggable,this.caller=t.caller,this.settings=new h,this.settings.fetch(),this.filterViewsInstances={},this.template=a.template(d),this.titleTemplate=a.template(c),this.dateFormatMappings=[],this.dateFormatMappings.push({ampformat:"dd/MMM/yyyy",datepickerformat:"dd/M/yy"}),this.dateFormatMappings.push({ampformat:"MMM/dd/yyyy",datepickerformat:"M/dd/yy"}),this.dateFormatMappings.push({ampformat:"dd/MM/yyyy",datepickerformat:"dd/mm/yy"}),this.dateFormatMappings.push({ampformat:"MM/dd/yyyy",datepickerformat:"mm/dd/yy"}),void 0===t.translator?this.createTranslator():this.translator=t.translator,this.firstRender=!0,this._createTopLevelFilterViews(),this.allFilters=new l([],t),this._loaded=this.allFilters._loaded,this._getFilterList().then(function(){return e.allFilters.each(function(t){if(t.get("empty"))for(key in f)f.hasOwnProperty(key)&&f[key]==t.get("group")&&(delete f[key],delete e.filterViewsInstances[key]);else e._createFilterViews(t)}),this})},_createTopLevelFilterViews:function(){for(key in f)f.hasOwnProperty(key)&&(this.filterViewsInstances[key]=new s({name:f[key],translator:this.translator,translate:this.translate,filterView:this}))},render:function(){var t=this;return this.$el.addClass("panel panel-primary"),this.draggable&&this.$el.draggable({cursor:"move",containment:"window"}),this.firstRender=!0,this.firstRender?(this.$el.html(this.template({})),this.$el.show(),this._getFilterList().done(function(){t.renderFilters(),t.translate(this.$el)}),i(document).on("shown.bs.tab click","ul.nav.filter-titles>li>a[data-toggle='tab']",function(t){var e=i(t.target.parentElement).index(),n=t.relatedTarget?i(t.relatedTarget.parentElement).index():-1;u.log("switching from filters tab",n,"to tab",e),i(t.target).closest("ul.filter-titles").attr("active-tab-number",e);var a=i(t.target).attr("href"),r=i(a).find("ul.sub-filters-titles>li:first a");r&&r.click()}),this.firstRender=!1):t.translate(),this},createTranslator:function(t){var e=this,n=JSON.parse('{\n  "amp.gis:title-Country": "Country",\n  "amp.gis:title-Region": "Region",\n  "amp.gis:title-Zone": "Zone",\n  "amp.gis:title-District": "District",\n  "amp.gis:title-filters": "Filter",\n  "amp.gis:pane-filters-search": "Go",\n  "amp.gis:pane-filters-select": "select all",\n  "amp.gis:pane-filters-deselect": "deselect all",\n  "[placeholder]amp.gis:pane-filters-search-placeholder": "Search...",\n  "amp.gis:pane-filters-FundingOrganizations": "Funding Organizations",\n  "amp.gis:pane-filters-Sector": "Sector",\n  "amp.gis:pane-filters-Sectors": "Sectors",\n  "amp.gis:pane-filters-Programs": "Programs",\n  "amp.gis:pane-filters-Activity": "Activity",\n  "amp.gis:pane-filters-AllAgencies": "All Agencies",\n  "amp.gis:pane-filters-Financial": "Financial",\n  "amp.gis:pane-filters-Location": "Location",\n  "amp.gis:pane-filters-Other": "Other",\n  "amp.gis:pane-subfilters-Donor": "Donor",\n  "amp.gis:pane-subfilters-Primary": "Primary",\n  "amp.gis:pane-subfilters-Secondary": "Secondary",\n  "amp.gis:pane-subfilters-NationalPlanObjective": "National Plan Objective",\n  "amp.gis:pane-subfilters-ActivityStatus": "Activity Status",\n  "amp.gis:pane-subfilters-ApprovalStatus": "Approval Status",\n  "amp.gis:pane-subfilters-ImplementingAgency": "Implementing Agency",\n  "amp.gis:pane-subfilters-ExecutingAgency": "Executing Agency",\n  "amp.gis:pane-subfilters-BeneficiaryAgency": "Beneficiary Agency",\n  "amp.gis:pane-subfilters-ContractingAgency": "Contracting Agency",\n  "amp.gis:pane-subfilters-AidModality": "Aid Modality",\n  "amp.gis:pane-subfilters-TypeOfAssistance": "Type Of Assistance",\n  "amp.gis:pane-subfilters-ResponsibleOrganization": "Responsible Organization",\n  "amp.gis:pane-subfilters-ComponentFundingOrganization": "Component Funding Organization",\n  "amp.gis:pane-subfilters-ComponentSecondResponsibleOrganization": "Component Second Responsible Organization",\n  "amp.gis:pane-subfilters-Dates": "Dates",\n  "amp.gis:pane-subfilters-RegionalGroup": "Regional Group",\n  "amp.gis:pane-subfilters-SectorGroup": "Sector Group",\n  "amp.gis:pane-subfilters-TertiarySectors": "Tertiary Sectors",\n  "amp.gis:pane-subfilters-FinancingInstruments": "Financing Instruments",\n  "amp.gis:pane-filters-all": "all",\n  "amp.gis:button-reset": "Reset",\n  "amp.gis:button-cancel": "Cancel",\n  "amp.gis:button-apply": "Apply",\n  "amp.gis:pane-subfilters-startdate": "Start Date:",\n  "amp.gis:pane-subfilters-enddate": "End Date:",\n  "amp.gis:pane-subfilters-empty": "No data for this filter",\n  "amp.gis:date-from": "From",\n  "amp.gis:date-until": "Until"\n}\n');e.popovers=e.$('[data-toggle="popover"]'),e.popovers.popover(),t!==!0&&void 0!==e.translator||(u.onDebug(function(){u.log("Creating translator for filters because",t===!0?"I was forced":"there is no translator")}),e.translator=new o({defaultKeys:n}))},translate:function(t){var e=this;void 0!==t&&(e=t),void 0!==e.el?this.translator.translateDOM(e.el):this.translator.translateDOM(e)},renderFilters:function(){this.$(".filter-options").html("");var t=-1,e=this.$(".filter-titles").attr("active-tab-number")||0;for(var n in this.filterViewsInstances)if(this.filterViewsInstances.hasOwnProperty(n)){contained=!1;var i;for(i=0;i<this.allFilters.length;i++)if(this.allFilters.models[i].attributes.tab===this.filterViewsInstances[n].name||this.allFilters.models[i].attributes.group===this.filterViewsInstances[n].name){contained=!0;break}if(!contained){delete this.filterViewsInstances[n];continue}var a=this.filterViewsInstances[n];t+=1,this.$(".filter-titles").append(a.renderTitle().titleEl);var r=t==e;this.$(".filter-options").append(a.renderFilters(r).el)}this.$(".filter-titles a:first").tab("show")},_getFilterList:function(){return this.allFilters.load()},_createFilterViews:function(t){switch(t.get("group")){case"ActivityBudgetList":case"type-of-assistance":case"mode-of-payment":case"expenditure-class":case"financing-instrument":case"funding-status":case"effective-funding-date":case"funding-closing-date":case"concessionality-level":case"on-off-treasury-budget":this.filterViewsInstances.financials.filterCollection.add(t);break;case"status":case"performance-alert-level":case"performance-alert-type":case"approval-status":this.filterViewsInstances.activity.filterCollection.add(t);break;case"Programs":this.filterViewsInstances.programs.filterCollection.add(t);break;case"Sectors":this.filterViewsInstances.sectors.filterCollection.add(t);break;case"Donor":this.filterViewsInstances.donors.filterCollection.add(t);break;case"Role":this.filterViewsInstances.allAgencies.filterCollection.add(t);
break;case"location":this.filterViewsInstances.locations.filterCollection.add(t);break;default:this.filterViewsInstances.others.filterCollection.add(t)}},serializeToModels:function(t){var e=this;if(e.values={0:[],1:[],2:[],3:[]},t.get("tree")){var n=t.get("tree").get("children");t.get("numSelected")!==t.get("numPossible")&&a.each(n.models,function(t){e.serializeLevel(t,0,e.values)})}else e.values=t;return e.values},serializeLevel:function(t,e,n){var i=this;t.get("children").models.length>0?t.get("numSelected")!==t.get("numPossible")&&t.get("selected")===!1?a.each(t.get("children").models,function(t){i.serializeLevel(t,e+1,n)}):(void 0===n[e],n[e].push({level:e,levelName:t.get("filterId"),name:t.get("name")})):t.get("selected")===!0&&(void 0===n[e],n[e].push({level:e,levelName:t.get("filterId"),name:t.get("name")}))},serialize:function(t){var e=this,n={filters:{}};return this.allFilters.each(function(i){if(i.get("id")||i.url){var r=i.serialize(t),o=[];if(t.wholeModel===!0&&r){for(var s in r)o.push(s);void 0!==o[0]&&void 0!==r[o[0]]&&(r[o[0]].filterName=i.get("displayName")||i.get("name"))}void 0!==o[0]&&void 0!==r[o[0]]&&"DATE-RANGE-VALUES"!==i.get("modelType")&&"YEAR-SINGLE-VALUE"!==i.get("modelrmType")&&(r[o[0]].serializedToModels=e.serializeToModels(i)),a.extend(n.filters,r)}}),a.each(n,function(t,e){t&&!a.isEmpty(t)||delete n.filters[e]}),n},deserialize:function(t,e){var n=t.filters||{};if(n){a.isUndefined(this.initialFilters)&&(this.initialFilters=n);var i=this;i.allFilters.each(function(t){t.reset(),(t.get("id")||t.url)&&("DATE-RANGE-VALUES"===t.get("modelType")?(i.setDefaultDates(n),t.deserialize(n)):t.deserialize(n))})}else console.warn("could not deserialize blob:",n);e&&e.silent||this.applyFilters()},showFilters:function(){this.render(),this.filterStash=null,this._loaded.done(a.bind(function(){this.filterStash=this.serialize({})},this))},setStash:function(){this.filterStash=null,this._loaded.done(a.bind(function(){this.filterStash=this.serialize({})},this))},resetFilters:function(){var t=this,e=a.isUndefined(this.initialFilters)?{}:JSON.parse(JSON.stringify(this.initialFilters));this.allFilters.each(function(n){"DATE-RANGE-VALUES"===n.get("modelType")?(t.setDefaultDates(e),n.deserialize(e)):n.reset()})},applyFilters:function(){this._loaded.done(a.bind(function(){var t=this.serialize({});this.trigger("apply",t)},this))},getDateFormat:function(){if(this.dFormat)return this.dFormat;var t=this.settings.get("default-date-format");if(t){var e=a.findWhere(this.dateFormatMappings,{ampformat:t});e&&(this.dFormat=e.datepickerformat)}return this.dFormat||(this.dFormat=this.PARAMS_DATE_FORMAT),this.dFormat},formatDate:function(t){return i.datepicker.formatDate(this.getDateFormat(),i.datepicker.parseDate(this.PARAMS_DATE_FORMAT,t))},setDefaultDates:function(t){var e=this;return"DASHBOARD"===e.caller?p.extractDates(e.settings,t,"dashboard-default-min-date","dashboard-default-max-date"):"GIS"===e.caller?p.extractDates(e.settings,t,"gis-default-min-date","gis-default-max-date"):t},cancel:function(){this.filterStash&&this.deserialize(this.filterStash,{silent:!0}),this.trigger("cancel",this.filterStash)}})},{"../../../../../reamp/tools/log":101,"../collections/all-filters-collection":67,"../models/general-settings":72,"../utils/date-utils":79,"../views/top-level-filter-view":83,"amp-translate":99,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],82:[function(t,e,n){var i=t("underscore"),a=t("../tree/tree-node-view"),r=t("../views/base-filter-view"),o='<% if (!empty) { %>\n\t<div class="search-form">\n\t  <div class="input-group form-group">\n\t    <input type="text" data-i18n="[placeholder]amp.gis:pane-filters-search-placeholder" class="form-control search-text" placeholder="Search...">\n\t    <span class="input-group-btn">\n\t      <button data-i18n="amp.gis:pane-filters-search" class="btn btn-success">Go</button>\n\t    </span>\n\t  </div><!-- /input-group -->\n\t</div>\n\t<div class="toggle-all">\n\t  <em>\n\t    <div class="toggle-all-div"><a href="#" data-i18n="amp.gis:pane-filters-select" class="select-all" >select\n\t\t\tall</a></div> /\n\t\t<div class="toggle-all-div"><a href="#"  data-i18n="amp.gis:pane-filters-deselect" class="select-none" >deselect all</a></div>\n\t  </em>\n\t</div>\n\t\n\t<div class="tree tree-container" style=""></div><!--display:none;-->\n<% } else { %>\n\t<span data-i18n=\'amp.gis:pane-subfilters-empty\'></span>\n<% } %>\n';e.exports=r.extend({className:r.prototype.className+" filter-generic",template:i.template(o),_loaded:null,events:{},initialize:function(t){var e=this;r.prototype.initialize.apply(this,[t]),this.model=t.model,this.translator=t.translator,this.translate=t.translate,this.treeView=new a({isRoot:!0}),this.model.getTree().then(function(t){t?(e._updateCountInMenu(),t.on("change:numSelected",function(){e._updateCountInMenu()})):console.warn("no tree for: ",e.model)})},searchKeyUp:function(t){(13===t.keyCode||""===this.$(".search-text").val()||this.$(".search-text").val().length>1)&&this.model.get("tree").filterText(this.$(".search-text").val().toLowerCase())},_updateCountInMenu:function(){this.$titleEl&&this.model.get("tree")&&(this.model.get("tree").get("numSelected")===this.model.get("tree").get("numPossible")||0===this.model.get("tree").get("numSelected")?(this.$titleEl.find(".filter-count").attr("data-i18n","amp.gis:pane-filters-all"),this.$el.removeClass("active"),this.translate(this.$titleEl.find(".filter-count").parent())):(this.$titleEl.find(".filter-count").text(this.model.get("tree").get("numSelected")+"/"+this.model.get("tree").get("numPossible")),this.$el.addClass("active"),this.$titleEl.find(".filter-count").attr("data-i18n","")))},renderTitle:function(){return r.prototype.renderTitle.apply(this),this._updateCountInMenu(),this},renderFilters:function(){var t=this;return r.prototype.renderFilters.apply(this),this.model.getTree().then(function(e){t.$el.html(t.template(t.model.toJSON())),t.$(".select-none").on("click",function(){return t._selectNone(),!1}),t.$(".select-all").on("click",function(){return t._selectAll(),!1}),t.$("input.search-text").on("keyup",function(e){t.searchKeyUp(e)}),e?(t.$(".tree-container").append(t.treeView.render(t.model.get("tree")).$el),e.set("expanded",!0),e.filterText("")):t.$(".tree-container").append("")}).done(function(){t.translate(t)}).fail(function(){console.error("renderFilters failed :(")}),this},_selectAll:function(){this.model.get("tree").set("selected",!1),this.model.get("tree").set("selected",!0)},_selectNone:function(){this.model.get("tree").set("selected",!0),this.model.get("tree").set("selected",!1)}})},{"../tree/tree-node-view":78,"../views/base-filter-view":80,underscore:"underscore"}],83:[function(t,e,n){var i=t("underscore"),a=t("jquery"),r=t("backbone"),o='<%\n// renders the title of a tab \n%>\n<li class=""><a data-i18n="amp.gis:pane-filters-<%= name.replace(/ /g,\'\') %>" href="#filter-pane-<%= name.replace(/ /g,\'\') %>" role="tab" data-toggle="tab"><%= name %></a></li>\n',s='<%\n // renders the contents of a filter\'s tab (e.g. for example the "Contracting / Implementing / Executing / Primary Beneficiary / Secondary Beneficiary Agency" list of the "All Agencies" tab)\n // <h6>mde  %- Math.random() </h6>\n%>\n<ul class="sub-filters-titles nav nav-pills nav-stacked">\n</ul>\n<div class="sub-filters-content">\n  <img src="img_2/loading-icon.gif" />\n</div>\n',l=t("../views/generic-filter-view"),d=t("../views/years-filter-view"),c=t("../views/years-only-filter-view"),u=t("../models/years-filter-model"),h=t("../models/years-only-filter-model");t("../../../../../reamp/tools/log")("amp:filters:top-level:view");e.exports=r.View.extend({className:"tab-pane",titleTemplate:i.template(o),contentTemplate:i.template(s),filterCollection:null,viewList:[],name:"tbd",initialize:function(t){var e=this;this.name=t.name,this.translator=t.translator,this.translate=t.translate,this.filterView=t.filterView,this.filterCollection=new r.Collection,this.filterCollection.on("change:numSelected",function(){e._refreshTitle()})},cleanupUnusedTabs:function(){console.log(this)},renderFilters:function(t){var e=this,n=null,i=!0;return this.$el.attr("id","filter-pane-"+this.name.replace(/ /g,"")),this.$el.html(this.contentTemplate()),this.filterCollection.each(function(a){a instanceof u?(n=new d({model:a,el:e.$(".sub-filters-content"),translator:e.translator,translate:e.translate,filterView:e.filterView}),e.viewList.push(n)):a instanceof h?(n=new c({model:a,el:e.$(".sub-filters-content"),translator:e.translator,translate:e.translate,filterView:e.filterView}),e.viewList.push(n)):(n=new l({model:a,el:e.$(".sub-filters-content"),translator:e.translator,translate:e.translate}),e.viewList.push(n));var r=n.renderTitle().$titleEl;e.$(".sub-filters-titles").append(r),i&&t&&(i=!1,n.renderFilters(),e.$(".sub-filters-titles li:first").addClass("active"))}),e.translate(this),this},_refreshTitle:function(){var t=0,e="";this.filterCollection.each(function(e){e.getNumSelected&&(t+=e.getNumSelected())}),0!==t&&(e=t),a("#"+this.name.replace(/ /g,"")+" .title-count").text(e)},renderTitle:function(){return this.titleEl=this.titleTemplate({name:this.name}),this}})},{"../../../../../reamp/tools/log":101,"../models/years-filter-model":75,"../models/years-only-filter-model":76,"../views/generic-filter-view":82,"../views/years-filter-view":84,"../views/years-only-filter-view":85,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],84:[function(t,e,n){var i=t("underscore"),a=t("../views/base-filter-view");t("../lib/jquery.nouislider.min.js"),t("jquery-ui/datepicker");var r='\n  <h3 class="title text-center"><span class="dates"></span></h3>\n   <div class="year-slider"></div>\n\n   <span data-i18n="amp.gis:pane-subfilters-startdate">Start Date:</span>&nbsp<p><input type="text" id="start-date" class="date-picker"></p>\n   <span data-i18n="amp.gis:pane-subfilters-enddate">End Date:</span>&nbsp<p><input type="text" id="end-date" class="date-picker"></p>\n';e.exports=a.extend({className:a.prototype.className+" filter-years",template:i.template(r),_loaded:null,initialize:function(t){this.filterView=t.filterView,a.prototype.initialize.apply(this,[t]),this.model=t.model,this.translator=t.translator,this.translate=t.translate,this._loaded=this.model.fetch().then(function(){}),this.listenTo(this.model,"change",this._updateTitle)},renderFilters:function(){var t=this;return a.prototype.renderFilters.apply(this),this.$el.html(this.template(this.model.toJSON())),this._loaded.then(function(){t._renderDatePickers(),t._updateTitle(),t.translate(t)}),this},_renderDatePickers:function(){var t=this;this.$("#start-date").datepicker({defaultDate:this.model.get("selectedStart"),dateFormat:this.filterView.getDateFormat(),changeMonth:!0,changeYear:!0,numberOfMonths:1,yearRange:"c-60:c+60",isRTL:t.getDirection(),onClose:function(e){t.$("#end-date").datepicker("option","minDate",e),t.model.set("selectedStart",$.datepicker.formatDate(t.filterView.PARAMS_DATE_FORMAT,$.datepicker.parseDate(t.filterView.getDateFormat(),e)))}}),this.$("#end-date").datepicker({defaultDate:this.model.get("selectedEnd"),dateFormat:this.filterView.getDateFormat(),changeMonth:!0,changeYear:!0,numberOfMonths:1,yearRange:"c-60:c+60",isRTL:t.getDirection(),onClose:function(e){t.$("#start-date").datepicker("option","maxDate",e),t.model.set("selectedEnd",$.datepicker.formatDate(t.filterView.PARAMS_DATE_FORMAT,$.datepicker.parseDate(t.filterView.getDateFormat(),e)))}});var e=this.filterView.settings.get("language");e&&(e="en"===e?"":e,$.datepicker.setDefaults($.datepicker.regional[e]))},renderTitle:function(){return a.prototype.renderTitle.apply(this),this._updateTitle(),this},getDirection:function(){var t=!1;return this.filterView&&this.filterView.settings&&(t=this.filterView.settings.get("rtl-direction")),t},_updateTitle:function(){var t=this.model.get("selectedStart")?$.datepicker.formatDate(this.filterView.getDateFormat(),$.datepicker.parseDate(this.filterView.PARAMS_DATE_FORMAT,this.model.get("selectedStart"))):"",e=this.model.get("selectedEnd")?$.datepicker.formatDate(this.filterView.getDateFormat(),$.datepicker.parseDate(this.filterView.PARAMS_DATE_FORMAT,this.model.get("selectedEnd"))):"";$("#datePicker").datepicker({dateFormat:this.filterView.getDateFormat()}),this.$("#start-date").datepicker("setDate",t),this.$("#end-date").datepicker("setDate",e);var n="";t.length>0&&e.length>0?n=t+" - "+e:t.length>0&&0==e.length?n='<div class="filter-count-div">'+this.translator.translateSync("amp.gis:date-from","From")+"</div> "+t:0==t.length&&e.length>0&&(n='<div class="filter-count-div">'+this.translator.translateSync("amp.gis:date-until","Until")+"</div> "+e),this.$titleEl.find(".filter-count").html(n),this.$(".dates").html(n)},_renderSlider:function(){var t=this;this.slider=window.jQuery(this.$(".year-slider")).noUiSlider({start:[t.model.get("selectedStart"),t.model.get("selectedEnd")],step:1,connect:!0,range:{min:t.model.get("startYear"),max:t.model.get("endYear")},serialization:{lower:[window.jQuery.Link({target:window.jQuery(".start-year")})],upper:[window.jQuery.Link({target:window.jQuery(".end-year")})],format:{decimals:0}}}),this.slider.on("change",function(){t.model.set("selectedStart",parseInt(t.$(".start-year").text(),10))}),this.slider.on("change",function(){t.model.set("selectedEnd",parseInt(t.$(".end-year").text(),10))})}})},{"../lib/jquery.nouislider.min.js":69,"../views/base-filter-view":80,"jquery-ui/datepicker":63,underscore:"underscore"}],85:[function(t,e,n){var i=t("underscore"),a=t("../views/base-filter-view"),r='<span data-i18n="amp.gis:pane-subfilters-year">Year:</span>\r\n&nbsp\r\n<p>\r\n\t<select id="year-select" class=""></select>\r\n</p>';e.exports=a.extend({className:a.prototype.className+" filter-years",template:i.template(r),_loaded:null,initialize:function(t){this.filterView=t.filterView,a.prototype.initialize.apply(this,[t]),this.model=t.model,this.translator=t.translator,this.translate=t.translate,this._loaded=this.model.fetch().then(function(){}),this.listenTo(this.model,"change",this._updateTitle)},renderFilters:function(){var t=this;return a.prototype.renderFilters.apply(this),this.$el.html(this.template(this.model.toJSON())),this._loaded.then(function(){t._renderSelector(),t.translate(t)}),this},_renderSelector:function(){var t=this,e=this.$("#year-select");e.append($("<option>").attr("value","").text("")),i.each(this.model.get("value").options,function(n,i){var a=$("<option>").attr("value",n.value).text(n.value);n.value===t.model.get("selectedYear").toString()&&$(a).attr("selected","selected"),e.append(a)}),$(e).on("change",function(){t.model.set("selectedYear",this.value)})},_updateTitle:function(){var t=this.model.get("selectedYear");this.$("#year-select").val(t)}})},{"../views/base-filter-view":80,underscore:"underscore"}],86:[function(t,e,n){e.exports=t(50)},{"/Users/juliandeanquin/dev/code/AmpIntelliJ/amp/TEMPLATE/ampTemplate/node_modules/amp-boilerplate/node_modules/bootstrap/dist/js/bootstrap.js":50}],87:[function(t,e,n){e.exports=t(62)},{"/Users/juliandeanquin/dev/code/AmpIntelliJ/amp/TEMPLATE/ampTemplate/node_modules/amp-filter/node_modules/jquery-ui/core.js":62,jquery:"jquery"}],88:[function(t,e,n){e.exports=t(64)},{"./core":87,"./mouse":89,"./widget":90,"/Users/juliandeanquin/dev/code/AmpIntelliJ/amp/TEMPLATE/ampTemplate/node_modules/amp-filter/node_modules/jquery-ui/draggable.js":64,jquery:"jquery"}],89:[function(t,e,n){e.exports=t(65)},{"./widget":90,"/Users/juliandeanquin/dev/code/AmpIntelliJ/amp/TEMPLATE/ampTemplate/node_modules/amp-filter/node_modules/jquery-ui/mouse.js":65,jquery:"jquery"}],90:[function(t,e,n){e.exports=t(66)},{"/Users/juliandeanquin/dev/code/AmpIntelliJ/amp/TEMPLATE/ampTemplate/node_modules/amp-filter/node_modules/jquery-ui/widget.js":66,jquery:"jquery"}],91:[function(t,e,n){var i=t("jquery").Deferred,a=t("underscore"),r=t("backbone"),o=t("../models/settings-definitions"),s=(t("../common/config"),t("../common/constants"));e.exports=r.Collection.extend({model:o,comparator:"id",firstTime:!0,initialize:function(t,e){this.options=e,this.url=e.definitionUrl,this.app=e.app,this.loaded=new i,a.bindAll(this,"load")},parse:function(t){return t},load:function(){if(this.firstTime){if(this.firstTime=!1,"pending"!==this.loaded.state())return this.loaded.promise();this.fetch({}).then(a(function(){this.loaded.resolve()}).bind(this)).fail(a(function(){this.loaded.reject()}).bind(this))}return this.loaded.promise()},findCurrencyById:function(t){return a.find(this.get(s.CURRENCY_ID).get("value").options,function(e){return e.id===t})},findAmountUnitsById:function(t){return a.find(this.get(s.AMOUNT_UNIT_ID).get("value").options,function(e){return e.id===t})},findAmountUnitsByValue:function(t){return a.find(this.get(s.AMOUNT_UNIT_ID).get("value").options,function(e){return e.value===t})},findCalendarById:function(t){return a.find(this.get(s.CALENDAR_ID).get("value").options,function(e){return e.id===t})},findFundingTypeById:function(t){return a.find(this.get(s.FUNDING_TYPE_ID).get("value").options,function(e){return e.id===t})},getCurrencySetting:function(){return this.get(s.CURRENCY_ID)},getAmountUnitsSetting:function(){return this.get(s.AMOUNT_UNIT_ID)},getCalendarSetting:function(){return this.get(s.CALENDAR_ID)},getFundingTypeSetting:function(){return this.get(s.FUNDING_TYPE_ID)},getDefaultCurrencyId:function(){return this.getCurrencySetting().get("value").defaultId},getDefaultAmountUnitsId:function(){return this.getAmountUnitsSetting().get("value").defaultId},getDefaultCalendarId:function(){return this.getCalendarSetting().get("value").defaultId},getDefaultFundingTypeById:function(){return this.getFundingTypeSetting().get("value").defaultId},getSelectedOrDefaultCurrencyId:function(){return this.app.toAPIFormat()[s.CURRENCY_ID]||this.getDefaultCurrencyId()},getSelectedOrDefaultCalendarId:function(){return this.app.toAPIFormat()[s.CALENDAR_ID]||this.getDefaultCalendarId()},getSelectedOrDefaultFundingTypeId:function(){return this.app.toAPIFormat()[s.FUNDING_TYPE_ID]||this.getDefaultFundingTypeById()}})},{"../common/config":92,"../common/constants":93,"../models/settings-definitions":96,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],92:[function(t,e,n){e.exports={IS_POPUP:!0}},{}],93:[function(t,e,n){e.exports={YEAR_RANGE_ID:"year-range",CALENDAR_ID:"calendar-id",CURRENCY_ID:"currency-code",FUNDING_TYPE_ID:"funding-type",CALENDAR_CURRENCIES_ID:"calendar-currencies",AMOUNT_FORMAT_ID:"amount-format",AMOUNT_UNIT_ID:"number-divider",AMOUNTS_OPTION_THOUSANDS:1e3,AMOUNTS_OPTION_MILLIONS:1e6,YEAR_FROM_ID:"from",YEAR_TO_ID:"to",CONTEXT:{GIS:"GIS",DASHBOARDS:"DASHBOARDS",REPORTS:"REPORTS",TABS:"TABS"}}},{}],94:[function(t,e,n){function i(){this.initialize.apply(this,arguments)}var a=t("jquery"),r=t("underscore"),o=t("backbone");t("jquery-ui/draggable");var s=t("./common/config"),l=t("./common/constants"),d=t("./collections/settings-definitions-collection"),c=t("./views/settings-view"),u=t("./models/general-settings");(void 0==window.$||$.fn.jquery.split(" ")[0].split(".")[0]<2)&&(window.jQuery=window.$=o.$=a,$.noConflict(!0));var h="function"==typeof $().modal;h&&t("bootstrap/dist/js/bootstrap"),r.extend(i.prototype,o.Events,{Constants:l,initialize:function(t){if(r.isUndefined(t)||r.isUndefined(t.definitionUrl)||r.isUndefined(t.caller))throw new Error("definitionUrl and caller are required for the Settings Widget to function correctly.");t=r.defaults(t,{draggable:!0}),t=r.defaults(t,{isPopup:s.IS_POPUP}),t.app=this,this.definitions=new d([],t),t.definitions=this.definitions,this.view=new c(t),this.listenTo(this.view,"all",function(){this.trigger.apply(this,arguments)}),this.definitions.load(),r.bindAll(this,"show","toAPIFormat","restoreFromSaved","setElement")},show:function(){this.view.render()},toAPIFormat:function(){return this.view.getCurrent()},restoreFromSaved:function(t){return this.view.restoreFromSaved(t)},setElement:function(arguments){this.view.setElement(arguments)}}),e.exports={SettingsWidget:i,GeneralSettings:u},window.AMPSettings={SettingsWidget:i,GeneralSettings:u}},{"./collections/settings-definitions-collection":91,"./common/config":92,"./common/constants":93,"./models/general-settings":95,"./views/settings-view":97,backbone:"backbone","bootstrap/dist/js/bootstrap":86,jquery:"jquery","jquery-ui/draggable":88,underscore:"underscore"}],95:[function(t,e,n){var i=t("jquery").Deferred,a=t("underscore"),r=t("backbone");e.exports=r.Model.extend({url:"/rest/amp/settings",firstTime:!0,initialize:function(){this.loaded=new i,a.bindAll(this,"load")},parse:function(t){return t},load:function(){if(this.firstTime){if(this.firstTime=!1,"pending"!==this.loaded.state())return this.loaded.promise();this.fetch({}).then(a(function(){this.loaded.resolve()}).bind(this)).fail(a(function(){this.loaded.reject()}).bind(this))}return this.loaded.promise()}})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],96:[function(t,e,n){var i=(t("underscore"),t("backbone"));e.exports=i.Model.extend({})},{backbone:"backbone",underscore:"underscore"}],97:[function(t,e,n){var i=t("jquery"),a=t("underscore"),r=t("backbone"),o=t("amp-translate"),s='<% if(obj.isPopup) {%>\r\n<div class="panel-heading">\r\n\t\t\t<button type="button" class="close cancel" aria-hidden="true">x</button>\r\n\t\t\t<h3 class="panel-title" data-i18n="amp.settings:title">Settings</h3>\r\n</div>\r\n<%}%>\r\n<div class="panel-body">\t\t\r\n<div class="container-fluid">\r\n  <div class="settings">\r\n    Loading...\r\n  </div>\r\n  <% if(!obj.isPopup) {%>\r\n  <div class="form-group">\r\n  \t<button type="button" class="btn btn-success apply-btn" data-i18n="amp.settings:apply-button">Apply</button>\r\n  </div>\r\n  <%}%>\r\n</div>\r\n</div>\r\n<% if(obj.isPopup) {%>\r\n<div class="panel-footer setting-dialog-footer">\r\n    <button type="button" class="btn btn-warning cancel-btn cancel" data-i18n="amp.settings:cancel-button">Cancel</button>\r\n  \t<button type="button" class="btn btn-success apply-btn" data-i18n="amp.settings:apply-button">Apply</button>\r\n </div>\r\n <%}%>\r\n \r\n \r\n',l='<div class="form-group">\n  <label class="control-label" data-i18n="amp.settings:label-<%= obj.setting.id %>"><%= obj.setting.name %></label>\n  <select class="form-control" id="<%= obj.setting.id %>">\n  <% _.each(obj.setting.value.options, function(option){ %>\n  <% var selected = obj.settingsSelections[obj.setting.id] || obj.appliedSettings[obj.setting.id];%>\n    <option value="<%= option.id %>"  <% if(selected == option.id){ %> selected <% } %> >\n      <%= option.name %>\n    </option>\n  <%}); %>\n  </select>\n</div>\n',d='<div class="form-group">\n  <label class="control-label" data-i18n="amp.settings:label-<%= obj.setting.id %>"><%= obj.setting.name %></label>\n  <select class="form-control" id="<%= obj.setting.id %>">\n  <% _.each(obj.setting.value.options, function(option){ %>\n  <% var selected = obj.settingsSelections[obj.setting.id] || obj.appliedSettings[\'amount-format\'][obj.setting.id];%>\n    <option value="<%= option.value %>"  <% if(selected == option.value){ %> selected <% } %> >\n      <%= option.name %>\n    </option>\n  <%}); %>\n  </select>\n</div>\n',c='<div class="form-group"> \r\n<label data-i18n="amp.settings:label-<%= obj.id %>"><%= obj.name %></label> \r\n <div class="row year-range "> \r\n \r\n </div>  \r\n</div>',u='<div class="col-xs-2">\r\n   <label data-i18n="amp.settings:label-<%= obj.setting.id %>" ><%= obj.setting.name %></label>\r\n </div>\r\n  <div class="col-xs-4">\r\n  <select class="form-control form-control-year" id="<%= obj.setting.id %>">\r\n    <%\r\n      var applied = obj.appliedSettings[\'year-range\'] ? obj.appliedSettings[\'year-range\'][obj.setting.id] : null;\r\n      var selected = obj.settingsSelections[obj.setting.id];\r\n    %>\r\n    <option data-i18n="amp.settings:all" value="-1"<% if((selected || applied) == -1){ %> selected <% } %>>All</option>\r\n    <% for (i = obj.setting.rangeFrom; i <= obj.setting.rangeTo; i++) { %>\r\n      <option value="<%= i %>"<% if((selected || applied) == i){ %> selected <% } %>>\r\n      <%= i %>\r\n      </option>\r\n    <% } %>\r\n  </select>\r\n  </div>',h=t("../common/constants");e.exports=r.View.extend({template:a.template(s),selectTemplate:a.template(l),selectAmountUnitTemplate:a.template(d),yearRangeTemplate:a.template(c),yearSelectTemplate:a.template(u),events:{"click .apply-btn":"applySettings","change select":"optionChanged","click .cancel":"close","click .close":"close"},appliedSettings:{},settingsSelections:{},initialize:function(t){this.definitions=t.definitions,this.isPopup=t.isPopup,this.caller=t.caller,void 0===t.translator?this.createTranslator(!0):this.translator=t.translator,this.appliedSettings={},this.settingsSelections={},a.bindAll(this,"render","applySettings","updateUI","appendSetting","appendYearRangeSetting","configureUI","selectDefaults")},render:function(){var t=this;return t.$el.html(t.template({isPopup:this.isPopup})),this.definitions.load().done(function(){t.selectDefaults(),t.updateUI(),t.$el.show()}),this},selectDefaults:function(){if(this.settingsSelections={},a.isEmpty(this.appliedSettings)){this.settingsSelections[h.CALENDAR_ID]=this.definitions.findWhere({id:h.CALENDAR_ID}).get("value").defaultId,this.settingsSelections[h.CURRENCY_ID]=this.definitions.findWhere({id:h.CURRENCY_ID}).get("value").defaultId,this.caller===h.CONTEXT.REPORTS&&(this.settingsSelections[h.AMOUNT_UNIT_ID]=this.definitions.findWhere({id:h.AMOUNT_UNIT_ID}).get("value").defaultId);var t=this.definitions.findWhere({id:h.FUNDING_TYPE_ID});this.caller!==h.CONTEXT.DASHBOARDS&&t&&(this.settingsSelections[h.FUNDING_TYPE_ID]=t.get("value").defaultId);var e=this.definitions.findWhere({id:h.YEAR_RANGE_ID});e&&(this.settingsSelections[h.YEAR_FROM_ID]=a.findWhere(e.get("value"),{id:h.YEAR_FROM_ID}).value.defaultId,this.settingsSelections[h.YEAR_TO_ID]=a.findWhere(e.get("value"),{id:h.YEAR_TO_ID}).value.defaultId)}},configureUI:function(){this.isPopup?(this.$el.addClass("panel panel-primary amp-settings-dialog"),this.$(".panel-heading").show(),this.$(".cancel-settings").show()):(this.$(".panel-heading").hide(),this.$(".cancel-settings").hide())},updateUI:function(){this.configureUI(),this.$(".settings").html(""),this.appendSetting(h.CALENDAR_ID),this.appendSetting(h.CURRENCY_ID),this.caller===h.CONTEXT.REPORTS&&this.appendAmountUnitSetting(),this.caller!==h.CONTEXT.DASHBOARDS&&this.appendSetting(h.FUNDING_TYPE_ID),this.appendYearRangeSetting(),this.translate(this.$el)},appendSetting:function(t){var e=this.definitions.findWhere({id:t});e&&(this.$(".settings").append(this.selectTemplate({setting:e.toJSON(),appliedSettings:this.appliedSettings,settingsSelections:this.settingsSelections})),t===h.CURRENCY_ID&&a.isUndefined(this.allCurrencies)&&(this.allCurrencies=e.get("value").options))},appendAmountUnitSetting:function(){var t=this.definitions.findWhere({id:h.AMOUNT_UNIT_ID});t&&this.$(".settings").append(this.selectAmountUnitTemplate({setting:t.toJSON(),appliedSettings:this.appliedSettings,settingsSelections:this.settingsSelections}))},appendYearRangeSetting:function(){var t=this.definitions.findWhere({id:h.YEAR_RANGE_ID});t&&(this.$(".settings").append(this.yearRangeTemplate(t.toJSON())),this.appendYearSelect(t.get("value"),h.YEAR_FROM_ID),this.appendYearSelect(t.get("value"),h.YEAR_TO_ID))},appendYearSelect:function(t,e){var n={name:e,id:e,rangeFrom:t.rangeFrom,rangeTo:t.rangeTo,from:t.from,to:t.to};this.$(".year-range").append(this.yearSelectTemplate({setting:n,appliedSettings:this.appliedSettings,settingsSelections:this.settingsSelections}))},getCurrenciesByCalendar:function(t){var e=this.definitions.findWhere({id:h.CALENDAR_CURRENCIES_ID}),n=[];return e&&(n=a.uniq(a.findWhere(e.get("value").options,{id:t}).value.split(","))),n},optionChanged:function(t){var e=i(t.currentTarget).attr("id"),n=i(t.currentTarget).val();this.updateSelected(e,n),e===h.CALENDAR_ID&&(this.updateCurrencyList(n),this.updateUI())},updateCurrencyList:function(t){var e=this,n=e.getCurrenciesByCalendar(t);e.definitions.get(h.CURRENCY_ID).get("value").options=[],i.each(n,function(t,n){e.definitions.get(h.CURRENCY_ID).get("value").options.push(a.find(e.allCurrencies,function(t){return t.id===n}))});var r=a.filter(n,function(t){return t===e.settingsSelections[h.CURRENCY_ID]})[0],o=a.filter(n,function(t){return t===e.appliedSettings[h.CURRENCY_ID]})[0],s=n[0];this.updateSelected(h.CURRENCY_ID,r||o||s)},updateSelected:function(t,e){this.settingsSelections[t]=e},updateAppliedSettings:function(){var t=this;a.each(this.settingsSelections,function(e,n){n===h.YEAR_FROM_ID||n===h.YEAR_TO_ID?(a.isUndefined(t.appliedSettings[h.YEAR_RANGE_ID])&&(t.appliedSettings[h.YEAR_RANGE_ID]={}),t.appliedSettings[h.YEAR_RANGE_ID][n]=e):(t.appliedSettings[n]=e,n===h.AMOUNT_UNIT_ID&&(t.appliedSettings[h.AMOUNT_FORMAT_ID][h.AMOUNT_UNIT_ID]=Number(e)))}),this.settingsSelections={}},getCurrent:function(){return this.appliedSettings},restoreFromSaved:function(t){var e=this;a.each(t,function(t,n){e.appliedSettings[n]=t}),this.updateUI()},applySettings:function(){this.updateAppliedSettings(),this.trigger("applySettings",this.appliedSettings)},close:function(){this.settingsSelections={},this.trigger("close")},createTranslator:function(t){var e=this,n=JSON.parse('{\r\n  "amp.settings:title": "Settings",\r\n  "amp.settings:label-calendar-id": "Calendar",\r\n  "amp.settings:label-currency-code": "Currency",\r\n  "amp.settings:label-funding-type": "Funding Type",\r\n  "amp.settings:label-year-range": "Year Range",\r\n  "amp.settings:label-from": "From:",\r\n  "amp.settings:label-to": "To:",\r\n  "amp.settings:apply-button" : "Apply",\r\n  "amp.settings:cancel-button": "Cancel",\r\n  "amp.settings:all": "All"\r\n}');t!==!0&&void 0!==e.translator||(e.translator=new o({defaultKeys:n}))},translate:function(t){var e=this;void 0!==t&&(e=t),void 0!==e.el?this.translator.translateDOM(e.el):this.translator.translateDOM(e)}})},{"../common/constants":93,"amp-translate":99,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],98:[function(t,e,n){function i(t,e){return this instanceof i?(this.message=t,this.original=e,this.toString=function(){return this.message},this):new SateLoadError(t,e)}function a(){"use strict";if(!(this instanceof a))throw new Error("State needs to be created with the `new` keyword.");this.initialize.apply(this,arguments)}var r=t("underscore"),o=t("backbone");r.extend(a.prototype,o.Events,{initialize:function(t){this.saved=t.saved,this._stateRegistry={},this._unclaimed={},t.url&&this.listenToURL(r(t).pick("url","prefix","autoinit"))},listenToURL:function(t){this._url=t.url,this._urlPrefixes=t.prefix||["saved/"],this._urlPrefixes.constructor!==Array&&(this._urlPrefixes=[this._urlPrefixes]),this.listenTo(this._url,"change",this.urlMaybeLoad),t.autoinit&&this._url.hash()&&this.urlMaybeLoad(this._url.hash())},urlMaybeLoad:function(t){var e=this,n=!1;t=t||this._url.hash(),r.each(this._urlPrefixes,function(i){if(0===t.indexOf(i)){var a=t.split(i)[1];a&&(n=!0,e[e.saved?"loadById":"load"](a,i))}}),n||""!==t||e.reset()},toHash:function(t){return r(this).has("_url")?this._urlPrefixes[0]+t:void console.error("Cannot generate URL hash without being initialized with URL instance")},loadById:function(t,e){this.loadPromise=this.saved.load(t,e),this.loadPromise.done(r(function(t){this.load(t.get("stateBlob"))}).bind(this)).fail(function(){throw new i("Could not load state by id: "+t)})},load:function(t){var e=this.parse(t),n=!1;r.each(e,function(t,e){var i=this._stateRegistry[e];r.isUndefined(i)?this._unclaimed[e]=t:r.isEqual(i.get(),t)||(i.set(t),n=!0)},this),this.trigger("load"),n&&this.trigger("change")},parse:function(t){var e;try{e=JSON.parse(t)}catch(n){throw n instanceof SyntaxError?new i("Could not parse state",n):n}return e},reset:function(){var t=!1;r.each(this._stateRegistry,function(e){var n=e.get();r.isEqual(n,e.empty)||(e.set(e.empty),t=!0);
},this),this.trigger("reset"),t&&this.trigger("change")},filtersLoaded:function(){var t=jQuery.Deferred(),e=this,n=setInterval(function(){void 0!==e._stateRegistry.filters&&(clearInterval(n),t.resolve())},1e3);return t.promise()},freeze:function(t){t=t||{};var e={};r.each(this._stateRegistry,function(t,n){var i=t.get();e[n]=r.clone(i)});var n=JSON.stringify(e);return t.toURL&&(this._url||console.error("State cannot change URL if it does have a ref to it"),this._url.hash(this._urlPrefixes[0]+encodeURIComponent(n))),this.trigger("freeze",n),n},register:function(t,e,n){if(e in this._stateRegistry)throw new Error("Attempted registration of duplicate state id "+e);this._stateRegistry[e]={get:r.bind(n.get,t),set:r.bind(n.set,t),empty:n.empty},e in this._unclaimed?(this._stateRegistry[e].set(this._unclaimed[e]),delete this._unclaimed[e]):this._stateRegistry[e].set(n.empty),this.trigger("register")}}),a.StateLoadError=i,e.exports=a},{backbone:"backbone",underscore:"underscore"}],99:[function(t,e,n){function i(t){"use strict";if(!(this instanceof i))throw new Error("Translator needs to be created with the `new` keyword.");var e={defaultKeys:{},availableLanguages:null,translations:{locales:{en:null}},ajax:r.ajax};t&&a.defaults(this,t,e),this._promise=null,this._currentLng="tmp",this._firstGet=null,this.initTranslations=function(){var t=this;this._promise=this.getTranslations(t.defaultKeys).fail(function(t,e,n){console.error("failed ",t,e,n)}),this.promise=this._promise.promise()},this.addTranslatorOptions=function(t){a.defaults(this.defaultKeys,t.defaultKeys),this._firstGet=null},this.getAvailableLanguages=function(){var t=r.Deferred();return this.availableLanguages?t.resolve(this.availableLanguages):this._initAvailableLanguages().then(function(){t.resolve(this.availableLanguages)}),t},this._initAvailableLanguages=function(){return this.availableLanguages=new o.Collection([]),this.availableLanguages.url="/rest/translations/languages",this.availableLanguages.fetch()},this.setLanguage=function(t){return this._currentLng=t,this._apiCall("/rest/translations/languages/"+t,null,"GET")},this.translateDOM=function(t){var e=r(t);return this.getTranslations().then(function(t){return r.each(t,function(t,n){t.indexOf("[placeholder]")>-1?r('[data-i18n="'+t+'"]',e).attr("placeholder",n):t.indexOf("[title]")>-1?r('[data-i18n="'+t+'"]',e).attr("title",n):r('[data-i18n="'+t+'"]',e).text(n)}),e})},this.translateList=function(t){var e=function(t,e){return a.each(t,function(t,n,i){e[n]?i[n]=e[n]:i[n]=n[t]}),t};return this.getTranslations().then(function(n){var i=e(t,n);return i})},this.translateSync=function(t,e){"resolved"!==this.getTranslations().state()&&console.error("translateSync was called when getTranslations is not successfully resolved");var n=this.translations.locales[this._currentLng][t];return void 0===n&&(console.warn("No translation has been loaded for",t),n=e||t),n},this.getTranslations=function(){return this._firstGet||(this._firstGet=this._getTranslationsFromAPI(this.defaultKeys,this._currentLng)),this._firstGet},this._getTranslationsFromAPI=function(t,e){var n=this,i="/rest/translations/label-translations";return this._apiCall(i,t,"POST").then(function(t){return e?n.translations.locales[e]=t:(e=this._currentLng,n.translations.locales[e]=t),t})},this._apiCall=function(t,e,n){var i={headers:{Accept:"application/json","Content-Type":"application/json"},type:n,url:t,dataType:"json"};return e&&(i.data=JSON.stringify(e)),this.ajax(i)},this.initTranslations()}var a=t("underscore"),r=t("jquery"),o=t("backbone");e.exports=i},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],100:[function(t,e,n){function i(){"use strict";if(!(this instanceof i))throw new Error("URL needs to be created with the `new` keyword.");if(window._ampUrler)throw new Error("Another instance of URL is already managing window.location");window._ampUrler=!0,this.initialize.apply(this,arguments)}var a=t("underscore"),r=t("backbone");a.extend(i.prototype,r.Events,{initialize:function(t){t=t||{},this.root=t.root||window.location.host+window.location.pathname,a.bindAll(this,"change"),window.addEventListener("hashchange",this.change)},hash:function(t,e){return arguments.length?(e.silent&&window.removeEventListener("hashchange",this.change),window.location.hash=t,e.silent&&window.addEventListener("hashchange",this.change),void 0):window.location.hash.slice(1)},full:function(){return""+window.location},change:function(){this.trigger("change",this.hash())}}),e.exports=i},{backbone:"backbone",underscore:"underscore"}],101:[function(t,e,n){e.exports=function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),r=i(a);e["default"]=function(t){var e={log:(0,r["default"])(t),err:(0,r["default"])(t),warn:(0,r["default"])(t),onDebug:(0,r["default"])(t)};return e.err.log=Function.prototype.bind.call(console.error,console),e.warn.log=Function.prototype.bind.call(console.warn,console),e.onDebug.log=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i in e)if("function"==typeof e[i]){e[i]();break}},e},t.exports=e["default"]},function(t,e,n){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function a(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var i="color: "+this.color;t=[t[0],i,"color: inherit"].concat(Array.prototype.slice.call(t,1));var a=0,r=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(a++,"%c"===t&&(r=a))}),t.splice(r,0,i),t}function r(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}}function s(){var t;try{t=e.storage.debug}catch(n){}return t}function l(){try{return window.localStorage}catch(t){}}e=t.exports=n(2),e.log=r,e.formatArgs=a,e.save=o,e.load=s,e.useColors=i,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(s())},function(t,e,n){function i(){return e.colors[c++%e.colors.length]}function a(t){function n(){}function a(){var t=a,n=+new Date,r=n-(d||n);t.diff=r,t.prev=d,t.curr=n,d=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=i());var o=Array.prototype.slice.call(arguments);o[0]=e.coerce(o[0]),"string"!=typeof o[0]&&(o=["%o"].concat(o));var s=0;o[0]=o[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;s++;var a=e.formatters[i];if("function"==typeof a){var r=o[s];n=a.call(t,r),o.splice(s,1),s--}return n}),"function"==typeof e.formatArgs&&(o=e.formatArgs.apply(t,o));var l=a.log||e.log||console.log.bind(console);l.apply(t,o)}n.enabled=!1,a.enabled=!0;var r=e.enabled(t)?a:n;return r.namespace=t,r}function r(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),i=n.length,a=0;a<i;a++)n[a]&&(t=n[a].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function o(){e.enable("")}function s(t){var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1}function l(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=a,e.coerce=l,e.disable=o,e.enable=r,e.enabled=s,e.humanize=n(3),e.names=[],e.skips=[],e.formatters={};var d,c=0},function(t,e){function n(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(t){return t>=d?Math.round(t/d)+"d":t>=l?Math.round(t/l)+"h":t>=s?Math.round(t/s)+"m":t>=o?Math.round(t/o)+"s":t+"ms"}function a(t){return r(t,d,"day")||r(t,l,"hour")||r(t,s,"minute")||r(t,o,"second")||t+" ms"}function r(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var o=1e3,s=60*o,l=60*s,d=24*l,c=365.25*d;t.exports=function(t,e){return e=e||{},"string"==typeof t?n(t):e["long"]?a(t):i(t)}}])},{}]},{},[1]);