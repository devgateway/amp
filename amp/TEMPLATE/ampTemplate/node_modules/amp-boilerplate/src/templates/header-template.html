<!-- inline styles used so we can relocate amp-boilerplate module-->
<style>
  /* This directory and then Dashboard & GIS need
   * to be rebuilt with their respective browserify-processes to see
   * changes from this filter-popup due to brfs, see readme.md
   */
  #amp-header {
    font-family: "Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
  }
  #amp-header .navbar-header>button.navbar-toggle {
    /* fix contracted menu icon to not block map*/
    padding: 2px;
    margin: 4px;
  }

  #amp-header .container-fluid.ampUserLoggedIn ul.ampPublic,
  #amp-header .container.ampUserLoggedIn ul.ampPublic {
    display: none !important;
  }

  #amp-header .container-fluid.ampUserLoggedIn ul.ampUserLoggedIn,
  #amp-header .container.ampUserLoggedIn ul.ampUserLoggedIn {
    display: inherit !important;
  }

  #amp-header .container-fluid ul.ampPublic,
  #amp-header .container ul.ampPublic {
    display: inherit !important;
  }

  #amp-header .container-fluid ul.ampUserLoggedIn,
  #amp-header .container ul.ampUserLoggedIn {
    display: none !important;
  }


  div#amp-header nav div.container,
  div#amp-header nav div.navbar-collapse a,
  div#amp-header nav div.container-fluid,
  div#amp-header nav div.navbar-collapse a {
    font-size: 12px;
  }

  div#amp-header .navbar-brand {
    font-size: 16px !important;
    color: #E69923;
    text-shadow: 1px 1px 5px #CCC;
    white-space: nowrap;
    padding-bottom: 8px;
  }

  div#amp-header .double-row .navbar-brand {
    padding-top: 8px;
    height: 41px;
  }

  /* Several places in AMP include things that will set this
   * back to gigantic margins.
   * 8px feels like generous padding
   * 5px is slightly tight.
   *
   */
  div#amp-header .single-row .nav > li > a {
    padding-right: 6px;
    padding-left: 6px;
  }
  div#amp-header .double-row .nav > li > a{
    padding-right: 10px;
    padding-left: 10px;
    padding-bottom: 8px;
    padding-top: 9px;
  }

  div#amp-header .double-row #AmpMenus.nav > li:nth-child(1) > a {
    /* For first element, eliminate padding to ensure is flush. */
    padding-left: 0;
  }

    div#amp-header .workspace-name {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
    div#amp-header .user-url {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* limit size of top level menu to prevent translations that are too long
   * Apply to a span so that that caret doesn't get chopped off.
   */
  /* max-width:
   * 141px is generous, fits Ã‰TUDES ET DOCUMENTS
   * 124px is minimum to include 3 words (Ministry of ??...)
   * 117px fits TABLEAUX DE BORD
   *
   * div.ampUserLoggedIn in selector makes this effective ONLY when logged in
   * single-row selector only when using that mode
   */
  #amp-header div.ampUserLoggedIn .single-row ul#AmpMenus > .dropdown > a > span.dropdown-text {
    max-width: 141px;
  }

  #amp-header ul#AmpMenus > .dropdown > a > span.dropdown-text {
    display: inline-block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: #3E6C94;
    text-rendering: optimizeLegibility;
  }


  #amp-header ul#AmpMenus > .dropdown > a > span.caret {
    /* bump up caret to the height of the truncate-able inline-block next to it */
    padding-bottom: 11px;
    color: rgb(11, 12, 26);
  }


  #amp-header .container-fluid.no-gutters,
  #amp-header .container.no-gutters {
    padding-right: 0;
    padding-left: 0;
  }

  /* No gutters creates space for 1 gridsquare logo.
   * http://julienmelissas.com/no-gutter-column-trick-for-bootstrap/
   */
  #amp-header .container-fluid .row.no-gutters,
  #amp-header .container .row.no-gutters {
    margin-right: 0;
    margin-left: 0;
  }
  #amp-header .container-fluid .row.no-gutters > [class^="col-"],
  #amp-header .container-fluid .row.no-gutters > [class*=" col-"],
  #amp-header .container .row.no-gutters > [class^="col-"],
  #amp-header .container .row.no-gutters > [class*="col-"] {
    padding-right: 0;
    padding-left: 0;
  }

  #amp-header nav > .container-fluid > div.row:nth-child(1),
  #amp-header nav > .container > div.row:nth-child(1) {
    background-color: #FFF;
  }

  #amp-header nav > .container > div.row:nth-child(2),
  #amp-header nav > .container-fluid > div.row:nth-child(2) {
    border-top: 1px solid #EDEDED;
    background-color: #F7F7F7;
  }

  #amp-header .container-fluid,
  #amp-header .container {
    background-color: #FFF; /* Fixes gray area in gutter of single-row */
  }


/* There is a second set of gutters on the navbar itself. */
  div#amp-header .navbar-collapse.no-gutters{
    padding-right: 0;
    padding-left: 0;
  }

  /* These four styles avoids setting hard max-widths on these items */
  #amp-header .ampLoggedInMenus {
    width: 95%; /* account for scrollbar */
    text-shadow: 1px 1px 1px #AAA;
  }

  /* give a bit of extra width to workspace */
  #amp-header ul.nav.navbar-nav.ampLoggedInMenus li:nth-child(1) {
      text-align: right;
  }
  /* user name */
  #amp-header ul.nav.navbar-nav.ampLoggedInMenus li:nth-child(2) {
      text-align: center;
  }
  /* Logout */
  #amp-header ul.nav.navbar-nav.ampLoggedInMenus li:nth-child(3) {
      white-space: nowrap; /* prevent translations of logout from wrapping */
  }

  div#amp-header div#logincontainer {
    padding-left: 140px; /* IE9 fix that works everywhere: make room for green login button */
  }

  div#amp-header .login_here {
    margin-top: 3px !important; /* override 7 other specs in amp-wicket, and various copies of amp.css */
  }

  html.ie9 div#amp-header .login_here {
    margin-top: -11px !important; /* override 7 other specs in amp-wicket, and various copies of amp.css */
  }

  /******/
  .scrollable-menu {
    height: auto;
    max-height: 400px;
    overflow-x: hidden;
  }

  .dropdown-submenu {
    position: relative;
  }

  .dropdown-submenu>.dropdown-menu {
    top: 0;
    left: 100%;
    margin-top: -6px;
    margin-left: -1px;
    -webkit-border-radius: 0 6px 6px 6px;
    -moz-border-radius: 0 6px 6px 6px;
    border-radius: 0 6px 6px 6px;
  }

  .dropdown-submenu:hover>.dropdown-menu {
    display: block;
  }

  .dropdown-submenu>a:after {
    display: block;
    content: " ";
    float: right;
    width: 0;
    height: 0;
    border-color: transparent;
    border-style: solid;
    border-width: 5px 0 5px 5px;
    border-left-color: #cccccc;
    margin-top: 5px;
    margin-right: -10px;
  }

  .dropdown-submenu:hover>a:after {
    border-left-color: #ffffff;
  }

  .dropdown-submenu.pull-left {
    float: none;
  }

  .dropdown-submenu.pull-left>.dropdown-menu {
    left: -100%;
    margin-left: 10px;
    -webkit-border-radius: 6px 0 6px 6px;
    -moz-border-radius: 6px 0 6px 6px;
    border-radius: 6px 0 6px 6px;
  }

</style>
<script type="text/javascript">
  function switchTranslation (url) {
    $('#backUrl').val(document.location.href);
    document.modeSwitchForm.action = url;
    document.modeSwitchForm.submit();
  }
</script>
<form name="modeSwitchForm" method="post" action="/translation/switchMode.do" style="display:none;">
  <input type="hidden" name="backUrl" id="backUrl" value="">
</form>
<%
/***
 * Single Row Header Design (used when optionally requested: on GIS)
 * Useful for fixed height apps.
 *
 * Container-fluid structure:
 * row
 *  column navbar-brand (logo)
 *  column navbar-collapse
 *    nested row:
 *      columns AmpMenus (public or internal menus shown as provided by API)
 *      nested row ampUserLoggedInMenus (shown when logged in, incl: workspace, user, logout):
 *        3 columns
 *  login_here (ignores bootstrap container structure; shown when logged out)
 *  div#logincontainer: inserted by jQuery + rendered by JSP
 ***/

  if (useSingleRowHeader) {
 %>
<nav class="navbar navbar-default single-row" role="navigation">
  <div class="container-fluid <%= properties.logged === true ? 'ampUserLoggedIn' : '' %>">
    <div class="row no-gutters">
      <!-- .ampUserLoggedIn hides public version-->

      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header col-sm-1">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a id="headerUrl" class="navbar-brand" href="<%= properties.logged === true ? '/aim' : '/' %>" data-i18n="[title]amp.common:platform">
          <span>
            <img class="flag" src="/aim/default/displayFlag.do" height="20" width="30">
          </span>
          <span data-i18n="amp.common:platform-short">AMP</span></a>
      </div>

      <div class="col-sm-11">
        <div class="collapse navbar-collapse row no-gutters" id="bs-example-navbar-collapse-1">
          <div class="col-md-8 col-sm-10">
            <ul id="AmpMenus" class="nav navbar-nav menus">

              <!-- File -->

            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="col-md-4 col-sm-2">
              <ul class="row no-gutters nav navbar-nav ampUserLoggedIn ampLoggedInMenus">
                <li id="header-workspace-li" class="col-sm-9 col-md-6"><a title="Workspace" class="workspace-name" id="header-workspace" title="<%= properties.workspace ? properties.workspace : '' %>"><%= properties.workspace ? properties.workspace : " " %></a></li>
                <li id="header-name" class="hidden-xs hidden-sm col-md-4">
                  <a class="user-url">
                    <span id="header-first-name"><%= properties.firstName ? properties.firstName : " "  %></span>&nbsp;<span id="header-last-name"><%= properties.lastName ? properties.lastName : " " %></span>
                  </a>
                </li>
                <li id="header-logout" class="col-sm-2"><a data-i18n="amp.common:title-logout" href="/aim/j_spring_logout" >Logout</a></li>
              </ul>
              <% if(showLogin) { %>
                <% if(loginDropdown){ %>
                  <div class="login_here" id="show_login_pop">
                    <div class="login_here_cont">
                      <a data-i18n="amp.common:title-login" href="javascript:void(0)">Login</a>
                    </div>
                  </div>
                <% } else { %>
                  <ul class="nav navbar-nav ampPublic navbar-right">
                    <li id="header-login"><a data-i18n="amp.common:title-login" href="/login.do" >Login</a></li>
                  </ul>
                <% } %>
              <% } %>
              <!-- div#logincontainer with anchors gets appended here -->
          </div>
        </div>
      </div>

    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
  </div><!-- /.container-fluid -->
</nav>
 <% } else { %>

<% /***
 * Double Row Header Design (used by default)
 *
 * Container-Fluid structure:
 * row
 *  column navbar-brand (logo)
 *  column navbar-collapse
 *    nested row:
 *        nested row ampUserLoggedInMenus (shown when logged in, incl: workspace, user, logout):
            3 columns
 * row
 *    columns AmpMenus (public or internal menus shown as provided by API)
 *  login_here (ignores bootstrap container structure, shown when logged out)
 *  div#logincontainer: inserted by jQuery + rendered by JSP
 ***/ %>
<nav class="navbar navbar-default double-row" role="navigation">
  <div class="container-fluid no-gutters <%= properties.logged === true ? 'ampUserLoggedIn' : '' %>">
    <div class="row no-gutters">
      <!-- .ampUserLoggedIn hides public version-->

      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header col-sm-1 col-sm-offset-1">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a id="headerUrl" class="navbar-brand" href="<%= properties.logged === true ? '/aim' : '/' %>" data-i18n="[title]amp.common:platform">
          <span>
            <img class="flag" src="/aim/default/displayFlag.do" height="20" width="30">
          </span>
          <span data-i18n="amp.common:platform-short">AMP</span></a>
      </div>

      <div class="col-sm-9">
        <div class="collapse navbar-collapse row no-gutters" id="bs-example-navbar-collapse-1">
          <!-- To change workspace/user truncation length, edit the offset and grid number below:-->
          <div class="col-sm-offset-5 col-sm-7">
            <ul class="row no-gutters nav navbar-nav ampUserLoggedIn ampLoggedInMenus">
              <li id="header-workspace-li" class="col-sm-9 col-md-6"><a title="Workspace" class="workspace-name" id="header-workspace" title="<%= properties.workspace ? properties.workspace : '' %>"><%= properties.workspace ? properties.workspace : " " %></a></li>
              <li id="header-name" class="hidden-xs hidden-sm col-md-4">
                <a class="user-url">
                  <span id="header-first-name"><%= properties.firstName ? properties.firstName : " "  %></span>&nbsp;<span id="header-last-name"><%= properties.lastName ? properties.lastName : " " %></span>
                </a>
              </li>
              <li id="header-logout" class="col-sm-2"><a data-i18n="amp.common:title-logout" href="/aim/j_spring_logout" >Logout</a></li>
            </ul>
            <% if(showLogin) { %>
              <% if(loginDropdown){ %>
                <div class="login_here" id="show_login_pop">
                  <div class="login_here_cont">
                    <a data-i18n="amp.common:title-login" href="javascript:void(0)">Login</a>
                  </div>
                </div>
              <% } else { %>
                <ul class="nav navbar-nav ampPublic navbar-right">
                  <li id="header-login"><a data-i18n="amp.common:title-login" href="/login.do" >Login</a></li>
                </ul>
              <% } %>
            <% } %>
            <!-- div#logincontainer with anchors gets appended here -->
          </div>
        </div>
      </div>

    </div>

    <div class="row no-gutters">
      <div class="col-sm-11 col-sm-offset-1">
        <ul id="AmpMenus" class="nav navbar-nav menus">

          <!-- File -->

        </ul>
        <div class="clearfix"></div>
      </div>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
  </div><!-- /.container-fluid -->
</nav>

<%
  } %>
