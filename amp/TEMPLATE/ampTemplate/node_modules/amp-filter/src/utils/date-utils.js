var _ = require('underscore');

var extractDates = function (settings, filtersOut, minName, maxName, formatDateFn) {
    filtersOut = filtersOut || {};
    if (_.isUndefined(filtersOut.date) || _.isEmpty(filtersOut.date)) {
        filtersOut.date = filtersOut.date || {
            start: '',
            end: ''
        };

        var defaultMinDate = settings.get(minName);
        if (defaultMinDate !== undefined && defaultMinDate !== '') {
            filtersOut.date.start = formatDateFn(defaultMinDate);
        }
        var defaultMaxDate = settings.get(maxName);
        if (defaultMaxDate !== undefined && defaultMaxDate !== '') {
            filtersOut.date.end = formatDateFn(defaultMaxDate);
        }
    }
};

module.exports = {
    extractDates: extractDates
};
