<div class="table-container" style="margin:15px;">
	<div class="row">
		<div>
			<button type="button" class="btn btn-primary navbar-btn new-layer-btn" data-i18n="amp.gis-layers-manager:button-NewIndicatorLayer">New Indicator Layer</button>
			<button type="button" class="btn btn-primary navbar-btn set-population-layer-btn" data-i18n="amp.gis-layers-manager:button-SetPopulationLayer">Set Population Layers</button>
		</div>
       <% if(layers.length > 0){  %>
		<table class="table">
			<thead>
				<tr>
					<%
					var keys = Object.keys(columns);
					for(var i = 0; i < keys.length; i++) {
						var show = false;
						var order = '';
						if(page.get('orderBy') == keys[i]) {
							show = true;
							order = page.get('sort');
						}
					%>
						<th class="col-<%=keys[i].toLowerCase()%>"><span style="cursor: pointer" data-i18n="amp.gis-layers-manager:header-<%=columns[keys[i]].replace(/ /g,'')%>" class="sort <%=order%>" data-prop="<%=keys[i]%>"><%=columns[keys[i]]%></span> <span class="glyphicon <%= order == 'asc'? 'glyphicon-chevron-up': order == 'desc' ? 'glyphicon-chevron-down': ''%>"></span></th>
					<%
					}
					%>
					<th data-i18n="amp.gis-layers-manager:header-Actions">Actions</th>
				</tr>
			</thead>
			<tbody>
				<% layers.forEach(function(layer) { %>
				<tr>
					<td >
					<% var name = layer.getName(settings) %>
					<a href="/rest/indicator/indicator-layer/download?admLevelId=<%=layer.get('admLevelId') %>&name=<%= name %>">
					 <%= layer.shorten(name) %></a>
					 <% if(layer.isLong(name)){%>
					     <span title="<%=name%>" data-toggle="tooltip" data-placement="right" class="show-tooltip">...</span>					  
					  <%}%>
					 </td>
					<td>
					  <% var createdBy = layer.get('createdBy') || user.get('email') %>
					  <%= layer.shorten(createdBy)%>
					  <% if(layer.isLong(createdBy)){%>
					     <span title="<%=createdBy%>" data-toggle="tooltip" data-placement="right" class="show-tooltip">...</span>					  
					  <%}%>
					</td>
					<td><%= layer.get('createdOn')%></td>				
                     <td >
                     <% var description = layer.getDescription(settings) %>
                     <%=layer.shorten(description) %>
                     <% if(layer.isLong(description)){%>
					     <span title="<%=description%>" data-toggle="tooltip" data-placement="right" class="show-tooltip">...</span>					  
					  <%}%>
                     </td>                    
                    <td><%= accessTypes.findWhere({id: layer.get('accessTypeId')}).get('label')%></td>
                    <td>
						<%if(user.get('email') == layer.get('createdBy') || (user.get('administratorMode') && layer.get('createdBy')!= null)) {%>
						    <span class="glyphicon glyphicon-edit" style="cursor: pointer" data-toggle="tooltip" data-i18n="amp.gis-layers-manager:Actions-Edit[title]" aria-hidden="true" data-id="<%= layer.id%>"></span>
                            <span class="glyphicon glyphicon-trash" style="cursor: pointer" data-toggle="tooltip" data-i18n="amp.gis-layers-manager:Actions-Delete[title]" aria-hidden="true" data-id="<%= layer.id%>"></span>
							<%if(layer.get('accessTypeId') == accessTypes.findWhere({value: 'PUBLIC'}).id) {%>
							<span class="glyphicon glyphicon-lock" style="cursor: pointer" aria-hidden="true" data-toggle="tooltip" data-i18n="amp.gis-layers-manager:Actions-MakePrivate[title]" data-id="<%= layer.id%>"></span>
							<%}%>
							<%if(layer.get('accessTypeId') == accessTypes.findWhere({value: 'PRIVATE'}).id || layer.get('accessTypeId') == accessTypes.findWhere({value: 'SHARED'}).id || layer.get('accessTypeId') == accessTypes.findWhere({value: 'STANDARD'}).id) {%>
							    <span class="glyphicon glyphicon-globe" style="cursor: pointer" aria-hidden="true" data-toggle="tooltip" data-i18n="amp.gis-layers-manager:Actions-MakePublic[title]" data-id="<%= layer.id%>"></span>
                                <%if(!user.get('administratorMode')) {%>
							        <span class="glyphicon glyphicon-share" style="cursor: pointer" aria-hidden="true" data-toggle="tooltip" data-i18n="amp.gis-layers-manager:Actions-ShareWithWorkspace[title]" data-id="<%= layer.id%>"></span>
							    <%}%>
							<%}%>
						<%}%>
					</td>
				</tr>
				<% }); %>
			</tbody>
		</table>
		<nav>
			<ul class="pagination fixed-pagination">
				<li class="page-item <%= page.get('currentPageNumber') == 1 ? 'disabled': ''%>">
					<a class="page-link previ" style="cursor: pointer" aria-label="Previous" data-page="-">
						<span aria-hidden="true" data-page="-">&laquo;</span>
						<span class="sr-only">Previous</span>
					</a>
				</li>
				<% for(var i = 1; i <= page.get('totalPageCount'); i++) { %>
					<li class="page-item <%= page.get('currentPageNumber') == i ? 'active': ''%>"><a class="page-link" style="cursor: pointer" data-page="<%= i%>"><%= i%></a></li>
				<% } %>
				<li class="page-item <%= page.get('currentPageNumber') == page.get('totalPageCount') ? 'disabled': ''%>">
					<a class="page-link" style="cursor: pointer" aria-label="Next" data-page="+">
 						<span aria-hidden="true" data-page="+">&raquo;</span>
 						<span class="sr-only">Next</span>
 					</a>
				</li>
			</ul>
		</nav>
		<% }  %>
	</div>
	<div id="workspace-select" style="display: none; width: 300px; top: -100px; left: 200px">
</div>
