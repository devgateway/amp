"use strict";(self.webpackChunkampoffiline=self.webpackChunkampoffiline||[]).push([[325],{305:(e,n,t)=>{t.r(n),t.d(n,{mount:()=>q});var s=t(900),r=t.n(s),a=t(179),o=t(391),i=t(713),l=t.n(i),c=t(613),d=t(127),p=t.n(d);const h="FETCH_RELEASES_PENDING",f="FETCH_RELEASES_SUCCESS",u="FETCH_RELEASES_ERROR";const m={pending:!1,releases:[],error:null};const x=e=>e.releases,g=e=>e.pending,v=e=>e.error,w="/rest/amp/amp-offline-release",b="windows",y="debian",j="redhat";const C=function(){return e=>{e({type:h}),fetch(w).then((e=>e.json())).then((n=>{if(n.error)throw n.error;return e({type:f,payload:n}),n})).catch((n=>{e(function(e){return{type:u,error:e}}(n))}))}},R="FETCH_TRANSLATIONS_PENDING",S="FETCH_TRANSLATIONS_SUCCESS",E="FETCH_TRANSLATIONS_ERROR";const _="SSC_",N="POST",O="GET";function T(e,n){const t={method:e?N:O,headers:n||{"Content-Type":"application/json",Accept:"application/json","ws-prefix":_}};return e&&(t.body=JSON.stringify(e)),t}const A=function(e){return n=>{return n(function(e){return{type:R,payload:e}}(e)),(t=e,new Promise((e=>fetch("/rest/translations/label-translations",T(t)).then((n=>{let t=n.headers.get("content-type");if(t&&-1!==t.indexOf("application/json"))return n.json().then((n=>{if(n.error)throw new Error(n.error);return e(n)}))}))))).then((e=>n(function(e){return{type:S,payload:e}}(e)))).catch((e=>n(function(e){return{type:E,error:e}}(e))));var t}},P=JSON.parse('{"amp.offline:download":"Download AMP Offline","amp.offline:all-versions":"All installer versions","amp.offline:best-version-message":"We have automatically detected which version of the application meets your operating system requirements. Other versions are available below.","amp.offline:bits":"bits","amp.offline:page-title":"Aid Management Platform - Download Offline Client","amp.offline:download-title":"Download the Offline Client","amp.offline:text":"The AMP Offline application allows you to edit and add activity information to the AMP without having an active internet connection. In order to use the application, you must download and install the compatible version of AMP Offline application from the list of the latest AMP Offline installers. When you run the application for the first time, you must have an active internet connection in order to sync your user data, activity data, and other critical data to the application. After that, you may work offline and sync your data periodically.","amp.offline:unknown":"Unknown"}');var k=t(797);const I=()=>(0,k.jsx)("div",{className:"jumbotron",children:(0,k.jsx)("div",{className:"progress",children:(0,k.jsx)("div",{className:"progress-bar progress-bar-striped bg-info",role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"},children:"..."})})}),L=r().createContext({translations:P});class M extends s.Component{componentDidMount(){this.props.fetchTranslations(P)}render(){const{translationPending:e,children:n,translations:t}=this.props;return e?(0,k.jsx)(I,{}):(0,k.jsx)(L.Provider,{value:{translations:t},children:n})}}const D=(0,c.connect)((e=>({translationPending:e.translationsReducer.pending,translations:e.translationsReducer.translations})),(e=>(0,o.bindActionCreators)({fetchTranslations:A},e)))(M);class F extends s.Component{constructor(e){super(e),this.shouldComponentRender=this.shouldComponentRender.bind(this)}componentDidMount(){const{fetchReleases:e}=this.props;e()}shouldComponentRender(){return!this.props.pending}_buildLinksTable(){const e=[];return this.props.releases?(this.props.releases.sort(((e,n)=>e.os>n.os)).map((n=>e.push((0,k.jsx)("a",{href:"".concat(w,"/").concat(n.id),children:this._getInstallerName(n.os,n.arch)})))),(0,k.jsx)("ul",{children:e.map(((e,n)=>(0,k.jsx)("li",{children:e},n)))})):null}_getInstallerName(e,n){let t="";switch(e){case b:t="Windows Vista/7/8/10 - ".concat(n," ").concat(this.context.translations["amp.offline:bits"]);break;case y:t="Ubuntu Linux (.deb) - ".concat(n," ").concat(this.context.translations["amp.offline:bits"]);break;case j:t="RedHat Linux (.rpm) - ".concat(n," ").concat(this.context.translations["amp.offline:bits"]);break;case"osx":t="Mac OS - ".concat(n," ").concat(this.context.translations["amp.offline:bits"]);break;default:t="".concat(this.context.translations["amp.offline:unknown"])}return t}_detectBestInstaller(){const{os:e}=p(),n=e.architecture,t=e.family.toLowerCase();let s=null;if(t.indexOf(b)>-1)s=[b];else if(t.indexOf("macintosh")>-1||t.indexOf("os x")>-1)s=["osx"];else{if(!(t.indexOf("linux")>-1))return[];s=[y,j]}const r=this.props.releases.filter((e=>s.filter((n=>n===e.os)).length>0&&e.arch===n.toString())),a=r.map((e=>{const n=this._getInstallerName(e.os,e.arch);return(0,k.jsx)("div",{className:"link",children:(0,k.jsxs)("a",{href:"".concat(w,"/").concat(e.id),children:[this.context.translations["amp.offline:download"]," ",e.version," ","-"," ",n]})},e.id)})),o=this.context.translations["amp.offline:best-version-message"];return a.length>0&&(0,k.jsxs)("div",{className:"alert alert-info",role:"alert",children:[(0,k.jsx)("span",{className:"info-text",children:o}),a]})}render(){return this.shouldComponentRender()?(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{children:this._detectBestInstaller()}),(0,k.jsx)("h4",{children:this.context.translations["amp.offline:all-versions"]}),(0,k.jsx)("div",{children:this._buildLinksTable()})]}):(0,k.jsx)("div",{children:"loading"})}}F.contextType=L;const H=(0,c.connect)((e=>({error:v(e.startupReducer),releases:x(e.startupReducer),pending:g(e.startupReducer),translations:e.translationsReducer.translations})),(e=>(0,o.bindActionCreators)({fetchReleases:C},e)))(F),U=t.p+"static/media/monitor.0d3bcd4b5f57a7495585.png",B=()=>{const{translations:e}=(0,s.useContext)(L);return(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"col-md-5",children:(0,k.jsx)("img",{src:U,alt:e["amp.offline:download-title"]})}),(0,k.jsxs)("div",{className:"col-md-7",children:[(0,k.jsxs)("div",{className:"main_text",children:[(0,k.jsx)("h2",{children:e["amp.offline:download-title"]}),(0,k.jsx)("span",{children:e["amp.offline:text"]})]}),(0,k.jsx)("div",{children:(0,k.jsx)(H,{})})]})]})},G={pending:!0,translations:{},error:null};const W=(0,o.combineReducers)({startupReducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case h:return{...e,pending:!0};case f:return{...e,pending:!1,releases:n.payload};case u:return{...e,pending:!1,error:n.error};default:return e}},translationsReducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case R:return{...e,pending:!0,translations:n.payload};case S:return{...e,pending:!1,translations:n.payload};case E:return{...e,pending:!1,error:n.error};default:return e}}}),J=()=>{const e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.compose,n=(0,o.createStore)(W,e((0,o.applyMiddleware)(l())));return(0,k.jsx)(c.Provider,{store:n,children:(0,k.jsx)(D,{defaultTrnPack:P,children:(0,k.jsx)(B,{})})})},V=e=>{e&&e instanceof Function&&t.e(339).then(t.t.bind(t,339,23)).then((n=>{let{getCLS:t,getFID:s,getFCP:r,getLCP:a,getTTFB:o}=n;t(e),s(e),r(e),a(e),o(e)}))},X=t(682),$=()=>(0,k.jsx)(r().StrictMode,{children:(0,k.jsx)(J,{})}),q=e=>{let{el:n,standalone:t=!0}=e;if(n&&a.createRoot(n).render((0,k.jsx)($,{})),t){function s(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[\]]/g,"\\$&");const t=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(n);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}s("embedded")||new X.layout({})}V()}}}]);
//# sourceMappingURL=325.bundle.js.map