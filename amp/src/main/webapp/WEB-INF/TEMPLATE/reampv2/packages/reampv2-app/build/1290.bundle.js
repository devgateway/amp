"use strict";(self.webpackChunkreampv2=self.webpackChunkreampv2||[]).push([[1290],{61290:function(e,r,t){t.r(r),t.d(r,{default:function(){return Rt}});var n=t(9249),a=t(87371),i=t(45754),o=t(86906),s=t(50383),l=t.n(s),u=t(83112),c=t(10941),d=t.n(c),p=t(94652),h=t(50840),f=t(56666),m=t(33028),g=t(58234),v="amp.reportGenerator:",y="/rest/reports",R="T",S="year-range",C=["annual-report","quarterly-report","monthly-report","totals-only"],b=["summary-report"],x=["funding-donor","funding-regional","funding-component","funding-pledges"],_=["empty-funding-columns","split-by-funding","show-original-currency","show-pledges"],w="UPDATE_REPORT_DETAILS_TOTAL_GROUPING",E="UPDATE_REPORT_DETAILS_TOTALS_ONLY",T="UPDATE_REPORT_DETAILS_FUNDING_GROUPING",A="UPDATE_REPORT_DETAILS_ALLOW_EMPTY_FUNDING_COLUMNS",Z="UPDATE_REPORT_DETAILS_SPLIT_BY_FUNDING",j="UPDATE_REPORT_DETAILS_SHOW_ORIGINAL_CURRENCIES",D="UPDATE_REPORT_DETAILS_DESCRIPTION",G="UPDATE_REPORT_DETAILS_NAME_MULTILANG",P="UPDATE_REPORT_DETAILS_NAME",N="REVERT_REPORT_DETAILS_NAME",O="UPDATE_REPORT_DETAILS_ALSO_SHOW_PLEDGES",F="UPDATE_REPORT_DETAILS_USE_ABOVE_FILTERS",L="UPDATE_REPORT_DETAILS_REPORT_CATEGORY",k="UPDATE_COLUMNS_SELECTED_COLUMN",I="UPDATE_COLUMNS_SORT_COLUMN",M="RESET_COLUMNS_SELECTED_COLUMN",U="UPDATE_MEASURES_SORT_COLUMN",H="UPDATE_MEASURES_SELECTED_COLUMN",B="RESET_MEASURES_SELECTED_COLUMN",z="UPDATE_HIERARCHIES_SORT_COLUMN",W="UPDATE_HIERARCHIES_SELECTED_COLUMN",V="UPDATE_HIERARCHIES_LIST",Y="SET_INITIAL_HIERARCHIES",q="UPDATE_APPLIED_FILTERS",K="UPDATE_INCLUDE_LOCATION_WITH_CHILDREN",X="UPDATE_APPLIED_SETTINGS",J="UPDATE_PROFILE",Q="UPDATE_ID",$="FETCH_METADATA_PENDING",ee="FETCH_METADATA_SUCCESS",re="FETCH_METADATA_ERROR",te="FETCH_REPORT_PENDING",ne="FETCH_REPORT_SUCCESS",ae="FETCH_REPORT_ERROR",ie="SAVE_NEW_REPORT_PENDING",oe="SAVE_NEW_REPORT_SUCCESS",se="SAVE_NEW_REPORT_ERROR",le="SAVE_REPORT_PENDING",ue="SAVE_REPORT_SUCCESS",ce="SAVE_REPORT_ERROR",de="RUN_REPORT_PENDING",pe="RUN_REPORT_SUCCESS",he="RUN_REPORT_ERROR",fe="MARK_EXISTING_REPORT_SANITIZED";function me(e){return{type:T,payload:e}}function ge(e){return{type:F,payload:e}}function ve(e){return{type:k,payload:e}}function ye(e,r,t){return{type:Y,available:e,selected:r,order:t}}function Re(e){return{type:H,payload:e}}function Se(e){return{type:U,payload:e}}function Ce(e,r){return{type:q,payload:e,html:r}}var be=null,xe=function(e,r){return function(t,n){var a=n();if(a.uiReducer.metaDataPending||a.uiReducer.metaDataLoaded||a.uiReducer.error)return t({type:"FETCH_METADATA_IGNORE"}),be;t({type:$});var i="/rest/reports/designer";return i+="?type=".concat(e||"D"),i+=r?"&profile=".concat(r):"&type=".concat("R"),be=Promise.all([(0,g.a)({url:i})]).then((function(e){return t((r=e[0],{type:ee,payload:r}));var r})).catch((function(e){return t(function(e){return{type:re,error:e}}(e))}))}},_e=function(e){return function(r){return r({type:te}),(0,g.a)({url:"/rest/reports/{reportId}".replace("{reportId}",e)}).then((function(e){return r({type:ne,payload:e})})).catch((function(e){return r(function(e){return{type:ae,error:e}}(e))}))}},we=function(e){return function(r,t){var n=t().uiReducer.id;return r({type:ie}),(0,g.a)({url:"".concat(y,"?reportId=null"),body:e}).then((function(e){return r({type:oe,payload:e})})).catch((function(e){return r(function(e,r){return{type:se,error:e,id:r}}(e,n))}))}},Ee=function(e,r){return function(t){return t({type:le}),(0,g.a)({url:"".concat("/rest/reports/").concat(e),body:r}).then((function(e){return t({type:ue,payload:e})})).catch((function(e){return t(function(e){return{type:ce,error:e}}(e))}))}},Te=function(e){return function(r){return r({type:de}),(0,g.a)({url:"".concat(y,"?isDynamic=true"),body:e}).then((function(e){return r({type:pe,payload:e})})).catch((function(e){return r(function(e){return{type:he,error:e}}(e))}))}};function Ae(e){switch(e){case"annual-report":return"A";case"quarterly-report":return"Q";case"monthly-report":return"M";case"totals-only":return"T";default:return null}}function Ze(e){switch(e){case"funding-donor":return"D";case"funding-regional":return"R";case"funding-component":return"C";case"funding-pledges":return"P";default:return null}}function je(e){switch(e){case"D":return"funding-donor";case"R":return"funding-regional";case"C":return"funding-component";case"P":return"funding-pledges";default:return null}}function De(e){return e&&Object.keys(e).length>0&&Object.keys(e).some((function(r){return e[r]}))}function Ge(e){return e&&!0===e.tab?R:"R"}function Pe(e,r,t,n,a){if(a!==R&&e&&r&&t&&n&&e.available&&e.available.length>0&&e.selected.length>0){if(n&&n.selectedSummaryReport){if(0===r.selected.length&&0===t.selected.length)return!1}else if(e.selected.length===t.selected.length)return!1;return!0}return!1}function Ne(e,r,t){var n=t[(r===R?"amp.tabGenerator:":v)+e];return n||(n=t[v+e]),n}function Oe(e,r){var t=(0,m.Z)({},e);return t.description=r.description,t.name=r.name,t.selectedShowOriginalCurrencies=r.showOriginalCurrency,t.selectedTotalGrouping=function(e){switch(e){case"A":return"annual-report";case"Q":return"quarterly-report";case"M":return"monthly-report";case"T":return"totals-only";default:return null}}(r.groupingOption),t.selectedSummaryReport=r.summary,t.selectedSplitByFunding=r.splitByFunding,t.selectedAllowEmptyFundingColumns=r.allowEmptyFundingColumns,t.selectedAlsoShowPledges=r.alsoShowPledges,t.isTab=r.tab,t.publicView=r.publicView,t.workspaceLinked=r.workspaceLinked,t.selectedReportCategory=r.reportCategory,t.ownerId=r.ownerId,t.includeLocationChildren=r.includeLocationChildren,t}var Fe={reportDetails:{selectedTotalGrouping:null,selectedSummaryReport:!1,selectedFundingGrouping:null,selectedAllowEmptyFundingColumns:!1,selectedSplitByFunding:!1,selectedShowOriginalCurrencies:!1,selectedAlsoShowPledges:!1,selectedUseAboveFilters:!1,description:null,name:null,isTab:!1,publicView:!1,workspaceLinked:!1,selectedReportCategory:null,ownerId:null,includeLocationChildren:!0},columns:{available:[],selected:[]},hierarchies:{available:[],selected:[],order:[]},measures:{available:[],selected:[],order:[]},activeStep:0,metaDataLoaded:!1,metaDataPending:!1,error:null,filters:null,appliedFilters:null,settings:null,reportCategories:[],reportLoaded:!1,reportPending:!1,type:null,profile:null,id:null,reportSaving:!1,reportSaved:!1,reportSaveError:null,runReportPending:!1,runReportSuccess:!1,runReportError:!1,existingReportSanitized:!1},Le="FETCH_PREVIEW_PENDING",ke="FETCH_PREVIEW_SUCCESS",Ie="FETCH_PREVIEW_ERROR",Me="UPDATE_PREVIEW_ID",Ue="IGNORE_PREVIEW";var He=function(e){return function(r,t){return r({type:Le}),(0,g.a)({url:"/rest/data/report/preview",body:e,headers:{"Content-Type":"application/json",Accept:"text/html"}}).then((function(n){return t().previewReducer.lastReportId===e.id?r({type:ke,payload:n}):r({type:Ue})})).catch((function(e){return r(function(e){return{type:Ie,error:e}}(e))}))}},Be={lastReportId:0,lastReportName:void 0,pending:!1,loaded:!1,error:!1,results:void 0},ze="FETCH_GLOBAL_SETTINGS_PENDING",We="FETCH_GLOBAL_SETTINGS_SUCCESS",Ve="FETCH_GLOBAL_SETTINGS_ERROR";var Ye=function(e){return function(r){return r({type:ze}),Promise.all([(0,g.a)({url:"/rest/amp/settings"}),(0,g.a)({url:e})]).then((function(e){return r((t=e[0],n=e[1],{type:We,payload:t,payload2:n}));var t,n})).catch((function(e){return r(function(e){return{type:Ve,error:e}}(e))}))}},qe={pending:!1,loaded:!1,error:!1,globalSettings:void 0,reportGlobalSettings:void 0},Ke="FETCH_LAYOUT_PENDING",Xe="FETCH_LAYOUT_SUCCESS",Je="FETCH_LAYOUT_ERROR";var Qe=function(){return function(e){return e({type:Ke}),(0,g.a)({url:"/rest/security/layout"}).then((function(r){return e({type:Xe,payload:r})})).catch((function(r){return e(function(e){return{type:Je,error:e}}(r))}))}},$e={pending:!1,loaded:!1,error:!1,results:void 0},er="SET_SETTINGS_DATA",rr="SET_FILTERS_DATA",tr="SET_COLUMNS_DATA",nr="SET_HIERARCHIES_DATA",ar="SET_MEASURES_DATA";var ir={columns:[],measures:[],hierarchies:[],filters:void 0,settings:void 0},or="FETCH_LANGUAGES_PENDING",sr="FETCH_LANGUAGES_SUCCESS",lr="FETCH_LANGUAGES_ERROR";var ur=function(){return function(e){return e({type:or}),(0,g.a)({url:"/rest/translations/languages"}).then((function(r){return e({type:sr,payload:r})})).catch((function(r){return e(function(e){return{type:lr,error:e}}(r))}))}},cr={pending:!1,loaded:!1,error:!1,data:void 0},dr=(0,u.combineReducers)({translationsReducer:h.Z,uiReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case w:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{selectedTotalGrouping:r.payload})});case E:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{selectedSummaryReport:r.payload})});case T:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{selectedFundingGrouping:r.payload})});case A:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{selectedAllowEmptyFundingColumns:r.payload})});case Z:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{selectedSplitByFunding:r.payload})});case j:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{selectedShowOriginalCurrencies:r.payload})});case O:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{selectedAlsoShowPledges:r.payload})});case F:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{selectedUseAboveFilters:r.payload})});case D:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{description:r.payload})});case G:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{name:(0,m.Z)((0,m.Z)({},e.reportDetails.name),{},(0,f.Z)({},r.lang,r.payload))})});case P:case N:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{name:r.payload})});case L:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{selectedReportCategory:r.payload})});case k:case I:return(0,m.Z)((0,m.Z)({},e),{},{columns:(0,m.Z)((0,m.Z)({},e.columns),{},{selected:r.payload})});case M:return(0,m.Z)((0,m.Z)({},e),{},{columns:(0,m.Z)((0,m.Z)({},e.columns),{},{selected:[]}),hierarchies:{available:[],selected:[],order:[]}});case V:return(0,m.Z)((0,m.Z)({},e),{},{hierarchies:(0,m.Z)((0,m.Z)({},e.hierarchies),{},{available:r.payload})});case W:return(0,m.Z)((0,m.Z)({},e),{},{hierarchies:(0,m.Z)((0,m.Z)({},e.hierarchies),{},{selected:r.payload})});case z:return(0,m.Z)((0,m.Z)({},e),{},{hierarchies:(0,m.Z)((0,m.Z)({},e.hierarchies),{},{order:r.payload})});case Y:return(0,m.Z)((0,m.Z)({},e),{},{hierarchies:{available:r.available,selected:r.selected,order:r.order}});case H:return(0,m.Z)((0,m.Z)({},e),{},{measures:(0,m.Z)((0,m.Z)({},e.measures),{},{selected:r.payload})});case U:return(0,m.Z)((0,m.Z)({},e),{},{measures:(0,m.Z)((0,m.Z)({},e.measures),{},{order:r.payload})});case B:return(0,m.Z)((0,m.Z)({},e),{},{measures:(0,m.Z)((0,m.Z)({},e.measures),{},{selected:r.payload.selected,order:r.payload.order})});case q:return(0,m.Z)((0,m.Z)({},e),{},{filters:r.payload,appliedFilters:r.html});case K:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:(0,m.Z)((0,m.Z)({},e.reportDetails),{},{includeLocationChildren:r.payload})});case X:return(0,m.Z)((0,m.Z)({},e),{},{settings:r.payload});case $:return(0,m.Z)((0,m.Z)({},e),{},{metaDataPending:!0});case ee:return(0,m.Z)((0,m.Z)({},e),{},{metaDataPending:!1,metaDataLoaded:!0,measures:(0,m.Z)((0,m.Z)({},e.measures),{},{available:r.payload.measures}),columns:(0,m.Z)((0,m.Z)({},e.columns),{},{available:r.payload.columns}),options:r.payload.options,reportCategories:r.payload.reportCategories,type:r.payload.type,profile:r.payload.profile});case re:return(0,m.Z)((0,m.Z)({},e),{},{metaDataLoaded:!1,metaDataPending:!1,error:r.error});case ne:return(0,m.Z)((0,m.Z)({},e),{},{reportDetails:Oe(e.reportDetails,r.payload),columns:{selected:r.payload.columns.map((function(e){return e.id}))},hierarchies:{available:r.payload.hierarchies,selected:r.payload.hierarchies.map((function(e){return e.id})),order:r.payload.hierarchies.map((function(e){return e.id}))},measures:{selected:r.payload.measures.map((function(e){return e.id})),order:r.payload.measures.map((function(e){return e.id}))},settings:r.payload.settings,filters:r.payload.filters,appliedFilters:null,reportLoaded:!0,reportPending:!1,type:r.payload.type,profile:Ge(r.payload),id:r.payload.id});case te:return(0,m.Z)((0,m.Z)({},e),{},{reportLoaded:!1,reportPending:!0});case ae:return(0,m.Z)((0,m.Z)({},e),{},{reportLoaded:!1,reportPending:!1});case J:return(0,m.Z)((0,m.Z)({},e),{},{profile:r.payload});case Q:return(0,m.Z)((0,m.Z)({},e),{},{id:r.payload});case ie:return(0,m.Z)((0,m.Z)({},e),{},{id:null,reportSaving:!0,reportSaved:!1,reportSaveError:null});case oe:return(0,m.Z)((0,m.Z)({},e),{},{id:r.payload.id,reportSaving:!1,reportSaved:!0,reportSaveError:null});case se:return(0,m.Z)((0,m.Z)({},e),{},{id:r.id,reportSaving:!1,reportSaved:!1,reportSaveError:r.error});case le:return(0,m.Z)((0,m.Z)({},e),{},{reportSaving:!0,reportSaved:!1,reportSaveError:null});case ue:return(0,m.Z)((0,m.Z)({},e),{},{reportSaving:!1,reportSaved:!0,reportSaveError:null});case ce:return(0,m.Z)((0,m.Z)({},e),{},{reportSaving:!1,reportSaved:!1,reportSaveError:r.payload});case de:return(0,m.Z)((0,m.Z)({},e),{},{runReportPending:!0,runReportError:!1,runReportSuccess:!1});case pe:return(0,m.Z)((0,m.Z)({},e),{},{runReportPending:!1,runReportError:!1,runReportSuccess:!0});case he:return(0,m.Z)((0,m.Z)({},e),{},{runReportPending:!1,runReportError:!0,runReportSuccess:!1});case fe:return(0,m.Z)((0,m.Z)({},e),{},{existingReportSanitized:!0});default:return e}},previewReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case Le:return(0,m.Z)((0,m.Z)({},e),{},{pending:!0});case ke:return(0,m.Z)((0,m.Z)({},e),{},{pending:!1,loaded:!0,results:r.payload});case Ie:return(0,m.Z)((0,m.Z)({},e),{},{loaded:!1,pending:!1,error:r.error});case Me:return(0,m.Z)((0,m.Z)({},e),{},{lastReportId:r.id,lastReportName:r.name,loaded:!1,pending:!1,error:!1});case Ue:return(0,m.Z)({},e);default:return e}},settingsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case ze:return(0,m.Z)((0,m.Z)({},e),{},{pending:!0});case We:return(0,m.Z)((0,m.Z)({},e),{},{pending:!1,loaded:!0,globalSettings:r.payload,reportGlobalSettings:r.payload2});case Ve:return(0,m.Z)((0,m.Z)({},e),{},{loaded:!1,pending:!1,error:r.error});default:return e}},layoutReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case Ke:return(0,m.Z)((0,m.Z)({},e),{},{pending:!0});case Xe:return(0,m.Z)((0,m.Z)({},e),{},{pending:!1,loaded:!0,results:r.payload});case Je:return(0,m.Z)((0,m.Z)({},e),{},{loaded:!1,pending:!1,error:r.error});default:return e}},mementoReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case er:return(0,m.Z)((0,m.Z)({},e),{},{settings:r.payload});case rr:return(0,m.Z)((0,m.Z)({},e),{},{filters:r.payload});case tr:return(0,m.Z)((0,m.Z)({},e),{},{columns:r.payload});case nr:return(0,m.Z)((0,m.Z)({},e),{},{hierarchies:r.payload});case ar:return(0,m.Z)((0,m.Z)({},e),{},{measures:r.payload});default:return e}},languagesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cr,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case or:return(0,m.Z)((0,m.Z)({},e),{},{pending:!0});case sr:return(0,m.Z)((0,m.Z)({},e),{},{pending:!1,loaded:!0,data:r.payload});case lr:return(0,m.Z)((0,m.Z)({},e),{},{loaded:!1,pending:!1,error:r.error});default:return e}}}),pr=t(35209),hr=t(47371),fr=JSON.parse('{"amp.reportGenerator:Home-Page":"Report Generator","amp.tabGenerator:Home-Page":"Tab Generator","amp.reportGenerator:page-title":"Aid Management Platform - Report Generator","amp.tabGenerator:page-title":"Aid Management Platform - Tab Generator","amp.reportGenerator:filters":"Filters","amp.reportGenerator:settings":"Settings","amp.reportGenerator:close":"Close","amp.reportGenerator:no-data-short":"No Data","amp.reportGenerator:loading":"Loading","amp.reportGenerator:back":"Back","amp.reportGenerator:next":"Next","amp.reportGenerator:reportingDetails":"Reporting Details","amp.tabGenerator:reportingDetails":"Tab Details","amp.reportGenerator:columns":"Columns","amp.reportGenerator:financialMeasures":"Financial Measures","amp.reportGenerator:plusRunReport":"+ Run Report","amp.reportGenerator:resetAll":"Reset All","amp.reportGenerator:cancel":"Cancel","amp.reportGenerator:reportGenerator":"Report Generator","amp.tabGenerator:reportGenerator":"Tab Generator","amp.reportGenerator:save":"Save","amp.reportGenerator:saveAs":"Save As","amp.reportGenerator:totalGrouping":"Totals Grouping","amp.reportGenerator:options":"Options","amp.reportGenerator:fundingGroup":"Funding Grouping","amp.reportGenerator:reportDescription":"Report Description","amp.tabGenerator:reportDescription":"Tab Description","amp.reportGenerator:preview":"Preview","amp.reportGenerator:mustSelect":"A selection must be made","amp.reportGenerator:availableColumns":"Available Columns","amp.reportGenerator:selectedColumns":"Selected Columns","amp.reportGenerator:hierarchies":"Hierarchies","amp.reportGenerator:search":"Search","amp.reportGenerator:resetColumns":"Reset Columns","amp.reportGenerator:moveUp":"Move Up","amp.reportGenerator:moveDown":"Move Down","amp.reportGenerator:mustSelectOneColumn":"Must select at least one column","amp.reportGenerator:mustSelectOneMeasure":"Must select at least one measure","amp.reportGenerator:availableFinancialMeasures":"Available Financial Measures","amp.reportGenerator:orderSelectedFinancialMeasures":"Order Selected Financial Measures","amp.reportGenerator:needMoreHierarchies":"Only in summary reports can all columns be hierarchies","amp.tabGenerator:needMoreHierarchies":"Only in summary tabs can all columns be hierarchies","amp.reportGenerator:confirmResetAll":"Are you sure you want to clear all elements you have selected?","amp.reportGenerator:confirmCancel":"Are you sure you want to exit the report generator?","amp.tabGenerator:confirmCancel":"Are you sure you want to exit the tab generator?","amp.reportGenerator:resetMeasures":"Reset Financial Measures","amp.reportGenerator:enterReportTitle":"Please enter a title for this report:","amp.tabGenerator:enterReportTitle":"Please enter a title for this tab:","amp.reportGenerator:enterReportName":"Please enter a report name.","amp.tabGenerator:enterReportName":"Please enter a tab name.","amp.reportGenerator:saveReport":"Save Report","amp.tabGenerator:saveReport":"Save Tab","amp.reportGenerator:saveTab":"Save Tab","amp.reportGenerator:saveNew":"Save New Report","amp.tabGenerator:saveNew":"Save New Tab","amp.reportGenerator:missingTitle":"Missing title","amp.reportGenerator:missingColumns":"Please select at least one column","amp.reportGenerator:previewError":"There was an error generating the preview.","amp.reportGenerator:previewTooltip":"View your menu selections in real time to see how your report will look once finalized.","amp.tabGenerator:previewTooltip":"View your menu selections in real time to see how your tab will look once finalized.","amp.reportGenerator:selectCategory":"Please select a category from below","amp.reportGenerator:category":"Category","amp.reportGenerator:appDescription":"The Report Generator allows you to create customized reports that fit your needs, based on data in the AMP. Starting with Report Details, click through each step to create your own report.","amp.tabGenerator:appDescription":"The Tab Generator allows you to create customized tabs that fit your needs, based on data in the AMP. Starting with Tab Details, click through each step to create your own tab.","amp.reportGenerator:hideAppliedFilters":"(Hide applied filters)","amp.reportGenerator:showAppliedFilters":"(Show applied filters)","amp.reportGenerator:hideAppliedSettings":"(Hide applied settings)","amp.reportGenerator:showAppliedSettings":"(Show applied settings)","amp.reportGenerator:calendar":"Calendar","amp.reportGenerator:currency":"Currency","amp.reportGenerator:amountUnits":"Amounts units","amp.reportGenerator:yearRange":"Year Range","amp.reportGenerator:from":"from","amp.reportGenerator:until":"until","amp.reportGenerator:errorLoadingReport":"ERROR: Cant load report data.","amp.tabGenerator:errorLoadingReport":"ERROR: Cant load tab data.","amp.reportGenerator:apiError1705":"There is already a report with the same name. Please choose a different one.","amp.tabGenerator:apiError1705":"There is already a tab with the same name. Please choose a different one.","amp.reportGenerator:apiError1805":"There is already a report with the same name. Please choose a different one.","amp.tabGenerator:apiError1805":"There is already a tab with the same name. Please choose a different one.","amp.reportGenerator:apiError0512":"To perform the selected action you need to be authenticated","amp.reportGenerator:moreThan3Hierarchies":"For better user experience, it is recommended to use up to three hierarchies.","amp.reportGenerator:summaryReportWithoutMeasuresAndHierarchies":"Summary reports without hierarchies and measures are not supported.","amp.tabGenerator:summaryReportWithoutMeasuresAndHierarchies":"Summary tabs without hierarchies and measures are not supported.","amp.reportGenerator:noMoreThan3ColumnsInTabs":"You cannot select more than 3 columns in a desktop tab","amp.reportGenerator:noMoreThan2MeasuresInTabs":"You cannot select more than 2 measures in a desktop tab","amp.reportGenerator:mustHave1MeasuresInTabs":"Must select at least one measure","amp.reportGenerator:autoOpen":"Open the report after saving","amp.reportGenerator:resetAllTooltip":"Revert all changes done in the generator to the default values.","amp.reportGenerator:totalGroupingTooltip":"The time frame in which the report is being grouped or broken down. For example, if you select \u201cAnnual Report\u201d, your report will show one measure per year. If you select \u201cTotals Only\u201d, results will not be broken down by year.","amp.tabGenerator:totalGroupingTooltip":"The time frame in which the tab is being grouped or broken down. For example, If you select \u201cTotals Only\u201d, results will not be broken down by year.","amp.reportGenerator:reportDescriptionTooltip":"You can briefly describe the contents of your custom report. This is helpful when you are creating multiple reports with a different focus.","amp.tabGenerator:reportDescriptionTooltip":"You can briefly describe the contents of your custom tab. This is helpful when you are creating multiple tabs with a different focus.","amp.reportGenerator:optionsTooltip":"In this menu, you can customize how the report will look.","amp.tabGenerator:optionsTooltip":"In this menu, you can customize how the tab will look.","amp.reportGenerator:fundingTooltip":"Use this menu to select the type of funding reflected in the report (e.g. pledges, components, regular donor reports)","amp.tabGenerator:fundingTooltip":"Use this menu to select the type of funding reflected in the tab (e.g. standard, regional, components)","amp.reportGenerator:availableColumnsTooltip":"Select from all available fields that are enabled in the AMP for inclusion in your report. You may select as many columns as you like.","amp.tabGenerator:availableColumnsTooltip":"Select from all available fields that are enabled in the AMP for inclusion in your tab. You may select as many columns as you like.","amp.reportGenerator:selectedColumnsTooltip":"In this menu, you can see what fields you have previously selected. Click and drag on the arrows to change the order in which your selections will appear in your final report.","amp.tabGenerator:selectedColumnsTooltip":"In this menu, you can see what fields you have previously selected. Click and drag on the arrows to change the order in which your selections will appear in your final tab.","amp.reportGenerator:hierarchiesTooltip":"Decide in which order information will be grouped in the report. For example if you select \u201cprimary sector\u201d all information will be grouped according to this selection.","amp.tabGenerator:hierarchiesTooltip":"Decide in which order information will be grouped in the tab. For example if you select \u201cprimary sector\u201d all information will be grouped according to this selection.","amp.reportGenerator:availableMeasuresTooltip":"All available financial fields that are enabled in the AMP.","amp.tabGenerator:availableMeasuresTooltip":"All available financial fields that are enabled in the AMP.","amp.reportGenerator:selectedMeasuresTooltip":"Choose in what order the measures will appear in your final report.","amp.tabGenerator:selectedMeasuresTooltip":"Choose in what order the measures will appear in your final tab."}'),mr=t(59653),gr=l().createContext({translations:fr,store:null}),vr=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){return(0,n.Z)(this,t),r.apply(this,arguments)}return(0,a.Z)(t,[{key:"componentDidMount",value:function(){(0,this.props._fetchTranslations)(fr)}},{key:"render",value:function(){var e=this.props,r=e.translationPending,t=e.children,n=e.store;if(r)return(0,mr.jsx)(hr.g,{});var a=this.props.translations;return document.title=a["amp.reportGenerator:page-title"],(0,mr.jsx)(gr.Provider,{value:{translations:a,store:n},children:t})}}]),t}(s.Component),yr=(0,p.connect)((function(e){return{translationPending:e.translationsReducer.pending,translations:e.translationsReducer.translations}}),(function(e){return(0,u.bindActionCreators)({_fetchTranslations:pr.Z},e)}))(vr);vr.defaultProps={translationPending:!1,translations:void 0};var Rr=t(46760),Sr=(t(98269),t(68079)),Cr=t(77580),br=t(39887);var xr=t.p+"static/media/icon-information.8e04e00193a931d03078c1a407ab2d7d.svg",_r=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){var e;(0,n.Z)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).handleResetAll=function(){var r=e.props,t=r.translations,n=r.profile;confirm(Ne("confirmResetAll",n,t))&&location.reload()},e.handleCancel=function(){var r=e.props,t=r.translations,n=r.profile;confirm(Ne("confirmCancel",n,t))&&(window.location.href=n!==R?"/viewTeamReports.do?tabs=false&reset=true":"/viewTeamReports.do?tabs=true&reset=true")},e}return(0,a.Z)(t,[{key:"render",value:function(){var e=this.props,r=e.translations,t=e.profile,n=(0,mr.jsx)(br.Tooltip,{id:"reset-all-tooltip",children:Ne("resetAllTooltip",t,r)});return(0,mr.jsx)(mr.Fragment,{children:(0,mr.jsxs)(Cr.Grid,{children:[(0,mr.jsxs)(Cr.GridRow,{children:[(0,mr.jsx)(Cr.GridColumn,{width:"6",textAlign:"left",children:(0,mr.jsx)(Cr.Header,{textAlign:"left",size:"medium",children:Ne("reportGenerator",t,r)})}),(0,mr.jsx)(Cr.GridColumn,{width:"4",textAlign:"left"}),(0,mr.jsxs)(Cr.GridColumn,{width:"6",textAlign:"right",children:[(0,mr.jsxs)("span",{className:"green_text bold pointer",onClick:this.handleResetAll,children:[Ne("resetAll",t,r),(0,mr.jsx)(br.OverlayTrigger,{trigger:["hover","focus"],overlay:n,children:(0,mr.jsx)("img",{className:"info-icon",src:xr,alt:"info-icon"})})]}),"\xa0\xa0\xa0|\xa0\xa0\xa0",(0,mr.jsx)("span",{className:"red_text bold pointer",onClick:this.handleCancel,children:Ne("cancel",t,r)})]})]}),(0,mr.jsx)(Cr.GridRow,{children:(0,mr.jsx)(Cr.GridColumn,{children:Ne("appDescription",t,r)})})]})})}}]),t}(s.Component),wr=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations,profile:e.uiReducer.profile}}),(function(e){return(0,u.bindActionCreators)({},e)}))(_r);_r.defaultProps={profile:void 0},_r.contextType=gr;var Er=t(87171),Tr=t.n(Er),Ar=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){return(0,n.Z)(this,t),r.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){var e=this.props,r=e.visible,t=e.message,n=e.warning;return(0,mr.jsx)("div",{className:r?"red_text":"invisible-tab",style:n?{color:"#2480c6"}:null,children:t})}}]),t}(s.Component);Ar.defaultProps={warning:!1};var Zr=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){return(0,n.Z)(this,t),r.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){var e=this.props,r=e.languages,t=e.values,n=e.onChange,a=e.isMultiLanguage,i=e.mandatory;if(a){var o=[],s=[];return i&&1===i.length?(s.push(r.find((function(e){return e.id===i[0]}))),r.forEach((function(e){s.find((function(r){return r.id===e.id}))||s.push(e)}))):s=r,s.forEach((function(e,r){o.push({menuItem:i.find((function(r){return r===e.id}))?(0,mr.jsxs)(Cr.Menu.Item,{children:[(0,mr.jsx)("div",{className:"red_text",style:{float:"left",paddingRight:"5px"},children:"* "}),e.id]},"messages"):e.id,render:function(){var a=t[r];return(0,mr.jsx)(Cr.Tab.Pane,{children:(0,mr.jsx)("input",{type:"text",value:a,onChange:function(r){return n(e.id,r.target.value)},placeholder:"(".concat(e.id,")")},e.id)})}})})),(0,mr.jsx)(Cr.Tab,{panes:o})}return(0,mr.jsx)("input",{type:"text",value:t[0],onChange:function(e){return n(null,e.target.value)}})}}]),t}(s.Component);Zr.defaultProps={mandatory:[]};var jr=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(e){var a;return(0,n.Z)(this,t),(a=r.call(this,e)).validateAndSave=function(){var e=a.props,r=e.save,t=e.close,n=e.name,i=e.columns,o=e.reportDetails,s=e.hierarchies,l=e.measures,u=a.state.openReportOnSave,c=function(e,r,t,n,a){return null===e||void 0===e||0===e.toString().trim().length?"missingTitle":r&&0!==r.length?t.selectedSummaryReport&&0===n.selected.length&&0===a.selected.length?"summaryReportWithoutMeasuresAndHierarchies":null:"missingColumns"}(n,i,o,s,l);c?a.setState({modalSaveError:c}):(r(u),a.setState({originalState:{name:n}}),t())},a.handleCategoryChange=function(e,r){var t=r.value;(0,a.props._updateReportDetailsNameReportCategory)(t)},a.handleCancel=function(){var e=a.props,r=e.close;(0,e._revertReportDetailsName)(a.state.originalState.name),a.setState({originalState:void 0}),r()},a.generateSaveModal=function(){var e=a.props,r=e.translations,t=e.open,n=e.isNewReport,i=e.reportPending,o=e.metaDataPending,s=e.profile,l=i||o;return(0,mr.jsxs)(Cr.Modal,{className:"save-modal",closeIcon:!1,open:t,onClose:function(){return a.handleCancel()},centered:!0,size:"small",children:[(0,mr.jsx)(Cr.Header,{content:Ne(n?"saveAs":"save",s,r)}),(0,mr.jsx)(Cr.Modal.Content,{children:a.generateSaveModalContent()}),(0,mr.jsxs)(Cr.Modal.Actions,{children:[(0,mr.jsxs)(Cr.Button,{color:"green",onClick:a.validateAndSave,loading:l,disabled:l,children:[(0,mr.jsx)(Cr.Icon,{name:"save"}),Ne(n?"saveNew":"save",s,r)]}),(0,mr.jsxs)(Cr.Button,{color:"red",onClick:a.handleCancel,children:[(0,mr.jsx)(Cr.Icon,{name:"cancel"}),Ne("cancel",s,r)]})]})]})},a.handleChangeAutoOpen=function(){var e=a.state.openReportOnSave;a.setState({openReportOnSave:!e})},a.isLoading=function(){var e=a.props,r=e.reportPending,t=e.metaDataPending;return r||t},a.generateSaveModalContent=function(){var e=a.props,r=e.translations,t=e.name,n=e.selectedReportCategory,i=e.reportCategories,o=e.profile,s=e.languages,l=e.globalSettings,u=a.state,c=u.modalSaveError,d=u.openReportOnSave;if(!l)return null;var p=a.isLoading(),h=i?i.map((function(e){return{key:e.id,text:e.label,value:e.id}})):[],f=[];return t&&(l.multilingual?s.forEach((function(e){t[e.id]?f.push(t[e.id]):f.push("")})):f.push(t)),(0,mr.jsx)(Cr.Form,{loading:p,children:p?null:(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)(Cr.Form.Field,{children:[(0,mr.jsxs)(Cr.Label,{children:[(0,mr.jsx)("div",{className:"red_text",style:{float:"left",paddingRight:"5px"},children:"* "}),(0,mr.jsx)("div",{children:Ne("enterReportTitle",o,r)})]}),(0,mr.jsx)(Zr,{values:f,languages:s,isMultiLanguage:l.multilingual,mandatory:[l["default-language"]],onChange:a.handleChangeName})]}),i?(0,mr.jsxs)(Cr.Form.Field,{children:[(0,mr.jsx)(Cr.Label,{children:Ne("category",o,r)}),(0,mr.jsx)(Cr.Dropdown,{className:"category-dropdown",placeholder:Ne("selectCategory",o,r),selection:!0,options:h,defaultValue:n,onChange:a.handleCategoryChange})]}):null,o!==R?(0,mr.jsx)(Cr.Form.Field,{children:(0,mr.jsx)(Cr.Checkbox,{toggle:!0,label:Ne("autoOpen",o,r),checked:d,onChange:a.handleChangeAutoOpen})}):null,c?(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)(Cr.Divider,{}),(0,mr.jsx)(Ar,{visible:!0,message:Ne(c,o,r)})]}):null]})})},a.handleChangeName=function(e,r){var t=a.props,n=t._updateReportDetailsName,i=t._updateReportDetailsNameMultiLang;e?i(r,e):n(r)},a.state={modalSaveError:null,openReportOnSave:!1,originalState:void 0},a}return(0,a.Z)(t,[{key:"shouldComponentUpdate",value:function(e,r,t){return this.props.open!==e.open&&this.setState({modalSaveError:null}),this.props!==e||this.state!==r||this.context!==t}},{key:"componentDidUpdate",value:function(e,r,t){var n=this.state.originalState,a=this.props.name;n||this.isLoading()||this.setState({originalState:{name:a}})}},{key:"render",value:function(){return this.props.languages?(0,mr.jsx)("div",{className:"invisible",children:this.generateSaveModal()}):null}}]),t}(s.Component),Dr=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations,reportPending:e.uiReducer.reportPending,name:e.uiReducer.reportDetails.name,columns:e.uiReducer.columns.selected,metaDataPending:e.uiReducer.metaDataPending,selectedReportCategory:e.uiReducer.reportDetails.selectedReportCategory,reportCategories:e.uiReducer.reportCategories,reportDetails:e.uiReducer.reportDetails,hierarchies:e.uiReducer.hierarchies,measures:e.uiReducer.measures,isTab:e.uiReducer.isTab,profile:e.uiReducer.profile,languages:e.languagesReducer.data,globalSettings:e.settingsReducer.globalSettings}}),(function(e){return(0,u.bindActionCreators)({_updateReportDetailsNameMultiLang:function(e,r){return function(e,r){return{type:G,payload:e,lang:r}}(e,r)},_updateReportDetailsName:function(e){return{type:P,payload:e}},_updateReportDetailsNameReportCategory:function(e){return{type:L,payload:e}},_revertReportDetailsName:function(e){return{type:N,payload:e}}},e)}))(jr);jr.defaultProps={reportPending:!1,metaDataPending:!1,name:void 0,selectedReportCategory:null,reportCategories:[],columns:[],reportDetails:void 0,hierarchies:void 0,measures:void 0,profile:void 0,languages:void 0,globalSettings:void 0};var Gr="menu",Pr=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){var e;return(0,n.Z)(this,t),(e=r.call(this)).handleItemClick=function(r,t){var n=t.name,a=e.props.onClick,i=-1;switch(n){case Gr+0:i=0;break;case Gr+1:i=1;break;case Gr+2:i=2}a(i)},e.setSaveModalOpen=function(r,t){e.setState({saveModalOpen:r,isNewReport:t})},e.state={modalSaveError:null,saveModalOpen:!1,isNewReport:!1},e}return(0,a.Z)(t,[{key:"componentDidMount",value:function(){(0,this.props._getLayout)()}},{key:"render",value:function(){var e=this,r=this.state,t=r.modalSaveError,n=r.saveModalOpen,a=r.isNewReport,i=this.props,o=i.translations,s=i.tab,l=i.saveNewReport,u=i.saveReport,c=i.loaded,d=i.results,p=i.runReport,h=i.id,f=i.options,m=i.columns,g=i.measures,v=i.hierarchies,y=i.reportDetails,S=i.profile,C=i.runReportPending,b=i.reportSaving;return(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)(Cr.Menu,{fluid:!0,vertical:!0,children:[(0,mr.jsx)(Cr.Menu.Item,{name:Gr+0,content:"1. ".concat(Ne("reportingDetails",S,o)),active:0===s,onClick:this.handleItemClick}),(0,mr.jsx)(Cr.Menu.Item,{name:Gr+1,content:"2. ".concat(Ne("columns",S,o)),active:1===s,onClick:this.handleItemClick}),(0,mr.jsx)(Cr.Menu.Item,{name:Gr+2,content:"3. ".concat(Ne("financialMeasures",S,o)),active:2===s,onClick:this.handleItemClick}),c&&d.logged?(0,mr.jsxs)(Cr.Item,{className:"save_buttons_item",children:[(0,mr.jsx)(Cr.Button,{color:"green",onClick:function(){return e.setSaveModalOpen(!0,!1)},disabled:!h||b,children:Ne("save",S,o)}),(0,mr.jsx)(Cr.Button,{color:"orange",onClick:function(){return e.setSaveModalOpen(!0,!0)},disabled:b,children:Ne("saveAs",S,o)})]}):null]}),c&&!d.logged&&!h&&f&&f.find((function(e){return"fm-is-public-report-enabled"===e.name})).visible&&S!==R?(0,mr.jsx)(Cr.Item,{children:(0,mr.jsx)(Cr.Button,{size:"huge",fluid:!0,color:"green",onClick:p,disabled:!Pe(m,g,v,y,S)||C,children:Ne("plusRunReport",S,o)})}):null,(0,mr.jsx)(Dr,{open:n,modalSaveError:t,isNewReport:a,save:a?l:u,close:function(){return e.setSaveModalOpen(!1)}})]})}}]),t}(s.Component),Nr=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations,description:e.uiReducer.reportDetails.description,selectedReportCategory:e.uiReducer.reportDetails.selectedReportCategory,loaded:e.layoutReducer.loaded,results:e.layoutReducer.results,id:e.uiReducer.id,options:e.uiReducer.options,reportDetails:e.uiReducer.reportDetails,columns:e.uiReducer.columns,measures:e.uiReducer.measures,hierarchies:e.uiReducer.hierarchies,profile:e.uiReducer.profile,runReportPending:e.uiReducer.runReportPending,reportSaving:e.uiReducer.reportSaving}}),(function(e){return(0,u.bindActionCreators)({_getLayout:function(){return Qe()}},e)}))(Pr);Pr.defaultProps={loaded:!1,results:void 0,id:void 0,options:void 0,reportDetails:void 0,columns:void 0,measures:void 0,hierarchies:void 0,profile:void 0,reportSaving:!1};var Or=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){return(0,n.Z)(this,t),r.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){var e=this.props,r=e.title,t=e.tooltip,n=e.isRequired,a=e.children,i=e.className,o=t?(0,mr.jsx)(br.Tooltip,{id:t,children:t}):null;return(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("div",{className:"option-list-title",children:[n?(0,mr.jsx)("span",{className:"red_text",children:"* "}):null,(0,mr.jsx)("span",{children:r}),t?(0,mr.jsx)(br.OverlayTrigger,{trigger:["hover","focus"],overlay:o,children:(0,mr.jsx)("img",{className:"info-icon",src:xr,alt:"info-icon"})}):null]}),(0,mr.jsx)("div",{className:"option-list-content ".concat(i||""),children:a})]})}}]),t}(s.Component);Or.defaultProps={isRequired:!1,tooltip:null,children:void 0,className:null};var Fr=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){var e;return(0,n.Z)(this,t),(e=r.call(this)).handleHeaderClick=function(r,t){var n=t.index,a=e.state.activeIndex;a.includes(n)?a.splice(a.findIndex((function(e){return e===n}))):a.push(n),e.setState({activeIndex:a})},e.onItemClick=function(r){(0,e.props.onColumnSelectionChange)(r)},e.handleCategoryTitleClick=function(r,t,n){var a=e.props,i=a.columns,o=a.selected,s=e.extractCategories(i);i.filter((function(e){return e.category===s[r]})).forEach((function(r){t?o.find((function(e){return e===r.id}))&&e.onItemClick(r.id):o.find((function(e){return e===r.id}))||e.onItemClick(r.id)})),n.stopPropagation(),n.preventDefault()},e.accordionActive=function(r,t){var n=e.props.openSections;return r.includes(t)||n},e.state={activeIndex:[]},e}return(0,a.Z)(t,[{key:"extractCategories",value:function(e){var r=new Set;return e.forEach((function(e){r.add(e.category)})),Array.from(r)}},{key:"render",value:function(){var e=this,r=this.props,t=r.columns,n=r.showLoadingWhenEmpty,a=r.selected,i=r.radio,o=r.noCategories,s=r.isLoading,l=this.state.activeIndex;if(t.length>0&&!s){if(o)return(0,mr.jsx)(Cr.Form,{children:t.map((function(r){var t=r.description?(0,mr.jsx)(br.Tooltip,{id:r.description,children:r.description}):null;return(0,mr.jsxs)("div",{className:"column-item",children:[(0,mr.jsx)(Cr.Checkbox,{color:"green",id:Math.random(),label:r.label?r.label:r.name,checked:void 0!==a.find((function(e){return e===r.id})),onChange:e.onItemClick.bind(null,r.id)}),r.description?(0,mr.jsx)(br.OverlayTrigger,{trigger:["hover","focus"],overlay:t,children:(0,mr.jsx)("img",{className:"info-icon",src:xr,alt:"info-icon"})}):null]},Math.random())}))});var u=this.extractCategories(t);return(0,mr.jsx)(Cr.Form,{children:(0,mr.jsx)(Cr.Accordion,{fluid:!0,styled:!0,exclusive:!1,children:u.map((function(r,n){var o=t.filter((function(e){return e.category===r})),s=a.filter((function(e){return o.find((function(r){return r.id===e}))})),u=s.length===o.length;return(0,mr.jsxs)("div",{children:[(0,mr.jsxs)(Cr.Accordion.Title,{index:n,active:e.accordionActive(l,n),onClick:e.handleHeaderClick,children:[(0,mr.jsxs)("div",{className:"ui checkbox general-checkbox".concat(!u&&s.length>0?" partial":""),children:[(0,mr.jsx)("input",{className:"hidden",id:"".concat(n,"_cat"),type:"checkbox",defaultChecked:u}),(0,mr.jsx)("label",{className:"general-label",htmlFor:"".concat(n,"_cat"),onClick:e.handleCategoryTitleClick.bind(null,n,u)})]}),(0,mr.jsx)(Cr.Icon,{name:"dropdown",className:"dropdown-right"}),(0,mr.jsx)("span",{className:"category-title",children:"".concat(r," (").concat(s.length,"/").concat(o.length,")")})]}),(0,mr.jsx)(Cr.Accordion.Content,{active:e.accordionActive(l,n),children:o.map((function(r){return(0,mr.jsx)("div",{className:"column-item",children:(0,mr.jsx)(Cr.Checkbox,{radio:i,onClick:e.onItemClick.bind(null,r.id),id:r.id,value:r.id,checked:void 0!==a.find((function(e){return e===r.id})),label:r.label?r.label:r.name},Math.random())},Math.random())}))})]},Math.random())}))})})}return n?(0,mr.jsx)(Cr.Form,{loading:!0}):null}}]),t}(s.Component);Fr.defaultProps={columns:[],selected:[],showLoadingWhenEmpty:!1,radio:!1,noCategories:!1,openSections:!1,isLoading:!1};var Lr=t(96234),kr=t(80753),Ir=t(69315),Mr=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(e){var a;return(0,n.Z)(this,t),(a=r.call(this,e)).reorder=function(e,r,t){var n=Array.from(e),a=n.splice(r,1),i=(0,Lr.Z)(a,1)[0];return n.splice(t,0,i),n},a.moveUp=function(e){var r=a.props,t=r.order;(0,r.onColumnSortChange)(a.reorder(t,e,e-1))},a.moveDown=function(e){var r=a.props,t=r.order;(0,r.onColumnSortChange)(a.reorder(t,e,e+1))},a.getListStyle=function(e){return{background:"transparent",padding:"5px"}},a.getItemStyle=function(e,r){return(0,m.Z)({userSelect:"none",padding:"5px",margin:"0 0 6px 0",background:"transparent"},r)},a.onDragEnd=function(e){var r=a.props,t=r.order,n=r.onColumnSortChange;e.destination&&n(a.reorder(t,e.source.index,e.destination.index))},a.handleHeaderClick=function(e,r){var t=r.index,n=a.state.activeIndex===t?-1:t;a.setState({activeIndex:n})},a.onItemClick=function(e){(0,a.props.onColumnSelectionChange)(e)},a.onDragEnd=a.onDragEnd.bind((0,kr.Z)(a)),a}return(0,a.Z)(t,[{key:"render",value:function(){var e=this,r=this.props,t=r.columns,n=r.order,a=r.checkbox,i=r.keyPrefix,o=r.translations,s=r.selected,l=r.profile,u=r.isLoading;if(t.length>0&&!u){var c=t;return n.length>0&&(c=[],n.forEach((function(e){c.push(t.find((function(r){return r.id===e})))}))),(0,mr.jsx)(mr.Fragment,{children:(0,mr.jsx)(Ir.DragDropContext,{onDragEnd:this.onDragEnd,children:(0,mr.jsx)(Ir.Droppable,{droppableId:"".concat(i,"_droppable"),children:function(r,t){return(0,mr.jsx)("table",(0,m.Z)((0,m.Z)({},r.droppableProps),{},{ref:r.innerRef,style:e.getListStyle(t.isDraggingOver),children:(0,mr.jsxs)("tbody",{children:[c.map((function(r,t){return(0,mr.jsx)(Ir.Draggable,{draggableId:"".concat(i+r.id),index:t,children:function(n,u){return(0,mr.jsxs)("tr",(0,m.Z)((0,m.Z)((0,m.Z)({className:"sortable-tr",ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{style:e.getItemStyle(u.isDragging,n.draggableProps.style),children:[(0,mr.jsx)("td",{className:"sortable-td",children:a?(0,mr.jsx)(Cr.Checkbox,{color:"green",id:i+r.id,label:r.label?r.label:r.name,checked:void 0!==s.find((function(e){return e===r.id})),onChange:e.onItemClick.bind(null,r.id)}):(0,mr.jsx)("span",{children:r.label?r.label:r.name})}),(0,mr.jsxs)("td",{className:"sortable-td td-arrows",children:[(0,mr.jsx)("span",{className:0===t?"disabled":"",title:Ne("moveUp",l,o),onClick:e.moveUp.bind(null,t),children:(0,mr.jsx)(Cr.Icon,{name:"arrow up",color:"blue"})}),(0,mr.jsx)("span",{className:t===c.length-1?"disabled":"",title:Ne("moveDown",l,o),onClick:e.moveDown.bind(null,t),children:(0,mr.jsx)(Cr.Icon,{name:"arrow down",color:"blue"})})]})]}))}},r.id)})),r.placeholder]})}))}})})})}return null}}]),t}(s.Component);Mr.defaultProps={columns:[],order:[],checkbox:!1,onColumnSelectionChange:void 0,selected:[],isLoading:!1};var Ur=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){var e;(0,n.Z)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).handleKeyDown=function(r){var t=e.props,n=t.keyPress,a=t.keyEvent;r.key===n&&a(r)},e}return(0,a.Z)(t,[{key:"render",value:function(){var e=this.props.children;return(0,mr.jsx)("div",{onKeyDown:this.handleKeyDown,children:e})}}]),t}(s.Component),Hr=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){var e;return(0,n.Z)(this,t),(e=r.call(this)).handleColumnSelection=function(r){var t=e.props,n=t.selectedColumns,a=t._updateColumnsSelected,i=t.columns,o=n.indexOf(r);o>-1?n.splice(o,1):n.push(r),a(n),e.handleAvailableHierarchiesChange(n.filter((function(e){return i.find((function(r){return r.hierarchy&&r.id===e}))}))),e.forceUpdate()},e.handleColumnSort=function(r){(0,e.props._updateColumnsSorting)(r)},e.handleAvailableHierarchiesChange=function(r){var t=e.props,n=t._updateHierarchiesAvailable,a=t.columns,i=t.hierarchies,o=t.hierarchiesOrder,s=t.selectedColumns,l=i;if(r.length>l.length){var u=null;r.forEach((function(e){s.find((function(r){return r.id===e}))||(u=e)})),u&&(l.push(a.find((function(e){return e.id===u}))),n(l),o.push(u),e.handleHierarchySort(o))}else{var c=null;if(i.forEach((function(e){r.includes(e.id)||(c=e.id)})),c){var d=i.findIndex((function(e){return e.id===c}));i.splice(d,1),d=o.findIndex((function(e){return e===c})),o.splice(d,1),n(i),e.handleHierarchySort(o),e.handleHierarchySelection(c,!0)}}},e.handleHierarchySelection=function(r,t){var n=e.props,a=n._updateHierarchiesSelected,i=n.selectedHierarchies,o=i.findIndex((function(e){return e===r}));t?o>-1&&i.splice(o,1):i.includes(r)?i.splice(o,1):i.push(r),a(i),e.forceUpdate()},e.handleHierarchySort=function(r){(0,e.props._updateHierarchiesSorting)(r)},e.handleSearch=function(r){e.setState({search:r.target.value,applySearch:!1})},e.handleReset=function(){var r=e.props,t=r._resetColumnsSelected,n=r._updateColumnsSelected,a=r.id,i=r.initialColumns,o=r._setInitialHierarchies,s=r.initialHierarchies;if(a){n(Object.assign([],i));var l=(0,m.Z)({},s);o((0,Sr.Z)(l.available),(0,Sr.Z)(l.selected),(0,Sr.Z)(l.order))}else t()},e.highlightColumns=function(r){e.state.search&&e.setState({applySearch:!0})},e.state={search:null,applySearch:!1},e}return(0,a.Z)(t,[{key:"render",value:function(){var e=this.props,r=e.visible,t=e.translations,n=e.columns,a=e.selectedColumns,i=e.hierarchies,o=e.hierarchiesOrder,s=e.selectedHierarchies,l=e.selectedSummaryReport,u=e.profile,c=e.existingReportSanitized,d=this.state,p=d.search,h=d.applySearch,f=p?n.filter((function(e){return e.label.toLowerCase().indexOf(p.toLowerCase())>-1})):n;return(0,mr.jsx)("div",{className:r?"":"invisible-tab",children:(0,mr.jsxs)(Cr.Grid,{columns:3,children:[(0,mr.jsx)(Cr.GridColumn,{computer:"8",tablet:"16",children:(0,mr.jsx)(Ur,{keyPress:"Enter",keyEvent:this.highlightColumns,children:(0,mr.jsx)(Cr.Input,{icon:"search",placeholder:Ne("search",u,t),onChange:this.handleSearch})})}),(0,mr.jsx)(Cr.GridColumn,{computer:"8",textAlign:"right",tablet:"16",children:(0,mr.jsx)("span",{className:"green_text bold pointer reset-text",onClick:this.handleReset,children:Ne("resetColumns",u,t)})}),(0,mr.jsx)(Cr.Grid.Column,{computer:"6",tablet:"16",children:(0,mr.jsx)(Or,{title:Ne("availableColumns",u,t),tooltip:Ne("availableColumnsTooltip",u,t),className:"smallHeight",children:(0,mr.jsx)(Fr,{openSections:h,columns:f,selected:a,showLoadingWhenEmpty:!p,isLoading:!c,onColumnSelectionChange:this.handleColumnSelection})})}),(0,mr.jsx)(Cr.Grid.Column,{computer:"5",tablet:"16",children:(0,mr.jsx)(Or,{title:Ne("selectedColumns",u,t),isRequired:!0,tooltip:Ne("selectedColumnsTooltip",u,t),className:"smallHeight",children:(0,mr.jsx)(Mr,{keyPrefix:"columns",translations:t,columns:n.filter((function(e){return a.find((function(r){return r===e.id}))})),order:a,isLoading:!c,onColumnSortChange:this.handleColumnSort,profile:u})})}),(0,mr.jsx)(Cr.Grid.Column,{computer:"5",tablet:"16",children:(0,mr.jsx)(Or,{title:Ne("hierarchies",u,t),tooltip:Ne("hierarchiesTooltip",u,t),className:"smallHeight",children:(0,mr.jsx)(Mr,{keyPrefix:"hierarchies",checkbox:!0,selected:s,translations:t,columns:i,order:o,isLoading:!c,onColumnSelectionChange:this.handleHierarchySelection,onColumnSortChange:this.handleHierarchySort,profile:u})})}),0===a.length?(0,mr.jsx)(Cr.Grid.Column,{computer:16,className:"narrowRow",children:(0,mr.jsx)(Ar,{visible:!0,message:Ne("mustSelectOneColumn",u,t)})}):null,a.length>0&&a.length===s.length&&!l?(0,mr.jsx)(Cr.Grid.Column,{computer:16,className:"narrowRow",children:(0,mr.jsx)(Ar,{visible:!0,message:Ne("needMoreHierarchies",u,t)})}):null,s.length>3?(0,mr.jsx)(Cr.Grid.Column,{computer:16,className:"narrowRow",children:(0,mr.jsx)(Ar,{visible:!0,message:Ne("moreThan3Hierarchies",u,t),warning:!0})}):null,a.length>3&&u===R?(0,mr.jsx)(Cr.Grid.Column,{computer:16,className:"narrowRow",children:(0,mr.jsx)(Ar,{visible:!0,message:Ne("noMoreThan3ColumnsInTabs",u,t)})}):null]})})}}]),t}(s.Component),Br=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations,columns:e.uiReducer.columns.available,selectedColumns:e.uiReducer.columns.selected,hierarchies:e.uiReducer.hierarchies.available,selectedHierarchies:e.uiReducer.hierarchies.selected,hierarchiesOrder:e.uiReducer.hierarchies.order,selectedSummaryReport:e.uiReducer.reportDetails.selectedSummaryReport,profile:e.uiReducer.profile,id:e.uiReducer.id,initialColumns:e.mementoReducer.columns,initialHierarchies:e.mementoReducer.hierarchies,existingReportSanitized:e.uiReducer.existingReportSanitized}}),(function(e){return(0,u.bindActionCreators)({_updateColumnsSelected:function(e){return ve(e)},_updateColumnsSorting:function(e){return{type:I,payload:e}},_updateHierarchiesSelected:function(e){return{type:W,payload:e}},_updateHierarchiesSorting:function(e){return{type:z,payload:e}},_updateHierarchiesAvailable:function(e){return{type:V,payload:e}},_resetColumnsSelected:function(){return{type:M}},_setInitialHierarchies:function(e,r,t){return ye(e,r,t)}},e)}))(Hr);Hr.defaultProps={columns:[],selectedColumns:[],hierarchies:[],selectedHierarchies:[],hierarchiesOrder:[],selectedSummaryReport:!1,profile:void 0,id:void 0,initialColumns:[],initialHierarchies:[],existingReportSanitized:!1},Hr.contextType=gr;var zr=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){return(0,n.Z)(this,t),r.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){var e=this.props,r=e.radioList,t=e.checkList,n=e.changeRadioList,a=e.changeCheckList,i=e.selectedRadio,o=e.selectedCheckboxes,s=e.loading;return(0,mr.jsx)(mr.Fragment,{children:(0,mr.jsxs)(Cr.Form,{loading:s,children:[(0,mr.jsx)(Cr.Form.Group,{className:"fields-vertical",children:r.map((function(e){return(0,mr.jsx)(Cr.Form.Radio,{label:e.label,value:e.name,checked:e.name===i,onChange:n},e.name)}))}),t.map((function(e,r){return(0,mr.jsx)(Cr.FormField,{children:(0,mr.jsx)(Cr.Checkbox,{toggle:!0,onChange:a?a[r]:{},checked:o&&o[r],label:e.label},e.name)},"form_field_".concat(e.name))}))]})})}}]),t}(s.Component);zr.defaultProps={radioList:[],checkList:[],selectedRadio:void 0,selectedCheckboxes:[],loading:!1,changeRadioList:function(){},changeCheckList:[]};var Wr=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(e){var a;return(0,n.Z)(this,t),(a=r.call(this,e)).selectTotalGrouping=function(e,r){var t=r.value;(0,a.props._updateReportDetailsTotalGrouping)(t)},a.selectSummaryReport=function(){var e=a.props;(0,e._updateReportDetailsTotalsOnly)(!e.selectedSummaryReport)},a.selectFundingGrouping=function(e,r){var t=r.value;(0,a.props._updateReportDetailsFundingGrouping)(t)},a.selectAllowEmptyFundingColumns=function(){var e=a.props;(0,e._updateReportDetailsAllowEmptyFundingColumns)(!e.selectedAllowEmptyFundingColumns)},a.selectSplitByFunding=function(){var e=a.props;(0,e._updateReportDetailsSplitByFunding)(!e.selectedSplitByFunding)},a.selectShowOriginalCurrencies=function(){var e=a.props;(0,e._updateReportDetailsShowOriginalCurrencies)(!e.selectedShowOriginalCurrencies)},a.selectAlsoShowPledges=function(){var e=a.props;(0,e._updateReportDetailsAlsoShowPledges)(!e.selectedAlsoShowPledges)},a.selectUseAboveFilters=function(){var e=a.props,r=e._updateReportDetailsUseAboveFilters,t=e.selectedUseAboveFilters;De(e.filters)?r(!t):r(!1)},a.changeDescription=function(e,r){var t=r.value;(0,a.props._updateReportDetailsDescription)(t)},a.getOptions=function(e){var r=a.props.options,t=[];return r&&e.forEach((function(e){var n=r.find((function(r){return r.name===e}));n&&n.visible&&t.push({name:e,label:r.find((function(r){return r.name===e})).label})})),t},a.renderDescriptionSection=function(){var e=a.props,r=e.translations,t=e.profile,n=e.description;return(0,mr.jsx)(Cr.GridColumn,{computer:"8",tablet:"16",children:(0,mr.jsx)(Or,{title:Ne("reportDescription",t,r),tooltip:Ne("reportDescriptionTooltip",t,r),children:(0,mr.jsx)(Cr.Form,{className:"description",children:(0,mr.jsx)(Cr.TextArea,{value:n||"",onChange:a.changeDescription,ref:a.textAreaNode})})})})},a.renderGroupingSection=function(){var e=a.props,r=e.translations,t=e.selectedTotalGrouping,n=e.selectedSummaryReport,i=e.profile,o=e.loading;return(0,mr.jsx)(Cr.GridColumn,{computer:"8",tablet:"16",children:(0,mr.jsx)(Or,{title:Ne("totalGrouping",i,r),isRequired:!0,tooltip:Ne("totalGroupingTooltip",i,r),children:(0,mr.jsx)(zr,{radioList:a.getOptions(C),checkList:a.getOptions(b),selectedRadio:t,selectedCheckboxes:[n],changeCheckList:[a.selectSummaryReport],changeRadioList:a.selectTotalGrouping,loading:o})})})},a.renderFundingSection=function(){var e=a.props,r=e.translations,t=e.selectedFundingGrouping,n=e.loading,i=e.profile;return(0,mr.jsx)(Cr.GridColumn,{computer:"8",tablet:"16",children:(0,mr.jsx)(Or,{title:Ne("fundingGroup",i,r),tooltip:Ne("fundingTooltip",i,r),isRequired:!0,children:(0,mr.jsx)(zr,{radioList:a.getOptions(x),changeRadioList:a.selectFundingGrouping,selectedRadio:t,loading:n})})})},a.renderOptionsSection=function(){var e=a.props,r=e.translations,t=e.selectedAllowEmptyFundingColumns,n=e.selectedSplitByFunding,i=e.selectedShowOriginalCurrencies,o=e.loading,s=e.selectedAlsoShowPledges,l=e.selectedUseAboveFilters,u=e.profile;return(0,mr.jsx)(Cr.GridColumn,{computer:"8",tablet:"16",children:(0,mr.jsx)(Or,{title:Ne("options",u,r),tooltip:Ne("optionsTooltip",u,r),children:(0,mr.jsx)(zr,{checkList:a.getOptions(_),selectedCheckboxes:[t,n,i,s,l],changeCheckList:[a.selectAllowEmptyFundingColumns,a.selectSplitByFunding,a.selectShowOriginalCurrencies,a.selectAlsoShowPledges,a.selectUseAboveFilters],loading:o})})})},a.textAreaNode=l().createRef(),a.state={},a}return(0,a.Z)(t,[{key:"componentDidUpdate",value:function(e,r,t){var n=this.props,a=n.selectedTotalGrouping,i=n.selectedFundingGrouping,o=this.getOptions(C);if(null===a&&o.length>0){var s=o[0]?o[0].name:null;s&&this.selectTotalGrouping(null,{value:s})}if(o=this.getOptions(x),null===i&&o.length>0){var l=o[0]?o[0].name:null;l&&this.selectFundingGrouping(null,{value:l})}}},{key:"render",value:function(){var e=this.props.visible,r=1!==this.getOptions(C).length||0!==this.getOptions(b).length;return(0,mr.jsx)("div",{className:e?"":"invisible-tab",children:(0,mr.jsxs)(Cr.Grid,{children:[r?(0,mr.jsxs)(mr.Fragment,{children:[this.renderGroupingSection(),this.renderDescriptionSection()]}):null,1!==this.getOptions(x).length?this.renderFundingSection():null,r?null:this.renderDescriptionSection(),0!==this.getOptions(_).length?this.renderOptionsSection():null]})})}}]),t}(s.Component),Vr=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations,selectedTotalGrouping:e.uiReducer.reportDetails.selectedTotalGrouping,selectedSummaryReport:e.uiReducer.reportDetails.selectedSummaryReport,reportDetails:e.uiReducer.reportDetails,selectedFundingGrouping:e.uiReducer.reportDetails.selectedFundingGrouping,selectedAllowEmptyFundingColumns:e.uiReducer.reportDetails.selectedAllowEmptyFundingColumns,selectedSplitByFunding:e.uiReducer.reportDetails.selectedSplitByFunding,selectedShowOriginalCurrencies:e.uiReducer.reportDetails.selectedShowOriginalCurrencies,selectedAlsoShowPledges:e.uiReducer.reportDetails.selectedAlsoShowPledges,selectedUseAboveFilters:e.uiReducer.reportDetails.selectedUseAboveFilters,description:e.uiReducer.reportDetails.description,options:e.uiReducer.options,loading:e.uiReducer.metaDataPending,filters:e.uiReducer.filters,profile:e.uiReducer.profile}}),(function(e){return(0,u.bindActionCreators)({_updateReportDetailsTotalGrouping:function(e){return{type:w,payload:e}},_updateReportDetailsTotalsOnly:function(e){return{type:E,payload:e}},_updateReportDetailsFundingGrouping:function(e){return me(e)},_updateReportDetailsAllowEmptyFundingColumns:function(e){return{type:A,payload:e}},_updateReportDetailsSplitByFunding:function(e){return{type:Z,payload:e}},_updateReportDetailsShowOriginalCurrencies:function(e){return{type:j,payload:e}},_updateReportDetailsDescription:function(e){return{type:D,payload:e}},_updateReportDetailsAlsoShowPledges:function(e){return{type:O,payload:e}},_updateReportDetailsUseAboveFilters:function(e){return ge(e)}},e)}))(Wr);Wr.defaultProps={selectedTotalGrouping:void 0,selectedSummaryReport:!1,selectedFundingGrouping:void 0,selectedAllowEmptyFundingColumns:!1,selectedSplitByFunding:!1,selectedShowOriginalCurrencies:!1,selectedAlsoShowPledges:!1,selectedUseAboveFilters:!1,description:void 0,options:void 0,loading:!1,filters:null,profile:void 0},Wr.contextType=gr;var Yr=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){var e;return(0,n.Z)(this,t),(e=r.call(this)).handleMeasureSelection=function(r){var t=e.props,n=t._updateMeasuresSelected,a=t.selectedMeasures,i=a.indexOf(r);i>-1?a.splice(i,1):a.push(r),n(a),e.handleAvailableMeasuresChange(a),e.forceUpdate()},e.handleMeasureSort=function(r){(0,e.props._updateMeasuresSorting)(r)},e.handleSearch=function(r){e.setState({search:r.target.value})},e.handleReset=function(){var r=e.props,t=r._resetMeasuresSelected,n=r.id,a=r.initialMeasures;t(n?{selected:(0,Sr.Z)(a).map((function(e){return e.id})),order:(0,Sr.Z)(a).map((function(e){return e.id}))}:{selected:[],order:[]})},e.state={search:null},e}return(0,a.Z)(t,[{key:"handleAvailableMeasuresChange",value:function(e){var r=this.props,t=r.selectedMeasures,n=r.measuresOrder;if(e.length>n.length){var a=null;e.forEach((function(e){t.find((function(r){return r.id===e}))||(a=e)})),a&&(n.push(a),this.handleMeasureSort(n))}else{var i=null;if(n.forEach((function(r){e.includes(r)||(i=r)})),i){var o=n.findIndex((function(e){return e===i}));n.splice(o,1),this.handleMeasureSort(n)}}}},{key:"render",value:function(){var e=this.props,r=e.visible,t=e.translations,n=e.measures,a=e.selectedMeasures,i=e.measuresOrder,o=e.profile,s=e.existingReportSanitized,l=this.state.search,u=l?n.filter((function(e){return e.label.toLowerCase().indexOf(l.toLowerCase())>-1})):n;return(0,mr.jsx)("div",{className:r?"":"invisible-tab",children:(0,mr.jsxs)(Cr.Grid,{children:[(0,mr.jsx)(Cr.GridColumn,{computer:"8",children:(0,mr.jsx)(Cr.Input,{icon:"search",placeholder:Ne("search",o,t),onChange:this.handleSearch})}),(0,mr.jsx)(Cr.GridColumn,{computer:"8",textAlign:"right",children:(0,mr.jsx)("span",{className:"green_text bold pointer reset-text",onClick:this.handleReset,children:Ne("resetMeasures",o,t)})}),(0,mr.jsx)(Cr.Grid.Column,{computer:"8",tablet:"16",children:(0,mr.jsx)(Or,{title:Ne("availableFinancialMeasures",o,t),tooltip:Ne("availableMeasuresTooltip",o,t),isRequired:!0,className:"smallHeight",children:(0,mr.jsx)(Fr,{columns:u,selected:a,showLoadingWhenEmpty:!0,noCategories:!0,isLoading:!s,onColumnSelectionChange:this.handleMeasureSelection})})}),(0,mr.jsx)(Cr.Grid.Column,{computer:"8",tablet:"16",children:(0,mr.jsx)(Or,{className:"smallHeight",title:Ne("orderSelectedFinancialMeasures",o,t),tooltip:Ne("selectedMeasuresTooltip",o,t),children:(0,mr.jsx)(Mr,{keyPrefix:"measures",translations:t,columns:n.filter((function(e){return a.find((function(r){return r===e.id}))})),order:i,onColumnSelectionChange:this.handleHierarchySelection,onColumnSortChange:this.handleMeasureSort,isLoading:!s,profile:o})})}),null,a.length>2&&o===R?(0,mr.jsx)(Cr.Grid.Column,{computer:16,className:"narrowRow",children:(0,mr.jsx)(Ar,{visible:!0,message:Ne("noMoreThan2MeasuresInTabs",o,t)})}):null,0===a.length&&o===R?(0,mr.jsx)(Cr.Grid.Column,{computer:16,className:"narrowRow",children:(0,mr.jsx)(Ar,{visible:!0,message:Ne("mustHave1MeasuresInTabs",o,t)})}):null]})})}}]),t}(s.Component),qr=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations,measures:e.uiReducer.measures.available,selectedMeasures:e.uiReducer.measures.selected,measuresOrder:e.uiReducer.measures.order,profile:e.uiReducer.profile,id:e.uiReducer.id,initialMeasures:e.mementoReducer.measures,existingReportSanitized:e.uiReducer.existingReportSanitized}}),(function(e){return(0,u.bindActionCreators)({_updateMeasuresSelected:function(e){return Re(e)},_updateMeasuresSorting:function(e){return Se(e)},_resetMeasuresSelected:function(e,r){return{type:B,payload:e}}},e)}))(Yr);Yr.defaultProps={measures:[],selectedMeasures:[],measuresOrder:[],profile:void 0,id:void 0,initialMeasures:[],existingReportSanitized:!1},Yr.contextType=gr;var Kr=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){var e;(0,n.Z)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).setEnabledOrDisabledButtons=function(){switch(e.props.tab){case 0:return[!1,!0];case 1:return[!0,!0];case 2:return[!0,!1]}},e}return(0,a.Z)(t,[{key:"render",value:function(){var e=this.props,r=e.translations,t=e.backClick,n=e.nextClick,a=e.profile,i=this.setEnabledOrDisabledButtons();return(0,mr.jsx)(Cr.Grid,{children:(0,mr.jsx)(Cr.GridRow,{children:(0,mr.jsx)(Cr.GridColumn,{width:"16",children:(0,mr.jsxs)(Cr.ButtonGroup,{className:"navigation-buttons",floated:"right",children:[(0,mr.jsx)(Cr.Button,{positive:i[0],disabled:!i[0],onClick:t,children:"<< ".concat(Ne("back",a,r))}),(0,mr.jsx)("div",{className:"separator"}),(0,mr.jsx)(Cr.Button,{positive:i[1],disabled:!i[1],onClick:n,children:"".concat(Ne("next",a,r)," >>")})]})})})})}}]),t}(s.Component),Xr=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations}}),(function(e){return(0,u.bindActionCreators)({},e)}))(Kr),Jr=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){var e;(0,n.Z)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).renderReport=function(e){return(0,mr.jsx)("div",{className:"preview-container",dangerouslySetInnerHTML:{__html:e}})},e}return(0,a.Z)(t,[{key:"render",value:function(){var e=this.props,r=e.lastReportId,t=e.previewLoading,n=e.previewLoaded,a=e.previewError,i=e.results,o=e.translations,s=e.profile,l=(0,mr.jsx)(br.Tooltip,{id:Math.random(),children:Ne("previewTooltip",s,o)});return t?(0,mr.jsx)(Cr.Form,{loading:!0}):a?(0,mr.jsx)(Ar,{visible:!0,message:Ne("previewError",s,o)}):n&&-1!==r?(0,mr.jsx)(mr.Fragment,{children:(0,mr.jsx)(Cr.Grid,{children:(0,mr.jsxs)(Cr.GridColumn,{width:16,children:[(0,mr.jsxs)("div",{className:"option-list-title",children:[(0,mr.jsx)("span",{children:Ne("preview",s,o)}),(0,mr.jsx)(br.OverlayTrigger,{trigger:["hover","focus"],overlay:l,children:(0,mr.jsx)("img",{className:"info-icon",src:xr,alt:"info-icon"})})]}),this.renderReport(i)]})})}):null}}]),t}(s.Component),Qr=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations,lastReportId:e.previewReducer.lastReportId,previewLoading:e.previewReducer.pending,previewLoaded:e.previewReducer.loaded,previewError:e.previewReducer.error,results:e.previewReducer.results,profile:e.uiReducer.profile}}),(function(e){return(0,u.bindActionCreators)({},e)}))(Jr);Jr.defaultProps={lastReportId:-1,previewLoading:!1,previewLoaded:!1,previewError:!1,results:void 0,profile:void 0},Jr.contextType=gr;var $r=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){var e;return(0,n.Z)(this,t),(e=r.call(this)).handleMenuClick=function(r){e.setState({visibleTab:r})},e.handleNavButtonBack=function(){var r=e.state.visibleTab;e.setState({visibleTab:r-1})},e.handleNavButtonNext=function(){var r=e.state.visibleTab;e.setState({visibleTab:r+1})},e.state={visibleTab:0},e}return(0,a.Z)(t,[{key:"componentDidUpdate",value:function(e,r,t){var n=this.props,a=n._updatePreviewId,i=n._getPreview,o=n.columns,s=n.measures,l=n.hierarchies,u=n.reportDetails,c=n.lastReportId,d=n.profile,p=n.settings;if(n.existingReportSanitized&&Pe(o,s,l,u,d)){var h=(0,m.Z)({},u);delete h.description,delete h.name,delete h.selectedReportCategory;var f=(0,m.Z)((0,m.Z)({},h),{},{columns:o.selected,measures:{selected:s.selected,order:s.order},hierarchies:{selected:l.selected,order:l.order},settings:p}),g=Tr()(JSON.stringify(f)),v=function(e){for(var r=0,t=0;t<e.length;t++)r=Math.imul(31,r)+e.charCodeAt(t)|0;return r}(g);if(v!==c){a(v,g);var y=o.selected.map((function(e){return o.available.find((function(r){return r.id===e})).name})),R=s.order.map((function(e){return s.available.find((function(r){return r.id===e})).name})),S=l.order.filter((function(e){return l.selected.includes(e)})).map((function(e){return l.available.find((function(r){return r.id===e})).name})),C=(new Date).getFullYear(),b={date:{start:"".concat(C-1,"-01-01"),end:"".concat(C,"-12-31")}};i({id:v,add_columns:y,add_measures:R,page:1,recordsPerPage:10,add_hierarchies:S,groupingOption:Ae(u.selectedTotalGrouping),reportType:Ze(u.selectedFundingGrouping),filters:b,show_empty_rows:!0,show_original_currency:u.selectedShowOriginalCurrencies,summary:u.selectedSummaryReport,settings:p})}}else a(-1,void 0)}},{key:"render",value:function(){var e=this.state.visibleTab,r=this.props,t=r.saveNewReport,n=r.saveReport,a=r.runReport,i=r.profile;return(0,mr.jsx)(mr.Fragment,{children:(0,mr.jsx)(Cr.Grid,{children:(0,mr.jsxs)(Cr.GridRow,{children:[(0,mr.jsx)(Cr.GridColumn,{computer:"4",tablet:16,children:(0,mr.jsx)(Nr,{onClick:this.handleMenuClick,tab:e,saveNewReport:t,saveReport:n,runReport:a})}),(0,mr.jsxs)(Cr.GridColumn,{computer:"12",tablet:16,children:[(0,mr.jsx)(Vr,{visible:0===e}),(0,mr.jsx)(Br,{visible:1===e}),(0,mr.jsx)(qr,{visible:2===e}),(0,mr.jsx)(Xr,{tab:e,backClick:this.handleNavButtonBack,nextClick:this.handleNavButtonNext,profile:i}),(0,mr.jsx)(Qr,{})]})]})})})}}]),t}(s.Component),et=(0,p.connect)((function(e){return{lastReportId:e.previewReducer.lastReportId,results:e.previewReducer.results,reportDetails:e.uiReducer.reportDetails,columns:e.uiReducer.columns,measures:e.uiReducer.measures,hierarchies:e.uiReducer.hierarchies,profile:e.uiReducer.profile,settings:e.uiReducer.settings,existingReportSanitized:e.uiReducer.existingReportSanitized}}),(function(e){return(0,u.bindActionCreators)({_updatePreviewId:function(e,r){return function(e,r){return{type:Me,id:e,name:r}}(e,r)},_getPreview:function(e){return He(e)}},e)}))($r);function rt(){var e,r=document.getElementsByClassName("prev_caret");for(e=0;e<r.length;e++)"true"!==r[e].getAttribute("listener")&&(r[e].setAttribute("listener","true"),r[e].addEventListener("click",(function(){this.parentElement.querySelector(".prev_nested").classList.toggle("active"),this.classList.toggle("prev_caret-down")})))}$r.defaultProps={lastReportId:-1,reportDetails:void 0,columns:void 0,measures:void 0,hierarchies:void 0,profile:void 0,settings:void 0,existingReportSanitized:!1},$r.contextType=gr;t(39321);var tt=t(96378),nt=null,at=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(e){var a;return(0,n.Z)(this,t),(a=r.call(this,e)).showFilterWidget=function(){var e=a.state.show;if(nt&&!e)return nt.loaded.then((function(){return a.setState({show:!0}),nt.showFilters()}))},a.hideFilters=function(){a.setState({show:!1})},a.applyFilters=function(){var e=a.props,r=e.onApplyFilters,t=e._updateAppliedFilters,n=e._updateReportDetailsUseAboveFilters,i=e._updateIncludeLocationWithChildren;a.hideFilters();var o=nt.serialize(),s=nt.getAppliedFilters({returnHTML:!0});t(o.filters,s),De(o.filters)?n(!0):n(!1),i(o["include-location-children"]),r(o.filters)},a.toggleAppliedFilters=function(){var e=a.state.showFiltersList;a.setState({showFiltersList:!e})},a.state={show:!1,showFiltersList:!1,filterLoaded:!1},a}return(0,a.Z)(t,[{key:"componentDidMount",value:function(){var e=this,r=this.props,t=r._getMetadata,n=r.id,a=r.filters,i=r._updateAppliedFilters,o=this.context.store;return t().then((function(r){return(nt=new tt({draggable:!0,caller:"REPORTS",reportType:r.payload.type})).on("apply",e.applyFilters),nt.on("cancel",e.hideFilters),nt.loaded.then((function(){if(nt.setElement(e.refs.filterPopup),n){var r=(0,m.Z)({},a),t=o.getState().uiReducer.reportDetails.includeLocationChildren;r["include-location-children"]=r.includeLocationChildren,nt.deserialize({filters:r,silent:!0,includeLocationChildren:t,"include-location-children":t});var s=nt.getAppliedFilters({returnHTML:!0});i(a,s)}else nt.deserialize({filters:{includeLocationChildren:!0},silent:!0,includeLocationChildren:!0,"include-location-children":!0});return e.setState({filterLoaded:!0}),!0}))}))}},{key:"componentDidUpdate",value:function(e,r,t){rt()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("apply",this.applyFilters),window.removeEventListener("cancel",this.hideFilters)}},{key:"render",value:function(){var e=this.state,r=e.show,t=e.filterLoaded,n=this.props,a=n.translations,i=n.filters,o=n.profile,s=n.appliedSectionChange,l=n.appliedSectionOpen;return(0,mr.jsxs)(mr.Fragment,{children:[t?(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("div",{className:"filter-title",onClick:this.showFilterWidget,children:[Ne("filters",o,a),"\xa0"]}),De(i)?(0,mr.jsx)("div",{className:"filter-title applied-filters-label".concat(l?" expanded":""),onClick:function(){return s(nt)},children:Ne(l?"hideAppliedFilters":"showAppliedFilters",o,a)}):null]}):(0,mr.jsx)("div",{style:{float:"left"},children:(0,mr.jsx)(Cr.Loader,{active:!0,inline:!0})}),(0,mr.jsx)("div",{id:"filter-popup",ref:"filterPopup",style:{display:r?"block":"none"}})]})}}]),t}(s.Component),it=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations,reportLoaded:e.uiReducer.reportLoaded,reportPending:e.uiReducer.reportPending,filters:e.uiReducer.filters,html:e.uiReducer.appliedFilters,type:e.type,profile:e.uiReducer.profile,id:e.uiReducer.id}}),(function(e){return(0,u.bindActionCreators)({_updateAppliedFilters:function(e,r){return Ce(e,r)},_updateReportDetailsUseAboveFilters:function(e){return ge(e)},_getMetadata:function(){return xe()},_updateIncludeLocationWithChildren:function(e){return{type:K,payload:e}}},e)}))(at);at.defaultProps={filters:null,profile:void 0,id:void 0},at.contextType=gr;var ot=t(72054),st=null,lt=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(e){var a;return(0,n.Z)(this,t),(a=r.call(this,e)).applySettings=function(e){var r=a.props,t=r.onApplySettings,n=r._updateAppliedSettings;n(null),n(e),t(e),a.hideSettings(),a.setState({changed:!0})},a.hideSettings=function(){a.setState({show:!1})},a.toggleSettings=function(){var e=a.state.show;st.show(),a.setState({show:!e})},a.state={show:!1,changed:!1},a}return(0,a.Z)(t,[{key:"componentDidMount",value:function(){var e=this,r=this.props,t=r.settings,n=r._fetchGlobalSettings,a="/rest/settings-definitions/reports";(st=new ot.SettingsWidget({el:"settings-popup",draggable:!0,caller:"REPORTS",isPopup:!0,definitionUrl:a})).setElement(this.refs.settingsPopup),st.on("applySettings",this.applySettings),st.on("close",this.hideSettings),n(a).then((function(r){if(null===t){var n=function(e,r){var t={"amount-format":{},"calendar-id":null,"currency-code":null,"year-range":{}};t["amount-format"]["decimal-symbol"]=e["number-decimal-separator"]||".";var n=e["number-settings"]||"#,#.#";if(t["amount-format"]["group-separator"]=-1!==n.indexOf(",")?e["number-group-separator"]||",":"",t["amount-format"]["group-size"]=3,t["amount-format"]["max-frac-digits"]=0,-1!==n.indexOf(",")&&(t["amount-format"]["max-frac-digits"]=n.length-n.indexOf(".")-1),t["amount-format"]["number-divider"]=e["number-divider"],t["amount-format"]["use-grouping"]=-1!==n.indexOf(","),t["calendar-id"]="".concat(e["calendar-id"]),t["currency-code"]=e["effective-currency"].code,t["year-range"].rangeFrom=e["dashboard-default-min-year-range"],t["year-range"].rangeTo=e["dashboard-default-max-year-range"],t["year-range"].to=e["dashboard-default-max-year-range"],t["year-range"].type="INT_VALUE",t["year-range"].from="".concat(Math.floor((Number(t["year-range"].to)-Number(t["year-range"].rangeFrom))/2)+Number(t["year-range"].rangeFrom)),r){var a=r.find((function(e){return"year-range"===e.id}));a&&(t["year-range"].rangeFrom=Number(a.value.from),t["year-range"].from=Number(a.value.from),t["year-range"].rangeTo=Number(a.value.to),t["year-range"].to=Number(a.value.to))}return t}(r.payload,r.payload2);return st.restoreFromSaved(n)}st.restoreFromSaved(t),e.setState({changed:!0})}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("applySettings",this.applySettings),window.removeEventListener("close",this.hideSettings)}},{key:"render",value:function(){var e=this.state,r=e.show,t=e.changed,n=this.props,a=n.translations,i=n.profile,o=n.appliedSectionOpen,s=n.appliedSectionChange;return(0,mr.jsx)(mr.Fragment,{children:(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)("div",{className:"filter-title",onClick:this.toggleSettings,children:Ne("settings",i,a)}),t?(0,mr.jsx)("div",{className:"filter-title applied-filters-label".concat(o?" expanded":""),onClick:function(){s()},children:Ne(o?"hideAppliedSettings":"showAppliedSettings",i,a)}):null,(0,mr.jsx)("div",{id:"settings-popup",ref:"settingsPopup",style:{display:r?"block":"none",padding:"0px",borderColor:"#337ab7"}})]})})}}]),t}(s.Component);lt.defaultProps={settings:null,profile:void 0},lt.contextType=gr;var ut=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations,profile:e.uiReducer.profile,settings:e.uiReducer.settings,reportGlobalSettings:e.settingsReducer.reportGlobalSettings}}),(function(e){return(0,u.bindActionCreators)({_fetchGlobalSettings:function(e){return Ye(e)},_updateAppliedSettings:function(e){return{type:X,payload:e}}},e)}))(lt),ct=null,dt=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){var e;return(0,n.Z)(this,t),(e=r.call(this)).handleSettingsChange=function(){var r=e.state.appliedSettingsOpen;e.setState({appliedSettingsOpen:!r})},e.handleFiltersChange=function(r){var t=e.state.appliedFiltersOpen;ct=r,e.setState({appliedFiltersOpen:!t})},e.handleApplySettings=function(){e.forceUpdate()},e.generateAppliedSettings=function(){var r=e.props,t=r.settings,n=r.profile,a=r.translations,i=r.reportGlobalSettings;return i&&t?(0,mr.jsx)("div",{className:"applied-filters",children:(0,mr.jsx)("div",{children:(0,mr.jsxs)("ul",{className:"previsualization_tree",children:[(0,mr.jsxs)("li",{children:[(0,mr.jsx)("span",{className:"prev_caret",children:Ne("calendar",n,a)}),(0,mr.jsx)("ul",{className:"prev_nested",children:(0,mr.jsx)("li",{children:i.find((function(e){return"calendar-id"===e.id})).value.options.find((function(e){return e.id===t["calendar-id"]})).name})})]}),(0,mr.jsxs)("li",{children:[(0,mr.jsx)("span",{className:"prev_caret",children:Ne("currency",n,a)}),(0,mr.jsx)("ul",{className:"prev_nested",children:(0,mr.jsx)("li",{children:i.find((function(e){return"currency-code"===e.id})).value.options.find((function(e){return e.id===t["currency-code"]})).name})})]}),(0,mr.jsxs)("li",{children:[(0,mr.jsx)("span",{className:"prev_caret",children:Ne("amountUnits",n,a)}),(0,mr.jsx)("ul",{className:"prev_nested",children:(0,mr.jsx)("li",{children:i.find((function(e){return"number-divider"===e.id})).value.options.find((function(e){return e.value==="".concat(t["amount-format"]["number-divider"])||e.value===t["number-divider"]||e.id===t["number-divider"]})).name})})]}),(0,mr.jsxs)("li",{children:[(0,mr.jsx)("span",{className:"prev_caret",children:Ne("yearRange",n,a)}),(0,mr.jsx)("ul",{className:"prev_nested",children:(0,mr.jsxs)("li",{children:["".concat(Ne("from",n,a)," ").concat(t["year-range"].from)," ","".concat(Ne("until",n,a)," ").concat(t["year-range"].to)]})})]})]})})}):null},e.generateAppliedFilters=function(){var r=e.props,t=r.filters,n=r.html,a=r._updateAppliedFilters;if(null===n&&t&&ct){var i=ct.getAppliedFilters({returnHTML:!0});return a(t,i),(0,mr.jsx)("div",{dangerouslySetInnerHTML:{__html:i}})}return t?(0,mr.jsx)("div",{dangerouslySetInnerHTML:{__html:n}}):null},e.state={appliedSettingsOpen:!1,appliedFiltersOpen:!1},e}return(0,a.Z)(t,[{key:"render",value:function(){var e=this.props.loading,r=this.state,t=r.appliedSettingsOpen,n=r.appliedFiltersOpen;return(0,mr.jsx)(mr.Fragment,{children:(0,mr.jsx)(Cr.Segment,{loading:e,placeholder:!0,textAlign:"left",className:"filters_segment",children:e?null:(0,mr.jsxs)(Cr.Grid,{children:[(0,mr.jsxs)(Cr.GridRow,{className:"filter-title-wrapper",children:[(0,mr.jsx)(Cr.GridColumn,{computer:8,mobile:16,children:(0,mr.jsx)(it,{onApplyFilters:function(){},appliedSectionOpen:n,appliedSectionChange:this.handleFiltersChange})}),(0,mr.jsx)(Cr.GridColumn,{computer:8,mobile:16,children:(0,mr.jsx)(ut,{onApplySettings:this.handleApplySettings,appliedSectionOpen:t,appliedSectionChange:this.handleSettingsChange})})]}),n||t?(0,mr.jsxs)(Cr.GridRow,{className:"applied-filters-wrapper",children:[(0,mr.jsx)(Cr.GridColumn,{computer:8,mobile:16,children:(0,mr.jsx)("div",{className:n?"applied-filters":"invisible-applied-filters",children:this.generateAppliedFilters()})}),(0,mr.jsx)(Cr.GridColumn,{computer:8,mobile:16,children:(0,mr.jsx)("div",{className:t?"applied-filters":"invisible-applied-filters",children:this.generateAppliedSettings()})})]}):null]})})})}},{key:"componentDidUpdate",value:function(e,r,t){rt()}}]),t}(s.Component);dt.defaultProps={loading:!1,settings:void 0,profile:void 0,filters:null,html:null},dt.contextType=gr;var pt=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations,profile:e.uiReducer.profile,settings:e.uiReducer.settings,reportGlobalSettings:e.settingsReducer.reportGlobalSettings,filters:e.uiReducer.filters,html:e.uiReducer.appliedFilters}}),(function(e){return(0,u.bindActionCreators)({_updateAppliedFilters:function(e,r){return Ce(e,r)}},e)}))(dt),ht=t(32162),ft=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){var e;return(0,n.Z)(this,t),(e=r.call(this)).commonReport=function(r,t){var n=e.props.uiReducer,a={id:r?null:n.id,name:t?"Dynamic Report":n.reportDetails.name,description:n.reportDetails.description,type:Ze(n.reportDetails.selectedFundingGrouping),groupingOption:Ae(n.reportDetails.selectedTotalGrouping),summary:n.reportDetails.selectedSummaryReport,tab:n.profile===R,publicView:n.reportDetails.publicView,workspaceLinked:n.reportDetails.workspaceLinked,alsoShowPledges:n.reportDetails.selectedAlsoShowPledges,showOriginalCurrency:n.reportDetails.selectedShowOriginalCurrencies,allowEmptyFundingColumns:n.reportDetails.selectedAllowEmptyFundingColumns,splitByFunding:n.reportDetails.selectedSplitByFunding,reportCategory:n.reportDetails.selectedReportCategory,ownerId:n.reportDetails.ownerId,includeLocationChildren:n.reportDetails.includeLocationChildren,columns:n.columns.selected,hierarchies:n.hierarchies.order.filter((function(e){return n.hierarchies.selected.find((function(r){return r===e}))})),measures:n.measures.order.filter((function(e){return n.measures.selected.find((function(r){return r===e}))})),settings:n.settings};return De(n.filters)?(a.filters=n.filters,Object.keys(n.filters).forEach((function(e){null===n.filters[e]&&delete n.filters[e]}))):delete a.includeLocationChildren,a.settings&&a.settings[S]&&Object.keys(a.settings[S]).forEach((function(e){a.settings[S][e]="".concat(a.settings[S][e])})),a},e.saveReport=function(r){var t=e.props,n=t._save,a=t.uiReducer,i=e.commonReport(!1,!1);return n(a.id,i).then((function(t){return e.processAfterSave(t,r)}))},e.saveNewReport=function(r){return(0,e.props._saveNew)(e.commonReport(!0,!1)).then((function(t){return e.processAfterSave(t,r)}))},e.runReport=function(){return(0,e.props._runReport)(e.commonReport(!0,!0)).then((function(r){return e.processAfterSave(r,!0)}))},e.processAfterSave=function(r,t){var n=e.props,a=n.translations,i=n.uiReducer,o=n.profile;if(r.error){var s=[];return Object.keys(r.error).forEach((function(e){var t=Ne("apiError".concat(e),o,a);s.push({id:e,label:t||r.error[e]})})),s.length>0&&e.setState({errors:s.map((function(e){return(0,mr.jsx)(Ar,{visible:!0,message:e.label},e.id)}))}),null}return r.payload.id<0?window.open("/TEMPLATE/ampTemplate/saikuui_reports/index_reports.html#report/run/".concat(r.payload.id)):i.profile===R?window.location.href="/viewTeamReports.do?tabs=true&reset=true":(t&&window.open("/TEMPLATE/ampTemplate/saikuui_reports/index_reports.html#report/open/".concat(r.payload.id)),window.location.href="/viewTeamReports.do?tabs=false&reset=true"),null},e.state={showChildren:!1,errors:null},e}return(0,a.Z)(t,[{key:"componentDidMount",value:function(){var e=this,r=this.props,t=r._getMetadata,n=r._fetchReport,a=(r.location,r._updateProfile),i=r._updateId,o=r.translations,s=r._updateReportDetailsFundingGrouping,l=r._setColumnsData,u=r._setMeasuresData,c=r._setHierarchiesData,d=r._setInitialHierarchies,p=r._fetchLanguages,h=r._markExistingReportSanitized,f=r._updateColumnsSelected,m=r._updateMeasuresSelected,g=r._updateMeasuresSorting,v=r.storedSearchParams;p();var y=this.props.urlParams.id,R=new URLSearchParams(v||window.location.search),S=R.get("type"),C=R.get("profile");if(y)return i(y),n(y).then((function(r){var n=Ge(r.payload);return a(n),r.payload?t(r.payload.type,n).then((function(t){e.setState({showChildren:!0});var n=r.payload.columns.filter((function(e){return t.payload.columns.find((function(r){return r.id===e.id}))}));f(n.map((function(e){return e.id})));var a=r.payload.measures.filter((function(e){return t.payload.measures.find((function(r){return e.id===r.id}))}));m(a.map((function(e){return e.id}))),g(a.map((function(e){return e.id})));var i=r.payload.hierarchies.filter((function(e){return n.find((function(r){return r.id===e.id}))}));l(Object.assign([],n).map((function(e){return e.id}))),u((0,Sr.Z)(a));var o=t.payload.columns.filter((function(e){return n.find((function(r){return r.id===e.id}))})).filter((function(e){return e.hierarchy})),p=[];i.forEach((function(e){p.push(e.id)})),o.forEach((function(e){p.find((function(r){return r===e.id}))||p.push(e.id)}));var v=i.map((function(e){return e.id}));return d(o,v,p),c({available:(0,Sr.Z)(o),selected:(0,Sr.Z)(v),order:[].concat(p)}),h(),s(je(r.payload.type))})):e.setState({errors:[(0,mr.jsx)(Ar,{visible:!0,message:Ne("errorLoadingReport",n,o)})]})}));h(),a(C),t(S,C),s(je(S)),this.setState({showChildren:!0})}},{key:"render",value:function(){var e=this.state,r=e.showChildren,t=e.errors,n=this.props,a=n.layoutLoaded,i=n.results,o=n.profile;return a&&!0!==i.logged&&o===R&&(window.location.href="/"),(0,mr.jsxs)(Cr.Container,{children:[(0,mr.jsx)(wr,{}),(0,mr.jsx)(pt,{loading:!r}),t?(0,mr.jsx)(Cr.Segment,{className:"errors_segment",children:t}):null,(0,mr.jsx)(et,{saveNewReport:this.saveNewReport,saveReport:this.saveReport,runReport:this.runReport})]})}}]),t}(s.Component);ft.defaultProps={profile:void 0,layoutLoaded:!1,results:void 0},ft.contextType=gr;var mt=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations,uiReducer:e.uiReducer,profile:e.uiReducer.profile,layoutLoaded:e.layoutReducer.loaded,results:e.layoutReducer.results}}),(function(e){return(0,u.bindActionCreators)({_getMetadata:function(e,r){return xe(e,r)},_fetchReport:function(e){return _e(e)},_updateProfile:function(e){return{type:J,payload:e}},_updateId:function(e){return{type:Q,payload:e}},_saveNew:function(e){return we(e)},_save:function(e,r){return Ee(e,r)},_runReport:function(e){return Te(e)},_updateReportDetailsFundingGrouping:function(e){return me(e)},_setColumnsData:function(e){return{type:tr,payload:e}},_setHierarchiesData:function(e){return{type:nr,payload:e}},_setMeasuresData:function(e){return{type:ar,payload:e}},_setInitialHierarchies:function(e,r,t){return ye(e,r,t)},_fetchLanguages:function(){return ur()},_markExistingReportSanitized:function(){return{type:fe}},_updateColumnsSelected:function(e){return ve(e)},_updateMeasuresSelected:function(e){return Re(e)},_updateMeasuresSorting:function(e){return Se(e)}},e)}))((0,ht.E)(ft)),gt=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(){return(0,n.Z)(this,t),r.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){return(0,mr.jsxs)(Rr.Routes,{children:[(0,mr.jsx)(Rr.Route,{path:"/",exact:!0,element:(0,mr.jsx)(mt,{})}),(0,mr.jsx)(Rr.Route,{path:":id",element:(0,mr.jsx)(mt,{})})]})}}]),t}(s.Component),vt=gt,yt=(t(67235),t(16843),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.compose),Rt=function(e){(0,i.Z)(t,e);var r=(0,o.Z)(t);function t(e){var a;return(0,n.Z)(this,t),(a=r.call(this,e)).store=(0,u.createStore)(dr,yt((0,u.applyMiddleware)(d()))),a}return(0,a.Z)(t,[{key:"render",value:function(){return(0,mr.jsx)(p.Provider,{store:this.store,children:(0,mr.jsx)(yr,{defaultTrnPack:fr,store:this.store,children:(0,mr.jsx)(vt,{})})})}}]),t}(s.Component)},1342:function(e,r,t){t.d(r,{BB:function(){return f},ET:function(){return m},Ez:function(){return d},IN:function(){return H},Ic:function(){return l},JP:function(){return B},LM:function(){return E},O:function(){return h},PU:function(){return g},S9:function(){return y},SJ:function(){return S},Sw:function(){return A},TM:function(){return k},Vs:function(){return u},WP:function(){return F},_G:function(){return C},aD:function(){return P},ah:function(){return O},bm:function(){return Y},cE:function(){return p},eM:function(){return w},e_:function(){return c},fz:function(){return R},g1:function(){return Z},gW:function(){return _},ij:function(){return L},io:function(){return D},pj:function(){return j},qp:function(){return s},rF:function(){return o},rP:function(){return T},ry:function(){return a},sC:function(){return U},sK:function(){return I},tU:function(){return G},um:function(){return v},vW:function(){return x},wU:function(){return M},wt:function(){return b},xE:function(){return n},xg:function(){return V},yr:function(){return N},z7:function(){return i}});var n=0,a=1,i=-1,o="/assets/img/flags/",s="dashboard-default-min-year-range",l="dashboard-default-max-year-range",u="/rest/filters/sectors",c="/rest/filters/locations?firstLevelOnly=true&showAllCountries=true",d="/rest/amp/settings",p="/rest/filters/modalities?sscWorkspace=true",h="/rest/gis/sscdashboard",f="/rest/gis/sscdashboard/xsl",m="/rest/gis/activities",g=12,v="#fd8f00",y="#fd8f00",R="#007236",S="#007236",C="png",b=50,x=-999999999,_=9,w=6,E=1766,T=5,A="-1",Z=1920,j=145,D=2,G="0",P="SSC_",N="home",O="sector",F="modality",L="download",k="country-column",I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAbCAQAAACkGQXlAAAAI0lEQVR42mP8L8lAVcA4auCogaMGjho4auCogaMGjhpINAAAOBcdpLw/CDsAAAAASUVORK5CYII=",M="000",U="primary-sector",H="ssc-modalities",B="donor-agency-country",z=new Map([["110","#d46453"],["120","#f5a15d"],["130","#ffcf8e"],["140","#ff7a7d"],["150","#ff417d"],["160","#d61a88"],["210","#fff540"],["220","#28c074"],["230","#429058"],["240","#bd4035"],["250","#b0fff1"],["311","#144491"],["312","#9b0e3e"],["313","#10908e"],["321","#8f5765"],["322","#c7d4e1"],["323","#77b02a"],["331","#488bd4"],["332","#928fb8"],["400","#c6d831"],["500","#d41e3c"],["600","#cf968c"],["700","#78d7ff"],["910","#94007a"],["920","#ffb84a"],["930","#ed7b39"],["998","#ed4c40"],["000","#8f5765"]]),W=new Map([[M,"#8f5765"]]),V=new Map([[F,["#00429d","#3761ab","#5681b9","#73a2c6","#93c4d2","#b9e5dd","#ffffe0","#ffd3bf","#ffa59e","#f4777f","#dd4c65","#be214d","#93003a"]]]),Y=new Map([[O,z],[F,W]])},35209:function(e,r,t){var n=t(64454),a=t(58234);r.Z=function(e){return function(r){return r((0,n.M0)(e)),(0,a.X)(e).then((function(e){return r((0,n.sq)(e))})).catch((function(e){return r((0,n.nW)(e))}))}}},64454:function(e,r,t){t.d(r,{M0:function(){return o},b5:function(){return n},k_:function(){return a},nW:function(){return l},pv:function(){return i},sq:function(){return s}});var n="FETCH_TRANSLATIONS_PENDING",a="FETCH_TRANSLATIONS_SUCCESS",i="FETCH_TRANSLATIONS_ERROR";function o(e){return{type:n,payload:e}}function s(e){return{type:a,payload:e}}function l(e){return{type:i,error:e}}},47371:function(e,r,t){t.d(r,{g:function(){return a}});t(50383);var n=t(59653),a=function(){return(0,n.jsx)("div",{className:"jumbotron",children:(0,n.jsx)("div",{className:"progress",children:(0,n.jsx)("div",{className:"progress-bar progress-bar-striped bg-info",role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"},children:"..."})})})}},32162:function(e,r,t){t.d(r,{E:function(){return l}});var n=t(33028),a=t(96234),i=t(50383),o=t(46760),s=t(59653),l=function(e){return(0,i.memo)((function(r){var t=(0,o.useNavigate)(),l=(0,o.useLocation)(),u=(0,o.useParams)(),c=(0,o.useSearchParams)(),d=(0,a.Z)(c,2),p=d[0],h=d[1];return(0,i.useEffect)((function(){!function(){var e=localStorage.getItem("searchParams");l.search=e,e&&(e=e.replace("?","")).split("&").map((function(e){var r=e.split("="),t=(0,a.Z)(r,2),n=t[0],i=t[1];return h(n,i),[n,i]}))}()}),[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e,(0,n.Z)({navigate:t,_location:l,urlParams:u,searchParams:p,storedSearchParams:localStorage.getItem("searchParams")},r))})}))}},58234:function(e,r,t){t.d(r,{X:function(){return l},a:function(){return s}});var n=t(1342),a="POST",i="GET";function o(e,r){var t={method:e?a:i,headers:r||{"Content-Type":"application/json",Accept:"application/json","ws-prefix":n.aD}};return e&&(t.body=JSON.stringify(e)),t}var s=function(e){var r=e.body,t=e.url,n=e.headers;return new Promise((function(e,a){return fetch(t,o(r,n)).then((function(e){return n&&"text/html"===n.Accept?e.text():e.headers&&e.headers.get("Content-Type")&&e.headers.get("Content-Type").indexOf("application/json")>-1?e.json():e})).then((function(r){return r.error?a(r.error):e(r)}))}))};function l(e){return new Promise((function(r){return fetch("/rest/translations/label-translations",o(e)).then((function(e){var t=e.headers.get("content-type");if(t&&-1!==t.indexOf("application/json"))return e.json().then((function(e){if(e.error)throw new Error(e.error);return r(e)}))}))}))}},50840:function(e,r,t){t.d(r,{Z:function(){return o}});var n=t(33028),a=t(64454),i={pending:!0,translations:{},error:null};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case a.b5:return(0,n.Z)((0,n.Z)({},e),{},{pending:!0,translations:r.payload});case a.k_:return(0,n.Z)((0,n.Z)({},e),{},{pending:!1,translations:r.payload});case a.pv:return(0,n.Z)((0,n.Z)({},e),{},{pending:!1,error:r.error});default:return e}}},67235:function(){},16843:function(){}}]);
//# sourceMappingURL=1290.bundle.js.map