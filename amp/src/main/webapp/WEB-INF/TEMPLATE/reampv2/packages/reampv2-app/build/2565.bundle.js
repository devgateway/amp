"use strict";(self.webpackChunkreampv2=self.webpackChunkreampv2||[]).push([[2565,8960,5770,5753],{60409:function(n,e,t){t.d(e,{Z:function(){return s}});var r="FETCH_SETTINGS_PENDING",a="FETCH_SETTINGS_SUCCESS",i="FETCH_SETTINGS_ERROR";var o=t(79748);var s=function(){return function(n){return n({type:r}),fetch(o.Ko).then((function(n){return n.json()})).then((function(e){if(e.error)throw e.error;return n({type:a,payload:e}),e})).catch((function(e){n(function(n){return{type:i,error:n}}(e))}))}}},79748:function(n,e,t){t.d(e,{CY:function(){return m},DC:function(){return g},G7:function(){return a},Ko:function(){return h},PJ:function(){return o},Pz:function(){return l},YP:function(){return i},kj:function(){return p},mh:function(){return c},nI:function(){return u},q4:function(){return f},ry:function(){return r},tD:function(){return v},x2:function(){return s},z1:function(){return d}});var r="src-program",a="dst-program",i="all-programs",o="program-mapping",s="-program",d="children",c=2,l=3,u=4,p="srcLvl",m="src",v="dst",f="/rest/security/layout",h="/rest/amp/settings",g="/rest/activity/updateMappings/async"},42565:function(n,e,t){t.r(e),t.d(e,{default:function(){return te}});var r=t(9249),a=t(87371),i=t(45754),o=t(86906),s=t(50383),d=t.n(s),c=t(83112),l=t(10941),u=t.n(l),p=t(94652),m=t(39887),v=t(33028),f="FETCH_NDD_PENDING",h="FETCH_NDD_SUCCESS",g="FETCH_NDD_ERROR",y="FETCH_PROGRAMS_PENDING",b="FETCH_PROGRAMS_SUCCESS",P="FETCH_PROGRAMS_ERROR";var x={pendingNDD:!1,pendingPrograms:!1,NDDs:[],error:null,programs:[]};var j=function(n){return n.NDDs},S=function(n){return n.pendingNDD},_=function(n){return n.error},C=function(n){return n.programs},w=function(n){return n.pendingPrograms},Z="SAVE_NDD_PENDING",A="SAVE_NDD_SUCCESS",D="SAVE_NDD_ERROR";function k(n){return{type:D,error:n}}var N={saving:!1,NDDs:[],error:null};var E=function(n){return n.saving},T=function(n){return n.error},I=function(n){return n.saving},R=t(50840),O="UPDATE_ACTIVITIES_PENDING",M="UPDATE_ACTIVITIES_SUCCESS",L="UPDATE_ACTIVITIES_ERROR",G="INVOKE_ACTIVITIES_SUCCESS";function U(n){return{type:L,error:n}}var z={updating:!1,error:null,indirectProgramUpdatePending:!1};var F=function(n){return n.updating},H=function(n){return n.error},K=(0,c.combineReducers)({startupReducer:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f:return(0,v.Z)((0,v.Z)({},n),{},{pendingNDD:!0});case h:return(0,v.Z)((0,v.Z)({},n),{},{pendingNDD:!1,NDDs:e.payload});case g:return(0,v.Z)((0,v.Z)({},n),{},{pendingNDD:!1,error:e.error});case y:return(0,v.Z)((0,v.Z)({},n),{},{pendingPrograms:!0});case b:return(0,v.Z)((0,v.Z)({},n),{},{pendingPrograms:!1,programs:e.payload});case P:return(0,v.Z)((0,v.Z)({},n),{},{pendingPrograms:!1,error:e.error});default:return n}},translationsReducer:R.Z,saveNDDReducer:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Z:return(0,v.Z)((0,v.Z)({},n),{},{saving:!0});case A:return(0,v.Z)((0,v.Z)({},n),{},{saving:!1,data:e.payload});case D:return(0,v.Z)((0,v.Z)({},n),{},{saving:!1,error:e.error});default:return n}},updateActivitiesReducer:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case O:return(0,v.Z)((0,v.Z)({},n),{},{updating:!0,error:null});case G:return(0,v.Z)((0,v.Z)({},n),{},{updating:!1,error:null,indirectProgramUpdatePending:!0});case M:return(0,v.Z)((0,v.Z)({},n),{},{indirectProgramUpdatePending:!1});case L:return(0,v.Z)((0,v.Z)({},n),{},{updating:!1,error:e.error.msg,indirectProgramUpdatePending:!1});default:return n}}}),V=JSON.parse('{"amp.admin.ndd:page-title":"Aid Management Platform - Program Mapping Manager","amp.admin.ndd:menu-item-indirect-programs-mapping":"Indirect Programs Mapping","amp.admin.ndd:menu-item-programs-mapping":"Programs Mapping","amp.admin.ndd:mappings-manager":"Program Mapping Manager","amp.admin.ndd.indirect:title":"Indirect Programs Mapping","amp.admin.ndd.program:title":"Programs Mapping","amp.admin.ndd.indirect:sub-title":"This module manages the programs that will be displayed in the inner and outer rings of the Dashboard. (Direct and Indirect programs such as PNSD vs New Deal)","amp.admin.ndd.program:sub-title":"This module manages the programs that will be displayed in the inner and outer rings of the Dashboard (Source and Destination programs, such as PNSD vs SDG) as well as the options that will be displayed in the Program section of the Activity Form (SDG program)"}'),Y=t(35209),q=t(47371),J=t(59653),X=d().createContext(),W=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(){return(0,r.Z)(this,t),e.apply(this,arguments)}return(0,a.Z)(t,[{key:"componentDidMount",value:function(){var n=this.props,e=n.defaultTrnPack;(0,n._fetchTranslations)(e)}},{key:"render",value:function(){var n=this.props,e=n.children,t=n.translations,r=n.translationPending,a=n.api;return r?(0,J.jsx)(q.g,{}):(document.title=t["amp.admin.ndd:page-title"],(0,J.jsx)(X.Provider,{value:{translations:t,api:a},children:e}))}}]),t}(s.Component),B=(0,p.connect)((function(n){return{translationPending:n.translationsReducer.pending,translations:n.translationsReducer.translations}}),(function(n){return(0,c.bindActionCreators)({_fetchTranslations:Y.Z},n)}))(W),Q=t(96234),$=t(80753);var nn=function(n){return function(e){e({type:f}),fetch(n).then((function(n){return n.json()})).then((function(n){if(n.error)throw n.error;return e(function(n){return{type:h,payload:n}}(n)),n})).catch((function(n){e(function(n){return{type:g,error:n}}(n))}))}};var en=function(n){return function(e){e({type:y}),fetch(n).then((function(n){return n.json()})).then((function(n){if(n.error)throw n.error;return e({type:b,payload:n}),n})).catch((function(n){e(function(n){return{type:P,error:n}}(n))}))}},tn="FETCH_LAYOUT_PENDING",rn="FETCH_LAYOUT_SUCCESS",an="FETCH_LAYOUT_ERROR";var on=t(79748);var sn=function(){return function(n){return n({type:tn}),fetch(on.q4).then((function(n){return n.json()})).then((function(e){if(e.error)throw e.error;return n({type:rn,payload:e}),e})).catch((function(e){n(function(n){return{type:an,error:n}}(e))}))}},dn=t(60409),cn=t(68079),ln=t(56666),un=t(472),pn=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(){return(0,r.Z)(this,t),e.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){return(0,J.jsx)("span",{className:"required-fields",children:" *"})}}]),t}(s.Component),mn=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(n){var a;return(0,r.Z)(this,t),(a=e.call(this,n)).drawSelector=a.drawSelector.bind((0,$.Z)(a)),a}return(0,a.Z)(t,[{key:"onChangeSelect",value:function(n){var e=this.props;(0,e.onChange)(n,e.level)}},{key:"drawSelector",value:function(){var n=this.props,e=n.options,t=n.placeholder,r=n.selected,a=n.disabled,i=this.context,o=i.translations,s=i.trnPrefix,d=r&&1===r.length,c=e?e.sort((function(n,e){return n.value.localeCompare(e.value)})):[];return(0,J.jsx)(un.Typeahead,{id:"basic-typeahead-single",labelKey:"value",className:d?"":"is-invalid",options:c||[],clearButton:!0,onChange:this.onChangeSelect.bind(this),selected:r,placeholder:t,disabled:a,emptyLabel:o["".concat(s,"no-matches-found")]})}},{key:"render",value:function(){var n=this.props.label;return(0,J.jsxs)("div",{children:[(0,J.jsx)("span",{children:n}),(0,J.jsx)(pn,{}),this.drawSelector()]})}}]),t}(s.Component);mn.contextType=X;var vn=(0,p.connect)((function(n){return{translations:n.translationsReducer.translations}}),(function(n){return(0,c.bindActionCreators)({},n)}))(mn);function fn(n,e,t){var r={},a={},i={};return e[on.YP].forEach((function(e){if(e[on.z1])if(1===t){var o=e[on.z1].find((function(e){return e.id===n}));o&&(r.id=o.id,r.value=o.value)}else e[on.z1].forEach((function(e){if(e[on.z1])if(2===t){var o=e[on.z1].find((function(e){return e.id===n}));o&&(a.id=o.id,a.value=o.value,r.id=e.id,r.value=e.value)}else e[on.z1].forEach((function(t){if(t[on.z1]){var o=t[on.z1].find((function(e){return e.id===n}));o&&(i=o,a.id=t.id,a.value=t.value,r.id=e.id,r.value=e.value)}}))}))})),{lvl1:r,lvl2:a,lvl3:i}}function hn(n,e){var t=0;return n&&n.length>0&&n.every((function(r){return r[on.ry]["lvl".concat(e)]&&r[on.G7]["lvl".concat(e)]?!(n.filter((function(n){return n[on.ry].lvl1.id===r[on.ry].lvl1.id&&n[on.G7].lvl1.id===r[on.G7].lvl1.id&&(1===e||n[on.ry].lvl2.id===r[on.ry].lvl2.id&&n[on.G7].lvl2.id===r[on.G7].lvl2.id)&&(e<3||n[on.ry].lvl3.id===r[on.ry].lvl3.id&&n[on.G7].lvl3.id===r[on.G7].lvl3.id)})).length>1)||(t=7,!1):(t=1,!1)})),t}var gn=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(n){var a;return(0,r.Z)(this,t),(a=e.call(this,n)).state=(0,ln.Z)((0,ln.Z)((0,ln.Z)({},on.kj+on.mh,void 0),on.kj+on.Pz,void 0),on.kj+on.nI,void 0),a.onSelectChange=a.onSelectChange.bind((0,$.Z)(a)),a.getOptionsForLevel=a.getOptionsForLevel.bind((0,$.Z)(a)),a.getSelectedForLevel=a.getSelectedForLevel.bind((0,$.Z)(a)),a}return(0,a.Z)(t,[{key:"componentDidMount",value:function(){var n=this.props,e=n.data,t=n.type;if(e&&e[t+on.x2]){var r=(0,ln.Z)((0,ln.Z)((0,ln.Z)({id:e.id},on.kj+on.mh,e[t+on.x2].lvl1),on.kj+on.Pz,e[t+on.x2].lvl2),on.kj+on.nI,e[t+on.x2].lvl3);this.setState(r)}}},{key:"onSelectChange",value:function(n,e){var t=this.props,r=t.onChange,a=t.type,i=t.data,o=null,s=null;n&&n[0]&&n[0].id&&(o=n[0].id,s=n[0].value);var d=this.state[on.kj+on.mh],c=this.state[on.kj+on.Pz],l=this.state[on.kj+on.nI];switch(e){case on.mh:o&&s?(d={id:o,value:s},this.setState((0,ln.Z)({},on.kj+on.mh,d))):(d=void 0,this.setState((0,ln.Z)({},on.kj+on.mh,d))),c=void 0,l=void 0,this.setState((0,ln.Z)({},on.kj+on.Pz,c)),this.setState((0,ln.Z)({},on.kj+on.nI,l));break;case on.Pz:o&&s?(c={id:o,value:s},this.setState((0,ln.Z)({},on.kj+on.Pz,c))):(c=void 0,this.setState((0,ln.Z)({},on.kj+on.Pz,c))),l=void 0,this.setState((0,ln.Z)({},on.kj+on.nI,l));break;case on.nI:o&&s?(l={id:o,value:s},this.setState((0,ln.Z)({},on.kj+on.nI,l))):(l=void 0,this.setState((0,ln.Z)({},on.kj+on.nI,l)))}r(d,c,l,a,i.id)}},{key:"getOptionsForLevel",value:function(n){var e=this,t=this.context.ndd,r=this.props,a=[],i=function(n,e,t,r){var a=null;return n&&n[on.YP]&&(t||r)&&(e===on.CY?a=n[on.YP].find((function(n){return n.id===t.id})):e===on.tD&&(a=n[on.YP].find((function(n){return n.id===r.id})))),a}(t,r.type,r.src,r.dst);switch(n){case on.mh:i&&i[on.z1]&&(a=i[on.z1].map((function(n){return{id:n.id,value:n.value}})));break;case on.Pz:if(i&&i[on.z1]&&this.state[on.kj+on.mh]&&i[on.z1]){var o=i[on.z1].find((function(n){return e.state[on.kj+on.mh]&&n.id===e.state[on.kj+on.mh].id}));o&&(a=o[on.z1])}break;case on.nI:if(i&&i[on.z1]&&this.state[on.kj+on.Pz]&&i[on.z1]){var s=i[on.z1].find((function(n){return e.state[on.kj+on.mh]&&n.id===e.state[on.kj+on.mh].id}));if(s){var d=s[on.z1].find((function(n){return e.state[on.kj+on.Pz]&&n.id===e.state[on.kj+on.Pz].id}));d&&(a=d[on.z1])}}}return a}},{key:"getSelectedForLevel",value:function(n){var e=[],t=this.state;switch(n){case on.mh:t[on.kj+on.mh]&&e.push({id:t[on.kj+on.mh].id,value:t[on.kj+on.mh].value});break;case on.Pz:t[on.kj+on.Pz]&&e.push({id:t[on.kj+on.Pz].id,value:t[on.kj+on.Pz].value});break;case on.nI:if(t[on.kj+on.nI])e.push({id:t[on.kj+on.nI].id,value:t[on.kj+on.nI].value});else{var r=this.getOptionsForLevel(on.nI);r&&1===r.length&&(e.push({id:r[0].id,value:r[0].value}),this.onSelectChange(e,n))}}return e}},{key:"render",value:function(){var n=this.context,e=n.translations,t=n.trnPrefix,r=this.props,a=r.type,i=r.disabled,o=r.level;return(0,J.jsx)("div",{children:(0,J.jsxs)("div",{style:{width:"100%"},children:[o>=1?(0,J.jsx)(vn,{placeholder:e["".concat(t,"choose-").concat(a,"-lvl-").concat(on.mh)],label:e["".concat(t+a,"-program-lvl-").concat(on.mh)],options:this.getOptionsForLevel(on.mh),selected:this.getSelectedForLevel(on.mh),onChange:this.onSelectChange,level:on.mh,disabled:i}):null,o>=2?(0,J.jsx)(vn,{placeholder:e["".concat(t,"choose-").concat(a,"-lvl-").concat(on.Pz)],label:e["".concat(t+a,"-program-lvl-").concat(on.Pz)],options:this.getOptionsForLevel(on.Pz),selected:this.getSelectedForLevel(on.Pz),onChange:this.onSelectChange,level:on.Pz,disabled:i}):null,o>=3?(0,J.jsx)(vn,{placeholder:e["".concat(t,"choose-").concat(a,"-lvl-").concat(on.nI)],label:e["".concat(t+a,"-program-lvl-").concat(on.nI)],options:this.getOptionsForLevel(on.nI),selected:this.getSelectedForLevel(on.nI),onChange:this.onSelectChange,level:on.nI,disabled:i}):null]})})}}]),t}(s.Component);gn.defaultProps={src:void 0,dst:void 0},gn.contextType=X;var yn=(0,p.connect)((function(n){return{}}),(function(n){return(0,c.bindActionCreators)({},n)}))(gn),bn=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(){return(0,r.Z)(this,t),e.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){var n=this.props,e=n.rowData,t=n.onChange,r=n.remove,a=n.src,i=n.dst,o=n.disabled,s=n.level;return(0,J.jsxs)("tr",{children:[(0,J.jsx)("td",{children:(0,J.jsx)(yn,{type:on.CY,data:e,onChange:t,src:a,dst:i,level:s,disabled:o})}),(0,J.jsx)("td",{children:(0,J.jsx)(yn,{type:on.tD,data:e,onChange:t,src:a,dst:i,level:s,disabled:o})}),(0,J.jsx)("td",{className:"actions-column",children:o?null:(0,J.jsx)("span",{className:"glyphicon glyphicon-custom glyphicon-remove-sign clickable",onClick:function(){return r(e)}})})]})}}]),t}(s.Component);bn.contextType=X,bn.defaultProps={src:void 0,dst:void 0,level:void 0};var Pn=(0,p.connect)((function(n){return{translations:n.translationsReducer.translations}}),(function(n){return(0,c.bindActionCreators)({},n)}))(bn),xn=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(){return(0,r.Z)(this,t),e.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){var n=this.props,e=n.translations,t=n.labelKey,r=(0,J.jsx)(m.Tooltip,{id:"".concat(t,"-icon-tooltip"),children:e[t]});return(0,J.jsx)(m.OverlayTrigger,{transition:!1,trigger:["hover","focus"],placement:"right",overlay:r,children:(0,J.jsx)("img",{className:"info-icon",src:"/TEMPLATE/reamp/modules/admin/data-freeze-manager/styles/images/icon-information.svg"})})}}]),t}(s.Component);xn.contextType=X;var jn=(0,p.connect)((function(n){return{translations:n.translationsReducer.translations}}),(function(n){return(0,c.bindActionCreators)({},n)}))(xn),Sn=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(){return(0,r.Z)(this,t),e.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){var n=this.props,e=n.list,t=n.translations,r=n.onChange,a=n.remove,i=n.dst,o=n.src,s=n.busy,d=n.level,c=this.context.trnPrefix;return(0,J.jsx)("div",{children:(0,J.jsxs)("table",{className:"table table-striped",children:[(0,J.jsx)("thead",{children:(0,J.jsxs)("tr",{children:[(0,J.jsxs)("th",{children:[(0,J.jsx)(jn,{labelKey:"".concat(c,"tooltip-direct-programs-list")}),(0,J.jsx)("span",{"data-field":"srcProgramSelectGroup",children:t["".concat(c,"src-programs-title")]}),(0,J.jsx)(pn,{})]}),(0,J.jsxs)("th",{children:[(0,J.jsx)(jn,{labelKey:"".concat(c,"tooltip-indirect-programs-list")}),(0,J.jsx)("span",{"data-field":"dstProgramSelectGroup",children:t["".concat(c,"dst-programs-title")]}),(0,J.jsx)(pn,{})]}),(0,J.jsx)("td",{className:"actions-column",children:t["".concat(c,"actions")]})]})}),(0,J.jsx)("tbody",{children:e.map((function(n){return(0,J.jsx)(Pn,{rowData:n,onChange:r,remove:a,dst:i,src:o,level:d,disabled:s},Math.random())}))})]})})}}]),t}(s.Component);Sn.contextType=X,Sn.defaultProps={src:void 0,dst:void 0,level:void 0};var _n=(0,p.connect)((function(n){return{translations:n.translationsReducer.translations}}),(function(n){return(0,c.bindActionCreators)({},n)}))(Sn),Cn=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(){return(0,r.Z)(this,t),e.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){var n=this.props,e=n.translations,t=n.onAddRow,r=n.onSaveAll,a=n.onRevertAll,i=n.src,o=n.dst,s=n.onUpdateActivities,d=n.busy,c=n.dataPresent,l=n.unsavedChanges,u=this.context,p=u.trnPrefix,m=u.isIndirect;return(0,J.jsx)("div",{children:(0,J.jsx)("div",{className:"panel panel-default",children:(0,J.jsxs)("div",{className:"panel-body custom-panel",children:[i&&o?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("span",{className:"glyphicon glyphicon-plus clickable",onClick:t}),(0,J.jsxs)("span",{onClick:t,className:"add-new-text clickable",children:[e["".concat(p,"add-new")]," "]}),(0,J.jsx)("span",{className:"insert-data-text clickable",onClick:t,children:e["".concat(p,"insert-data")]})]}):null,(0,J.jsx)("span",{children:" / "}),(0,J.jsx)("span",{className:"required-fields",children:"* ".concat(e["".concat(p,"required-fields")])}),(0,J.jsxs)("span",{className:"float-right button-wrapper",children:[(0,J.jsx)("button",{type:"button",onClick:r,className:"btn btn-success margin_2",disabled:d,children:e["".concat(p,"button-save-all-edits")]}),(0,J.jsx)("button",{type:"button",onClick:a,className:"btn btn-danger margin_2",disabled:d||!l,children:e["".concat(p,"button-revert-all-edits")]}),m?(0,J.jsx)("button",{type:"button",onClick:s,className:"btn btn-primary",disabled:d||!c||l,children:e["".concat(p,"button-update-activities")]}):null]})]})})})}}]),t}(s.Component);Cn.contextType=X,Cn.defaultProps={src:void 0,dst:void 0,dataPresent:!1};var wn=(0,p.connect)((function(n){return{translations:n.translationsReducer.translations}}),(function(n){return(0,c.bindActionCreators)({},n)}))(Cn);function Zn(n){if(500===n.status||n.error)throw n.error?n.error:n.statusText}var An,Dn=function(n,e,t,r,a,i){return function(o){o({type:Z}),fetch(on.q4).then((function(n){return n.json()})).then((function(s){s.logged?fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({"src-program":n?n.id:null,"dst-program":e?e.id:null,level:i})}).then((function(n){return Zn(n),fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(n){return Zn(n),o(function(n){return{type:A,payload:n}}(n)),n})).catch((function(n){o(k(n))}))})).catch((function(n){o(k(n))})):(window.location.replace("/login.do"),o(k({error:"not logged"})))})).catch((function(n){o(k(n))}))}};function kn(n,e){clearInterval(An),An=setInterval((function(){return function(n,e){fetch(n).then((function(n){return 200===n.status?n.headers.get("X-Async-Status"):n.json()})).then((function(n){return null===n?(clearInterval(An),e({type:M})):(n.error?(e(U({msg:"result false"})),clearInterval(An)):"RUNNING"===n||(e(U({msg:"result ".concat(n)})),clearInterval(An)),n)})).catch((function(n){e(U(n))}))}(n,e)}),1e3)}var Nn=function(){return function(n){n({type:O});var e={method:"GET",headers:{Prefer:"respond-async"}};fetch(on.DC,e).then((function(n){return 200===n.status?n.headers.get("location"):n.json()})).then((function(e){if(e.error)if(e.error["0212"]){var t=e.error["0212"][0].PROCESS_ALREADY_RUNNING[0];n(U({msg:t}))}else n(U({msg:"result false"}));else n({type:G}),kn(e,n);return e})).catch((function(e){n(U(e))}))}},En=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(){return(0,r.Z)(this,t),e.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){var n=this.props.messages;return n&&n.length>0?(0,J.jsx)("div",{children:(0,J.jsx)("ul",{className:"notifications",children:n.map((function(n){var e=n.isError?"error-color":"success-color";return(0,J.jsx)("li",{className:e,children:n.text},Math.random())}))})}):null}}]),t}(s.Component);En.contextType=X;var Tn=(0,p.connect)((function(n){return{translations:n.translationsReducer.translations}}),(function(n){return(0,c.bindActionCreators)({},n)}))(En),In=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(){var n;(0,r.Z)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))).levelsToArray=function(n){for(var e=[],t=1;t<=n;t++)e.push({id:t,value:"".concat(t)});return e},n}return(0,a.Z)(t,[{key:"render",value:function(){var n=this.context,e=n.translations,t=n.programs,r=n.trnPrefix,a=n.isIndirect,i=n.isSuperAdmin,o=this.props,s=o.src,d=o.dst,c=o.onChange,l=o.busy,u=o.onChangeLevel,p=o.level;if(t){var m;d&&t.find((function(n){return n.id===d.id}))&&(m=this.levelsToArray(t.find((function(n){return n.id===d.id})).levels));var v=p>0?[{id:p,value:"".concat(p)}]:null;return(0,J.jsx)("table",{className:"programs-table",children:(0,J.jsx)("tbody",{children:(0,J.jsxs)("tr",{children:[(0,J.jsxs)("td",{style:{width:"40%"},children:[(0,J.jsx)(jn,{labelKey:"".concat(r,"tooltip-direct-programs")}),(0,J.jsx)(vn,{disabled:l,placeholder:e["".concat(r,"choose_main_src_program")],label:e["".concat(r,"src-program-lvl-1")],options:t.filter((function(n){return!1===n.indirect})),selected:s?[s]:[],onChange:c.bind(null,on.CY),level:0})]}),(0,J.jsxs)("td",{style:{width:"40%"},children:[(0,J.jsx)(jn,{labelKey:"".concat(r,"tooltip-indirect-programs")}),(0,J.jsx)(vn,{disabled:l,placeholder:e["".concat(r,"choose_main_dst_program")],label:e["".concat(r,"dst-program-lvl-1")],options:t.filter((function(n){return n.indirect===a})),selected:d?[d]:[],onChange:c.bind(null,on.tD),level:0})]}),(0,J.jsxs)("td",{style:{width:"20%"},children:[(0,J.jsx)(jn,{labelKey:"".concat(r,"tooltip-max-depth")}),(0,J.jsx)(vn,{isIndirect:a,disabled:l||!i,label:e["".concat(r,"max-level")],options:m,onChange:u.bind(null,"level"),selected:v})]})]})})})}return null}}]),t}(s.Component);In.contextType=X,In.defaultProps={src:void 0,dst:void 0,level:-1};var Rn=(0,p.connect)((function(n){return{translations:n.translationsReducer.translations}}),(function(n){return(0,c.bindActionCreators)({},n)}))(In),On=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(n){var a;return(0,r.Z)(this,t),(a=e.call(this,n)).onUpdateActivities=function(){var n=a.props,e=n._updateActivities,t=n.translations,r=a.context.trnPrefix,i=a.state,o=hn(i.data,i.level);0===o?window.confirm(t["".concat(r,"button-update-activities-confirmation")])&&(a.clearMessages(),a.setState({blockUI:!0}),e()):a.setState({validationErrors:t["".concat(r,"validation_error_").concat(o)]})},a.onChangeProgramLevel=function(n,e){var t=a.context,r=t.translations,i=t.trnPrefix;if(a.state[n]!==e){var o=!0;e&&0!==e.length||(o=window.confirm(r["".concat(i,"warning_on_change_levels")])),o?(e&&e.length>0?a.setState((0,ln.Z)({},n,e[0].id)):a.setState((0,ln.Z)({},n,0)),a.clearAll()):a.setState((function(n){return n}))}},a.state={data:[],validationErrors:void 0,src:void 0,dst:void 0,programs:void 0,updatedActivities:!1,blockUI:!1,unsavedChanges:!1,saved:!1,level:0},a.addRow=a.addRow.bind((0,$.Z)(a)),a.saveAll=a.saveAll.bind((0,$.Z)(a)),a.onRowChange=a.onRowChange.bind((0,$.Z)(a)),a.remove=a.remove.bind((0,$.Z)(a)),a.clearMessages=a.clearMessages.bind((0,$.Z)(a)),a.onChangeMainProgram=a.onChangeMainProgram.bind((0,$.Z)(a)),a.clearAll=a.clearAll.bind((0,$.Z)(a)),a}return(0,a.Z)(t,[{key:"componentDidMount",value:function(){var n,e=this,t=this.context,r=t.ndd,a=t.programs,i=t.translations,o=t.trnPrefix,s=t.settings,d=t.isIndirect;(document.title=i["".concat(o,"page-title")],this.setState((function(){return r[on.ry]?{src:{id:r[on.ry].id,value:r[on.ry].value}}:{src:void 0}})),this.setState((function(){return r[on.G7]?{dst:{id:r[on.G7].id,value:r[on.G7].value}}:{dst:void 0}})),this.setState((function(){return{programs:a}})),s)&&(this.setState((function(){return{level:n=d?s["ndd-mapping-indirect-level"]:s["ndd-mapping-program-level"]}})),this.setState((function(t){var a=(0,cn.Z)(t.data);return r[on.PJ]&&r[on.PJ].forEach((function(e){var t=fn(e[on.ry],r,n),i=fn(e[on.G7],r,n),o={};o[on.ry]=t,o[on.G7]=i,o[on.ry]&&o[on.ry]["lvl".concat(n)]&&o[on.G7]&&o[on.G7]["lvl".concat(n)]&&(o.id="".concat(o[on.ry]["lvl".concat(n)].id).concat(o[on.G7]["lvl".concat(n)].id),a.push(o))})),{data:e.sortPrograms(a)}})))}},{key:"componentDidUpdate",value:function(n){n!==this.props&&this.setState((function(n){return n.saved?null:{saved:!0}}))}},{key:"sortPrograms",value:function(n){return n&&n.length>0?n.sort((function(n,e){var t=(n[on.ry].lvl1.value+n[on.ry].lvl2.value+n[on.ry].lvl3.value).localeCompare(e[on.ry].lvl1.value+e[on.ry].lvl2.value+e[on.ry].lvl3.value);return 0===t?(n[on.G7].lvl1.value+n[on.G7].lvl2.value+n[on.G7].lvl3.value).localeCompare(e[on.G7].lvl1.value+e[on.G7].lvl2.value+e[on.G7].lvl3.value):t})):[]}},{key:"addRow",value:function(){this.clearMessages(),this.setState((function(n){var e=(0,cn.Z)(n.data),t=(0,ln.Z)((0,ln.Z)((0,ln.Z)({},on.ry,{}),on.G7,{}),"id",-1*Math.random());return e.push(t),setTimeout((function(){return window.scrollTo(0,document.body.scrollHeight)}),500),{data:e,unsavedChanges:!0,adding:!0}}))}},{key:"onRowChange",value:function(n,e,t,r,a){var i=this.state.data;this.clearMessages();var o=i.splice(i.findIndex((function(n){return n[r+on.x2].id===a})),1);o[0][r+on.x2].lvl1=n,o[0][r+on.x2].lvl2=e,o[0][r+on.x2].lvl3=t,i.push(o[0]),this.setState(i),this.setState({unsavedChanges:!0})}},{key:"remove",value:function(n){var e=this.context,t=e.translations,r=e.trnPrefix;window.confirm(t["".concat(r,"confirm-remove-row")])&&(this.clearMessages(),this.setState((function(e){var t=(0,cn.Z)(e.data);return t.splice(t.findIndex((function(e){return e.id===n.id})),1),{data:t}})),this.setState({unsavedChanges:!0}))}},{key:"clearMessages",value:function(){this.setState({validationErrors:void 0,updatedActivities:!1,blockUI:!1})}},{key:"saveAll",value:function(){var n=this.state,e=n.data,t=n.src,r=n.dst,a=n.level,i=this.props,o=i._saveNDD,s=i.translations,d=this.context,c=d.api,l=d.trnPrefix,u=hn(e,a);if(0===u){var p=function(n,e,t){var r=0;return(n||e)&&(n?e?n.id===e.id&&(r=5):r=4:r=3),(t<=0||Number.isNaN(t))&&(n||e)&&(r=6),r}(t,r,a);if(0===p){var m=[];e.forEach((function(n){m.push((0,ln.Z)((0,ln.Z)((0,ln.Z)({},on.ry,n[on.ry]["lvl".concat(a)].id),on.G7,n[on.G7]["lvl".concat(a)].id),"level",a))})),o(t,r,m,c.programsSave,c.mappingSave,a),this.setState({unsavedChanges:!1}),this.clearMessages()}else this.setState({validationErrors:s["".concat(l,"validation_error_").concat(p)]})}else this.setState({validationErrors:s["".concat(l,"validation_error_").concat(u)]})}},{key:"onChangeMainProgram",value:function(n,e){var t=this.context,r=t.translations,a=t.trnPrefix,i=this.state,o=i.data,s=i.src,d=i.dst;this.src_=s,this.dst_=d;var c=e&&e.length>0?e[0]:{},l=this.state[n]?this.state[n]:{},u=!1;l.id!==c.id&&(void 0!==l.id?0===o.length||window.confirm(r["".concat(a,"warning_on_change_main_programs")])?(void 0!==c.id?(this.setState((function(e){return(0,ln.Z)({},n,c)})),this["".concat(n,"_")]=c,u=!0):(this.setState((function(e){return(0,ln.Z)({},n,void 0)})),this["".concat(n,"_")]=void 0),this.clearAll()):this.setState((function(n){return n})):(this.setState((function(e){return(0,ln.Z)({},n,c)})),this["".concat(n,"_")]=c,u=!0)),this.src_&&this.dst_&&u&&this.addRow()}},{key:"clearAll",value:function(){this.setState({data:[]})}},{key:"revertAllChanges",value:function(){window.location.reload()}},{key:"render",value:function(){var n=this.state,e=n.data,t=n.validationErrors,r=n.src,a=n.dst,i=n.updatedActivities,o=n.unsavedChanges,s=n.saved,d=n.level,c=this.props,l=c.error,u=c.pending,p=c.translations,m=c.updating,v=c.errorUpdating,f=c.saving,h=this.context.trnPrefix,g=[];return l&&g.push({isError:!0,text:l.toString()}),t&&g.push({isError:!0,text:t}),f||l||o||!s||g.push({isError:!1,text:p["".concat(h,"notification-saved-ok")]}),i&&g.push({isError:!1,text:p["".concat(h,"update-activities-successful")]}),m&&g.push({isError:!1,text:p["".concat(h,"update-activities-wait")]}),v&&g.push({isError:!0,text:v}),(0,J.jsxs)("div",{className:"form-container",children:[(0,J.jsx)(Rn,{onChange:this.onChangeMainProgram,src:r,dst:a,busy:m,level:d,onChangeLevel:this.onChangeProgramLevel},Math.random()),(0,J.jsx)(wn,{onAddRow:this.addRow,onSaveAll:this.saveAll,onRevertAll:this.revertAllChanges,onUpdateActivities:this.onUpdateActivities,src:r,dst:a,busy:m||u,unsavedChanges:o,dataPresent:e&&e.length>0}),(0,J.jsx)(Tn,{messages:g}),(0,J.jsx)(_n,{list:e,onChange:this.onRowChange,remove:this.remove,src:r,dst:a,level:d,busy:m})]})}}]),t}(s.Component);On.contextType=X,On.defaultProps={error:void 0,pending:!1,updating:!1,errorUpdating:null};var Mn=(0,p.connect)((function(n){return{translations:n.translationsReducer.translations,error:T(n.saveNDDReducer),saving:I(n.saveNDDReducer),pending:E(n.saveNDDReducer),updating:F(n.updateActivitiesReducer),errorUpdating:H(n.updateActivitiesReducer)}}),(function(n){return(0,c.bindActionCreators)({_saveNDD:Dn,_updateActivities:Nn},n)}))(On),Ln=function(n){return n.blocking?(0,J.jsxs)("div",{className:"block-ui-container",children:[(0,J.jsx)("div",{className:"block-ui-overlay"}),(0,J.jsx)("div",{className:"block-ui-message-container",children:(0,J.jsxs)("div",{className:"block-ui-message",children:[(0,J.jsx)("h4",{children:n.title}),(0,J.jsx)("div",{className:"loading-indicator",children:(0,J.jsx)("svg",{id:"indicator",viewBox:"0 0 100 100",children:(0,J.jsx)("circle",{id:"circle",cx:"50",cy:"50",r:"45"})})})]})})]}):""};Ln.defaultProps={blocking:!1,title:"Loading"};var Gn=Ln,Un=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(n){var a;return(0,r.Z)(this,t),(a=e.call(this,n)).shouldComponentRender=a.shouldComponentRender.bind((0,$.Z)(a)),a.state={},a}return(0,a.Z)(t,[{key:"componentDidMount",value:function(){var n=this,e=this.props,t=e._fetchNDD,r=e._fetchPrograms,a=e.api,i=e._fetchLayout;(0,e._fetchSettings)().then((function(e){i().then((function(i){i&&i.logged&&!0===i.administratorMode?(t(a.mappingConfig),r(a.programs),n.setState({isSuperAdmin:0===i.email.indexOf("super"),settings:e})):window.location.replace("/login.do")})).catch((function(n){return console.error(n)}))})).catch((function(n){return console.error(n)}))}},{key:"shouldComponentRender",value:function(){var n=this.props,e=n.pendingNDD,t=n.pendingPrograms;return!e&&!t}},{key:"render",value:function(){var n=this.props,e=n.ndd,t=n.programs,r=n.api,a=n.trnPrefix,i=n.isIndirect,o=n.indirectProgramUpdatePending,s=this.context.translations,d=this.state,c=d.isSuperAdmin,l=d.settings;return this.shouldComponentRender()&&0!==e.length?(0,J.jsx)("div",{className:"ndd-container",children:(0,J.jsxs)(X.Provider,{value:{ndd:e,translations:s,programs:t,api:r,trnPrefix:a,isIndirect:i,isSuperAdmin:c,settings:l},children:[(0,J.jsx)("div",{className:"col-md-12",children:(0,J.jsx)("div",{children:(0,J.jsx)(Mn,{})})}),(0,J.jsx)(Gn,{blocking:o})]})}):(0,J.jsx)("div",{className:"loading",children:s["".concat(a,"loading")]})}}]),t}(s.Component);Un.contextType=X;var zn=(0,p.connect)((function(n){return{error:_(n.startupReducer),ndd:j(n.startupReducer),programs:C(n.startupReducer),pendingNDD:S(n.startupReducer),pendingPrograms:w(n.startupReducer),translations:n.translationsReducer.translations,indirectProgramUpdatePending:n.updateActivitiesReducer.indirectProgramUpdatePending}}),(function(n){return(0,c.bindActionCreators)({_fetchNDD:nn,_fetchPrograms:en,_fetchLayout:sn,_fetchSettings:dn.Z},n)}))(Un),Fn=JSON.parse('{"amp.admin.ndd.indirect:title":"Indirect Programs Mapping","amp.admin.ndd.indirect:src-program-lvl-1":"Direct Program","amp.admin.ndd.indirect:src-program-lvl-2":"Direct Program Level 1","amp.admin.ndd.indirect:src-program-lvl-3":"Direct Program Level 2","amp.admin.ndd.indirect:src-program-lvl-4":"Direct Program Level 3","amp.admin.ndd.indirect:choose-src-lvl-2":"Choose a Direct Program Level 1","amp.admin.ndd.indirect:choose-src-lvl-3":"Choose a Direct Program Level 2","amp.admin.ndd.indirect:choose-src-lvl-4":"Choose a Direct Program Level 3","amp.admin.ndd.indirect:dst-program-lvl-1":"Indirect Program","amp.admin.ndd.indirect:dst-program-lvl-2":"Indirect Program Level 1","amp.admin.ndd.indirect:dst-program-lvl-3":"Indirect Program Level 2","amp.admin.ndd.indirect:dst-program-lvl-4":"Indirect Program Level 3","amp.admin.ndd.indirect:choose-dst-lvl-2":"Choose an Indirect Program Level 1","amp.admin.ndd.indirect:choose-dst-lvl-3":"Choose an Indirect Program Level 2","amp.admin.ndd.indirect:choose-dst-lvl-4":"Choose an Indirect Program Level 3","amp.admin.ndd.indirect:src-programs-title":"Direct Programs","amp.admin.ndd.indirect:dst-programs-title":"Indirect Programs","amp.admin.ndd.indirect:actions":"Actions","amp.admin.ndd.indirect:add-new":"Add New","amp.admin.ndd.indirect:button-save-all-edits":"Save all edits","amp.admin.ndd.indirect:button-revert-all-edits":"Revert all changes","amp.admin.ndd.indirect:insert-data":"(insert data to the new field)","amp.admin.ndd.indirect:click-save":"Click the Save icon to save the added data row","amp.admin.ndd.indirect:confirm-remove-row":"Are you sure you want to remove this mapping? (remember to click Save All button to confirm your changes).","amp.admin.ndd.indirect:validation_error_1":"Error: Can\'t save changes until all programs have been selected.","amp.admin.ndd.indirect:validation_error_2":"Error: Indirect indicators can\'t be mapped more than one time.","amp.admin.ndd.indirect:choose_main_src_program":"Choose a Main Direct Program","amp.admin.ndd.indirect:choose_main_dst_program":"Choose an Indirect Program","amp.admin.ndd.indirect:warning_on_change_main_programs":"If you change the Primary Program or the Indirect Program the existing mappings will be deleted, are you sure you want to continue?","amp.admin.ndd.indirect:validation_error_3":"Error: Direct Program not selected.","amp.admin.ndd.indirect:validation_error_4":"Error: Indirect Program not selected.","amp.admin.ndd.indirect:validation_error_6":"Error: Max Levels is not valid.","amp.admin.ndd.indirect:validation_error_5":"Error: Primary Program and Indirect Program must be different.","amp.admin.ndd.indirect:validation_error_7":"Error: Duplicate values found in mapping.","amp.admin.ndd.indirect:warning_on_change_destination_program":"Warning: The new Indirect Program will be removes from all activities.","amp.admin.ndd.indirect:confirm-change-destination-program":"Are you sure you want to : The new Indirect Program will be removes from all activities.","amp.admin.ndd.indirect:notification-saved-ok":"All mappings saved correctly.","amp.admin.ndd.indirect:page-title":"Aid Management Platform - Program Mapping Manager","amp.admin.ndd.indirect:required-fields":"Required Fields","amp.admin.ndd.indirect:loading":"Loading...","amp.admin.ndd.indirect:button-update-activities":"Update All Activities","amp.admin.ndd.indirect:button-update-activities-confirmation":"Are you sure you want to update all activities with the current mappings? (This process could take several minutes)","amp.admin.ndd.indirect:update-activities-successful":"Activities where successfully updated","amp.admin.ndd.indirect:update-activities-wait":"Updating activities, please wait...","amp.admin.ndd.indirect:update-activities-error":"Error updating activities.","amp.admin.ndd.indirect:tooltip-direct-programs":"The direct program is defined as your reference program for your mapping. Generally, it is your national development strategy but you can choose to swap the order and make an international program your referring point. Please note that the direct program will be displayed in the outer ring of the dashboard.","amp.admin.ndd.indirect:tooltip-indirect-programs":"The indirect program is mapped against your reference program. If your reference program is your national development strategy, the indirect program could be any regional/international strategy (ex. SDGs, New Deal, etc.) or vice-versa. Please note that the indirect program will be displayed in the inner ring of the dashboard. The assigned percentage will be automatically distributed. This program will not be seen in the activity form.","amp.admin.ndd.indirect:tooltip-direct-programs-list":"Please specify the current levels of your source program to begin the mapping exercise. Note that you will have to select up to the level defined in the Multi Program Manager.","amp.admin.ndd.indirect:tooltip-indirect-programs-list":"Please define the corresponding destination program levels. Note that you will have to select up to the level defined in the Multi Program Manager.","amp.admin.ndd.indirect:no-matches-found":"No matches found","amp.admin.ndd.indirect:max-level":"Max levels","amp.admin.ndd.indirect:tooltip-max-depth":"This can be set by the superadmin only.","amp.admin.ndd.indirect:warning_on_change_levels":"If you change the Max Depth Level then the existing mappings will be deleted, are you sure you want to continue?"}'),Hn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.compose,Kn={mappingConfig:"/rest/ndd/indirect-programs-mapping-config",mappingSave:"/rest/ndd/indirect-programs-mapping",programs:"/rest/ndd/available-indirect-programs",programsSave:"/rest/ndd/update-source-destination-indirect-programs"},Vn="amp.admin.ndd.indirect:",Yn=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(n){var a;return(0,r.Z)(this,t),(a=e.call(this,n)).store=(0,c.createStore)(K,Hn((0,c.applyMiddleware)(u()))),a}return(0,a.Z)(t,[{key:"render",value:function(){var n=this.context.translations;return this.props.selected?(0,J.jsx)(p.Provider,{store:this.store,children:(0,J.jsxs)(B,{defaultTrnPack:Fn,children:[(0,J.jsx)("h2",{className:"section-title",children:n["".concat(Vn,"title")]}),(0,J.jsx)("div",{className:"section-sub-title",children:n["".concat(Vn,"sub-title")]}),(0,J.jsx)(zn,{api:Kn,trnPrefix:Vn,isIndirect:!0})]})}):null}}]),t}(s.Component);Yn.contextType=X;var qn=(0,p.connect)((function(n){return{translations:n.translationsReducer.translations}}),(function(n){return(0,c.bindActionCreators)({},n)}))(Yn),Jn=JSON.parse('{"amp.admin.ndd.program:title":"Programs Mapping","amp.admin.ndd.program:src-program-lvl-1":"Source Program","amp.admin.ndd.program:src-program-lvl-2":"Program Level 1","amp.admin.ndd.program:src-program-lvl-3":"Program Level 2","amp.admin.ndd.program:src-program-lvl-4":"Program Level 3","amp.admin.ndd.program:choose-src-lvl-2":"Choose a Program Level 1","amp.admin.ndd.program:choose-src-lvl-3":"Choose a Program Level 2","amp.admin.ndd.program:choose-src-lvl-4":"Choose a Program Level 3","amp.admin.ndd.program:dst-program-lvl-1":"Destination Program","amp.admin.ndd.program:dst-program-lvl-2":"Destination Program Level 1","amp.admin.ndd.program:dst-program-lvl-3":"Destination Program Level 2","amp.admin.ndd.program:dst-program-lvl-4":"Destination Program Level 3","amp.admin.ndd.program:choose-dst-lvl-2":"Choose a Destination Program Level 1","amp.admin.ndd.program:choose-dst-lvl-3":"Choose a Destination Program Level 2","amp.admin.ndd.program:choose-dst-lvl-4":"Choose a Destination Program Level 3","amp.admin.ndd.program:src-programs-title":"Source Programs","amp.admin.ndd.program:dst-programs-title":"Destination Programs","amp.admin.ndd.program:actions":"Actions","amp.admin.ndd.program:add-new":"Add New","amp.admin.ndd.program:button-save-all-edits":"Save all edits","amp.admin.ndd.program:button-revert-all-edits":"Revert all changes","amp.admin.ndd.program:insert-data":"(insert data to the new field)","amp.admin.ndd.program:click-save":"Click the Save icon to save the added data row","amp.admin.ndd.program:confirm-remove-row":"Are you sure you want to remove this mapping? (remember to click Save All button to confirm your changes).","amp.admin.ndd.program:validation_error_1":"Error: Can\'t save changes until all programs have been selected.","amp.admin.ndd.program:validation_error_2":"Error: Destination programs can\'t be mapped more than one time.","amp.admin.ndd.program:choose_main_src_program":"Choose a Source Program","amp.admin.ndd.program:choose_main_dst_program":"Choose a Destination Program","amp.admin.ndd.program:warning_on_change_main_programs":"If you change the Source Program or the Destination Program the existing mappings will be deleted, are you sure you want to continue?","amp.admin.ndd.program:validation_error_3":"Error: Source Program not selected.","amp.admin.ndd.program:validation_error_4":"Error: Destination Program not selected.","amp.admin.ndd.program:validation_error_5":"Error: Source Program and Destination Program must be different.","amp.admin.ndd.program:validation_error_6":"Error: Max Levels is not valid.","amp.admin.ndd.program:validation_error_7":"Error: Duplicate values found in mapping.","amp.admin.ndd.program:warning_on_change_destination_program":"Warning: The new Destination Program will be removes from all activities.","amp.admin.ndd.program:confirm-change-destination-program":"Are you sure you want to : The new Destination Program will be removes from all activities.","amp.admin.ndd.program:notification-saved-ok":"All mappings saved correctly.","amp.admin.ndd.program:page-title":"Aid Management Platform - Program Mapping Manager","amp.admin.ndd.program:required-fields":"Required Fields","amp.admin.ndd.program:loading":"Loading...","amp.admin.ndd.program:button-update-activities":"Update All Activities","amp.admin.ndd.program:button-update-activities-confirmation":"Are you sure you want to update all activities with the current mappings? (This process could take several minutes)","amp.admin.ndd.program:update-activities-successful":"Activities where successfully updated","amp.admin.ndd.program:update-activities-wait":"Updating activities, please wait...","amp.admin.ndd.program:update-activities-error":"Error updating activities.","amp.admin.ndd.program:tooltip-direct-programs":"The main program in use. What is selected in the Activity Form for the Source Program will limit what options are available in the Destination Program drop down.","amp.admin.ndd.program:tooltip-indirect-programs":"In the Activity Form, the drop down options for this program will be limited based on what the user selects in the Source Program.","amp.admin.ndd.program:tooltip-direct-programs-list":"Please specify the current levels of your source program to begin the mapping exercise. Note that you will have to select up to to level defined in the Multi Program Manager.","amp.admin.ndd.program:tooltip-indirect-programs-list":"Please define the corresponding destination program levels. Note that you will have to select up to level defined in the Multi Program Manager.","amp.admin.ndd.program:no-matches-found":"No matches found","amp.admin.ndd.program:max-level":"Max levels","amp.admin.ndd.program:tooltip-max-depth":"This can be set by the superadmin only.","amp.admin.ndd.program:warning_on_change_levels":"If you change the Max Depth Level then the existing mappings will be deleted, are you sure you want to continue?"}'),Xn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.compose,Wn={mappingConfig:"/rest/ndd/programs-mapping-config",mappingSave:"/rest/ndd/programs-mapping",programs:"/rest/ndd/available-programs",programsSave:"/rest/ndd/update-source-destination-programs"},Bn="amp.admin.ndd.program:",Qn=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(n){var a;return(0,r.Z)(this,t),(a=e.call(this,n)).store=(0,c.createStore)(K,Xn((0,c.applyMiddleware)(u()))),a}return(0,a.Z)(t,[{key:"render",value:function(){var n=this.context.translations;return this.props.selected?(0,J.jsx)(p.Provider,{store:this.store,children:(0,J.jsxs)(B,{defaultTrnPack:Jn,children:[(0,J.jsx)("h2",{className:"section-title",children:n["".concat(Bn,"title")]}),(0,J.jsx)("div",{className:"section-sub-title",children:n["".concat(Bn,"sub-title")]}),(0,J.jsx)(zn,{api:Wn,trnPrefix:Bn,isIndirect:!1})]})}):null}}]),t}(s.Component);Qn.contextType=X;var $n=(0,p.connect)((function(n){return{translations:n.translationsReducer.translations}}),(function(n){return(0,c.bindActionCreators)({},n)}))(Qn),ne=(0,p.connect)((function(n){return{translations:n.translationsReducer.translations}}),(function(n){return(0,c.bindActionCreators)({},n)}))((function(n){var e=n.translations,t=(0,s.useState)("indirect"),r=(0,Q.Z)(t,2),a=r[0],i=r[1],o="amp.admin.ndd:";return(0,J.jsxs)(m.Tabs,{id:"programs-tab",activeKey:a,transition:!1,onSelect:function(n){return i(n)},children:[(0,J.jsx)(m.Tab,{eventKey:"indirect",title:e["".concat(o,"menu-item-indirect-programs-mapping")],children:(0,J.jsx)(qn,{selected:"indirect"===a})}),(0,J.jsx)(m.Tab,{eventKey:"program",title:e["".concat(o,"menu-item-programs-mapping")],children:(0,J.jsx)($n,{selected:"program"===a})})]})})),ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.compose,te=function(n){(0,i.Z)(t,n);var e=(0,o.Z)(t);function t(n){var a;return(0,r.Z)(this,t),(a=e.call(this,n)).store=(0,c.createStore)(K,ee((0,c.applyMiddleware)(u()))),a}return(0,a.Z)(t,[{key:"render",value:function(){return(0,J.jsx)(p.Provider,{store:this.store,children:(0,J.jsx)(B,{defaultTrnPack:V,children:(0,J.jsx)(m.Container,{children:(0,J.jsx)(m.Row,{children:(0,J.jsx)(m.Col,{md:12,children:(0,J.jsx)(ne,{})})})})})})}}]),t}(s.Component)},1342:function(n,e,t){t.d(e,{BB:function(){return v},ET:function(){return f},Ez:function(){return u},IN:function(){return F},Ic:function(){return d},JP:function(){return H},LM:function(){return w},O:function(){return m},PU:function(){return h},S9:function(){return y},SJ:function(){return P},Sw:function(){return A},TM:function(){return L},Vs:function(){return c},WP:function(){return O},_G:function(){return x},aD:function(){return T},ah:function(){return R},bm:function(){return q},cE:function(){return p},eM:function(){return C},e_:function(){return l},fz:function(){return b},g1:function(){return D},gW:function(){return _},ij:function(){return M},io:function(){return N},pj:function(){return k},qp:function(){return s},rF:function(){return o},rP:function(){return Z},ry:function(){return a},sC:function(){return z},sK:function(){return G},tU:function(){return E},um:function(){return g},vW:function(){return S},wU:function(){return U},wt:function(){return j},xE:function(){return r},xg:function(){return Y},yr:function(){return I},z7:function(){return i}});var r=0,a=1,i=-1,o="/assets/img/flags/",s="dashboard-default-min-year-range",d="dashboard-default-max-year-range",c="/rest/filters/sectors",l="/rest/filters/locations?firstLevelOnly=true&showAllCountries=true",u="/rest/amp/settings",p="/rest/filters/modalities?sscWorkspace=true",m="/rest/gis/sscdashboard",v="/rest/gis/sscdashboard/xsl",f="/rest/gis/activities",h=12,g="#fd8f00",y="#fd8f00",b="#007236",P="#007236",x="png",j=50,S=-999999999,_=9,C=6,w=1766,Z=5,A="-1",D=1920,k=145,N=2,E="0",T="SSC_",I="home",R="sector",O="modality",M="download",L="country-column",G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAbCAQAAACkGQXlAAAAI0lEQVR42mP8L8lAVcA4auCogaMGjho4auCogaMGjhpINAAAOBcdpLw/CDsAAAAASUVORK5CYII=",U="000",z="primary-sector",F="ssc-modalities",H="donor-agency-country",K=new Map([["110","#d46453"],["120","#f5a15d"],["130","#ffcf8e"],["140","#ff7a7d"],["150","#ff417d"],["160","#d61a88"],["210","#fff540"],["220","#28c074"],["230","#429058"],["240","#bd4035"],["250","#b0fff1"],["311","#144491"],["312","#9b0e3e"],["313","#10908e"],["321","#8f5765"],["322","#c7d4e1"],["323","#77b02a"],["331","#488bd4"],["332","#928fb8"],["400","#c6d831"],["500","#d41e3c"],["600","#cf968c"],["700","#78d7ff"],["910","#94007a"],["920","#ffb84a"],["930","#ed7b39"],["998","#ed4c40"],["000","#8f5765"]]),V=new Map([[U,"#8f5765"]]),Y=new Map([[O,["#00429d","#3761ab","#5681b9","#73a2c6","#93c4d2","#b9e5dd","#ffffe0","#ffd3bf","#ffa59e","#f4777f","#dd4c65","#be214d","#93003a"]]]),q=new Map([[R,K],[O,V]])},35209:function(n,e,t){var r=t(64454),a=t(58234);e.Z=function(n){return function(e){return e((0,r.M0)(n)),(0,a.X)(n).then((function(n){return e((0,r.sq)(n))})).catch((function(n){return e((0,r.nW)(n))}))}}},64454:function(n,e,t){t.d(e,{M0:function(){return o},b5:function(){return r},k_:function(){return a},nW:function(){return d},pv:function(){return i},sq:function(){return s}});var r="FETCH_TRANSLATIONS_PENDING",a="FETCH_TRANSLATIONS_SUCCESS",i="FETCH_TRANSLATIONS_ERROR";function o(n){return{type:r,payload:n}}function s(n){return{type:a,payload:n}}function d(n){return{type:i,error:n}}},47371:function(n,e,t){t.d(e,{g:function(){return a}});t(50383);var r=t(59653),a=function(){return(0,r.jsx)("div",{className:"jumbotron",children:(0,r.jsx)("div",{className:"progress",children:(0,r.jsx)("div",{className:"progress-bar progress-bar-striped bg-info",role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"},children:"..."})})})}},58234:function(n,e,t){t.d(e,{X:function(){return d},a:function(){return s}});var r=t(1342),a="POST",i="GET";function o(n,e){var t={method:n?a:i,headers:e||{"Content-Type":"application/json",Accept:"application/json","ws-prefix":r.aD}};return n&&(t.body=JSON.stringify(n)),t}var s=function(n){var e=n.body,t=n.url,r=n.headers;return new Promise((function(n,a){return fetch(t,o(e,r)).then((function(n){return r&&"text/html"===r.Accept?n.text():n.headers&&n.headers.get("Content-Type")&&n.headers.get("Content-Type").indexOf("application/json")>-1?n.json():n})).then((function(e){return e.error?a(e.error):n(e)}))}))};function d(n){return new Promise((function(e){return fetch("/rest/translations/label-translations",o(n)).then((function(n){var t=n.headers.get("content-type");if(t&&-1!==t.indexOf("application/json"))return n.json().then((function(n){if(n.error)throw new Error(n.error);return e(n)}))}))}))}},50840:function(n,e,t){t.d(e,{Z:function(){return o}});var r=t(33028),a=t(64454),i={pending:!0,translations:{},error:null};function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a.b5:return(0,r.Z)((0,r.Z)({},n),{},{pending:!0,translations:e.payload});case a.k_:return(0,r.Z)((0,r.Z)({},n),{},{pending:!1,translations:e.payload});case a.pv:return(0,r.Z)((0,r.Z)({},n),{},{pending:!1,error:e.error});default:return n}}},80753:function(n,e,t){function r(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}t.d(e,{Z:function(){return r}})},9249:function(n,e,t){function r(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t.d(e,{Z:function(){return r}})},87371:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(45850);function a(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,(0,r.Z)(a.key),a)}}function i(n,e,t){return e&&a(n.prototype,e),t&&a(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}},86906:function(n,e,t){t.d(e,{Z:function(){return o}});var r=t(95058),a=t(70352),i=t(11987);function o(n){var e=(0,a.Z)();return function(){var t,a=(0,r.Z)(n);if(e){var o=(0,r.Z)(this).constructor;t=Reflect.construct(a,arguments,o)}else t=a.apply(this,arguments);return(0,i.Z)(this,t)}}},56666:function(n,e,t){t.d(e,{Z:function(){return a}});var r=t(45850);function a(n,e,t){return(e=(0,r.Z)(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}},95058:function(n,e,t){function r(n){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r(n)}t.d(e,{Z:function(){return r}})},45754:function(n,e,t){t.d(e,{Z:function(){return a}});var r=t(88960);function a(n,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&(0,r.Z)(n,e)}},70352:function(n,e,t){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}t.d(e,{Z:function(){return r}})},81079:function(n,e,t){function r(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}t.d(e,{Z:function(){return r}})},33028:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(56666);function a(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function i(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}},11987:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(86522),a=t(80753);function i(n,e){if(e&&("object"===(0,r.Z)(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,a.Z)(n)}},88960:function(n,e,t){function r(n,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,e){return n.__proto__=e,n},r(n,e)}t.d(e,{Z:function(){return r}})},68079:function(n,e,t){t.d(e,{Z:function(){return o}});var r=t(926);var a=t(81079),i=t(59147);function o(n){return function(n){if(Array.isArray(n))return(0,r.Z)(n)}(n)||(0,a.Z)(n)||(0,i.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},45850:function(n,e,t){t.d(e,{Z:function(){return a}});var r=t(86522);function a(n){var e=function(n,e){if("object"!=(0,r.Z)(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var a=t.call(n,e||"default");if("object"!=(0,r.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==(0,r.Z)(e)?e:String(e)}},86522:function(n,e,t){function r(n){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}t.d(e,{Z:function(){return r}})}}]);
//# sourceMappingURL=2565.bundle.js.map