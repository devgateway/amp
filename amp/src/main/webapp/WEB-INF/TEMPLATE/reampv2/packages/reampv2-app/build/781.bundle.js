"use strict";(self.webpackChunkreampv2=self.webpackChunkreampv2||[]).push([[781],{71937:function(e,t,n){n.d(t,{J:function(){return r}});var r=function(e){if(null===e)return"No error";if("string"===typeof e)return e;var t=e;if(t){var n=Object.keys(t.error)[0],r=t.error[n][0];return r?"(Not authenticated)"===r?(window.location.href="/","Auth Error"):r:"An error occurred."}}},79748:function(e,t,n){n.d(t,{CY:function(){return f},DC:function(){return v},G7:function(){return a},Ko:function(){return m},PJ:function(){return i},Pz:function(){return c},YP:function(){return o},kj:function(){return p},mh:function(){return l},nI:function(){return u},q4:function(){return g},ry:function(){return r},tD:function(){return h},x2:function(){return s},z1:function(){return d}});var r="src-program",a="dst-program",o="all-programs",i="program-mapping",s="-program",d="children",l=2,c=3,u=4,p="srcLvl",f="src",h="dst",g="/rest/security/layout",m="/rest/amp/settings",v="/rest/activity/updateMappings/async"},70781:function(e,t,n){n.r(t),n.d(t,{default:function(){return yn}});var r=n(9249),a=n(87371),o=n(45754),i=n(86906),s=n(50383),d=n.n(s),l=n(83112),c=n(10941),u=n.n(c),p=n(94652),f=n(33028),h="FETCH_AMP_SETTINGS_PENDING",g="FETCH_AMP_SETTINGS_SUCCESS",m="FETCH_AMP_SETTINGS_ERROR";var v={settingsLoaded:!1,settingsPending:!1,settings:{},error:null},y=n(50840),b="FETCH_DIRECT_INDIRECT_NDD_PENDING",x="FETCH_DIRECT_INDIRECT_NDD_SUCCESS",S=" FETCH_DIRECT_INDIRECT_NDD_ERROR",C="FETCH_TOP_PENDING",j="FETCH_TOP_SUCCESS",P=" FETCH_TOP_ERROR",D="RESET_TOP",w="FETCH_YEAR_DETAIL_PENDING",k="FETCH_YEAR_DETAIL_SUCCESS",E=" FETCH_YEAR_DETAIL_ERROR";var Z={nddLoaded:!1,nddLoadingPending:!1,topLoaded:!1,topLoadingPending:!1,error:null,top:void 0,yearDetail:void 0,yearDetailLoaded:!1,yearDetailPending:!1},N="FETCH_DASHBOARD_SETTINGS_PENDING",T="FETCH_DASHBOARD_SETTINGS_SUCCESS",R=" FETCH_DASHBOARD_SETTINGS_ERROR";var L=function(e){var t={};return t.numberFormat=e["number-format"]||"#,#.#",t.precision=0,-1!==t.numberFormat.indexOf(".")&&(t.precision=t.numberFormat.length-t.numberFormat.indexOf(".")-1),-1!==t.numberFormat.indexOf(",")?t.groupSeparator=e["number-group-separator"]||",":t.groupSeparator="",t.decimalSeparator=e["number-decimal-separator"]||".",t.numberDivider=e["number-divider"],1===t.numberDivider?t.numberDividerDescriptionKey="inunits":1e3===t.numberDivider?t.numberDividerDescriptionKey="inthousands":1e6===t.numberDivider?t.numberDividerDescriptionKey="inmillions":1e9===t.numberDivider&&(t.numberDividerDescriptionKey="inbillions"),t.dateFormat=e["default-date-format"],t.defaultMinDate=e["dashboard-default-min-date"],t.defaultMaxDate=e["dashboard-default-max-date"],t},A={dashboardSettingsLoaded:!1,dashboardSettingsLoadingPending:!1,error:null},_="FETCH_SHARE_LINK_PENDING",I="FETCH_SHARE_LINK_SUCCESS",O=" FETCH_SHARE_LINK_ERROR",F="GET_SHARED_DATA_PENDING",M="GET_SHARED_DATA_SUCCESS",H=" GET_SHARED_DATA_ERROR";var B={shareLinkLoaded:!1,shareLinkPending:!1,error:null},U={sharedDataLoaded:!1,sharedDataPending:!1,error:null},G="FETCH_MAPPINGS_PENDING",V="FETCH_MAPPINGS_SUCCESS",z=" FETCH_MAPPINGS_ERROR";var W={mappingsLoaded:!1,mappingsLoadingPending:!1,error:null},Y=n(32723),J=n(34795),K=n(5903),X="amp.ndd.dashboard:",q="directProgram",Q="indirectPrograms",$="programLvl1",ee="programLvl2",te="amount",ne="code",re="DIRECT",ae="funding-type",oe="currency-code",ie=[["#1f5177","#a42727","#b6861e","#598118","#551881","#188150","#811849","#187881","#845EC2","#FF9671","#F9F871"],["#91cb34","#9053bc","#2480c6","#ec4444","#ffbd2f","#2fffd5","#d92fff","#ff6a2f","#FBEAFF","#2fffd5","#926C00"],["#443E61","#3CBABA","#BED683","#EDD345","#FB624B","#747D81","#C99694","#D44A28","#C8C8C1","#1C1015","#9DE7A6"]],se=new Map,de=new Map,le=n(71937),ce="programConfiguration",ue=(0,K.createAsyncThunk)("".concat(ce,"/fetch"),function(){var e=(0,J.Z)((0,Y.Z)().mark((function e(t,n){var r,a,o;return(0,Y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.next=3,fetch("/rest/dashboard/programConfiguration");case 3:return a=e.sent,e.next=6,a.json();case 6:if(o=e.sent,200===a.status){e.next=9;break}return e.abrupt("return",r(o));case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),pe={data:null,loading:!1,error:null},fe=(0,K.createSlice)({name:ce,initialState:pe,reducers:{resetProgramConfiguration:function(){return pe}},extraReducers:function(e){e.addCase(ue.pending,(function(e){e.loading=!0})),e.addCase(ue.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.data=n})),e.addCase(ue.rejected,(function(e,t){var n=t.payload;e.loading=!1,e.error=(0,le.J)(n)}))}}),he=(fe.actions.resetProgramConfiguration,fe.reducer),ge="indicatorsByProgram",me=(0,K.createAsyncThunk)("".concat(ge,"/fetch"),function(){var e=(0,J.Z)((0,Y.Z)().mark((function e(t,n){var r,a,o;return(0,Y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.next=3,fetch("".concat("/rest/dashboard/me/indicatorsByProgram","/").concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:if(o=e.sent,200===a.status){e.next=9;break}return e.abrupt("return",r(o));case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ve=(0,K.createSlice)({name:ge,initialState:{data:[],loading:!1,error:null},reducers:{resetState:function(e){e.data=[],e.loading=!1,e.error=null}},extraReducers:function(e){e.addCase(me.pending,(function(e){e.loading=!0})),e.addCase(me.fulfilled,(function(e,t){e.data=[],e.loading=!1,e.data=t.payload})),e.addCase(me.rejected,(function(e,t){e.loading=!1,e.error=(0,le.J)(t.payload)}))}}),ye=(ve.actions.resetState,ve.reducer),be="programReport",xe=(0,K.createAsyncThunk)("".concat(be,"/fetch"),function(){var e=(0,J.Z)((0,Y.Z)().mark((function e(t,n){var r,a,o,i,s,d,l;return(0,Y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.filters,a=t.id,o=t.settings,i=n.rejectWithValue,s=(0,f.Z)((0,f.Z)({},r),{},{settings:o}),e.next=5,fetch("".concat("/rest/dashboard/me/programReport","/").concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,f.Z)({},s))});case 5:return d=e.sent,e.next=8,d.json();case 8:if(l=e.sent,200===d.status){e.next=11;break}return e.abrupt("return",i(l));case 11:return e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Se=(0,K.createSlice)({name:be,initialState:{data:null,loading:!1,error:null},reducers:{resetState:function(e){e.data=null,e.loading=!1,e.error=null}},extraReducers:function(e){e.addCase(xe.pending,(function(e){e.loading=!0})),e.addCase(xe.fulfilled,(function(e,t){e.data=null,e.loading=!1,e.data=t.payload})),e.addCase(xe.rejected,(function(e,t){e.loading=!1,e.error=(0,le.J)(t.payload)}))}}),Ce=(Se.actions.resetState,Se.reducer),je="indicators",Pe={indicators:[],loading:!1,error:null},De=(0,K.createAsyncThunk)("".concat(je,"/fetch"),function(){var e=(0,J.Z)((0,Y.Z)().mark((function e(t,n){var r,a,o;return(0,Y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.next=3,fetch("/rest/dashboard/me/indicators");case 3:return a=e.sent,e.next=6,a.json();case 6:if(o=e.sent,200===a.status){e.next=9;break}return e.abrupt("return",r(o));case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),we=(0,K.createSlice)({name:je,initialState:Pe,reducers:{resetState:function(){return Pe}},extraReducers:function(e){e.addCase(De.pending,(function(e){e.loading=!0})),e.addCase(De.fulfilled,(function(e,t){e.indicators=[],e.loading=!1,e.indicators=t.payload})),e.addCase(De.rejected,(function(e,t){e.loading=!1,e.error=(0,le.J)(t.payload)}))}}),ke=(we.actions.resetState,we.reducer),Ee="indicatorReport",Ze=(0,K.createAsyncThunk)("".concat(Ee,"/fetch"),function(){var e=(0,J.Z)((0,Y.Z)().mark((function e(t,n){var r,a,o,i,s,d,l,c,u;return(0,Y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.filters,a=t.id,o=t.yearCount,i=t.settings,s=n.rejectWithValue,d=5,o&&o>5&&(d=o),l=(0,f.Z)((0,f.Z)({},r),{},{settings:(0,f.Z)((0,f.Z)({},i),{},{yearCount:d})}),e.next=7,fetch("".concat("/rest/dashboard/me/indicatorReport","/").concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,f.Z)({},l))});case 7:return c=e.sent,e.next=10,c.json();case 10:if(u=e.sent,200===c.status){e.next=13;break}return e.abrupt("return",s(u));case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ne=(0,K.createSlice)({name:Ee,initialState:{data:null,loading:!1,error:null},reducers:{resetState:function(e){e.data=null,e.loading=!1,e.error=null}},extraReducers:function(e){e.addCase(Ze.pending,(function(e){e.loading=!0})),e.addCase(Ze.fulfilled,(function(e,t){e.error=null,e.loading=!1,e.data=t.payload})),e.addCase(Ze.rejected,(function(e,t){e.loading=!1,e.error=(0,le.J)(t.payload)}))}}),Te=(Ne.actions.resetState,Ne.reducer),Re=(0,K.createAsyncThunk)("".concat("fm","/fetch"),function(){var e=(0,J.Z)((0,Y.Z)().mark((function e(t,n){var r,a,o,i;return(0,Y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,a={"enabled-modules":!1,"reporting-fields":!1,"full-enabled-paths":!1,"detail-modules":["PROGRESS TRACKING DASHBOARDS"]},e.next=4,fetch("/rest/common/fm/flat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,f.Z)({},a))});case 4:return o=e.sent,e.next=7,o.json();case 7:if(i=e.sent,200===o.status){e.next=10;break}return e.abrupt("return",r(i));case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Le=(0,K.createSlice)({name:"fm",initialState:{data:null,loading:!1,error:null},reducers:{resetState:function(e){e.data=null,e.loading=!1,e.error=null}},extraReducers:function(e){e.addCase(Re.pending,(function(e){e.loading=!0})),e.addCase(Re.fulfilled,(function(e,t){e.error=null,e.loading=!1,e.data=function(e,t){var n=e["fm-settings"];return Object.keys(n).find((function(e){return e===t}))?n[t]:[]}(t.payload,"PROGRESS TRACKING DASHBOARDS")})),e.addCase(Re.rejected,(function(e,t){e.loading=!1,e.error=(0,le.J)(t.payload)}))}}),Ae=(Le.actions.resetState,Le.reducer),_e=(0,l.combineReducers)({startupReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return(0,f.Z)((0,f.Z)({},e),{},{settingsPending:!0});case g:return(0,f.Z)((0,f.Z)({},e),{},{settingsPending:!1,settingsLoaded:!0,settings:t.payload});case m:return(0,f.Z)((0,f.Z)({},e),{},{settingsPending:!1,settingsLoaded:!1,error:t.payload.error});default:return e}},translationsReducer:y.Z,reportsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return(0,f.Z)((0,f.Z)({},e),{},{nddLoadingPending:!0});case C:return(0,f.Z)((0,f.Z)({},e),{},{topLoadingPending:!0});case x:return(0,f.Z)((0,f.Z)({},e),{},{nddLoadingPending:!1,nddLoaded:!0,ndd:t.payload});case j:return(0,f.Z)((0,f.Z)({},e),{},{topLoadingPending:!1,topLoaded:!0,top:t.payload});case S:return(0,f.Z)((0,f.Z)({},e),{},{nddLoaded:!1,nddLoadingPending:!1,error:t.error});case P:return(0,f.Z)((0,f.Z)({},e),{},{topLoaded:!1,topLoadingPending:!1,error:t.error});case D:return(0,f.Z)((0,f.Z)({},e),{},{topLoaded:!1,topLoadingPending:!1,top:void 0});case k:return(0,f.Z)((0,f.Z)({},e),{},{yearDetailPending:!1,yearDetailLoaded:!0,yearDetail:t.payload,error:null});case w:return(0,f.Z)((0,f.Z)({},e),{},{yearDetail:null,yearDetailLoaded:!1,yearDetailPending:!0,error:null});case E:return(0,f.Z)((0,f.Z)({},e),{},{yearDetail:null,yearDetailLoaded:!1,yearDetailPending:!1,error:t.error});default:return e}},dashboardSettingsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return(0,f.Z)((0,f.Z)({},e),{},{dashboardSettingsLoadingPending:!0});case T:return(0,f.Z)((0,f.Z)({},e),{},{dashboardSettingsLoadingPending:!1,dashboardSettingsLoaded:!0,dashboardSettings:t.payload,globalSettings:t.gs});case R:return(0,f.Z)((0,f.Z)({},e),{},{dashboardSettingsLoaded:!1,dashboardSettingsLoadingPending:!1,error:t.error});default:return e}},shareLinkReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return(0,f.Z)((0,f.Z)({},e),{},{shareLinkPending:!0});case I:return(0,f.Z)((0,f.Z)({},e),{},{shareLinkPending:!1,shareLinkLoaded:!0,shareLink:t.payload});case O:return(0,f.Z)((0,f.Z)({},e),{},{shareLinkLoaded:!1,shareLinkPending:!1,error:t.error});default:return e}},sharedDataReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return(0,f.Z)((0,f.Z)({},e),{},{sharedDataPending:!0});case M:return(0,f.Z)((0,f.Z)({},e),{},{sharedDataPending:!1,sharedDataLoaded:!0,sharedData:t.payload});case H:return(0,f.Z)((0,f.Z)({},e),{},{sharedDataLoaded:!1,sharedDataPending:!1,error:t.error});default:return e}},mappingsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return(0,f.Z)((0,f.Z)({},e),{},{mappingsLoadingPending:!0});case V:return(0,f.Z)((0,f.Z)({},e),{},{mappingsLoadingPending:!1,mappingsLoaded:!0,mapping:t.payload,noIndirectMapping:t.payload2});case z:return(0,f.Z)((0,f.Z)({},e),{},{mappingsLoaded:!1,mappingsLoadingPending:!1,error:t.error});default:return e}},programConfigurationReducer:he,indicatorsByProgramReducer:ye,programReportReducer:Ce,fetchIndicatorsReducer:ke,indicatorReportReducer:Te,fetchFmReducer:Ae}),Ie=n(35209),Oe=n(47371),Fe=JSON.parse('{"amp.ndd.dashboard:Home-Page":"Dashboard Home","amp.ndd.dashboard:page-title":"Aid Management Platform - NDD Dashboard","amp.ndd.dashboard:ndd-dashboard":"NDD Dashboard","amp.ndd.dashboard:filters":"Filters","amp.ndd.dashboard:Link":"Link","amp.ndd.dashboard:edit-filters":"edit filters","amp.ndd.dashboard:show-filter-settings":"Show Filter Settings","amp.ndd.dashboard:hide-filter-settings":"Hide Filter Settings","amp.ndd.dashboard:settings":"Settings","amp.ndd.dashboard:edit-settings":"Edit Settings","amp.ndd.dashboard:close":"Close","amp.ndd.dashboard:share-copy-link":"Share this dashboard view","amp.ndd.dashboard:share-link":"Link","amp.ndd.dashboard:share":"Share","amp.ndd.dashboard:fy-direct":"Show Direct Data","amp.ndd.dashboard:fy-indirect":"Show Indirect Data","amp.ndd.dashboard:direct":"Direct Data","amp.ndd.dashboard:indirect":"Indirect Data","amp.ndd.dashboard:no-data":"No Data Available","amp.ndd.dashboard:of-total":"of Total","amp.ndd.dashboard:of-year-total":"of Year Total","amp.ndd.dashboard:others":"others","amp.ndd.dashboard:top-donor-agencies":"TOP DONOR AGENCIES","amp.dashboard:chart-thousand":"k","amp.dashboard:chart-million":"M","amp.dashboard:chart-billion":"B","amp.dashboard:chart-trillion":"T","amp.dashboard:chart-peta":"P","amp.dashboard:chart-exa":"E","amp.dashboard:settings":"Settings","amp.dashboard:funding-over-time":"Funding Over Time","amp.ndd.dashboard:inunits":"In units","amp.ndd.dashboard:inthousands":"In thousands","amp.ndd.dashboard:inmillions":"In millions","amp.ndd.dashboard:inunits-amounts":"Amounts in Units","amp.ndd.dashboard:inthousands-amounts":"Amounts in Thousands (000)","amp.ndd.dashboard:inmillions-amounts":"Amounts in Millions (000 000)","amp.ndd.dashboard:no-data-short":"No Data","amp.ndd.dashboard:modal-details-title":"Activities Detail","amp.ndd.dashboard:project-title":"Project Title","amp.ndd.dashboard:load-more":"Load more","amp.ndd.dashboard:legends":"Legends","amp.ndd.dashboard:loading":"Loading","amp.ndd.dashboard:me-dashboard":"Monitoring and Evaluation Indicators","amp.ndd.dashboard:me-add-indicator":"Add an Indicator","amp.ndd.dashboard:me-program-progress":"Program Progress","amp.ndd.dashboard:me-indicator-report":"Indicator Report","amp.ndd.dashboard:me-baseline":"Baseline","amp.ndd.dashboard:me-target":"Target","amp.ndd.dashboard:me-current":"Current","amp.ndd.dashboard:me-actual":"Actual","amp.ndd.dashboard:me-no-mpc":"No Available Prorgam Configuration","amp.ndd.dashboard:me-no-programs":"No Programs Available","amp.ndd.dashboard:me-no-indicator":"No Indicators Available","amp.ndd.dashboard:me-no-data":"No Data Available"}'),Me=n(59653),He=d().createContext({translations:Fe}),Be=(0,p.connect)((function(e){return{translationPending:e.translationsReducer.pending,translations:e.translationsReducer.translations,programConfigurationPending:e.programConfigurationReducer.pending,fmReducerPending:e.fetchFmReducer.loading}}),(function(e){return(0,l.bindActionCreators)({_fetchTranslations:Ie.Z},e)}))((function(e){var t=e.translationPending,n=e.translations,r=e._fetchTranslations,a=e.programConfigurationPending,o=e.fmReducerPending,i=(0,p.useDispatch)();return(0,s.useEffect)((function(){r(Fe),i(ue()),i(Re())}),[]),t||a||o?(0,Me.jsx)(Oe.g,{}):(document.title=n["amp.ndd.dashboard:page-title"],(0,Me.jsx)(He.Provider,{value:{translations:n},children:e.children}))})),Ue=n(46760),Ge=(n(98269),n(56666)),Ve=n(39887),ze=n(80753),We=n(77054),Ye=n(64761),Je=n.n(Ye),Ke=n(41241),Xe=n(25171),qe=n.n(Xe),Qe=n(53867),$e=n(79748);function et(e,t){return e&&e.filters&&e.filters[t.filterColumnName]&&(e.filters[t.filterColumnName].splice(e.filters[t.filterColumnName].findIndex((function(e){return e===t.objectId})),1),0===e.filters[t.filterColumnName].length&&(e.filters[t.filterColumnName]=null)),e}function tt(e,t){var n,r;if((n=de.get(t))||(n=new Map,de.set(t,n)),!(r=n.get(e.code.trim()))){var a=se.get(t);a||(ie.length>0?(a=ie.shift(),se.set(t,a)):a=["#00ff00","#aa00bb"]),r=a.shift(),n.set(e.code,r)}return r}function nt(e,t,n,r,a){var o=(0,Qe.format)(".".concat(t||3,"s"));return n=n||".",r?function(e){return o(e).replace("k",rt("k",a)).replace("G",rt("G",a)).replace(".",n)}:function(t){return o(t).replace("k"," ".concat(e["amp.dashboard:chart-thousand"])).replace("M"," ".concat(e["amp.dashboard:chart-million"])).replace("G"," ".concat(e["amp.dashboard:chart-billion"])).replace("T"," ".concat(e["amp.dashboard:chart-trillion"])).replace("P"," ".concat(e["amp.dashboard:chart-peta"])).replace("E"," ".concat(e["amp.dashboard:chart-exa"])).replace(".",n)}}function rt(e,t){switch(t){case"en":return e;case"fr":switch(e){case"k":return"m";case"G":return"MM"}break;case"sp":if("G"===e)return"B"}return e}function at(e,t,n,r,a,o,i,s){var d="".concat(a,".").concat(r,"f"),l=i&&s?n/i:n,c=(0,Me.jsx)("b",{children:(0,Qe.format)(d)(l).replace(/[,]+/g,o).replace(/[.]+/g,a)});return(0,Me.jsxs)(Me.Fragment,{children:[c," ",e,i&&s?" (".concat(t["amp.ndd.dashboard:".concat(s)],")"):null]})}function ot(e,t,n,r,a){return a?at(e,t,r,n.precision,n.decimalSeparator,n.groupSeparator,n.numberDivider,n.numberDividerDescriptionKey):at(e,t,r,n.precision,n.decimalSeparator,n.groupSeparator)}function it(e,t){var n="".concat(e.decimalSeparator,".").concat(e.precision,"f"),r=e.numberDivider&&e.numberDividerDescriptionKey?t/e.numberDivider:t;return(0,Qe.format)(n)(r).replace(/[,]+/g,e.groupSeparator).replace(".",e.decimalSeparator)}function st(e,t){return t.numberDivider>1?e["amp.ndd.dashboard:".concat(t.numberDividerDescriptionKey,"-amounts")]:""}var dt=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"getActualWidth",value:function(e){var t=document.createElement("canvas").getContext("2d");t.font="16px times new roman";var n=t.measureText(e).width;return Math.ceil(n)}},{key:"render",value:function(){var e=this.props,t=e.titleLabel,n=e.color,r=e.value,a=e.formattedValue,o=e.total,i=e.minWidth,s=e.isYearTotal,d=e.globalSettings,l=this.context.translations,c=o>0?100*r/o:0,u={backgroundColor:n},p={};return i&&this.getActualWidth(t)>i&&(p.minWidth=i),(0,Me.jsxs)("div",{className:"generic-tooltip",style:p,children:[(0,Me.jsx)("div",{className:"tooltip-header",style:u,children:t}),(0,Me.jsx)("div",{className:"inner",children:(0,Me.jsxs)("div",{className:"",children:[(0,Me.jsx)("div",{className:"element",children:(0,Me.jsx)("span",{className:"formattedValue",children:a})}),c>0?(0,Me.jsx)("div",{className:"element grey",children:(0,Me.jsxs)("span",{className:"of-total",children:[ot("",l,d,c,!1),(0,Me.jsx)("b",{children:"% "}),s?l["amp.ndd.dashboard:of-year-total"]:l["amp.ndd.dashboard:of-total"]]})}):null]})})]})}}]),n}(s.Component);dt.defaultProps={minWidth:null,isYearTotal:!1},dt.contextType=He;var lt=dt,ct=(0,Ke.Z)(Je()),ut=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var a;(0,r.Z)(this,n),(a=t.call(this,e)).onHover=function(e){var t=a.props.selectedDirectProgram;(null===t||null!==t&&e.points[0].data.extraData[e.points[0].i].neverFade)&&a.setState({showLegend:!0,legendTop:e.event.layerY,legendLeft:e.event.layerX+15,tooltipData:e})},a.onUnHover=function(){a.setState({showLegend:!1,tooltipData:null})},a.onClick=function(e,t){var n=a.props.handleOuterChartClick;a.setState({showLegend:!1}),n(e,t)},a.createTooltip=function(){var e=a.state.tooltipData,t=a.props,n=t.settings,r=t.globalSettings,o=t.translations;if(e){var i=e.points[0].data.extraData[e.points[0].i],s=ot(n[oe],o,r,i.amount,!0),d=e.points[0].data.extraData.reduce((function(e,t){return e+t.amount}),0);return(0,Me.jsx)(lt,{color:e.points[0].color,currencyCode:n[oe],formattedValue:s,titleLabel:"".concat(i.name),total:d,value:i.amount,minWidth:400,globalSettings:r})}return null};var o=a.props.handleOuterChartClick;return a.extractOuterData=a.extractOuterData.bind((0,ze.Z)(a)),a.extractInnerData=a.extractInnerData.bind((0,ze.Z)(a)),a.handleOuterChartClick=o,a.calculateOpacity=a.calculateOpacity.bind((0,ze.Z)(a)),a.state={showLegend:!1,legendTop:0,legendLeft:0,tooltipData:null},a}return(0,a.Z)(n,[{key:"extractOuterData",value:function(e){var t=this,n=this.props.selectedDirectProgram,r=[],a=this.props.data;if(a&&a.length>0){var o=a.reduce((function(e,t){return e+t[q][te]}),0);a.forEach((function(i){var s=e&&t.isSubProgram(i,n)?i[q][ee]:i[q][$];if(s&&0===r.filter((function(e){return e[ne]===s[ne]})).length){var d=(0,Ge.Z)((0,Ge.Z)((0,Ge.Z)((0,Ge.Z)((0,Ge.Z)((0,Ge.Z)((0,Ge.Z)({},ne,s[ne]),"filterColumnName",s.filterColumnName),"objectId",s.objectId),"name",s.name),te,a.filter((function(r){return e&&t.isSubProgram(i,n)?r[q][ee]&&r[q][ee][ne]===s[ne]:r[q][$]&&r[q][$][ne]===s[ne]})).reduce((function(e,t){return e+t[q][te]}),0)),"neverFade",t.isSubProgram(i,n)),"parent",i[q][$].objectId);d.percentageInTotal=d[te]/o*100,d.normalizedPercentage=d.percentageInTotal,r.push(d)}}))}var i=this.normalizePieData(r);if(e){var s=[];return this.extractOuterData(!1).forEach((function(e){i.filter((function(t){return t.parent===e.objectId})).forEach((function(e){return s.push(e)}))})),s}return i}},{key:"normalizePieData",value:function(e){if(e.find((function(e){return e.percentageInTotal<2}))){var t=e.sort((function(e,t){return t.percentageInTotal-e.percentageInTotal}))[0],n=0;e.filter((function(e){return e.percentageInTotal<2})).forEach((function(e){var t=2-e.percentageInTotal;n+=t,e.normalizedPercentage=2})),t.normalizedPercentage=t.percentageInTotal-n}return e}},{key:"isSubProgram",value:function(e,t){return!!t&&e[q][$][ne]===t[ne]}},{key:"extractInnerData",value:function(e){var t=[],n=this.props.data;return n&&n.length>0&&e.forEach((function(e){var r=[];n.filter((function(t){return t[q][$][ne]===e[ne]})).forEach((function(e){e[Q].forEach((function(t){0===r.filter((function(e){return e[ne]===t[$][ne]})).length?r.push((0,Ge.Z)((0,Ge.Z)((0,Ge.Z)((0,Ge.Z)({},ne,t[$][ne]),"originalAmount",t[te]),"name",t[$].name),"directProgramCode",e[q][$][ne])):r.find((function(e){return e[ne]===t[$][ne]})).originalAmount+=t[te]}))}));var a=r.reduce((function(e,t){return e+t.originalAmount}),0);r.forEach((function(e){e.percentageInSubGroup=100*e.originalAmount/a})),t.push(r)})),t}},{key:"innerDataToChartValues",value:function(e,t){var n=[];return e&&e.forEach((function(e){e.forEach((function(e){var r=t.find((function(t){return t[ne]===e.directProgramCode})).normalizedPercentage;n.push((0,Ge.Z)((0,Ge.Z)((0,Ge.Z)((0,Ge.Z)((0,Ge.Z)({},ne,e[ne]),"innerCode",e[ne]+e.directProgramCode),"name",e.name),"percentage",e.percentageInSubGroup/100*r),"amount",e.originalAmount))}))})),n}},{key:"calculateOpacity",value:function(e,t){var n=this.props.selectedDirectProgram,r=[];return n?e.forEach((function(e,a){var o;a!==t.findIndex((function(e){return e[ne]===n[ne]}))&&!0!==t[a].neverFade?(o=.15,e=e+Math.round(255*Math.min(Math.max(o||1,0),1)).toString(16).toUpperCase(),r.push(e)):r.push(e)})):r=e,r}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedDirectProgram,r=t.translations,a=t.selectedPrograms,o=this.state,i=o.showLegend,s=o.legendTop,d=o.legendLeft,l=this.extractOuterData(!1),c=n?this.extractOuterData(!0):this.extractOuterData(!1),u=this.extractInnerData(l),p=this.innerDataToChartValues(u,l),f=this.calculateOpacity(p.map((function(e){return tt(e,a[1])})),p),h=this.calculateOpacity(c.map((function(e){return tt(e,e.neverFade?"".concat(a[0],"_").concat(n.code):a[0])})),c),g=0===l.length?[{text:r["".concat(X,"no-data")],xref:"paper",yref:"paper",showarrow:!1,font:{size:20}}]:[];return(0,Me.jsxs)(We.CSSTransitionGroup,{transitionName:"solar-chart",transitionAppear:!0,transitionLeave:!0,transitionEnter:!0,transitionEnterTimeout:100,transitionLeaveTimeout:100,transitionAppearTimeout:100,children:[(0,Me.jsx)(ct,{data:[{values:p.map((function(e){return e.percentage})),labels:p.map((function(e){return e.innerCode})),text:p.map((function(e){return e[ne]})),neverFade:p.map((function(e){return e.neverFade})),extraData:p,domain:{x:[.15,.85],y:[.15,.85]},textposition:"inside",direction:"clockwise",name:"INDIRECT",hoverinfo:"skip",hole:.5,type:"pie",sort:!1,textinfo:"text",marker:{colors:f,line:{color:"white",width:3}},textfont:{color:"white"}},{values:c.map((function(e){return e.normalizedPercentage})),labels:c.map((function(e){return e[ne]})),text:c.map((function(e){return e[te]})),neverFade:c.map((function(e){return e.neverFade})),extraData:c,name:re,hoverinfo:"skip",textposition:"inside",hole:p.length>0?.7:.36,type:"pie",sort:!1,direction:"clockwise",textinfo:"label",marker:{colors:h,line:{color:"white",width:3}},textfont:{color:"white"}}],layout:{autosize:!1,paper_bgcolor:"rgba(0,0,0,0)",width:400,height:400,title:"",showlegend:!1,transition:{duration:2e3,easing:"cubic-in-out"},margin:{l:55,r:0,b:10,t:20,pad:4},annotations:g},config:{displaylogo:!1},onClick:function(t){return e.onClick(t,l)},onHover:function(t){return e.onHover(t)},onUnhover:function(){return e.onUnHover()}},"solarChart"),(0,Me.jsx)("div",{style:{display:i?"block":"none",top:s,left:d},className:"pie-legend-wrapper",children:this.createTooltip()})]})}}]),n}(s.Component);ut.defaultProps={selectedDirectProgram:void 0};var pt=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations}}),(function(e){return(0,l.bindActionCreators)({},e)}))(ut),ft=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).generateDropdown=a.generateDropdown.bind((0,ze.Z)(a)),a}return(0,a.Z)(n,[{key:"generateDropdown",value:function(){var e=this.props,t=e.dashboardSettings,n=e.onChange,r=e.defaultValue,a=t.find((function(e){return"funding-type"===e.id}));return(0,Me.jsxs)("form",{className:"form-inline dash-form dash-adj-type",children:[(0,Me.jsx)("select",{defaultValue:r,className:"form-control like-btn-sm ftype-options",onChange:function(e){return n(e.target.value)},children:a.value.options.map((function(e){return(0,Me.jsx)("option",{value:e.id,children:e.name},e.id)}))}),(0,Me.jsx)("span",{className:"cheat-lineheight"})]})}},{key:"render",value:function(){return(0,Me.jsx)("div",{className:"panel-footer clearfix",children:this.generateDropdown()})}}]),n}(s.Component),ht=(0,p.connect)((function(e){return{ndd:e.reportsReducer.ndd,dashboardSettings:e.dashboardSettingsReducer.dashboardSettings}}),(function(e){return(0,l.bindActionCreators)({},e)}))(ft);ft.defaultProps={defaultValue:null};var gt=n(68079),mt=n(38587),vt=function(e,t,n,r){return function(a){a({type:b});var o=(0,f.Z)((0,Ge.Z)((0,Ge.Z)({},ae,e),"programIds",n),r),i=(0,f.Z)({},t);return i.settings=o,Promise.all([(0,mt.aV)({url:"/rest/ndd/direct-indirect-report",body:i})]).then((function(e){return a((t=e[0],{type:x,payload:t}));var t})).catch((function(e){return a(function(e){return{type:S,error:e}}(e))}))}},yt=function(){return function(e){e({type:D})}},bt=function(e,t,n,r){return function(a){var o=(0,f.Z)({},n);return o.filters||(o.filters={},o["include-location-children"]=!0),null!==r&&(o.filters[r.filterColumnName]||(o.filters[r.filterColumnName]=[]),o.filters[r.filterColumnName].find((function(e){return e===r.objectId}))||o.filters[r.filterColumnName].push(r.objectId)),o.settings=(0,f.Z)((0,f.Z)({},t),{},(0,Ge.Z)({},ae,e)),o.settings[oe]||(o.settings[oe]="USD"),a({type:C}),(0,mt.aV)({url:"/rest/dashboard/tops/do?limit=5",body:o}).then((function(e){return a(function(e){return{type:j,payload:e}}(e))})).catch((function(e){return a(function(e){return{type:P,error:e}}(e))})).finally((function(){null!==r&&(o=et(o,r))}))}},xt=function(e,t,n,r,a){return function(o){o({type:w});var i=(0,f.Z)((0,Ge.Z)((0,Ge.Z)((0,Ge.Z)({},ae,e),"id",n),"year",r),a);return Promise.all([(0,mt.aV)({url:"/rest/ndd/activity-detail-report",body:{settings:i,filters:t?t.filters:null}})]).then((function(e){return o(function(e){var t=e?e.sort((function(e,t){return e.amount<t.amount})):[];return{type:k,payload:t}}(e[0]))})).catch((function(e){return o(function(e){return{type:E,error:e}}(e))}))}},St=n(55203),Ct=n.n(St),jt=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).createTable=function(){var e=a.props,t=e.data,n=e.translations,r=e.fundingTypeDescription,o=e.currencyCode,i=e.globalSettings,s=a.state.recordsVisible,d=[];return t.forEach((function(e,t){d.push((0,Me.jsxs)("tr",{className:t>=s?"invisible-row":"",children:[(0,Me.jsx)("td",{children:(0,Me.jsx)("a",{target:"_blank",rel:"noreferrer noopener",title:e.projectTitle,href:"/aim/viewActivityPreview.do~activityId=".concat(e.id),children:e.projectTitle})}),(0,Me.jsx)("td",{className:"amount-column",children:it(i,e.amount)})]},Math.random()))})),(0,Me.jsxs)("div",{children:[(0,Me.jsx)("span",{style:{fontWeight:"bold"},children:st(n,i)}),(0,Me.jsxs)("table",{className:"table table-striped",children:[(0,Me.jsx)("thead",{children:(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("th",{className:"header-row",children:(0,Me.jsx)("span",{children:n["".concat(X,"project-title")]})}),(0,Me.jsx)("th",{className:"header-row",children:(0,Me.jsx)("span",{children:"".concat(r," (").concat(o,")")})})]},Math.random())}),(0,Me.jsx)("tbody",{children:d})]}),s<d.length?(0,Me.jsx)(Ve.Button,{variant:"success",onClick:a.loadMore,children:"".concat("".concat(n["".concat(X,"load-more")]," ").concat(s),"/",d.length)}):null]})},a.loadMore=function(){var e=a.state.recordsVisible;a.setState({recordsVisible:e+50})},a.handleClose=function(){var e=a.props.handleClose;a.setState({recordsVisible:50}),e()},a.state={recordsVisible:50},a}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.translations,n=e.show,r=e.data,a=e.loading,o=e.error,i=e.title;return(0,Me.jsxs)(Ct(),{show:n,onHide:this.handleClose,children:[(0,Me.jsx)(Ct().Header,{closeButton:!0,children:(0,Me.jsx)(Ct().Title,{children:i})}),(0,Me.jsxs)(Ct().Body,{children:[a?(0,Me.jsx)("div",{className:"loading",style:{top:"5%",marginTop:"5px"}}):null,a||r&&0!==r.length||o?null:(0,Me.jsx)("span",{children:t["".concat(X,"no-data")]}),r&&r.length>0?(0,Me.jsx)("div",{className:"detail-table-container",children:this.createTable()}):null,o?(0,Me.jsx)("span",{className:"error",children:JSON.stringify(o)}):null]})]})}}]),n}(s.Component);jt.defaultProps={error:void 0,data:null};var Pt=(0,Ke.Z)(Je()),Dt="0",wt=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).onHover=function(e){var t=e.points[0].data.text,n=Math.ceil(t.length/30);a.setState({showLegend:!0,legendTop:e.event.pointerY-20-25*n,legendLeft:e.event.pointerX-100,tooltipData:e})},a.onUnHover=function(){a.setState({showLegend:!1,tooltipData:null})},a.onClick=function(e){var t=a.props,n=t._callYearDetailReport,r=t.settings,o=t.filters,i=t.fundingType,s=t.selectedPrograms,d=t.fundingByYearSource;a.setState({showDetail:!0,year:e.points[0].x,programName:e.points[0].data.text});var l=(0,f.Z)({},r);l.isShowInnerChartDataForActivitiesDetail="1"===d,l.dontUseMapping=s&&1===s.length,l.selectedPrograms=s,n(i,o,e.points[0].data.extraData.find((function(t){return t.name===e.points[0].data.text})).id,e.points[0].x,l)},a.createModalWindow=function(){var e=a.props,t=e.translations,n=e.yearDetailPending,r=e.yearDetail,o=e.error,i=e.fundingType,s=e.settings,d=e.globalSettings,l=e.dashboardSettings.find((function(e){return e.id===ae})).value.options.find((function(e){return e.id===i})),c=a.state,u=c.showDetail,p=c.year,f=c.programName;return(0,Me.jsx)(jt,{translations:t,show:u,handleClose:function(){a.setState({showDetail:!1})},data:r,loading:n,error:o,fundingTypeDescription:l.name,currencyCode:s[oe],globalSettings:d,title:"".concat(p," ").concat(f)})},a.createTooltip=function(){var e=a.state.tooltipData,t=a.props,n=t.settings,r=t.translations,o=t.globalSettings;if(e){var i=e.points[0].x;return(0,Me.jsx)(lt,{color:e.points[0].data.line.color,currencyCode:n[oe],formattedValue:ot(n[oe],r,o,e.points[0].y,!0),titleLabel:"".concat(i," ").concat(e.points[0].data.text),total:e.points[0].data.extraData.reduce((function(e,t){return e+(t.values.find((function(e){return e[i]}))?t.values.find((function(e){return e[i]}))[i]:0)}),0),value:e.points[0].y,minWidth:400,isYearTotal:!0,globalSettings:o})}return null},a.canEnableShowIndirectDataOption=function(){var e=a.props,t=e.data,n=e.selectedDirectProgram;return t.find((function(e){return e.indirectPrograms.length>0}))&&!n},a.calculateYAxisAbbreviations=function(e,t){var n=a.props,r=n.translations,o=n.globalSettings,i=e,s=0;if(t.forEach((function(e){e.values&&e.values.forEach((function(e){Object.keys(e).forEach((function(t){var n=Number.parseFloat(e[t]);n>s&&(s=n)}))}))})),s)for(var d=nt(r,o.precision,o.decimalSeparator,!1),l=25;l<=100;l+=25)i.push({text:d(a.getTickValue(s,l)),align:"right",xref:"paper",x:0,xanchor:"right",xshift:25,yref:"y",y:a.getTickValue(s,l),yanchor:"auto",yshift:0,showarrow:!1});return i},a.getTickValue=function(e,t){return e*t/100},a.getValues=a.getValues.bind((0,ze.Z)(a)),a.state={showLegend:!1,legendTop:0,legendLeft:0,tooltipData:null,showDetail:!1},a}return(0,a.Z)(n,[{key:"getValues",value:function(){var e=this,t=this.props,n=t.selectedDirectProgram,r=t.fundingByYearSource,a=[],o=this.props.data;if(o&&o.length>0){var i=r===Dt?o.map((function(e){return e[q]})):o.map((function(e){return e[Q]})).flat();(n?i.filter((function(e){return e[$][ne]===n[ne]})):i).forEach((function(t){var r=n?t[ee]:t[$];if(r){var o=a.find((function(e){return e[ne]===r[ne]})),i=t.amountsByYear;o?o.values=e.sortAmountsByYear(e.addAmountsByYear(o.values,Object.keys(i).map((function(e){return(0,Ge.Z)({},e,i[e])})))):a.push((0,Ge.Z)((0,Ge.Z)((0,Ge.Z)((0,Ge.Z)({},ne,r[ne]),"name",r.name),"values",Object.keys(i).map((function(e){return(0,Ge.Z)({},e,i[e])}))),"id",r.objectId))}})),a.forEach((function(t){t.values=e.sortAmountsByYear(e.fillGapsInYears(t.values))}))}return a}},{key:"sortAmountsByYear",value:function(e){return e.sort((function(e,t){return Object.keys(e)[0]-Object.keys(t)[0]}))}},{key:"addAmountsByYear",value:function(e,t){var n=e;return e.forEach((function(n,r){var a=Object.keys(n)[0],o=n[a],i=t.find((function(e){return e[a]}));i&&(e[r][a]=o+i[a])})),t.forEach((function(t){var n=Object.keys(t)[0],r=t[n],a=e.find((function(e){return e[n]}));void 0!==a&&null!==a||e.push((0,Ge.Z)({},n,r))})),n}},{key:"fillGapsInYears",value:function(e){for(var t=e,n=Math.min.apply(Math,(0,gt.Z)(e.map((function(e){return parseInt(Object.keys(e)[0],10)})))),r=Math.max.apply(Math,(0,gt.Z)(e.map((function(e){return parseInt(Object.keys(e)[0],10)})))),a=function(t){e.find((function(e){return Object.keys(e)[0]===t.toString()}))||e.push((0,Ge.Z)({},t,0))},o=n;o<=r;o++)a(o);return t}},{key:"getColor",value:function(e,t){var n=this.props,r=n.selectedDirectProgram,a=n.selectedPrograms;return tt(t,e===Dt?null==r?a[0]:"".concat(a[0],"_").concat(r.code):a[1])}},{key:"render",value:function(){var e=this,t=this.props,n=t.translations,r=t.globalSettings,a=t.onChangeSource,o=t.fundingByYearSource,i=this.state,s=i.showLegend,d=i.legendTop,l=i.legendLeft,c=this.getValues(),u=0===c.length?[{text:n["".concat(X,"no-data")],xref:"paper",yref:"paper",showarrow:!1,font:{size:20}}]:[];return u=this.calculateYAxisAbbreviations(u,c),(0,Me.jsxs)("div",{children:[(0,Me.jsxs)("div",{className:"funding-by-year-radios",children:[(0,Me.jsx)("div",{className:"title-fy-source",children:o===Dt?n["".concat(X,"direct")]:n["".concat(X,"indirect")]}),(0,Me.jsxs)("div",{className:"radio-fy-source",children:[(0,Me.jsx)("input",{type:"radio",id:"fy-direct",name:"fy-source",value:"0",checked:o===Dt?"checked":null,onChange:a}),(0,Me.jsx)("label",{htmlFor:"fy-direct",children:n["".concat(X,"fy-direct")]})]}),this.canEnableShowIndirectDataOption()?(0,Me.jsxs)("div",{className:"radio-fy-source",children:[(0,Me.jsx)("input",{type:"radio",id:"fy-indirect",name:"fy-source",value:"1",checked:"1"===o?"checked":null,onChange:a}),(0,Me.jsx)("label",{htmlFor:"fy-indirect",children:n["".concat(X,"fy-indirect")]})]}):null]}),(0,Me.jsx)(Pt,{data:c.map((function(t){return{x:t.values.map((function(e){return Object.keys(e)[0]})),y:t.values.map((function(e){return e[Object.keys(e)[0]]})),text:t.name,extraData:c,hoverinfo:"none",name:"",type:"scatter",mode:"lines+markers",line:{shape:"spline",smoothing:.5,dash:"solid",width:2,color:e.getColor(o,t)},marker:{size:7,color:"white",line:{color:e.getColor(o,t),width:2}}}})),layout:{autosize:!0,paper_bgcolor:"rgba(0,0,0,0)",height:400,title:"",showlegend:!1,margin:{l:60,r:30,b:50,t:20,pad:10},annotations:u,xaxis:{showgrid:!1,showline:!1,autotick:!1,tickangle:45,fixedrange:!0,automargin:!0},yaxis:{automargin:!0,fixedrange:!0,visible:!0,showline:!1,showticklabels:!1},hovermode:"closest",separators:r.decimalSeparator+r.groupSeparator},config:{displaylogo:!1,responsive:!0,displayModeBar:!1},useResizeHandler:!0,style:{width:"100%",height:"100%",cursor:"pointer"},onHover:function(t){return e.onHover(t)},onUnhover:function(){return e.onUnHover()},onClick:function(t){return e.onClick(t)}},"fundingByYearChart"),(0,Me.jsx)("div",{style:{display:s?"block":"none",top:d,left:l},className:"line-legend-wrapper",children:this.createTooltip()}),this.createModalWindow()]})}}]),n}(s.Component);wt.defaultProps={selectedDirectProgram:void 0,fundingType:void 0,yearDetail:null,error:void 0};var kt=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations,yearDetailPending:e.reportsReducer.yearDetailPending,yearDetail:e.reportsReducer.yearDetail,error:e.reportsReducer.error,dashboardSettings:e.dashboardSettingsReducer.dashboardSettings}}),(function(e){return(0,l.bindActionCreators)({_callYearDetailReport:xt},e)}))(wt),Et=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).generateDropdown=a.generateDropdown.bind((0,ze.Z)(a)),a}return(0,a.Z)(n,[{key:"generateDropdown",value:function(){var e=this.props,t=e.onChange,n=e.mapping,r=e.noIndirectMapping,a=e.selectedPrograms,o=function(e,t){var n={direct:void 0,indirect1:void 0,indirect2:void 0};return e&&e[$e.PJ]&&e[$e.PJ].length>0&&(n.direct=e[$e.YP].find((function(t){return t.id===e[$e.ry].id})),n.indirect1=e[$e.YP].find((function(t){return t.id===e[$e.G7].id}))),t&&t[$e.PJ]&&t[$e.PJ].length>0&&(n.indirect2=t[$e.YP].find((function(e){return e.id===t[$e.G7].id}))),n}(n,r),i=[],s=[];o.direct&&(o.indirect1&&(i.push("".concat(o.direct.value," + ").concat(o.indirect1.value)),s.push("".concat(o.direct.id,"-").concat(o.indirect1.id))),o.indirect2&&(i.push("".concat(o.direct.value," + ").concat(o.indirect2.value)),s.push("".concat(o.direct.id,"-").concat(o.indirect2.id))),i.push(o.direct.value),s.push(o.direct.id),o.indirect1&&(i.push(o.indirect1.value),s.push(o.indirect1.id)),o.indirect2&&(i.push(o.indirect2.value),s.push(o.indirect2.id)));var d="";return a&&2===a.length?d="".concat(a[0],"-").concat(a[1]):a&&1===a.length&&(d=a[0]),(0,Me.jsxs)("form",{className:"form-inline dash-form dash-adj-type",children:[(0,Me.jsx)("select",{defaultValue:d,className:"form-control like-btn-sm ftype-options programs-dropdown",onChange:function(e){return t(e.target.value)},children:i.map((function(e,t){return(0,Me.jsx)("option",{value:s[t],children:e},s[t])}))}),(0,Me.jsx)("span",{className:"cheat-lineheight"})]})}},{key:"render",value:function(){return(0,Me.jsx)("div",{className:"pie-chart-selector",children:this.generateDropdown()})}}]),n}(s.Component),Zt=(0,p.connect)((function(e){return{}}),(function(e){return(0,l.bindActionCreators)({},e)}))(Et);Et.defaultProps={selectedPrograms:void 0};var Nt=n(23362),Tt=n.n(Nt),Rt=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.colorMap,r=e.shouldSplitBig,a=e.formatter,o=e.translations,i=e.settings,s=e.currency;return(0,Me.jsx)("div",{className:"custom-legend",children:(0,Me.jsx)("div",{className:"custom-legend-inner",children:(0,Me.jsx)("ul",{className:t.length>3&&r?"two-rows":"",children:t.map((function(e){return(0,Me.jsx)("li",{children:(0,Me.jsxs)("div",{className:"row row-eq-height",children:[(0,Me.jsx)("div",{className:"col-md-1 col-xs-1 symbol-container",children:(0,Me.jsx)("span",{className:"symbol",style:{border:"2px solid ".concat(n.get(e.code)),backgroundColor:"".concat(n.get(e.code))}})}),(0,Me.jsxs)("div",{className:"col-md-7 col-xs-7 label",children:[(0,Me.jsx)(Tt(),{text:e.simpleLabel,length:100,tail:""}),e.percentage&&(0,Me.jsx)("span",{className:"label percentage",children:"".concat(e.percentage,"%")})]}),e.amount&&(0,Me.jsx)("div",{className:"col-md-4 col-xs-4 label vertical-center",style:{textAlign:"right"},children:(0,Me.jsx)("span",{className:"label amount",children:o&&i&&s?it(i,e.amount):a?a.format(e.amount):e.amount})})]})},n.get(e.code))}))})})})}}]),n}(s.Component);Rt.defaultProps={shouldSplitBig:!1,formatter:null,translations:null,settings:null,currency:null};var Lt=n(42189),At=n(91692),_t=n.n(At),It=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.getColor,r=0;return(0,Me.jsx)("div",{className:"simple-legend",children:(0,Me.jsx)("div",{className:"simple-legend-inner",children:(0,Me.jsx)("ul",{children:t.map((function(e){e.index=r;var t=(0,Me.jsxs)("li",{children:[(0,Me.jsx)("span",{className:"symbol",style:{border:"2px solid ".concat(n(e)),backgroundColor:"".concat(n(e))},"data-tip":e.name,"data-for":r.toString()}),(0,Me.jsxs)("span",{className:"label",children:[e.name.substring(0,10),(0,Me.jsx)(_t(),{place:"top",effect:"float",backgroundColor:n(e),id:r.toString()})]})]},n(e));return r+=1,t}))})})})}}]),n}(s.Component);It.defaultProps={shouldSplitBig:!1,formatter:null,getColor:null};var Ot={fontFamily:"sans-serif",textAlign:"center"},Ft=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"getColor",value:function(e){return Mt[e.index]}},{key:"getLabel",value:function(e){var t=this.context.translations,n=this.props.globalSettings;return nt(t,n.precision,n.decimalSeparator,!1,null)(e.data.value)}},{key:"getOthers",value:function(e){var t=this.context.translations,n=this.props,r=n.globalSettings,a=n.settings;return{id:"-9999",name:t["amp.ndd.dashboard:others"],value:e,formattedAmount:ot(a[oe],t,r,e,!0)}}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.globalSettings,r=e.translations,a=e.settings,o=t.values.slice(0,5).map((function(e){return{id:e.id.toString(),formattedAmount:ot(a[oe],r,n,e.amount,!0),name:e.name,value:e.amount}})),i=t.total-t.values.reduce((function(e,t){return e+t.amount}),0);if(i>0){var s=this.getOthers(i);o.push(s),t.values.push(s)}return(0,Me.jsxs)("div",{style:Ot,children:[(0,Me.jsx)(It,{data:t.values,getColor:this.getColor.bind(this)}),(0,Me.jsx)("div",{style:{height:"335px"},children:(0,Me.jsx)(Lt.ResponsiveBar,{data:o,colors:this.getColor.bind(this),label:this.getLabel.bind(this),enableGridY:!1,axisTop:null,axisRight:null,axisBottom:null,axisLeft:null,margin:{top:20,right:10,bottom:0,left:10},labelFormat:function(e){return(0,Me.jsx)("tspan",{y:-5,children:"".concat(e)})},tooltip:function(e){return(0,Me.jsx)(lt,{color:e.color,titleLabel:e.data.name,formattedValue:e.data.formattedAmount,value:e.data.value,total:t.total,id:e.data.id,currencyCode:t.currency,globalSettings:n})},theme:{tooltip:{container:{padding:"1px",borderRadius:"5px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.25)"}}}})})]})}}]),n}(s.Component),Mt=["rgba(90, 153, 199, 1)","rgba(195, 214, 238, 1)","rgba(255, 160, 87, 1)","rgba(255, 204, 154, 1)","rgba(99, 184, 99, 1)","rgba(153, 153, 153, 1)","rgba(217, 91, 95, 1)","rgba(253, 170, 170, 1)","rgba(166, 133, 196, 1)","rgba(206, 189, 218, 1)"];Ft.contextType=He;var Ht=Ft,Bt=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getTitles=function(){var t=e.props,n=t.selectedPrograms,r=t.mapping,a=[];return r&&n&&(a[0]=r[$e.YP].find((function(e){return"".concat(e.id)===n[0]})).value,n[1]&&(a[1]=r[$e.YP].find((function(e){return"".concat(e.id)===n[1]})).value)),a},e}return(0,a.Z)(n,[{key:"getProgramLegend",value:function(){var e=this,t=this.props.ndd,n=this.props,r=n.selectedDirectProgram,a=n.selectedPrograms,o=[],i=new Map,s=new Map,d=0,l=0;return t.forEach((function(t){r?t.directProgram.programLvl1.code===r.code&&(d+=e.generateLegend(t.directProgram,2,i,"".concat(a[0],"_").concat(r.code),d)):d+=e.generateLegend(t.directProgram,1,i,a[0]),r||t.indirectPrograms.forEach((function(t){l+=e.generateLegend(t,1,s,a[1])}))})),o.push({total:d,legends:(0,gt.Z)(i.values())}),o.push({total:l,legends:(0,gt.Z)(s.values())}),o}},{key:"getTopChart",value:function(){var e=this.props,t=e.topLoaded,n=e.topLoadingPending,r=e.top,a=e.globalSettings,o=e.settings,i=this.context.translations;return t&&!n?(0,Me.jsx)("div",{children:(0,Me.jsxs)("div",{className:"funding-sources-title",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-8",children:i["amp.ndd.dashboard:top-donor-agencies"]}),(0,Me.jsx)("div",{className:"amount col-md-4",children:"".concat(r.sumarizedTotal," ").concat(r.currency)})]}),(0,Me.jsx)(Ht,{data:r,globalSettings:a,translations:i,settings:o})]})}):(0,Me.jsx)("div",{style:{position:"relative",top:"10px"},className:"loading"})}},{key:"generateLegend",value:function(e,t,n,r){var a=e["programLvl".concat(t)];if(!a)return 0;var o=n.get(a.code.trim());return o||((o={}).amount=0,o.code=a.code.trim(),o.simpleLabel="".concat(a.code,":").concat(a.name)),o.amount+=e.amount,tt(o,r),n.set(o.code,o),e.amount}},{key:"render",value:function(){var e=this.props,t=e.error,n=e.nddLoadingPending,r=e.nddLoaded,a=e.settings,o=e.selectedDirectProgram,i=e.globalSettings,s=e.selectedPrograms,d=this.context.translations;if(t)return(0,Me.jsx)("div",{children:"ERROR"});var l=r&&!n?this.getProgramLegend():null,c=this.getTitles();return(0,Me.jsx)("div",{children:l&&l[0].total?(0,Me.jsxs)("div",{className:"legends-container",children:[(0,Me.jsxs)("div",{className:"even-".concat(o?"third":"middle"),children:[(0,Me.jsxs)("div",{className:"legend-title",children:[(0,Me.jsx)("span",{children:c[0]}),(0,Me.jsx)("span",{className:"amount",children:ot(a[oe],d,i,l[0].total,!0)})]}),(0,Me.jsx)(Rt,{settings:i,translations:d,currency:a[oe],data:l[0].legends.sort((function(e,t){return t.amount-e.amount})),colorMap:de.get(o?"".concat(s[0],"_").concat(o.code):s[0])})]}),null===o&&l[1].total?(0,Me.jsxs)("div",{className:"even-middle",children:[(0,Me.jsxs)("div",{className:"legend-title",children:[(0,Me.jsx)("span",{children:c[1]?c[1]:null}),(0,Me.jsx)("span",{className:"amount",children:ot(a[oe],d,i,l[1].total,!0)})]}),(0,Me.jsx)(Rt,{settings:i,translations:d,currency:a[oe],data:l[1].legends.sort((function(e,t){return t.amount-e.amount})),colorMap:de.get(s[1])})]}):null,null!==o&&(0,Me.jsx)("div",{className:"even-sixth",children:this.getTopChart()})]}):null})}}]),n}(s.Component);Bt.defaultProps={selectedDirectProgram:null,settings:void 0,error:null,mapping:null,globalSettings:null,ndd:null,top:void 0,selectedPrograms:null},Bt.contextType=He;var Ut=n(46600),Gt=function(e){var t=e.selectedDirectProgram,n=e.selectedPrograms,r=e.ndd,a=e.mapping,o=e.error,i=e.nddLoadingPending,d=e.nddLoaded,l=e.dashboardSettings,c=e.onChangeFundingType,u=e.fundingType,p=e.onChangeProgram,f=e.noIndirectMapping,h=e.settings,g=e.handleOuterChartClick,m=e.globalSettings,v=e.filters,y=e.top,b=e.topLoaded,x=e.topLoadingPending,S=e.downloadImage,C=e.embedded,j=e.onChangeSource,P=e.fundingByYearSource,D=(0,s.useContext)(He).translations;return o?(0,Me.jsx)("div",{children:"ERROR"}):(function(){if(n&&t){var e=se.get("".concat(n[0],"_").concat(t.code)),a=r.filter((function(e){return e.directProgram.programLvl1.code===t.code}));if(!e||e.length!==a.length){var o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=new(qe())("",n);return r.setGradient(e,t),r.getArray()}(tt(t,n[0]),"#FFFFFF",a.length+1);se.set("".concat(n[0],"_").concat(t.code),o)}}}(),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(Ve.Row,{style:{marginRight:"-15px",marginLeft:"-15px",border:"1px solid #ddd",borderBottom:"none",backgroundColor:"#ffffff"},children:(0,Me.jsx)(Ve.Col,{md:12,style:{paddingRight:0,paddingLeft:0},children:(0,Me.jsxs)("div",{className:"section_title",children:[(0,Me.jsx)("span",{children:function(){var e="";return a&&n&&(e=a[$e.YP].find((function(e){return"".concat(e.id)===n[0]})).value,n[1]&&(e+=" / ".concat(a[$e.YP].find((function(e){return"".concat(e.id)===n[1]})).value))),e}()}),C||!d||i?null:(0,Me.jsx)("div",{className:"export-wrapper",children:(0,Me.jsx)("div",{className:"download-image",children:(0,Me.jsx)("span",{className:"glyphicon glyphicon-cloud-download download-image-img ",onClick:function(){return S()}})})})]})})}),(0,Me.jsx)(Ve.Row,{style:{marginRight:"-15px",marginLeft:"-15px",border:"none",display:"flex",borderTop:"none",backgroundColor:"#ffffff"},children:d&&!i?(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(Ve.Col,{md:5,style:{paddingRight:0,paddingLeft:0,backgroundColor:"white"},children:(0,Me.jsxs)("div",{className:"chart-container",children:[(0,Me.jsxs)("div",{className:"chart",children:[(0,Me.jsx)(Zt,{onChange:p,defaultValue:u,mapping:a,noIndirectMapping:f,selectedPrograms:n}),(0,Me.jsx)(pt,{data:r,settings:h,globalSettings:m,selectedDirectProgram:t,handleOuterChartClick:g,selectedPrograms:n})]}),(0,Me.jsx)("div",{className:"buttons",style:{position:"absolute",bottom:0},children:l&&!i?(0,Me.jsx)(ht,{onChange:c,defaultValue:u,noIndirectMapping:f}):null})]})}),(0,Me.jsx)(Ve.Col,{md:7,style:{paddingLeft:0,paddingRight:0},children:(0,Me.jsx)(Bt,{noIndirectMapping:f,ndd:r,globalSettings:m,mapping:a,settings:h,top:y,topLoaded:b,topLoadingPending:x,selectedDirectProgram:t,nddLoaded:d,selectedPrograms:n,nddLoadingPending:i})})]}):(0,Me.jsx)(Ve.Col,{md:12,style:{paddingRight:0,paddingLeft:0,backgroundColor:"white",height:3e3},children:(0,Me.jsx)("div",{className:"loading loading-absolute"})})}),C?null:(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(Ve.Row,{style:{borderBottom:"1px solid #ddd",height:400,marginRight:"-15px",marginLeft:"-15px",backgroundColor:"white"},children:(0,Me.jsxs)(Ve.Col,{md:12,style:{paddingLeft:0,paddingRight:0,backgroundColor:"white"},children:[(0,Me.jsx)("div",{className:"section_title",style:{backgroundColor:"white",marginTop:"2%",marginBottom:"0.2%"},children:(0,Me.jsx)("span",{children:D["amp.dashboard:funding-over-time"]})}),d&&!i?(0,Me.jsx)(kt,{selectedDirectProgram:t,selectedPrograms:n,settings:h,filters:v,fundingType:u,globalSettings:m,data:r,onChangeSource:j,fundingByYearSource:P}):(0,Me.jsx)(Ve.Col,{md:12,style:{paddingRight:0,paddingLeft:0,backgroundColor:"white",height:3e3},children:(0,Me.jsx)("div",{className:"loading loading-absolute"})})]})}),(0,Me.jsx)(Ut.Z,{})]})]}))},Vt=(0,p.connect)((function(e){return{top:e.reportsReducer.top,translations:e.translationsReducer.translations,globalSettings:e.dashboardSettingsReducer.globalSettings,topLoaded:e.reportsReducer.topLoaded,topLoadingPending:e.reportsReducer.topLoadingPending,dashboardSettings:e.dashboardSettingsReducer.dashboardSettings}}),(function(e){return(0,l.bindActionCreators)({},e)}))(Gt);Gt.defaultProps={filters:void 0,selectedDirectProgram:null,settings:void 0,error:null,fundingType:null,mapping:null,noIndirectMapping:null,selectedPrograms:null,globalSettings:null,ndd:null,top:void 0,dashboardSettings:null,embedded:!1};var zt=n(94521),Wt=n.n(zt),Yt=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).generateChildren=function(t){var n=e.props.translations,r=[];return t.length>0?t.forEach((function(e){r.push((0,Me.jsx)("li",{children:e.get("name")},Math.random()))})):"DATE-RANGE-VALUES"===t.modelType?r.push((0,Me.jsxs)("li",{children:[t.start?e.formatDate(t.start):n["".concat(X,"no-data-short")]," --- ",t.end?e.formatDate(t.end):n["".concat(X,"no-data-short")]]},Math.random())):"YEAR-SINGLE-VALUE"===t.modelType&&r.push((0,Me.jsx)("li",{children:t.year},Math.random())),(0,Me.jsx)("ul",{children:r},Math.random())},e.formatDate=function(t){var n=e.props.globalSettings,r=new Date("".concat(t,"T00:00")),a=n.dateFormat.replace(/M{2}/gm,"mm");return Wt()(r,a)},e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.filters,n=e.i,r=[];if(t&&t[n]){var a=null;a=t[n].filterName?(0,Me.jsx)("h5",{children:t[n].filterName},Math.random()):t[n].displayName?(0,Me.jsx)("h5",{children:t[n].displayName},Math.random()):(0,Me.jsx)("h5",{children:n.replace(/[-]+/g," ")},Math.random()),r.push(a);var o=this.generateChildren(t[n],n);r.push(o)}return(0,Me.jsx)("div",{children:r})}}]),n}(s.Component),Jt=n(96378),Kt=new(n.n(Jt)())({draggable:!0,caller:"DASHBOARD"}),Xt=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).showFilterWidget=function(){var e=a.state.show;if(Kt&&!e)return a.setState({show:!0}),Kt.loaded.then((function(){return Kt.setElement(a.refs.filterPopup),Kt.showFilters()}))},a.hideFilters=function(){a.setState({show:!1})},a.applyFilters=function(){var e=a.props.onApplyFilters;a.hideFilters();var t=Kt.serializeToModels();a.setState({filtersWithModels:t}),e(Kt.serialize(),t)},a.toggleAppliedFilters=function(){var e=a.state.showFiltersList;a.setState({showFiltersList:!e})},a.generateFilterOutput=function(){var e=a.state.filtersWithModels,t=a.props,n=t.translations,r=t.globalSettings,o=[];return e&&e.filters&&Object.keys(e.filters).forEach((function(t){o.push((0,Me.jsx)(Yt,{filters:e.filters,i:t,translations:n,globalSettings:r},Math.random()))})),(0,Me.jsx)("div",{style:{paddingLeft:"10px"},children:o})},a.state={show:!1,filtersWithModels:null,showFiltersList:!1,savedDashboardLoaded:!1},a}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this;Kt.on("apply",this.applyFilters),Kt.on("cancel",this.hideFilters);var t=this.props,n=t.dashboardId,r=t._sharedData,a=t._sharedDataPending,o=t._sharedDataLoaded,i=this.state.savedDashboardLoaded;Kt.loaded.done((function(){n&&!1===a&&!0===o&&!1===i?(e.setState({savedDashboardLoaded:!0}),Kt.deserialize(JSON.parse(r.stateBlob),{dontSetDefaultDates:!0})):Kt.deserialize({})}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("apply",this.applyFilters),window.removeEventListener("cancel",this.hideFilters)}},{key:"render",value:function(){var e=this.state,t=e.show,n=e.filtersWithModels,r=e.showFiltersList,a=this.props.translations;return(0,Me.jsxs)(Ve.Col,{md:5,children:[(0,Me.jsxs)("div",{className:"panel",children:[(0,Me.jsxs)("div",{className:"panel-body",children:[(0,Me.jsx)("h3",{className:"inline-heading",style:{float:"left"},children:a["".concat(X,"filters")]}),(0,Me.jsxs)("button",{type:"button",className:"btn btn-sm btn-default filter-button",onClick:this.showFilterWidget,style:{float:"right"},children:[(0,Me.jsx)("span",{className:"glyphicon glyphicon-edit"}),(0,Me.jsxs)("span",{children:[" ",a["".concat(X,"edit-filters")]]})]}),(0,Me.jsxs)("button",{type:"button",className:"btn btn-sm btn-default filter-button",onClick:this.toggleAppliedFilters,style:{float:"left"},children:[(0,Me.jsx)("span",{className:"glyphicon glyphicon-eye-open"}),(0,Me.jsx)("span",{children:" ".concat(r?a["".concat(X,"hide-filter-settings")]:a["".concat(X,"show-filter-settings")]," ")}),"(",(0,Me.jsx)("b",{children:n?Object.keys(n.filters).length:0}),")"]})]}),(0,Me.jsx)("div",{className:"applied-filters",children:r?(0,Me.jsx)("div",{children:this.generateFilterOutput()}):null})]}),(0,Me.jsx)("div",{id:"filter-popup",ref:"filterPopup",style:{display:t?"block":"none"}})]})}}]),n}(s.Component),qt=(0,p.connect)((function(e){return{_sharedDataPending:e.sharedDataReducer.sharedDataPending,_sharedDataLoaded:e.sharedDataReducer.sharedDataLoaded,_sharedData:e.sharedDataReducer.sharedData,translations:e.translationsReducer.translations}}),(function(e){return(0,l.bindActionCreators)({},e)}))(Xt);Xt.defaultProps={dashboardId:null,_sharedData:void 0};var Qt=new(n(72054).SettingsWidget)({el:"settings-popup",draggable:!0,caller:"TABS",isPopup:!0,definitionUrl:"/rest/settings-definitions/tabs"}),$t=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).applySettings=function(e){(0,a.props.onApplySettings)(e),a.hideSettings()},a.hideSettings=function(){a.setState({show:!1})},a.toggleSettings=function(){var e=a.state.show;Qt.show(),a.setState({show:!e})},a.state={show:!1},a}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.settings;Qt.restoreFromSaved(e),Qt.setElement(this.refs.settingsPopup),Qt.on("applySettings",this.applySettings),Qt.on("close",this.hideSettings)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("applySettings",this.applySettings),window.removeEventListener("close",this.hideSettings)}},{key:"render",value:function(){var e=this.context.translations,t=this.state.show;return(0,Me.jsxs)(Ve.Col,{md:4,children:[(0,Me.jsx)("div",{className:"panel",children:(0,Me.jsxs)("div",{className:"panel-body",children:[(0,Me.jsx)("h3",{className:"inline-heading",children:e["amp.dashboard:settings"]}),(0,Me.jsxs)("button",{type:"button",className:"btn btn-sm btn-default pull-right dash-settings-button",onClick:this.toggleSettings,children:[(0,Me.jsx)("span",{className:"glyphicon glyphicon-edit"}),(0,Me.jsx)("span",{children:" ".concat(e["".concat(X,"edit-settings")])})]})]})}),(0,Me.jsx)("div",{id:"settings-popup",ref:"settingsPopup",style:{display:t?"block":"none",padding:"0px",borderColor:"#337ab7"}})]})}}]),n}(s.Component);$t.defaultProps={settings:null},$t.contextType=He;var en=(0,p.connect)((function(e){return{translations:e.translationsReducer.translations}}),(function(e){return(0,l.bindActionCreators)({},e)}))($t),tn=function(e,t,n,r){return function(a){return a({type:_}),(0,mt.aV)({url:"/rest/ndd/save-charts",body:{title:"",description:"",stateBlob:JSON.stringify({filters:e,settings:t,fundingType:n,selectedPrograms:r})}}).then((function(e){return a(function(e){return{type:I,payload:e}}(e))})).catch((function(e){return a(function(e){return{type:O,error:e}}(e))}))}},nn=function(e){var t=window.location.toString(),n=t.toString().match(/\/\d+$/);return n?"".concat(t.substring(0,n.index),"/").concat(e):t.endsWith("/")?t+e:"".concat(t,"/").concat(e)},rn=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).handleClose=function(){return a.setState({show:!1})},a.handleShow=function(){return a.prepareDataToSave().then((function(){return a.setState({show:!0})}))},a.prepareDataToSave=function(){var e=a.props,t=e._getShareLink,n=e.filters,r=e.settings,o=e.fundingType,i=e.selectedPrograms;return t(n?n.filters:null,r,o,i)},a.state={show:!1},a.generateModal=a.generateModal.bind((0,ze.Z)(a)),a}return(0,a.Z)(n,[{key:"generateModal",value:function(){var e=this.state.show,t=this.props,n=t.shareLink,r=t.translations;return(0,Me.jsxs)(Ct(),{show:e,onHide:this.handleClose,children:[(0,Me.jsx)(Ct().Header,{closeButton:!0,style:{backgroundColor:"#337ab7",paddingTop:"8px",paddingBottom:"8px",color:"white"},children:(0,Me.jsx)(Ct().Title,{children:r["".concat(X,"share-copy-link")]})}),(0,Me.jsxs)(Ct().Body,{children:[(0,Me.jsx)("span",{className:"label-bold",children:" ".concat(r["".concat(X,"share-link")])}),(0,Me.jsx)(Ve.Form.Control,{type:"text",value:n?nn(n.id):null})]}),(0,Me.jsx)(Ct().Footer,{children:(0,Me.jsx)(Ve.Button,{variant:"primary",onClick:this.handleClose,children:r["".concat(X,"close")]})})]})}},{key:"render",value:function(){var e=this.props.translations;return(0,Me.jsxs)(Ve.Col,{md:3,children:[(0,Me.jsx)("div",{className:"panel",children:(0,Me.jsxs)("div",{className:"panel-body",children:[(0,Me.jsx)("h3",{className:"inline-heading",children:e["".concat(X,"share")]}),(0,Me.jsxs)("button",{onClick:this.handleShow,type:"button",className:"btn btn-sm btn-default pull-right dash-share-button",children:[(0,Me.jsx)("span",{className:"glyphicon glyphicon-link"}),(0,Me.jsx)("span",{children:e["amp.ndd.dashboard:Link"]})]})]})}),(0,Me.jsx)("div",{children:this.generateModal()})]})}}]),n}(s.Component),an=(0,p.connect)((function(e){return{shareLink:e.shareLinkReducer.shareLink,translations:e.translationsReducer.translations}}),(function(e){return(0,l.bindActionCreators)({_getShareLink:tn},e)}))(rn);rn.defaultProps={filters:void 0,shareLink:void 0,settings:void 0};var on=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onApplyFilters,n=e.filters,r=e.dashboardId,a=e.onApplySettings,o=e.globalSettings,i=e.settings,s=e.fundingType,d=e.selectedPrograms;return(0,Me.jsxs)("div",{children:[(0,Me.jsx)(qt,{onApplyFilters:t,dashboardId:r,globalSettings:o}),(0,Me.jsx)(en,{onApplySettings:a,settings:i}),(0,Me.jsx)(an,{filters:n,settings:i,fundingType:s,selectedPrograms:d})]})}}]),n}(s.Component);on.defaultProps={filters:void 0,dashboardId:void 0,settings:void 0};var sn=function(){return function(e){return e({type:N}),Promise.all([(0,mt.aV)({url:"/rest/settings-definitions/dashboards"}),(0,mt.aV)({url:"/rest/amp/settings"})]).then((function(t){return e(function(e,t){return{type:T,payload:e,gs:L(t)}}(t[0],t[1]))})).catch((function(t){return e(function(e){return{type:R,error:e}}(t))}))}},dn=function(){return function(e){return e({type:G}),Promise.all([(0,mt.aV)({url:"/rest/ndd/indirect-programs-mapping-config"}),(0,mt.aV)({url:"/rest/ndd/programs-mapping-config"})]).then((function(t){return e((n=t[0],r=t[1],{type:V,payload:n,payload2:r}));var n,r})).catch((function(t){return e(function(e){return{type:z,error:e}}(t))}))}},ln=function(e){return function(t){return t({type:F}),(0,mt.aV)({url:"/rest/ndd/saved-charts/"+e}).then((function(e){return t(function(e){return{type:M,payload:e}}(e))})).catch((function(e){return t(function(e){return{type:H,error:e}}(e))}))}},cn=n(17985),un=n(32162),pn=n(34815),fn=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var a;(0,r.Z)(this,n),(a=t.call(this,e)).getSharedDataOrResolve=function(e){var t=a.props._getSharedData;return e?t(e):Promise.resolve()},a.resetChartAfterUnClick=function(){var e=a.state,t=e.selectedDirectProgram,n=e.filters,r=e.embedded;if(t)if(r)a.setState((function(){return{selectedDirectProgram:null}}));else{var o=et(n,t);a.setState((function(){return{selectedDirectProgram:null,filters:o}}))}},a.onApplyFilters=function(e){var t=a.props,n=t._callReport,r=t._callTopReport,o=a.state,i=o.fundingType,s=o.selectedDirectProgram,d=o.settings,l=o.selectedPrograms;a.setState({filters:e}),n(i,e,l,d),null!==s&&r(i,d,e,s)},a.onChangeFundingType=function(e){var t=a.props,n=t._callReport,r=t._clearTopReport,o=a.state,i=o.filters,s=o.selectedPrograms,d=o.settings;a.resetChartAfterUnClick(),a.setState({fundingType:e}),n(e,i,s,d),r()},a.onChangeProgram=function(e){var t=a.props._callReport,n=a.state,r=n.filters,o=n.fundingType,i=n.settings,s=e.split("-");a.setState({selectedPrograms:s}),a.resetChartAfterUnClick(),t(o,r,s,i)},a.onApplySettings=function(e){var t=a.props,n=t._callReport,r=t._callTopReport,o=a.state,i=o.fundingType,s=o.selectedPrograms,d=o.filters,l=o.selectedDirectProgram;a.setState({settings:e}),n(i,d,s,e),null!==l&&r(i,e,d,l)};var o=pn.parse(e.location.search);return a.state={filters:void 0,dashboardId:void 0,fundingType:void 0,selectedPrograms:void 0,settings:void 0,selectedDirectProgram:null,embedded:!!o.embedded,fundingByYearSource:Dt},a}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t._loadDashboardSettings,r=t._getMappings,a=this.state.embedded,o=this.props.params.id;return this.setState({dashboardId:o}),Promise.all([n(),r(),this.getSharedDataOrResolve(o)]).then((function(t){var n=(0,Ge.Z)({},oe,t[0].payload[Object.keys(t[0].payload).find((function(e){return t[0].payload[e].id===oe}))].value.defaultId),r=["".concat(t[1].payload[$e.ry].id),"".concat(t[1].payload[$e.G7].id)],a=t[0].payload.find((function(e){return e.id===ae})).value.defaultId;if(o){var i=JSON.parse(t[2].payload.stateBlob);i&&i.settings&&i.settings[oe]&&(n[oe]=i.settings[oe]),i&&i.fundingType&&(a=i.fundingType),i&&i.selectedPrograms&&(r=i.selectedPrograms)}return e.setState({selectedPrograms:r,settings:n,fundingType:a}),t})).finally((function(){if(a){var t=e.props._callReport,n=e.state,r=n.fundingType,o=n.settings;t(r,{},n.selectedPrograms,o)}}))}},{key:"handleOuterChartClick",value:function(e,t){var n=this.state,r=n.selectedDirectProgram,a=n.filters,o=n.settings,i=n.fundingType,s=this.props.dashboardSettings;e.points[0].data.name===re&&(r?((0,this.props._clearTopReport)(),this.resetChartAfterUnClick()):(this.setState({selectedDirectProgram:t[e.points[0].i],fundingByYearSource:Dt}),(0,this.props._callTopReport)(i||s.find((function(e){return e.id===ae})).value.defaultId,o,a,t[e.points[0].i])))}},{key:"onChangeSource",value:function(e){this.setState({fundingByYearSource:e.target.value})}},{key:"downloadImage",value:function(){var e=this.context.translations;(0,cn.xg)(e["amp.ndd.dashboard:page-title"],"ndd-main-container",[],"png",!1,"print-simple-dummy-container",!1)}},{key:"render",value:function(){var e=this.state,t=e.filters,n=e.dashboardId,r=e.fundingType,a=e.selectedPrograms,o=e.settings,i=e.selectedDirectProgram,s=e.embedded,d=e.fundingByYearSource,l=this.props,c=l.ndd,u=l.nddLoadingPending,p=l.nddLoaded,f=l.dashboardSettings,h=l.mapping,g=l.noIndirectMapping,m=l.globalSettings;return(0,Me.jsxs)(Ve.Container,{fluid:!0,className:"main-container",id:"ndd-main-container",children:[(0,Me.jsx)("div",{className:"row header",style:{marginRight:"-30px",marginLeft:"-30px"},children:h&&o&&m&&a&&!s?(0,Me.jsx)(on,{onApplySettings:this.onApplySettings,onApplyFilters:this.onApplyFilters,filters:t,globalSettings:m,settings:o,fundingType:r,selectedPrograms:a,dashboardId:n}):null}),(0,Me.jsx)(Vt,{handleOuterChartClick:this.handleOuterChartClick.bind(this),selectedDirectProgram:i,filters:t,ndd:c,nddLoaded:p,nddLoadingPending:u,dashboardSettings:f,onChangeFundingType:this.onChangeFundingType,onChangeProgram:this.onChangeProgram,fundingType:r,selectedPrograms:a,mapping:h,settings:o,globalSettings:m,noIndirectMapping:g,downloadImage:this.downloadImage.bind(this),embedded:s,onChangeSource:this.onChangeSource.bind(this),fundingByYearSource:d}),(0,Me.jsx)(Ut.Z,{})]})}}]),n}(s.Component);fn.defaultProps={dashboardSettings:void 0,mapping:void 0,ndd:null,noIndirectMapping:void 0,globalSettings:void 0},fn.contextType=He;var hn=(0,p.connect)((function(e){return{ndd:e.reportsReducer.ndd,error:e.reportsReducer.error,nddLoaded:e.reportsReducer.nddLoaded,nddLoadingPending:e.reportsReducer.nddLoadingPending,dashboardSettings:e.dashboardSettingsReducer.dashboardSettings,globalSettings:e.dashboardSettingsReducer.globalSettings,translations:e.translationsReducer.translations,mapping:e.mappingsReducer.mapping,noIndirectMapping:e.mappingsReducer.noIndirectMapping}}),(function(e){return(0,l.bindActionCreators)({_callReport:vt,_loadDashboardSettings:sn,_getMappings:dn,_callTopReport:bt,_clearTopReport:yt,_getSharedData:ln},e)}))((0,un.E)(fn)),gn=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return(0,Me.jsxs)(Ue.Routes,{children:[(0,Me.jsx)(Ue.Route,{path:"/",exact:!0,element:(0,Me.jsx)(hn,{})}),(0,Me.jsx)(Ue.Route,{path:"/:id",component:(0,Me.jsx)(hn,{})})]})}}]),n}(s.Component),mn=gn,vn=(n(67235),n(16843),("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length)return t.some((function(e){return"object"===typeof e}))?l.compose:l.compose.apply(void 0,t)})||l.compose),yn=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).store=(0,l.createStore)(_e,vn((0,l.applyMiddleware)(u()))),a}return(0,a.Z)(n,[{key:"render",value:function(){return(0,Me.jsx)(p.Provider,{store:this.store,children:(0,Me.jsx)(Be,{defaultTrnPack:Fe,children:(0,Me.jsx)(mn,{})})})}}]),n}(s.Component)},46600:function(e,t,n){n(50383);var r=n(59653),a=function(e){var t=e.friendly;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{id:"print".concat(t?"-friendly":"","-dummy"),children:(0,r.jsx)("div",{id:"print".concat(t?"-friendly":"","-dummy-container"),children:(0,r.jsx)("div",{className:"print-dummy-border"})})}),(0,r.jsx)("div",{id:"print".concat(t?"-friendly":"","-simple-dummy"),children:(0,r.jsx)("div",{id:"print".concat(t?"-friendly":"","-simple-dummy-container")})})]})};a.defaultProps={friendly:!1},t.Z=a},17985:function(e,t,n){n.d(t,{Us:function(){return s},pB:function(){return i},xg:function(){return d}});var r=n(30741),a=n.n(r),o=n(1342),i=function(e,t,n,r,a){var o=document.getElementById(t).childNodes,i=[];o.forEach((function(e){e.childNodes.forEach((function(e){a.includes(parseInt(e.id.substring(14,e.id.length),10))&&i.push(e.id)}))})),i.reduce((function(t,n){return t.then((function(){return d(e,n,[],r,!1,"print-simple-dummy-container")}))}),Promise.resolve())},s=function(e,t,n,r,a){try{var i=!1;a&&a.length>0&&(i=!0);var s=r?r.contentDocument:document,d=s.getElementById(n);i&&(d.className="".concat(d.className," one-by-one"));var l,c,u=document.getElementsByClassName("chart-column");e&&((l=s.createElement("div")).className="print-title",l.appendChild(s.createTextNode(e)),i||d.appendChild(l)),c=i?u.length:Math.ceil(u.length/2);for(var p=1,f=0;f<u.length;){var h=u[f].cloneNode(!0);if(!i||a.includes(parseInt(h.id.substring(o.TM.length),10))){h.style.height=u[f].clientHeight,h.style.width=u[f].clientWidth;var g=void 0;(f+=1)<u.length&&!i&&((g=u[f].cloneNode(!0)).style.height=u[f].clientHeight,g.style.width=u[f].clientWidth,f+=1);var m=s.createElement("div");if(m.className="print-row row".concat(p<c?" border-bottom ":i?"":" last-row"),p+=1,l&&i){var v=l.cloneNode(!0);d.appendChild(v)}if(m.appendChild(h),g?(m.appendChild(g),h.className="chart-column col-print-6 border-right",g.className="chart-column col-print-6"):h.className="chart-column col-print-12",d.appendChild(m),i){var y=s.createElement("p");y.className="new-page",d.appendChild(y)}}else f+=1,p+=1}}catch(b){console.log("problem creating elements for print: ".concat(b))}},d=function(e,t,n,r,a,o,i){try{var s=document.getElementById(o).firstChild;s||(s=document.getElementById(o));var d,c=document.getElementById(t).cloneNode(!0),u="".concat(document.getElementById(t).clientHeight,"px");a&&(u=0,document.getElementById(t).childNodes.forEach((function(e){u+=e.clientHeight}))),c.style.height=u,c.style.width="".concat(document.getElementById(t).clientWidth,"px"),e&&i&&((d=document.createElement("div")).className="print-title",d.appendChild(document.createTextNode(e)),s.appendChild(d)),s.appendChild(c);var p=c.clientHeight+10+(d?d.clientHeight:0);return l(s,d,c,r,e,p,c.clientWidth)}catch(f){console.log("problem creating elements for print: ".concat(f))}},l=function(e,t,n,r,i,s,d){var l=r===o._G?a().toPng:a().toSvg;return new Promise((function(a,o){l(e,{height:s,width:d,bgcolor:"#FFF"}).then((function(o){var s=document.createElement("a");return s.download="".concat(i,".").concat(r),s.href=o,document.body.appendChild(s),s.click(),t&&e.removeChild(t),e.removeChild(n),a()})).catch((function(r){e.removeChild(n),t&&e.removeChild(t),e.removeChild(n),o(new Error(r))}))}))}},1342:function(e,t,n){n.d(t,{BB:function(){return h},ET:function(){return g},Ez:function(){return u},IN:function(){return U},Ic:function(){return d},JP:function(){return G},LM:function(){return w},O:function(){return f},PU:function(){return m},S9:function(){return y},SJ:function(){return x},Sw:function(){return E},TM:function(){return F},Vs:function(){return l},WP:function(){return I},_G:function(){return S},aD:function(){return L},ah:function(){return _},bm:function(){return Y},cE:function(){return p},eM:function(){return D},e_:function(){return c},fz:function(){return b},g1:function(){return Z},gW:function(){return P},ij:function(){return O},io:function(){return T},pj:function(){return N},qp:function(){return s},rF:function(){return i},rP:function(){return k},ry:function(){return a},sC:function(){return B},sK:function(){return M},tU:function(){return R},um:function(){return v},vW:function(){return j},wU:function(){return H},wt:function(){return C},xE:function(){return r},xg:function(){return W},yr:function(){return A},z7:function(){return o}});var r=0,a=1,o=-1,i="/assets/img/flags/",s="dashboard-default-min-year-range",d="dashboard-default-max-year-range",l="/rest/filters/sectors",c="/rest/filters/locations?firstLevelOnly=true&showAllCountries=true",u="/rest/amp/settings",p="/rest/filters/modalities?sscWorkspace=true",f="/rest/gis/sscdashboard",h="/rest/gis/sscdashboard/xsl",g="/rest/gis/activities",m=12,v="#fd8f00",y="#fd8f00",b="#007236",x="#007236",S="png",C=50,j=-999999999,P=9,D=6,w=1766,k=5,E="-1",Z=1920,N=145,T=2,R="0",L="SSC_",A="home",_="sector",I="modality",O="download",F="country-column",M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAbCAQAAACkGQXlAAAAI0lEQVR42mP8L8lAVcA4auCogaMGjho4auCogaMGjhpINAAAOBcdpLw/CDsAAAAASUVORK5CYII=",H="000",B="primary-sector",U="ssc-modalities",G="donor-agency-country",V=new Map([["110","#d46453"],["120","#f5a15d"],["130","#ffcf8e"],["140","#ff7a7d"],["150","#ff417d"],["160","#d61a88"],["210","#fff540"],["220","#28c074"],["230","#429058"],["240","#bd4035"],["250","#b0fff1"],["311","#144491"],["312","#9b0e3e"],["313","#10908e"],["321","#8f5765"],["322","#c7d4e1"],["323","#77b02a"],["331","#488bd4"],["332","#928fb8"],["400","#c6d831"],["500","#d41e3c"],["600","#cf968c"],["700","#78d7ff"],["910","#94007a"],["920","#ffb84a"],["930","#ed7b39"],["998","#ed4c40"],["000","#8f5765"]]),z=new Map([[H,"#8f5765"]]),W=new Map([[I,["#00429d","#3761ab","#5681b9","#73a2c6","#93c4d2","#b9e5dd","#ffffe0","#ffd3bf","#ffa59e","#f4777f","#dd4c65","#be214d","#93003a"]]]),Y=new Map([[_,V],[I,z]])},35209:function(e,t,n){var r=n(64454),a=n(58234);t.Z=function(e){return function(t){return t((0,r.M0)(e)),(0,a.X)(e).then((function(e){return t((0,r.sq)(e))})).catch((function(e){return t((0,r.nW)(e))}))}}},64454:function(e,t,n){n.d(t,{M0:function(){return i},b5:function(){return r},k_:function(){return a},nW:function(){return d},pv:function(){return o},sq:function(){return s}});var r="FETCH_TRANSLATIONS_PENDING",a="FETCH_TRANSLATIONS_SUCCESS",o="FETCH_TRANSLATIONS_ERROR";function i(e){return{type:r,payload:e}}function s(e){return{type:a,payload:e}}function d(e){return{type:o,error:e}}},38587:function(e,t,n){n.d(t,{S2:function(){return i},aV:function(){return o},hL:function(){return a}});function r(e){var t={method:e?"POST":"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}};return e&&(t.body=JSON.stringify(e)),t}var a=function(e){var t=e.url,n={method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}};return new Promise((function(e,r){return fetch(t,n).then((function(t){return t.error?r(t.error):e(t)})).catch((function(e){return r(e)}))}))},o=function(e){var t=e.body,n=e.url;return new Promise((function(e,a){return fetch(n,r(t)).then((function(e){return e.json()})).then((function(t){return t.error?a(t.error):e(t)})).catch((function(e){return a(e)}))}))},i=function(e){var t=e.body,n=e.url;return new Promise((function(e,a){return fetch(n,r(t)).then((function(t){return t.text().then((function(e){var n=t.headers.get("content-type"),r=e;return e&&n&&-1!==n.indexOf("application/json")&&(r=JSON.parse(e)),{data:r,ok:t.ok,status:t.status}})).then((function(t){return t.ok?e(t):a({status:t.status,message:s(t),code:d(t)})}))})).catch((function(e){return a(e)}))}))};function s(e){var t="";if(e.data&&e.data.error)for(var n in e.data.error)t+=JSON.stringify(e.data.error[n]);else t=e.data;return t}function d(e){if(e.data&&e.data.error)for(var t in e.data.error)return t;return e.data}},47371:function(e,t,n){n.d(t,{g:function(){return a}});n(50383);var r=n(59653),a=function(){return(0,r.jsx)("div",{className:"jumbotron",children:(0,r.jsx)("div",{className:"progress",children:(0,r.jsx)("div",{className:"progress-bar progress-bar-striped bg-info",role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"},children:"..."})})})}},32162:function(e,t,n){n.d(t,{E:function(){return d}});var r=n(33028),a=n(96234),o=n(50383),i=n(46760),s=n(59653),d=function(e){return(0,o.memo)((function(t){var n=(0,i.useNavigate)(),d=(0,i.useLocation)(),l=(0,i.useParams)(),c=(0,i.useSearchParams)(),u=(0,a.Z)(c,2),p=u[0],f=u[1];return(0,o.useEffect)((function(){!function(){var e=localStorage.getItem("searchParams");d.search=e,e&&(e=e.replace("?","")).split("&").map((function(e){var t=e.split("="),n=(0,a.Z)(t,2),r=n[0],o=n[1];return f(r,o),[r,o]}))}()}),[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e,(0,r.Z)({navigate:n,_location:d,urlParams:l,searchParams:p,storedSearchParams:localStorage.getItem("searchParams")},t))})}))}},58234:function(e,t,n){n.d(t,{X:function(){return d},a:function(){return s}});var r=n(1342),a="POST",o="GET";function i(e,t){var n={method:e?a:o,headers:t||{"Content-Type":"application/json",Accept:"application/json","ws-prefix":r.aD}};return e&&(n.body=JSON.stringify(e)),n}var s=function(e){var t=e.body,n=e.url,r=e.headers;return new Promise((function(e,a){return fetch(n,i(t,r)).then((function(e){return r&&"text/html"===r.Accept?e.text():e.headers&&e.headers.get("Content-Type")&&e.headers.get("Content-Type").indexOf("application/json")>-1?e.json():e})).then((function(t){return t.error?a(t.error):e(t)}))}))};function d(e){return new Promise((function(t){return fetch("/rest/translations/label-translations",i(e)).then((function(e){var n=e.headers.get("content-type");if(n&&-1!==n.indexOf("application/json"))return e.json().then((function(e){if(e.error)throw new Error(e.error);return t(e)}))}))}))}},50840:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(33028),a=n(64454),o={pending:!0,translations:{},error:null};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.b5:return(0,r.Z)((0,r.Z)({},e),{},{pending:!0,translations:t.payload});case a.k_:return(0,r.Z)((0,r.Z)({},e),{},{pending:!1,translations:t.payload});case a.pv:return(0,r.Z)((0,r.Z)({},e),{},{pending:!1,error:t.error});default:return e}}},41241:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.Z=function(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,t);var n=function(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}(this,n)}}(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).p=Promise.resolve(),t.resizeHandler=null,t.handlers={},t.syncWindowResize=t.syncWindowResize.bind(c(t)),t.syncEventHandlers=t.syncEventHandlers.bind(c(t)),t.attachUpdateEvents=t.attachUpdateEvents.bind(c(t)),t.getRef=t.getRef.bind(c(t)),t.handleUpdate=t.handleUpdate.bind(c(t)),t.figureCallback=t.figureCallback.bind(c(t)),t.updatePlotly=t.updatePlotly.bind(c(t)),t}return function(e,t,n){t&&d(e.prototype,t);n&&d(e,n);Object.defineProperty(e,"prototype",{writable:!1})}(a,[{key:"updatePlotly",value:function(t,n,r){var a=this;this.p=this.p.then((function(){if(!a.unmounting){if(!a.el)throw new Error("Missing element reference");return e.react(a.el,{data:a.props.data,layout:a.props.layout,config:a.props.config,frames:a.props.frames})}})).then((function(){a.unmounting||(a.syncWindowResize(t),a.syncEventHandlers(),a.figureCallback(n),r&&a.attachUpdateEvents())})).catch((function(e){a.props.onError&&a.props.onError(e)}))}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(e){this.unmounting=!1;var t=e.frames&&e.frames.length?e.frames.length:0,n=this.props.frames&&this.props.frames.length?this.props.frames.length:0,r=!(e.layout===this.props.layout&&e.data===this.props.data&&e.config===this.props.config&&n===t),a=void 0!==e.revision,o=e.revision!==this.props.revision;(r||a&&(!a||o))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&h&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),e.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var e=this;this.el&&this.el.removeListener&&f.forEach((function(t){e.el.on(t,e.handleUpdate)}))}},{key:"removeUpdateEvents",value:function(){var e=this;this.el&&this.el.removeListener&&f.forEach((function(t){e.el.removeListener(t,e.handleUpdate)}))}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(e){if("function"===typeof e){var t=this.el;e({data:t.data,layout:t.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(t){var n=this;h&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return e.Plots.resize(n.el)},window.addEventListener("resize",this.resizeHandler),t&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(e){this.el=e,this.props.debug&&h&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var e=this;p.forEach((function(t){var n=e.props["on"+t],r=e.handlers[t],a=Boolean(r);n&&!a?e.addEventHandler(t,n):!n&&a?e.removeEventHandler(t):n&&a&&n!==r&&(e.removeEventHandler(t),e.addEventHandler(t,n))}))}},{key:"addEventHandler",value:function(e,t){this.handlers[e]=t,this.el.on(this.getPlotlyEventName(e),this.handlers[e])}},{key:"removeEventHandler",value:function(e){this.el.removeListener(this.getPlotlyEventName(e),this.handlers[e]),delete this.handlers[e]}},{key:"getPlotlyEventName",value:function(e){return"plotly_"+e.toLowerCase()}},{key:"render",value:function(){return o.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),a}(o.Component);return t.propTypes={data:i.default.arrayOf(i.default.object),config:i.default.object,layout:i.default.object,frames:i.default.arrayOf(i.default.object),revision:i.default.number,onInitialized:i.default.func,onPurge:i.default.func,onError:i.default.func,onUpdate:i.default.func,debug:i.default.bool,style:i.default.object,className:i.default.string,useResizeHandler:i.default.bool,divId:i.default.string},p.forEach((function(e){t.propTypes["on"+e]=i.default.func})),t.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},t};var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var d=o?Object.getOwnPropertyDescriptor(e,i):null;d&&(d.get||d.set)?Object.defineProperty(a,i,d):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(72182)),i=(a=n(15949))&&a.__esModule?a:{default:a};function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var p=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover","WebGlContextLost"],f=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],h="undefined"!==typeof window},67235:function(){},16843:function(){}}]);
//# sourceMappingURL=781.bundle.js.map