{"version":3,"file":"nivo-annotations.umd.js","sources":["../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../src/props.ts","../src/utils.ts","../src/compute.ts","../src/hooks.ts","../src/AnnotationNote.tsx","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toArray.js","../src/AnnotationLink.tsx","../src/CircleAnnotationOutline.tsx","../src/DotAnnotationOutline.tsx","../src/RectAnnotationOutline.tsx","../src/Annotation.tsx","../src/canvas.ts"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export const defaultProps = {\n    dotSize: 4,\n    noteWidth: 120,\n    noteTextOffset: 8,\n    animate: true,\n    motionStiffness: 90,\n    motionDamping: 13,\n}\n","import {\n    AnnotationSpec,\n    CircleAnnotationSpec,\n    DotAnnotationSpec,\n    Note,\n    NoteCanvas,\n    NoteSvg,\n    RectAnnotationSpec,\n} from './types'\nimport { isValidElement } from 'react'\n\nexport const isSvgNote = <Datum>(note: Note<Datum>): note is NoteSvg<Datum> => {\n    const noteType = typeof note\n\n    return (\n        isValidElement(note) ||\n        noteType === 'string' ||\n        noteType === 'function' ||\n        noteType === 'object'\n    )\n}\n\nexport const isCanvasNote = <Datum>(note: Note<Datum>): note is NoteCanvas<Datum> => {\n    const noteType = typeof note\n\n    return noteType === 'string' || noteType === 'function'\n}\n\nexport const isCircleAnnotation = <Datum>(\n    annotationSpec: AnnotationSpec<Datum>\n): annotationSpec is CircleAnnotationSpec<Datum> => annotationSpec.type === 'circle'\n\nexport const isDotAnnotation = <Datum>(\n    annotationSpec: AnnotationSpec<Datum>\n): annotationSpec is DotAnnotationSpec<Datum> => annotationSpec.type === 'dot'\n\nexport const isRectAnnotation = <Datum>(\n    annotationSpec: AnnotationSpec<Datum>\n): annotationSpec is RectAnnotationSpec<Datum> => annotationSpec.type === 'rect'\n","import { filter, isNumber, omit } from 'lodash'\nimport {\n    radiansToDegrees,\n    absoluteAngleDegrees,\n    degreesToRadians,\n    positionFromAngle,\n} from '@nivo/core'\nimport { defaultProps } from './props'\nimport {\n    AnnotationSpec,\n    AnnotationPositionGetter,\n    AnnotationDimensionsGetter,\n    BoundAnnotation,\n    AnnotationMatcher,\n    AnnotationInstructions,\n} from './types'\nimport { isCircleAnnotation, isRectAnnotation } from './utils'\n\nexport const bindAnnotations = <\n    Datum = {\n        x: number\n        y: number\n    }\n>({\n    data,\n    annotations,\n    getPosition,\n    getDimensions,\n}: {\n    data: Datum[]\n    annotations: AnnotationMatcher<Datum>[]\n    getPosition: AnnotationPositionGetter<Datum>\n    getDimensions: AnnotationDimensionsGetter<Datum>\n}): BoundAnnotation<Datum>[] =>\n    annotations.reduce((acc: BoundAnnotation<Datum>[], annotation) => {\n        const offset = annotation.offset || 0\n\n        return [\n            ...acc,\n            ...filter<Datum>(data, annotation.match).map(datum => {\n                const position = getPosition(datum)\n                const dimensions = getDimensions(datum)\n\n                if (isCircleAnnotation(annotation) || isRectAnnotation(annotation)) {\n                    dimensions.size = dimensions.size + offset * 2\n                    dimensions.width = dimensions.width + offset * 2\n                    dimensions.height = dimensions.height + offset * 2\n                }\n\n                // acc.push({\n                //     ...omit(annotation, ['match', 'offset']),\n                //     ...position,\n                //     ...dimensions,\n                //     size: annotation.size || dimensions.size,\n                //     datum,\n                // } as any)\n                // return [\n                //     ...acc,\n                //     {\n                //         ...omit(annotation, ['match', 'offset']),\n                //         ...position,\n                //         ...dimensions,\n                //         size: annotation.size || dimensions.size,\n                //         datum,\n                //     },\n                // ]\n                return {\n                    ...omit(annotation, ['match', 'offset']),\n                    ...position,\n                    ...dimensions,\n                    size: annotation.size || dimensions.size,\n                    datum,\n                } as Required<BoundAnnotation<Datum>>\n            }),\n        ]\n\n        // return acc\n    }, [])\n\nexport const getLinkAngle = (\n    sourceX: number,\n    sourceY: number,\n    targetX: number,\n    targetY: number\n) => {\n    const angle = Math.atan2(targetY - sourceY, targetX - sourceX)\n\n    return absoluteAngleDegrees(radiansToDegrees(angle))\n}\n\nexport const computeAnnotation = <Datum>(\n    annotation: Required<AnnotationSpec<Datum>>\n): AnnotationInstructions => {\n    const {\n        x,\n        y,\n        noteX,\n        noteY,\n        noteWidth = defaultProps.noteWidth,\n        noteTextOffset = defaultProps.noteTextOffset,\n    } = annotation\n\n    let computedNoteX: number\n    let computedNoteY: number\n\n    if (isNumber(noteX)) {\n        computedNoteX = x + noteX\n    } else if (noteX.abs !== undefined) {\n        computedNoteX = noteX.abs\n    } else {\n        throw new Error(`noteX should be either a number or an object containing an 'abs' property`)\n    }\n\n    if (isNumber(noteY)) {\n        computedNoteY = y + noteY\n    } else if (noteY.abs !== undefined) {\n        computedNoteY = noteY.abs\n    } else {\n        throw new Error(`noteY should be either a number or an object containing an 'abs' property`)\n    }\n\n    let computedX = x\n    let computedY = y\n\n    const angle = getLinkAngle(x, y, computedNoteX, computedNoteY)\n\n    if (isCircleAnnotation<Datum>(annotation)) {\n        const position = positionFromAngle(degreesToRadians(angle), annotation.size / 2)\n        computedX += position.x\n        computedY += position.y\n    }\n\n    if (isRectAnnotation<Datum>(annotation)) {\n        const eighth = Math.round((angle + 90) / 45) % 8\n        if (eighth === 0) {\n            computedY -= annotation.height / 2\n        }\n        if (eighth === 1) {\n            computedX += annotation.width / 2\n            computedY -= annotation.height / 2\n        }\n        if (eighth === 2) {\n            computedX += annotation.width / 2\n        }\n        if (eighth === 3) {\n            computedX += annotation.width / 2\n            computedY += annotation.height / 2\n        }\n        if (eighth === 4) {\n            computedY += annotation.height / 2\n        }\n        if (eighth === 5) {\n            computedX -= annotation.width / 2\n            computedY += annotation.height / 2\n        }\n        if (eighth === 6) {\n            computedX -= annotation.width / 2\n        }\n        if (eighth === 7) {\n            computedX -= annotation.width / 2\n            computedY -= annotation.height / 2\n        }\n    }\n\n    let textX = computedNoteX\n    const textY = computedNoteY - noteTextOffset\n\n    let noteLineX = computedNoteX\n    const noteLineY = computedNoteY\n\n    if ((angle + 90) % 360 > 180) {\n        textX -= noteWidth\n        noteLineX -= noteWidth\n    } else {\n        noteLineX += noteWidth\n    }\n\n    return {\n        points: [\n            [computedX, computedY],\n            [computedNoteX, computedNoteY],\n            [noteLineX, noteLineY],\n        ] as [number, number][],\n        text: [textX, textY],\n        angle: angle + 90,\n    }\n}\n","import { useMemo } from 'react'\nimport { bindAnnotations, computeAnnotation } from './compute'\nimport {\n    AnnotationDimensionsGetter,\n    AnnotationMatcher,\n    AnnotationPositionGetter,\n    AnnotationSpec,\n} from './types'\n\n/**\n * Bind annotations to a dataset.\n */\nexport const useAnnotations = <Datum>({\n    data,\n    annotations,\n    getPosition,\n    getDimensions,\n}: {\n    data: Datum[]\n    annotations: AnnotationMatcher<Datum>[]\n    getPosition: AnnotationPositionGetter<Datum>\n    getDimensions: AnnotationDimensionsGetter<Datum>\n}) =>\n    useMemo(\n        () =>\n            bindAnnotations<Datum>({\n                data,\n                annotations,\n                getPosition,\n                getDimensions,\n            }),\n        [data, annotations, getPosition, getDimensions]\n    )\n\nexport const useComputedAnnotations = <Datum>({\n    annotations,\n}: {\n    annotations: Required<AnnotationSpec<Datum>>[]\n}) =>\n    useMemo(\n        () =>\n            annotations.map(annotation => ({\n                ...annotation,\n                computed: computeAnnotation<Datum>({\n                    ...annotation,\n                }),\n            })),\n        [annotations]\n    )\n\nexport const useComputedAnnotation = <Datum>(annotation: Required<AnnotationSpec<Datum>>) =>\n    useMemo(() => computeAnnotation<Datum>(annotation), [annotation])\n","import { createElement } from 'react'\nimport omit from 'lodash/omit'\nimport { useSpring, animated } from '@react-spring/web'\nimport { useTheme, useMotionConfig } from '@nivo/core'\nimport { NoteSvg } from './types'\n\nexport const AnnotationNote = <Datum,>({\n    datum,\n    x,\n    y,\n    note,\n}: {\n    datum: Datum\n    x: number\n    y: number\n    note: NoteSvg<Datum>\n}) => {\n    const theme = useTheme()\n    const { animate, config: springConfig } = useMotionConfig()\n\n    const animatedProps = useSpring({\n        x,\n        y,\n        config: springConfig,\n        immediate: !animate,\n    })\n\n    if (typeof note === 'function') {\n        return createElement(note, { x, y, datum })\n    }\n\n    return (\n        <>\n            {theme.annotations.text.outlineWidth > 0 && (\n                <animated.text\n                    x={animatedProps.x}\n                    y={animatedProps.y}\n                    style={{\n                        ...theme.annotations.text,\n                        strokeLinejoin: 'round',\n                        strokeWidth: theme.annotations.text.outlineWidth * 2,\n                        stroke: theme.annotations.text.outlineColor,\n                    }}\n                >\n                    {note}\n                </animated.text>\n            )}\n            <animated.text\n                x={animatedProps.x}\n                y={animatedProps.y}\n                style={omit(theme.annotations.text, ['outlineWidth', 'outlineColor'])}\n            >\n                {note}\n            </animated.text>\n        </>\n    )\n}\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import { useMemo } from 'react'\nimport { animated } from '@react-spring/web'\nimport { useAnimatedPath, useTheme } from '@nivo/core'\n\nexport const AnnotationLink = ({\n    points,\n    isOutline = false,\n}: {\n    points: [number, number][]\n    isOutline?: boolean\n}) => {\n    const theme = useTheme()\n\n    const path = useMemo(() => {\n        const [firstPoint, ...otherPoints] = points\n\n        return otherPoints.reduce(\n            (acc, [x, y]) => `${acc} L${x},${y}`,\n            `M${firstPoint[0]},${firstPoint[1]}`\n        )\n    }, [points])\n\n    const animatedPath = useAnimatedPath(path)\n\n    if (isOutline && theme.annotations.link.outlineWidth <= 0) {\n        return null\n    }\n\n    const style = { ...theme.annotations.link }\n    if (isOutline) {\n        style.strokeLinecap = 'square'\n        style.strokeWidth =\n            theme.annotations.link.strokeWidth + theme.annotations.link.outlineWidth * 2\n        style.stroke = theme.annotations.link.outlineColor\n    }\n\n    return <animated.path fill=\"none\" d={animatedPath} style={style} />\n}\n","import { useSpring, animated } from '@react-spring/web'\nimport { useMotionConfig, useTheme } from '@nivo/core'\n\nexport const CircleAnnotationOutline = ({ x, y, size }: { x: number; y: number; size: number }) => {\n    const theme = useTheme()\n    const { animate, config: springConfig } = useMotionConfig()\n\n    const animatedProps = useSpring({\n        x,\n        y,\n        radius: size / 2,\n        config: springConfig,\n        immediate: !animate,\n    })\n\n    return (\n        <>\n            {theme.annotations.outline.outlineWidth > 0 && (\n                <animated.circle\n                    cx={animatedProps.x}\n                    cy={animatedProps.y}\n                    r={animatedProps.radius}\n                    style={{\n                        ...theme.annotations.outline,\n                        fill: 'none',\n                        strokeWidth:\n                            theme.annotations.outline.strokeWidth +\n                            theme.annotations.outline.outlineWidth * 2,\n                        stroke: theme.annotations.outline.outlineColor,\n                    }}\n                />\n            )}\n            <animated.circle\n                cx={animatedProps.x}\n                cy={animatedProps.y}\n                r={animatedProps.radius}\n                style={theme.annotations.outline}\n            />\n        </>\n    )\n}\n","import { useSpring, animated } from '@react-spring/web'\nimport { useMotionConfig, useTheme } from '@nivo/core'\nimport { defaultProps } from './props'\n\nexport const DotAnnotationOutline = ({\n    x,\n    y,\n    size = defaultProps.dotSize,\n}: {\n    x: number\n    y: number\n    size?: number\n}) => {\n    const theme = useTheme()\n    const { animate, config: springConfig } = useMotionConfig()\n\n    const animatedProps = useSpring({\n        x,\n        y,\n        radius: size / 2,\n        config: springConfig,\n        immediate: !animate,\n    })\n\n    return (\n        <>\n            {theme.annotations.outline.outlineWidth > 0 && (\n                <animated.circle\n                    cx={animatedProps.x}\n                    cy={animatedProps.y}\n                    r={animatedProps.radius}\n                    style={{\n                        ...theme.annotations.outline,\n                        fill: 'none',\n                        strokeWidth: theme.annotations.outline.outlineWidth * 2,\n                        stroke: theme.annotations.outline.outlineColor,\n                    }}\n                />\n            )}\n            <animated.circle\n                cx={animatedProps.x}\n                cy={animatedProps.y}\n                r={animatedProps.radius}\n                style={theme.annotations.symbol}\n            />\n        </>\n    )\n}\n","import { useSpring, animated } from '@react-spring/web'\nimport { useMotionConfig, useTheme } from '@nivo/core'\n\nexport const RectAnnotationOutline = ({\n    x,\n    y,\n    width,\n    height,\n}: {\n    x: number\n    y: number\n    width: number\n    height: number\n}) => {\n    const theme = useTheme()\n    const { animate, config: springConfig } = useMotionConfig()\n\n    const animatedProps = useSpring({\n        x: x - width / 2,\n        y: y - height / 2,\n        width,\n        height,\n        config: springConfig,\n        immediate: !animate,\n    })\n\n    return (\n        <>\n            {theme.annotations.outline.outlineWidth > 0 && (\n                <animated.rect\n                    x={animatedProps.x}\n                    y={animatedProps.y}\n                    width={animatedProps.width}\n                    height={animatedProps.height}\n                    style={{\n                        ...theme.annotations.outline,\n                        fill: 'none',\n                        strokeWidth:\n                            theme.annotations.outline.strokeWidth +\n                            theme.annotations.outline.outlineWidth * 2,\n                        stroke: theme.annotations.outline.outlineColor,\n                    }}\n                />\n            )}\n            <animated.rect\n                x={animatedProps.x}\n                y={animatedProps.y}\n                width={animatedProps.width}\n                height={animatedProps.height}\n                style={theme.annotations.outline}\n            />\n        </>\n    )\n}\n","import { useComputedAnnotation } from './hooks'\nimport { AnnotationNote } from './AnnotationNote'\nimport { AnnotationLink } from './AnnotationLink'\nimport { CircleAnnotationOutline } from './CircleAnnotationOutline'\nimport { DotAnnotationOutline } from './DotAnnotationOutline'\nimport { RectAnnotationOutline } from './RectAnnotationOutline'\nimport { BoundAnnotation } from './types'\nimport { isCircleAnnotation, isDotAnnotation, isRectAnnotation, isSvgNote } from './utils'\n\nexport const Annotation = <Datum,>(annotation: BoundAnnotation<Datum>) => {\n    const { datum, x, y, note } = annotation\n    const computed = useComputedAnnotation(annotation)\n\n    if (!isSvgNote(note)) {\n        throw new Error('note should be a valid react element')\n    }\n\n    return (\n        <>\n            <AnnotationLink points={computed.points} isOutline={true} />\n            {isCircleAnnotation(annotation) && (\n                <CircleAnnotationOutline x={x} y={y} size={annotation.size} />\n            )}\n            {isDotAnnotation(annotation) && (\n                <DotAnnotationOutline x={x} y={y} size={annotation.size} />\n            )}\n            {isRectAnnotation(annotation) && (\n                <RectAnnotationOutline\n                    x={x}\n                    y={y}\n                    width={annotation.width}\n                    height={annotation.height}\n                />\n            )}\n            <AnnotationLink points={computed.points} />\n            <AnnotationNote datum={datum} x={computed.text[0]} y={computed.text[1]} note={note} />\n        </>\n    )\n}\n","import { CompleteTheme } from '@nivo/core'\nimport { ComputedAnnotation } from './types'\nimport { isCanvasNote, isCircleAnnotation, isDotAnnotation, isRectAnnotation } from './utils'\n\nconst drawPoints = (ctx: CanvasRenderingContext2D, points: [number, number][]) => {\n    points.forEach(([x, y], index) => {\n        if (index === 0) {\n            ctx.moveTo(x, y)\n        } else {\n            ctx.lineTo(x, y)\n        }\n    })\n}\n\nexport const renderAnnotationsToCanvas = <Datum>(\n    ctx: CanvasRenderingContext2D,\n    {\n        annotations,\n        theme,\n    }: {\n        annotations: ComputedAnnotation<Datum>[]\n        theme: CompleteTheme\n    }\n) => {\n    if (annotations.length === 0) return\n\n    ctx.save()\n    annotations.forEach(annotation => {\n        if (!isCanvasNote(annotation.note)) {\n            throw new Error('note is invalid for canvas implementation')\n        }\n\n        if (theme.annotations.link.outlineWidth > 0) {\n            ctx.lineCap = 'square'\n            ctx.strokeStyle = theme.annotations.link.outlineColor\n            ctx.lineWidth =\n                theme.annotations.link.strokeWidth + theme.annotations.link.outlineWidth * 2\n            ctx.beginPath()\n            drawPoints(ctx, annotation.computed.points)\n            ctx.stroke()\n            ctx.lineCap = 'butt'\n        }\n\n        if (isCircleAnnotation(annotation) && theme.annotations.outline.outlineWidth > 0) {\n            ctx.strokeStyle = theme.annotations.outline.outlineColor\n            ctx.lineWidth =\n                theme.annotations.outline.strokeWidth + theme.annotations.outline.outlineWidth * 2\n            ctx.beginPath()\n            ctx.arc(annotation.x, annotation.y, annotation.size / 2, 0, 2 * Math.PI)\n            ctx.stroke()\n        }\n\n        if (isDotAnnotation(annotation) && theme.annotations.symbol.outlineWidth > 0) {\n            ctx.strokeStyle = theme.annotations.symbol.outlineColor\n            ctx.lineWidth = theme.annotations.symbol.outlineWidth * 2\n            ctx.beginPath()\n            ctx.arc(annotation.x, annotation.y, annotation.size / 2, 0, 2 * Math.PI)\n            ctx.stroke()\n        }\n\n        if (isRectAnnotation(annotation) && theme.annotations.outline.outlineWidth > 0) {\n            ctx.strokeStyle = theme.annotations.outline.outlineColor\n            ctx.lineWidth =\n                theme.annotations.outline.strokeWidth + theme.annotations.outline.outlineWidth * 2\n            ctx.beginPath()\n            ctx.rect(\n                annotation.x - annotation.width / 2,\n                annotation.y - annotation.height / 2,\n                annotation.width,\n                annotation.height\n            )\n            ctx.stroke()\n        }\n\n        ctx.strokeStyle = theme.annotations.link.stroke\n        ctx.lineWidth = theme.annotations.link.strokeWidth\n        ctx.beginPath()\n        drawPoints(ctx, annotation.computed.points)\n        ctx.stroke()\n\n        if (isCircleAnnotation(annotation)) {\n            ctx.strokeStyle = theme.annotations.outline.stroke\n            ctx.lineWidth = theme.annotations.outline.strokeWidth\n            ctx.beginPath()\n            ctx.arc(annotation.x, annotation.y, annotation.size / 2, 0, 2 * Math.PI)\n            ctx.stroke()\n        }\n\n        if (isDotAnnotation(annotation)) {\n            ctx.fillStyle = theme.annotations.symbol.fill\n            ctx.beginPath()\n            ctx.arc(annotation.x, annotation.y, annotation.size / 2, 0, 2 * Math.PI)\n            ctx.fill()\n        }\n\n        if (isRectAnnotation(annotation)) {\n            ctx.strokeStyle = theme.annotations.outline.stroke\n            ctx.lineWidth = theme.annotations.outline.strokeWidth\n            ctx.beginPath()\n            ctx.rect(\n                annotation.x - annotation.width / 2,\n                annotation.y - annotation.height / 2,\n                annotation.width,\n                annotation.height\n            )\n            ctx.stroke()\n        }\n\n        if (typeof annotation.note === 'function') {\n            annotation.note(ctx, {\n                datum: annotation.datum,\n                x: annotation.computed.text[0],\n                y: annotation.computed.text[1],\n                theme,\n            })\n        } else {\n            ctx.font = `${theme.annotations.text.fontSize}px ${theme.annotations.text.fontFamily}`\n            ctx.fillStyle = theme.annotations.text.fill\n            ctx.strokeStyle = theme.annotations.text.outlineColor\n            ctx.lineWidth = theme.annotations.text.outlineWidth * 2\n            if (theme.annotations.text.outlineWidth > 0) {\n                ctx.lineJoin = 'round'\n                ctx.strokeText(\n                    annotation.note,\n                    annotation.computed.text[0],\n                    annotation.computed.text[1]\n                )\n                ctx.lineJoin = 'miter'\n            }\n            ctx.fillText(annotation.note, annotation.computed.text[0], annotation.computed.text[1])\n        }\n    })\n    ctx.restore()\n}\n"],"names":["defineProperty","arrayLikeToArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","defaultProps","dotSize","noteWidth","noteTextOffset","animate","motionStiffness","motionDamping","isSvgNote","note","noteType","isValidElement","isCanvasNote","isCircleAnnotation","annotationSpec","type","isDotAnnotation","isRectAnnotation","bindAnnotations","data","annotations","getPosition","getDimensions","reduce","acc","annotation","offset","match","map","datum","position","dimensions","size","width","height","getLinkAngle","sourceX","sourceY","targetX","targetY","angle","Math","atan2","absoluteAngleDegrees","radiansToDegrees","computeAnnotation","x","y","noteX","noteY","computedNoteX","computedNoteY","abs","undefined","Error","computedX","computedY","positionFromAngle","degreesToRadians","eighth","round","textX","textY","noteLineX","noteLineY","points","text","useAnnotations","useMemo","useComputedAnnotations","computed","useComputedAnnotation","AnnotationNote","theme","useTheme","useMotionConfig","springConfig","config","animatedProps","useSpring","immediate","createElement","_jsxs","outlineWidth","_jsx","animated","strokeLinejoin","strokeWidth","stroke","outlineColor","omit","arrayWithHoles","iterableToArrayLimit","nonIterableRest","AnnotationLink","isOutline","path","firstPoint","otherPoints","animatedPath","useAnimatedPath","link","style","strokeLinecap","CircleAnnotationOutline","radius","outline","fill","DotAnnotationOutline","symbol","RectAnnotationOutline","Annotation","drawPoints","ctx","forEach","index","moveTo","lineTo","renderAnnotationsToCanvas","length","save","lineCap","strokeStyle","lineWidth","beginPath","arc","PI","rect","fillStyle","font","fontSize","fontFamily","lineJoin","strokeText","fillText","restore"],"mappings":"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"}