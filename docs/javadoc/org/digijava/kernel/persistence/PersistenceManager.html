<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_292) on Thu Feb 16 18:19:38 ART 2023 -->
<title>PersistenceManager</title>
<meta name="date" content="2023-02-16">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PersistenceManager";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9,"i10":9,"i11":9,"i12":9,"i13":9,"i14":9,"i15":9,"i16":9,"i17":9,"i18":9,"i19":9,"i20":9,"i21":9,"i22":9,"i23":9,"i24":9,"i25":9,"i26":9,"i27":9,"i28":9,"i29":9,"i30":9,"i31":9,"i32":9,"i33":9,"i34":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/digijava/kernel/persistence/InMemoryValueConverter.html" title="class in org.digijava.kernel.persistence"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/digijava/kernel/persistence/PersistenceManagerTest.html" title="class in org.digijava.kernel.persistence"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/digijava/kernel/persistence/PersistenceManager.html" target="_top">Frames</a></li>
<li><a href="PersistenceManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.digijava.kernel.persistence</div>
<h2 title="Class PersistenceManager" class="title">Class PersistenceManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.digijava.kernel.persistence.PersistenceManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">PersistenceManager</span>
extends java.lang.Object</pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#MAX_HIBERNATE_SESSION_LIFE_MILLIS">MAX_HIBERNATE_SESSION_LIFE_MILLIS</a></span></code>
<div class="block">The maximum allowed life for an opened hibernate session, in miliseconds</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#PRECACHE_REGION">PRECACHE_REGION</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#addSessionToStackTraceMap-org.hibernate.Session-">addSessionToStackTraceMap</a></span>(org.hibernate.Session&nbsp;sess)</code>
<div class="block">Adds this session to the stack trace map, so its closing can be tracked later</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#checkClosedOrLongSessionsFromTraceMap--">checkClosedOrLongSessionsFromTraceMap</a></span>()</code>
<div class="block">Invoked at the end of each request.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#cleanup--">cleanup</a></span>()</code>
<div class="block">Close session factory</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#cleanupSession-org.hibernate.Session-">cleanupSession</a></span>(org.hibernate.Session&nbsp;session)</code>
<div class="block"><strong>This is a lifecycle management function</strong><br />
 commits & closes a session and then removes it from the SessionStackTraceMap
 this function should ONLY be called at the end of a Session's lifecycle, being the last a "cycle" sees.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#closeQuietly-java.lang.AutoCloseable-">closeQuietly</a></span>(java.lang.AutoCloseable&nbsp;connection)</code>
<div class="block">closes a JDBC connection, swallowing any exceptions which have appeared in the meantime</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#closeSession-org.hibernate.Session-">closeSession</a></span>(org.hibernate.Session&nbsp;session)</code>
<div class="block">cleanly closes an unmanaged Hibernate session
 ONLY USE IT FOR CONNECTIONS CREATED WITH <a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#openNewSession--"><code>openNewSession()</code></a></div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#closeUnclosedSessionsFromTraceMap--">closeUnclosedSessionsFromTraceMap</a></span>()</code>
<div class="block">Shows the open remaining hibernate sessions upon AMP server shutdown.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#doInTransaction-java.util.function.Consumer-">doInTransaction</a></span>(java.util.function.Consumer&lt;org.hibernate.Session&gt;&nbsp;consumer)</code>
<div class="block">Execute a block of code in new session.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static &lt;R&gt;&nbsp;R</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#doInTransaction-java.util.function.Function-">doInTransaction</a></span>(java.util.function.Function&lt;org.hibernate.Session,R&gt;&nbsp;fn)</code>
<div class="block">Execute a function inside a transaction.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;T</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#doReturningWorkInTransaction-org.hibernate.jdbc.ReturningWork-">doReturningWorkInTransaction</a></span>(org.hibernate.jdbc.ReturningWork&lt;T&gt;&nbsp;returningWork)</code>
<div class="block">Execute ReturningWork in a new session and wrapped by a transaction.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#doWorkInTransaction-org.hibernate.jdbc.Work-">doWorkInTransaction</a></span>(org.hibernate.jdbc.Work&nbsp;work)</code>
<div class="block">Execute Work in a new session and wrapped by a transaction.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#endSessionLifecycle--">endSessionLifecycle</a></span>()</code>
<div class="block"><strong>This is a lifecycle management function</strong><br />
 this function should ONLY be called at the end of a Session's lifecycle, being the last a "cycle" sees.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#flushAndCommit-org.hibernate.Session-">flushAndCommit</a></span>(org.hibernate.Session&nbsp;session)</code>
<div class="block">Flushes the session and commits the transaction.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>static java.lang.Boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getBoolean-java.lang.Object-">getBoolean</a></span>(java.lang.Object&nbsp;obj)</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static org.hibernate.mapping.PersistentClass</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getClassMapping-java.lang.Class-">getClassMapping</a></span>(java.lang.Class&lt;?&gt;&nbsp;clazz)</code>&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>static org.hibernate.metadata.ClassMetadata</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getClassMetadata-java.lang.Class-">getClassMetadata</a></span>(java.lang.Class&lt;?&gt;&nbsp;clazz)</code>
<div class="block">Returns the metadata for the given class from session factory</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>static java.lang.Double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getDouble-java.lang.Object-">getDouble</a></span>(java.lang.Object&nbsp;obj)</code>
<div class="block">extracts a Double from an object</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>static org.hibernate.cfg.Configuration</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getHibernateConfiguration--">getHibernateConfiguration</a></span>()</code>
<div class="block">Gets the Hibernate configuration used to build the immutable SessionFactory.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>static java.lang.Integer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getInteger-java.lang.Object-">getInteger</a></span>(java.lang.Object&nbsp;obj)</code>
<div class="block">extracts an Integer from an object</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>static java.sql.Connection</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getJdbcConnection--">getJdbcConnection</a></span>()</code>
<div class="block">Gets a RAW jdbc connection to the database.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>static java.lang.Long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getLong-java.lang.Object-">getLong</a></span>(java.lang.Object&nbsp;obj)</code>
<div class="block">extracts a Long from an object</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>static org.hibernate.Session</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getRequestDBSession--">getRequestDBSession</a></span>()</code>
<div class="block">an alias for <a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getSession--"><code>getSession()</code></a></div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>static org.hibernate.Session</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getSession--">getSession</a></span>()</code>
<div class="block">Returns the current Session.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getString-java.lang.Object-">getString</a></span>(java.lang.Object&nbsp;obj)</code>
<div class="block">extracts a String from an object</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#initialize-boolean-">initialize</a></span>(boolean&nbsp;precache)</code>
<div class="block">initialize PersistenceManager</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#initialize-boolean-java.lang.String-">initialize</a></span>(boolean&nbsp;precache,
          java.lang.String&nbsp;target)</code>&nbsp;</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#inTransaction-java.lang.Runnable-">inTransaction</a></span>(java.lang.Runnable&nbsp;runnable)</code>
<div class="block">Execute runnable and ensures that if an active hibernate transaction exists it is committed or rolled back.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;java.util.Collection&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#loadAll-java.lang.Class-">loadAll</a></span>(java.lang.Class&lt;T&gt;&nbsp;object)</code>
<div class="block">Loads all objects of T from database, using request (thread) session.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;java.util.Collection&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#loadAll-java.lang.Class-org.hibernate.Session-">loadAll</a></span>(java.lang.Class&lt;T&gt;&nbsp;object,
       org.hibernate.Session&nbsp;session)</code>
<div class="block">Loads all objects of T from database.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>static org.hibernate.Session</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#openNewSession--">openNewSession</a></span>()</code>
<div class="block">Opens a new Hibernate session.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>static org.hibernate.StatelessSession</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#openNewStatelessSession--">openNewStatelessSession</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#refreshCachedObject-java.lang.Class-java.io.Serializable-">refreshCachedObject</a></span>(java.lang.Class&nbsp;objectClass,
                   java.io.Serializable&nbsp;primaryKey)</code>
<div class="block">Removes object from Hibernate second-level cache, loads it from database
 and initializes</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#rollbackCurrentSessionTx--">rollbackCurrentSessionTx</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>static org.hibernate.SessionFactory</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#sf--">sf</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;T</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#supplyInTransaction-java.util.function.Supplier-">supplyInTransaction</a></span>(java.util.function.Supplier&lt;T&gt;&nbsp;supplier)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="PRECACHE_REGION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PRECACHE_REGION</h4>
<pre>public static&nbsp;java.lang.String PRECACHE_REGION</pre>
</li>
</ul>
<a name="MAX_HIBERNATE_SESSION_LIFE_MILLIS">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MAX_HIBERNATE_SESSION_LIFE_MILLIS</h4>
<pre>public static final&nbsp;long MAX_HIBERNATE_SESSION_LIFE_MILLIS</pre>
<div class="block">The maximum allowed life for an opened hibernate session, in miliseconds</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.digijava.kernel.persistence.PersistenceManager.MAX_HIBERNATE_SESSION_LIFE_MILLIS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="checkClosedOrLongSessionsFromTraceMap--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkClosedOrLongSessionsFromTraceMap</h4>
<pre>public static&nbsp;void&nbsp;checkClosedOrLongSessionsFromTraceMap()</pre>
<div class="block">Invoked at the end of each request. Iterates and removes Hibernate closed sessions from the trace map.
 It also checks the long running sessions and forces closure on ones that are longer than
 The <code>HashMap</code> is synchronized to prevent concurrency issues between HTTP threads</div>
</li>
</ul>
<a name="openNewSession--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openNewSession</h4>
<pre>public static&nbsp;org.hibernate.Session&nbsp;openNewSession()</pre>
<div class="block">Opens a new Hibernate session. Use this with caution.
 For servlets you will not require to use this, use <a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getSession--"><code>getSession()</code></a> instead!
 This method returns you an unmanaged Hibernate session, that you need to close yourself!</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="getClassMetadata-java.lang.Class-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClassMetadata</h4>
<pre>public static&nbsp;org.hibernate.metadata.ClassMetadata&nbsp;getClassMetadata(java.lang.Class&lt;?&gt;&nbsp;clazz)</pre>
<div class="block">Returns the metadata for the given class from session factory</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>clazz</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="getClassMapping-java.lang.Class-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClassMapping</h4>
<pre>public static&nbsp;org.hibernate.mapping.PersistentClass&nbsp;getClassMapping(java.lang.Class&lt;?&gt;&nbsp;clazz)</pre>
</li>
</ul>
<a name="getJdbcConnection--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJdbcConnection</h4>
<pre>public static&nbsp;java.sql.Connection&nbsp;getJdbcConnection()
                                             throws java.sql.SQLException</pre>
<div class="block">Gets a RAW jdbc connection to the database. Use with caution ! Close it yourself manually when done!</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
</dl>
</li>
</ul>
<a name="closeUnclosedSessionsFromTraceMap--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeUnclosedSessionsFromTraceMap</h4>
<pre>public static&nbsp;void&nbsp;closeUnclosedSessionsFromTraceMap()</pre>
<div class="block">Shows the open remaining hibernate sessions upon AMP server shutdown. It displays the
  <code>Thread#currentThread#getStackTrace()</code> for the unclosed sessions.
  It will attempt to force <code>Session.clear()</code> and <code>Session.close()</code> on them
  This needs to be invoked (as Hibernate's APIs suggests) before <code>SessionFactory.close()</code> is invoked at the very end of AMP lifecycle</div>
</li>
</ul>
<a name="initialize-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>public static&nbsp;void&nbsp;initialize(boolean&nbsp;precache)</pre>
<div class="block">initialize PersistenceManager</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>precache</code> - if true, do "empty" query for precached objects to put
 them in the cache</dd>
</dl>
</li>
</ul>
<a name="initialize-boolean-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>public static&nbsp;void&nbsp;initialize(boolean&nbsp;precache,
                              java.lang.String&nbsp;target)</pre>
</li>
</ul>
<a name="getHibernateConfiguration--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHibernateConfiguration</h4>
<pre>public static&nbsp;org.hibernate.cfg.Configuration&nbsp;getHibernateConfiguration()</pre>
<div class="block">Gets the Hibernate configuration used to build the immutable SessionFactory.
 Invoke this after initialize()</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the Hibernate Configuration object</dd>
</dl>
</li>
</ul>
<a name="cleanup--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanup</h4>
<pre>public static&nbsp;void&nbsp;cleanup()</pre>
<div class="block">Close session factory</div>
</li>
</ul>
<a name="loadAll-java.lang.Class-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadAll</h4>
<pre>public static&nbsp;&lt;T&gt;&nbsp;java.util.Collection&lt;T&gt;&nbsp;loadAll(java.lang.Class&lt;T&gt;&nbsp;object)
                                           throws <a href="../../../../org/digijava/kernel/exception/DgException.html" title="class in org.digijava.kernel.exception">DgException</a></pre>
<div class="block">Loads all objects of T from database, using request (thread) session.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - </dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>object</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/digijava/kernel/exception/DgException.html" title="class in org.digijava.kernel.exception">DgException</a></code></dd>
</dl>
</li>
</ul>
<a name="loadAll-java.lang.Class-org.hibernate.Session-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadAll</h4>
<pre>public static&nbsp;&lt;T&gt;&nbsp;java.util.Collection&lt;T&gt;&nbsp;loadAll(java.lang.Class&lt;T&gt;&nbsp;object,
                                                  org.hibernate.Session&nbsp;session)
                                           throws <a href="../../../../org/digijava/kernel/exception/DgException.html" title="class in org.digijava.kernel.exception">DgException</a></pre>
<div class="block">Loads all objects of T from database.
 Client should care about opening and releasing session which is passed as parameter to this method.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - </dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>object</code> - class object of T</dd>
<dd><code>session</code> - database session. Client should handle session - opening and releasing, including transactions if required.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/digijava/kernel/exception/DgException.html" title="class in org.digijava.kernel.exception">DgException</a></code></dd>
</dl>
</li>
</ul>
<a name="rollbackCurrentSessionTx--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollbackCurrentSessionTx</h4>
<pre>public static&nbsp;void&nbsp;rollbackCurrentSessionTx()</pre>
</li>
</ul>
<a name="inTransaction-java.lang.Runnable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inTransaction</h4>
<pre>public static&nbsp;void&nbsp;inTransaction(java.lang.Runnable&nbsp;runnable)</pre>
<div class="block">Execute runnable and ensures that if an active hibernate transaction exists it is committed or rolled back.
 Will always close the current session before returning.

 <p>If the runnable throws an exception, then transaction is rolled back and same exception is thrown again.</p>

 <p>Transaction is not created before calling the runnable. For actual semantics when the transaction is created
 please check <a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getSession--"><code>getSession()</code></a>.</p>

 <p>Neither active session nor transaction are nested. Calling this method recursively will ensure that active
 transaction and session are closed upon exiting the method. This is not very useful nor a good way to reason
 about nested transaction semantics but this is how it worked before. Known to be used by
 <a href="../../../../org/digijava/kernel/startup/HibernateSessionRequestFilter.html" title="class in org.digijava.kernel.startup"><code>HibernateSessionRequestFilter</code></a> which is itself invoked recursively during error processing.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>runnable</code> - the runnable to execute with open session in view context</dd>
</dl>
</li>
</ul>
<a name="supplyInTransaction-java.util.function.Supplier-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>supplyInTransaction</h4>
<pre>public static&nbsp;&lt;T&gt;&nbsp;T&nbsp;supplyInTransaction(java.util.function.Supplier&lt;T&gt;&nbsp;supplier)</pre>
</li>
</ul>
<a name="getSession--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSession</h4>
<pre>public static&nbsp;org.hibernate.Session&nbsp;getSession()</pre>
<div class="block">Returns the current Session. If there is none, creates one and returns it
 upon creating a new session, a transaction is created.</div>
</li>
</ul>
<a name="getRequestDBSession--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRequestDBSession</h4>
<pre>public static&nbsp;org.hibernate.Session&nbsp;getRequestDBSession()</pre>
<div class="block">an alias for <a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#getSession--"><code>getSession()</code></a></div>
</li>
</ul>
<a name="addSessionToStackTraceMap-org.hibernate.Session-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addSessionToStackTraceMap</h4>
<pre>public static&nbsp;void&nbsp;addSessionToStackTraceMap(org.hibernate.Session&nbsp;sess)</pre>
<div class="block">Adds this session to the stack trace map, so its closing can be tracked later</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sess</code> - </dd>
</dl>
</li>
</ul>
<a name="refreshCachedObject-java.lang.Class-java.io.Serializable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refreshCachedObject</h4>
<pre>public static&nbsp;void&nbsp;refreshCachedObject(java.lang.Class&nbsp;objectClass,
                                       java.io.Serializable&nbsp;primaryKey)
                                throws <a href="../../../../org/digijava/kernel/exception/DgException.html" title="class in org.digijava.kernel.exception">DgException</a></pre>
<div class="block">Removes object from Hibernate second-level cache, loads it from database
 and initializes</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>objectClass</code> - target class</dd>
<dd><code>primaryKey</code> - primary key for object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/digijava/kernel/exception/DgException.html" title="class in org.digijava.kernel.exception">DgException</a></code></dd>
</dl>
</li>
</ul>
<a name="closeQuietly-java.lang.AutoCloseable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeQuietly</h4>
<pre>public static&nbsp;void&nbsp;closeQuietly(java.lang.AutoCloseable&nbsp;connection)</pre>
<div class="block">closes a JDBC connection, swallowing any exceptions which have appeared in the meantime</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>connection</code> - </dd>
</dl>
</li>
</ul>
<a name="getLong-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLong</h4>
<pre>public static final&nbsp;java.lang.Long&nbsp;getLong(java.lang.Object&nbsp;obj)</pre>
<div class="block">extracts a Long from an object</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>obj</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="getInteger-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInteger</h4>
<pre>public static final&nbsp;java.lang.Integer&nbsp;getInteger(java.lang.Object&nbsp;obj)</pre>
<div class="block">extracts an Integer from an object</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>obj</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="getString-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getString</h4>
<pre>public static final&nbsp;java.lang.String&nbsp;getString(java.lang.Object&nbsp;obj)</pre>
<div class="block">extracts a String from an object</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>obj</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="getDouble-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDouble</h4>
<pre>public static final&nbsp;java.lang.Double&nbsp;getDouble(java.lang.Object&nbsp;obj)</pre>
<div class="block">extracts a Double from an object</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>obj</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="getBoolean-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBoolean</h4>
<pre>public static final&nbsp;java.lang.Boolean&nbsp;getBoolean(java.lang.Object&nbsp;obj)</pre>
</li>
</ul>
<a name="openNewStatelessSession--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openNewStatelessSession</h4>
<pre>public static&nbsp;org.hibernate.StatelessSession&nbsp;openNewStatelessSession()</pre>
</li>
</ul>
<a name="sf--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sf</h4>
<pre>public static&nbsp;org.hibernate.SessionFactory&nbsp;sf()</pre>
</li>
</ul>
<a name="closeSession-org.hibernate.Session-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeSession</h4>
<pre>public static&nbsp;void&nbsp;closeSession(org.hibernate.Session&nbsp;session)</pre>
<div class="block">cleanly closes an unmanaged Hibernate session
 ONLY USE IT FOR CONNECTIONS CREATED WITH <a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#openNewSession--"><code>openNewSession()</code></a></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>session</code> - </dd>
</dl>
</li>
</ul>
<a name="flushAndCommit-org.hibernate.Session-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flushAndCommit</h4>
<pre>public static&nbsp;void&nbsp;flushAndCommit(org.hibernate.Session&nbsp;session)</pre>
<div class="block">Flushes the session and commits the transaction. It will not close the session and allows to rollback if an
 exception is raised here (as opposed to <a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#closeSession-org.hibernate.Session-"><code>closeSession(Session)</code></a> which does not allow rollback).</div>
</li>
</ul>
<a name="endSessionLifecycle--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endSessionLifecycle</h4>
<pre>public static&nbsp;void&nbsp;endSessionLifecycle()</pre>
<div class="block"><strong>This is a lifecycle management function</strong><br />
 this function should ONLY be called at the end of a Session's lifecycle, being the last a "cycle" sees.
 UNDER NO CIRCUMSTANCES CALL IT IN A "USER" (non-framework, non-job) ENVIRONMENT</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#cleanupSession-org.hibernate.Session-"><code>cleanupSession(Session)</code></a></dd>
</dl>
</li>
</ul>
<a name="cleanupSession-org.hibernate.Session-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanupSession</h4>
<pre>public static&nbsp;void&nbsp;cleanupSession(org.hibernate.Session&nbsp;session)</pre>
<div class="block"><strong>This is a lifecycle management function</strong><br />
 commits & closes a session and then removes it from the SessionStackTraceMap
 this function should ONLY be called at the end of a Session's lifecycle, being the last a "cycle" sees.
 UNDER NO CIRCUMSTANCES CALL IT IN A "USER" (non-framework, non-job) ENVIRONMENT</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>session</code> - </dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/digijava/kernel/persistence/PersistenceManager.html#endSessionLifecycle--"><code>endSessionLifecycle()</code></a></dd>
</dl>
</li>
</ul>
<a name="doWorkInTransaction-org.hibernate.jdbc.Work-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doWorkInTransaction</h4>
<pre>public static&nbsp;void&nbsp;doWorkInTransaction(org.hibernate.jdbc.Work&nbsp;work)</pre>
<div class="block">Execute Work in a new session and wrapped by a transaction.
 Useful for accessing db outside of http request.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>work</code> - work to be executed</dd>
</dl>
</li>
</ul>
<a name="doReturningWorkInTransaction-org.hibernate.jdbc.ReturningWork-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doReturningWorkInTransaction</h4>
<pre>public static&nbsp;&lt;T&gt;&nbsp;T&nbsp;doReturningWorkInTransaction(org.hibernate.jdbc.ReturningWork&lt;T&gt;&nbsp;returningWork)</pre>
<div class="block">Execute ReturningWork in a new session and wrapped by a transaction.
 Useful for accessing db outside of http request.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>returningWork</code> - returning work to be executed</dd>
</dl>
</li>
</ul>
<a name="doInTransaction-java.util.function.Consumer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doInTransaction</h4>
<pre>public static&nbsp;void&nbsp;doInTransaction(java.util.function.Consumer&lt;org.hibernate.Session&gt;&nbsp;consumer)</pre>
<div class="block">Execute a block of code in new session.</div>
</li>
</ul>
<a name="doInTransaction-java.util.function.Function-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>doInTransaction</h4>
<pre>public static&nbsp;&lt;R&gt;&nbsp;R&nbsp;doInTransaction(java.util.function.Function&lt;org.hibernate.Session,R&gt;&nbsp;fn)</pre>
<div class="block">Execute a function inside a transaction.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>R</code> - return type</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fn</code> - takes as input hibernate session</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>result of the function</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/digijava/kernel/persistence/InMemoryValueConverter.html" title="class in org.digijava.kernel.persistence"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/digijava/kernel/persistence/PersistenceManagerTest.html" title="class in org.digijava.kernel.persistence"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/digijava/kernel/persistence/PersistenceManager.html" target="_top">Frames</a></li>
<li><a href="PersistenceManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
