<h2><%= header t('.title') %></h2>

<table>
	<% if @donors.blank? %>
		<tr><td class="empty"><%= t('.empty') %></td></tr>
	<% else %>
		<tr>
			<th><!-- Flags --></th>
			<th><%= Donor.human_attribute_name('name') %></th>
			<th><%= Donor.human_attribute_name('cofunding_only') %></th>
			<th><%= Donor.human_attribute_name('currency') %></th>
			<th> </th>
			<th> </th>
			<th> </th>	
			<th> </th>		
		</tr>
		<% for donor in @donors %> 
			<tr>
				<td><%= image_tag donor.flag.url(:avatar) if donor.flag.exists? %></td>
				<td><%= donor.name %></td>
				<td><%= donor.cofunding_only ? "yes" : "no" %></td>
				<td><%= null_to_na(donor.currency) %></td>
				<td><%= link_to t('.edit'), edit_donor_path(donor) %></td>
				<td><%= link_to t('.delete'), donor_path(donor), :method => 'delete', :confirm => "This donor has #{donor.projects.size} projects assigned, those will be kept in the database but unaccessible for the public if you delete it now. Are you sure?" %>
				<td><%= link_to t('.agencies', :total => donor.agencies.size), 
						donor_donor_agencies_path(donor) unless donor.cofunding_only? %></td>
				<td><%= link_to t('.login'), donor_users_path(donor) unless donor.cofunding_only? %></td>
			</tr>
		<% end %>
	<% end %>
</table>

<p><b><%= link_to t('.new'), new_donor_path %></b></p>
